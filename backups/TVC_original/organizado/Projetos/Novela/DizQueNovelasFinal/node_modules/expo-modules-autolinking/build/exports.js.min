"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),__exportStar=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||__createBinding(t,e,o)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.scanExpoModuleResolutionsForPlatform=exports.scanDependencyResolutionsForPlatform=exports.makeCachedDependenciesLinker=void 0,exports.mergeLinkingOptionsAsync=mergeLinkingOptionsAsync,exports.queryAutolinkingModulesFromProjectAsync=queryAutolinkingModulesFromProjectAsync,exports.findProjectRootSync=findProjectRootSync,exports.resolveSearchPathsAsync=resolveSearchPathsAsync;const fs_1=__importDefault(require("fs")),path_1=__importDefault(require("path")),findModules_1=require("./autolinking/findModules"),resolveModules_1=require("./autolinking/resolveModules"),autolinkingOptions_1=require("./commands/autolinkingOptions");__exportStar(require("./types"),exports),__exportStar(require("./autolinking"),exports),__exportStar(require("./platforms"),exports);var dependencies_1=require("./dependencies");async function mergeLinkingOptionsAsync(e){const t=(0,autolinkingOptions_1.createAutolinkingOptionsLoader)(e);return{...e,...await t.getPlatformOptions(),projectRoot:t.getAppRoot()}}async function queryAutolinkingModulesFromProjectAsync(e,t){const o=(0,autolinkingOptions_1.createAutolinkingOptionsLoader)({...t,projectRoot:t.projectRoot??e}),n=await o.getAppRoot(),r=await o.getPlatformOptions(t.platform),i=await(0,findModules_1.findModulesAsync)({appRoot:n,autolinkingOptions:r});return await(0,resolveModules_1.resolveModulesAsync)(i,r)}function findProjectRootSync(e=process.cwd()){for(let t=e;path_1.default.dirname(t)!==t;t=path_1.default.dirname(t)){const e=path_1.default.resolve(t,"package.json");if(fs_1.default.existsSync(e))return e}throw new Error(`Couldn't find "package.json" up from path "${e}"`)}async function resolveSearchPathsAsync(e,t){return(0,autolinkingOptions_1.filterMapSearchPaths)(e,t)??[]}Object.defineProperty(exports,"makeCachedDependenciesLinker",{enumerable:!0,get:function(){return dependencies_1.makeCachedDependenciesLinker}}),Object.defineProperty(exports,"scanDependencyResolutionsForPlatform",{enumerable:!0,get:function(){return dependencies_1.scanDependencyResolutionsForPlatform}}),Object.defineProperty(exports,"scanExpoModuleResolutionsForPlatform",{enumerable:!0,get:function(){return dependencies_1.scanExpoModuleResolutionsForPlatform}});