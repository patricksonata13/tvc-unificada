"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generatePackageListCommand=generatePackageListCommand;const autolinkingOptions_1=require("./autolinkingOptions"),findModules_1=require("../autolinking/findModules"),generatePackageList_1=require("../autolinking/generatePackageList"),resolveModules_1=require("../autolinking/resolveModules");function generatePackageListCommand(e){return(0,autolinkingOptions_1.registerAutolinkingArguments)(e.command("generate-package-list [searchPaths...]")).option("-t, --target <path>","Path to the target file, where the package list should be written to.").option("-n, --namespace <namespace>","Java package name under which the package list should be placed.").option("--empty","Whether to only generate an empty list. Might be used when the user opts-out of autolinking.",!1).action(async(e,t)=>{const a=t.platform??"android",n=(0,autolinkingOptions_1.createAutolinkingOptionsLoader)({...t,searchPaths:e});let i=[];if(!t.empty){const e=await n.getPlatformOptions(a),t=await(0,findModules_1.findModulesAsync)({autolinkingOptions:await n.getPlatformOptions(a),appRoot:await n.getAppRoot()});i=await(0,resolveModules_1.resolveModulesAsync)(t,e)}await(0,generatePackageList_1.generatePackageListAsync)(i,{platform:a,targetPath:t.target,namespace:t.namespace})})}