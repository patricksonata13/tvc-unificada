"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveExpoModule=resolveExpoModule,exports.findModulesAsync=findModulesAsync;const ExpoModuleConfig_1=require("../ExpoModuleConfig"),dependencies_1=require("../dependencies");async function resolveExpoModule(e,n,o){if(o.has(e.name))return null;const s=await(0,ExpoModuleConfig_1.discoverExpoModuleConfigAsync)(e.path);return s&&s.supportsPlatform(n)?{name:e.name,path:e.path,version:e.version,config:s,duplicates:e.duplicates?.map(e=>({name:e.name,path:e.path,version:e.version}))??[]}:null}async function findModulesAsync({appRoot:e,autolinkingOptions:n}){const o=new Set(n.exclude),s=n.nativeModulesDir?[n.nativeModulesDir,...n.searchPaths]:n.searchPaths;return(0,dependencies_1.filterMapResolutionResult)((0,dependencies_1.mergeResolutionResults)(await Promise.all([...s.map(e=>(0,dependencies_1.scanDependenciesInSearchPath)(e)),(0,dependencies_1.scanDependenciesRecursively)(e)])),e=>resolveExpoModule(e,n.platform,o))}