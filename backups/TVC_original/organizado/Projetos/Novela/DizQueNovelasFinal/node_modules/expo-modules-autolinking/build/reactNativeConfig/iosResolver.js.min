"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveDependencyConfigImplIosAsync=resolveDependencyConfigImplIosAsync;const fs_1=__importDefault(require("fs")),path_1=__importDefault(require("path")),utils_1=require("../utils"),findPodspecFile=async e=>{const t=await(0,utils_1.listFilesSorted)(e,e=>e.endsWith(".podspec")),s=path_1.default.basename(e).toLowerCase();return t.find(e=>path_1.default.basename(e,".podspec").toLowerCase()===s)??(t.length>0?t[0]:null)};async function resolveDependencyConfigImplIosAsync(e,t,s){if(null===t)return null;const n=path_1.default.join(e.path,path_1.default.basename(e.path)+".podspec"),a=fs_1.default.existsSync(n)?n:await findPodspecFile(e.path);if(!a)return null;if(void 0===t&&s?.supportsPlatform("apple")){if(null!=s.applePodspecPaths().find(t=>path_1.default.join(e.path,t)===a))return null}return{podspecPath:a,version:e.version,configurations:t?.configurations||[],scriptPhases:t?.scriptPhases||[]}}