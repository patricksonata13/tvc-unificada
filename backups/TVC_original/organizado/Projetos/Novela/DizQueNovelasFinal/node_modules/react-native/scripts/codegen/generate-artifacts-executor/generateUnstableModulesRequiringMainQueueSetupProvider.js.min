"use strict";const{TEMPLATES_FOLDER_PATH:TEMPLATES_FOLDER_PATH}=require("./constants"),{parseiOSAnnotations:parseiOSAnnotations}=require("./utils"),fs=require("fs"),path=require("path"),UNSTABLE_MODULES_REQUIRING_MAIN_QUEUE_SETUP_PROVIDER_H_TEMPLATE_PATH=path.join(TEMPLATES_FOLDER_PATH,"RCTUnstableModulesRequiringMainQueueSetupProviderH.template"),UNSTABLE_MODULES_REQUIRING_MAIN_QUEUE_SETUP_PROVIDER_MM_TEMPLATE_PATH=path.join(TEMPLATES_FOLDER_PATH,"RCTUnstableModulesRequiringMainQueueSetupProviderMM.template");function generateUnstableModulesRequiringMainQueueSetupProvider(e,n){const i=parseiOSAnnotations(e),t=new Set;e.forEach(e=>{const{unstableModulesRequiringMainQueueSetup:n}=e?.config?.ios||{};if(n)for(const e of n)t.add(e)});for(const{modules:e}of Object.values(i))for(const[n,i]of Object.entries(e))i.unstableRequiresMainQueueSetup&&t.add(n);const u=Array.from(t).map(e=>`@"${e}"`).join(",\n\t\t"),r=fs.readFileSync(UNSTABLE_MODULES_REQUIRING_MAIN_QUEUE_SETUP_PROVIDER_MM_TEMPLATE_PATH,"utf8").replace(/{modules}/,u);fs.mkdirSync(n,{recursive:!0}),fs.writeFileSync(path.join(n,"RCTUnstableModulesRequiringMainQueueSetupProvider.mm"),r);const s=fs.readFileSync(UNSTABLE_MODULES_REQUIRING_MAIN_QUEUE_SETUP_PROVIDER_H_TEMPLATE_PATH,"utf8");fs.writeFileSync(path.join(n,"RCTUnstableModulesRequiringMainQueueSetupProvider.h"),s)}module.exports={generateUnstableModulesRequiringMainQueueSetupProvider:generateUnstableModulesRequiringMainQueueSetupProvider};