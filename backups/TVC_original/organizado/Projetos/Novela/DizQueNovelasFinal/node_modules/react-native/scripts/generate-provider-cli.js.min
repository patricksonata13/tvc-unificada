"use strict";const utils=require("./codegen/codegen-utils"),fs=require("fs"),yargs=require("yargs"),argv=yargs.option("p",{alias:"platform",describe:"Platform to generate native code artifacts for."}).option("s",{alias:"schemaListPath",describe:"The path to the schema list file."}).option("o",{alias:"outputDir",describe:"Path to directory where native code source files should be saved."}).usage("Usage: $0 <args>").demandOption(["platform","schemaListPath","outputDir"],"Please provide platform, schema path, and output directory.").argv,GENERATORS={android:[],ios:["providerIOS"]};function generateProvider(e,r,t){const a=fs.readFileSync(r,"utf-8");if(null==a)throw new Error(`Can't find schema list file at ${r}`);if(!t)throw new Error("outputDir is required");let o;fs.mkdirSync(t,{recursive:!0});try{o=JSON.parse(a)}catch(e){throw new Error(`Can't parse schema to JSON. ${r}`)}const s={};try{for(const e of Object.keys(o)){const r=fs.readFileSync(o[e],"utf-8");s[e]=JSON.parse(r)}}catch(e){throw new Error(`Failed to read schema file. ${e.message}`)}if(null==GENERATORS[e])throw new Error(`Invalid platform type. ${e}`);utils.getCodegen().generateFromSchemas({schemas:s,outputDirectory:t},{generators:GENERATORS[e]})}function main(){generateProvider(argv.platform,argv.schemaListPath,argv.outputDir)}main();