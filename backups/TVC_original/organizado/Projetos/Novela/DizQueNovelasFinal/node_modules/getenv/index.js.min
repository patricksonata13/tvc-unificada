const url=require("url");let fallbacksDisabled=!1,throwError=!0;function _value(e,r){const n=process.env[e];if(void 0===n){if(void 0===r&&!throwError)return n;if(void 0===r)throw new Error("GetEnv.Nonexistent: "+e+" does not exist and no fallback value provided.");if(fallbacksDisabled)throw new Error("GetEnv.DisabledFallbacks: "+e+" relying on fallback when fallbacks have been disabled");return""+r}return n}const convert={string:function(e){return""+e},int:function(e){if(!e.match(/^-?\d+$/))throw new Error("GetEnv.NoInteger: "+e+" is not an integer.");return+e},float:function(e){if(+e===1/0||+e===-1/0)throw new Error("GetEnv.Infinity: "+e+" is set to +/-Infinity.");if(!!(isNaN(e)||""===e))throw new Error("GetEnv.NoFloat: "+e+" is not a number.");return+e},bool:function(e){if(!("true"===(e||"").toLowerCase()||"false"===(e||"").toLowerCase()))throw new Error("GetEnv.NoBoolean: "+e+" is not a boolean.");return"true"===(e||"").toLowerCase()},boolish:function(e){try{return convert.bool(e)}catch(r){if(!("1"===e||"0"===e))throw new Error("GetEnv.NoBoolean: "+e+" is not a boolean.");return"1"===e}},url:url.parse};function converter(e){return function(r,n){if("string"==typeof r){const t=_value(r,n);return convert[e](t)}return getenv.multi(r)}}const getenv=converter("string");Object.keys(convert).forEach(function(e){getenv[e]=converter(e)}),getenv.array=function(e,r,n,t){if(r=r||"string",t=t||/\s*,\s*/,-1===Object.keys(convert).indexOf(r))throw new Error("GetEnv.ArrayUndefinedType: Unknown array type "+r);return _value(e,n).split(t).map(convert[r])},getenv.multi=function(e){const r={};for(let n in e){const t=e[n];if(Array.isArray(t))switch(t.length){case 1:case 2:r[n]=getenv(t[0],t[1]);break;case 3:r[n]=getenv[t[2]](t[0],t[1]);break;default:throw"getenv.multi(): invalid spec"}else r[n]=getenv(t)}return r},getenv.disableFallbacks=function(){fallbacksDisabled=!0},getenv.enableFallbacks=function(){fallbacksDisabled=!1},getenv.disableErrors=function(){throwError=!1},getenv.enableErrors=function(){throwError=!0},module.exports=getenv;