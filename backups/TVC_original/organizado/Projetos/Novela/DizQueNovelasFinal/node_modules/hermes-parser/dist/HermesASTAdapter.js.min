"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ParserVisitorKeys=require("./generated/ParserVisitorKeys");class HermesASTAdapter{constructor(e){this.sourceFilename=void 0,this.sourceType=void 0,this.sourceFilename=e.sourceFilename,this.sourceType=e.sourceType}transform(e){const t=e.comments;for(let e=0;e<t.length;e++){const r=t[e];this.fixSourceLocation(r),t[e]=this.mapComment(r)}e.interpreter=t.length>0&&"InterpreterDirective"===t[0].type?t.shift():null;const r=e.tokens;if(r)for(let e=0;e<r.length;e++)this.fixSourceLocation(r[e]);const o=this.mapNode(e);if("Program"!==o.type)throw new Error(`HermesToESTreeAdapter: Must return a Program node, instead of "${o.type}". `);return o}mapNode(e){throw new Error("Implemented in subclasses")}mapNodeDefault(e){const t=_ParserVisitorKeys.HERMES_AST_VISITOR_KEYS[e.type];for(const r in t){const o=t[r];if(o===_ParserVisitorKeys.NODE_CHILD){const t=e[r];null!=t&&(e[r]=this.mapNode(t))}else if(o===_ParserVisitorKeys.NODE_LIST_CHILD){const t=e[r];for(let e=0;e<t.length;e++){const r=t[e];null!=r&&(t[e]=this.mapNode(r))}}}return e}fixSourceLocation(e){throw new Error("Implemented in subclasses")}getSourceType(){var e;return null!=(e=this.sourceType)?e:"script"}setModuleSourceType(){null==this.sourceType&&(this.sourceType="module")}mapComment(e){return e}mapEmpty(e){return null}mapImportDeclaration(e){return"value"===e.importKind&&this.setModuleSourceType(),this.mapNodeDefault(e)}mapImportSpecifier(e){return"value"===e.importKind&&(e.importKind=null),this.mapNodeDefault(e)}mapExportDefaultDeclaration(e){return this.setModuleSourceType(),this.mapNodeDefault(e)}mapExportNamedDeclaration(e){return"value"===e.exportKind&&this.setModuleSourceType(),this.mapNodeDefault(e)}mapExportAllDeclaration(e){return"value"===e.exportKind&&this.setModuleSourceType(),this.mapNodeDefault(e)}formatError(e,t){return`${t} (${e.loc.start.line}:${e.loc.start.column})`}getBigIntLiteralValue(e){const t=e.replace(/n$/,"").replaceAll("_","");return{bigint:t,value:"function"==typeof BigInt?BigInt(t):null}}}exports.default=HermesASTAdapter;