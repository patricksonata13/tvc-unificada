"use strict";const Queue=require("yocto-queue"),pLimit=e=>{if(!Number.isInteger(e)&&e!==1/0||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const t=new Queue;let u=0;const n=async(e,n,...r)=>{u++;const i=(async()=>e(...r))();n(i);try{await i}catch{}u--,t.size>0&&t.dequeue()()},r=(r,...i)=>new Promise(c=>{((r,i,...c)=>{t.enqueue(n.bind(null,r,i,...c)),(async()=>{await Promise.resolve(),u<e&&t.size>0&&t.dequeue()()})()})(r,c,...i)});return Object.defineProperties(r,{activeCount:{get:()=>u},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),r};module.exports=pLimit;