"use strict";var jsTokens=require("js-tokens").default,processEnvRe=/\bprocess\.env\.[_$a-zA-Z][$\w]+\b/,spaceOrCommentRe=/^(?:\s|\/[/*])/;function replace(e,n){if(!processEnvRe.test(e))return e;var t=[],r=n.some(function(e){return e._&&-1!==e._.indexOf("purge")});jsTokens.lastIndex=0;for(var o=e.match(jsTokens),s=0;s<o.length;s++){if("process"===o[s]&&"."===o[s+1]&&"env"===o[s+2]&&"."===o[s+3]){var i=getAdjacentCodeToken(-1,o,s),a=getAdjacentCodeToken(1,o,s+4),c=getReplacementString(n,o[s+4],r);if("."!==i&&"."!==a&&"="!==a&&"string"==typeof c){t.push(c),s+=4;continue}}t.push(o[s])}return t.join("")}function getAdjacentCodeToken(e,n,t){for(;;){var r=n[t+=e];if(!spaceOrCommentRe.test(r))return r}}function getReplacementString(e,n,t){for(var r=0;r<e.length;r++){var o=e[r];if(void 0!==o[n])return JSON.stringify(o[n])}if(t)return"undefined"}module.exports=replace;