"use strict";var stream=require("stream"),util=require("util"),replace=require("./replace"),jsonExtRe=/\.json$/;function LooseEnvify(e){stream.Transform.call(this),this._data="",this._envs=e}module.exports=function(e){return e=e||process.env,function(t,s){return jsonExtRe.test(t)?stream.PassThrough():new LooseEnvify(s?[e,s]:[e])}},util.inherits(LooseEnvify,stream.Transform),LooseEnvify.prototype._transform=function(e,t,s){this._data+=e,s()},LooseEnvify.prototype._flush=function(e){var t=replace(this._data,this._envs);this.push(t),e()};