import{_array,_tuple,_unknown}from"./api.js";import{parse,parseAsync}from"./parse.js";import*as schemas from"./schemas.js";import{$ZodTuple}from"./schemas.js";export class $ZodFunction{constructor(t){this._def=t,this.def=t}implement(t){if("function"!=typeof t)throw new Error("implement() must be called with a function");const n=(...e)=>{const r=this._def.input?parse(this._def.input,e,void 0,{callee:n}):e;if(!Array.isArray(r))throw new Error("Invalid arguments schema: not an array or tuple schema.");const o=t(...r);return this._def.output?parse(this._def.output,o,void 0,{callee:n}):o};return n}implementAsync(t){if("function"!=typeof t)throw new Error("implement() must be called with a function");const n=async(...e)=>{const r=this._def.input?await parseAsync(this._def.input,e,void 0,{callee:n}):e;if(!Array.isArray(r))throw new Error("Invalid arguments schema: not an array or tuple schema.");const o=await t(...r);return this._def.output?parseAsync(this._def.output,o,void 0,{callee:n}):o};return n}input(...t){const n=this.constructor;return Array.isArray(t[0])?new n({type:"function",input:new $ZodTuple({type:"tuple",items:t[0],rest:t[1]}),output:this._def.output}):new n({type:"function",input:t[0],output:this._def.output})}output(t){return new(0,this.constructor)({type:"function",input:this._def.input,output:t})}}function _function(t){return new $ZodFunction({type:"function",input:Array.isArray(t?.input)?_tuple(schemas.$ZodTuple,t?.input):t?.input??_array(schemas.$ZodArray,_unknown(schemas.$ZodUnknown)),output:t?.output??_unknown(schemas.$ZodUnknown)})}export{_function as function};