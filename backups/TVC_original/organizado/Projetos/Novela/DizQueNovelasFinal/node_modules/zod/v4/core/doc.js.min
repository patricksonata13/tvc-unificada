export class Doc{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if("function"==typeof t)return t(this,{execution:"sync"}),void t(this,{execution:"async"});const n=t.split("\n").filter(t=>t),i=Math.min(...n.map(t=>t.length-t.trimStart().length)),e=n.map(t=>t.slice(i)).map(t=>" ".repeat(2*this.indent)+t);for(const t of e)this.content.push(t)}compile(){const t=Function,n=this?.args;return new t(...n,[...(this?.content??[""]).map(t=>`  ${t}`)].join("\n"))}}