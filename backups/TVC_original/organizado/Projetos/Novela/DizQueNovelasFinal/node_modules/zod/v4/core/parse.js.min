import*as core from"./core.js";import*as errors from"./errors.js";import*as util from"./util.js";export const _parse=s=>(e,r,o,a)=>{const n=o?Object.assign(o,{async:!1}):{async:!1},c=e._zod.run({value:r,issues:[]},n);if(c instanceof Promise)throw new core.$ZodAsyncError;if(c.issues.length){const e=new(a?.Err??s)(c.issues.map(s=>util.finalizeIssue(s,n,core.config())));throw util.captureStackTrace(e,a?.callee),e}return c.value};export const parse=_parse(errors.$ZodRealError);export const _parseAsync=s=>async(e,r,o,a)=>{const n=o?Object.assign(o,{async:!0}):{async:!0};let c=e._zod.run({value:r,issues:[]},n);if(c instanceof Promise&&(c=await c),c.issues.length){const e=new(a?.Err??s)(c.issues.map(s=>util.finalizeIssue(s,n,core.config())));throw util.captureStackTrace(e,a?.callee),e}return c.value};export const parseAsync=_parseAsync(errors.$ZodRealError);export const _safeParse=s=>(e,r,o)=>{const a=o?{...o,async:!1}:{async:!1},n=e._zod.run({value:r,issues:[]},a);if(n instanceof Promise)throw new core.$ZodAsyncError;return n.issues.length?{success:!1,error:new(s??errors.$ZodError)(n.issues.map(s=>util.finalizeIssue(s,a,core.config())))}:{success:!0,data:n.value}};export const safeParse=_safeParse(errors.$ZodRealError);export const _safeParseAsync=s=>async(e,r,o)=>{const a=o?Object.assign(o,{async:!0}):{async:!0};let n=e._zod.run({value:r,issues:[]},a);return n instanceof Promise&&(n=await n),n.issues.length?{success:!1,error:new s(n.issues.map(s=>util.finalizeIssue(s,a,core.config())))}:{success:!0,data:n.value}};export const safeParseAsync=_safeParseAsync(errors.$ZodRealError);