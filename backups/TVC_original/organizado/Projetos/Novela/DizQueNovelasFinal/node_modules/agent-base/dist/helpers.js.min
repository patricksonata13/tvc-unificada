"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.req=exports.json=exports.toBuffer=void 0;const http=__importStar(require("http")),https=__importStar(require("https"));async function toBuffer(t){let e=0;const r=[];for await(const n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}async function json(t){const e=(await toBuffer(t)).toString("utf8");try{return JSON.parse(e)}catch(t){const r=t;throw r.message+=` (input: ${e})`,r}}function req(t,e={}){const r=(("string"==typeof t?t:t.href).startsWith("https:")?https:http).request(t,e),n=new Promise((t,e)=>{r.once("response",t).once("error",e).end()});return r.then=n.then.bind(n),r}exports.toBuffer=toBuffer,exports.json=json,exports.req=req;