export function isResponse(e){return!!e&&"object"==typeof e&&e instanceof Response}export function parseParams(e,t){const n={},{pathname:r}=new URL(e.url),a=t.namedRegex.exec(r);if(a?.groups)for(const[e,r]of Object.entries(a.groups)){n[t.routeKeys[e]]=r}return n}export function getRedirectRewriteLocation(e,t,n){const r=e.searchParams.entries(),a=parseParams(t,n),o=n.page.split("/").map(e=>{let t;if(t=matchDynamicName(e)){const n=a[t];return delete a[t],"string"==typeof n?n.split("/")[0]:n??e}if(t=matchDeepDynamicRouteName(e)){const n=a[t];return delete a[t],n??e}return e}).join("/"),s=new URL(o,e.origin);for(const e in a)s.searchParams.append(e,a[e]);for(const[e,t]of r)s.searchParams.has(e)||s.searchParams.append(e,t);return s}export function matchDynamicName(e){return e.match(/^\[([^[\](?:\.\.\.)]+?)\]$/)?.[1]}export function matchDeepDynamicRouteName(e){return e.match(/^\[\.\.\.([^/]+?)\]$/)?.[1]}