function initManifestRegExp(e){return{...e,htmlRoutes:e.htmlRoutes.map(e=>({...e,namedRegex:new RegExp(e.namedRegex)})),apiRoutes:e.apiRoutes.map(e=>({...e,namedRegex:new RegExp(e.namedRegex)})),notFoundRoutes:e.notFoundRoutes.map(e=>({...e,namedRegex:new RegExp(e.namedRegex)})),redirects:e.redirects?.map(e=>({...e,namedRegex:new RegExp(e.namedRegex)})),rewrites:e.rewrites?.map(e=>({...e,namedRegex:new RegExp(e.namedRegex)}))}}export function createEnvironment(e){return{getRoutesManifest:async()=>initManifestRegExp(await e.readJson("_expo/routes.json")),async getHtml(n,t){let a;if(null!=(a=await e.readText(t.page+".html")))return a;const i="/index";if(t.page.endsWith(i)&&t.page.length>6){const n=t.page.slice(0,-6);if(null!=(a=await e.readText(n+".html")))return a}return null},getApiRoute:async n=>e.loadModule(n.file),async getMiddleware(n){const t=await e.loadModule(n.file);return"function"!=typeof t?.default?null:t}}}