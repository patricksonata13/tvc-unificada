import{AsyncLocalStorage}from"node:async_hooks";import{createRequestScope}from"../runtime";import{createRequestHandler as createExpoHandler}from"./abstract";import{createWorkerdEnv}from"./environment/workerd";export{ExpoError}from"./abstract";const STORE=new AsyncLocalStorage;export function createRequestHandler(e,r){const t=createRequestScope(STORE,(e,r,t)=>({origin:e.headers.get("Origin")||"null",environment:e.headers.get("eas-environment")||null,waitUntil:t.waitUntil?.bind(t)})),o=createExpoHandler({...createWorkerdEnv(e),...r});return(e,r,n)=>t(o,e,r,n)}