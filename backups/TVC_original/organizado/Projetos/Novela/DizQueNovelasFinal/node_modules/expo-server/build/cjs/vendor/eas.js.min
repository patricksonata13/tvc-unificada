"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExpoError=void 0,exports.createRequestHandler=createRequestHandler;const node_async_hooks_1=require("node:async_hooks"),runtime_1=require("../runtime"),abstract_1=require("./abstract"),workerd_1=require("./environment/workerd");var abstract_2=require("./abstract");Object.defineProperty(exports,"ExpoError",{enumerable:!0,get:function(){return abstract_2.ExpoError}});const STORE=new node_async_hooks_1.AsyncLocalStorage;function createRequestHandler(e,r){const t=(0,runtime_1.createRequestScope)(STORE,(e,r,t)=>({origin:e.headers.get("Origin")||"null",environment:e.headers.get("eas-environment")||null,waitUntil:t.waitUntil?.bind(t)})),n=(0,abstract_1.createRequestHandler)({...(0,workerd_1.createWorkerdEnv)(e),...r});return(e,r,o)=>t(n,e,r,o)}