import{scopeRef}from"./scope";function enforcedRequestScope(){const e=scopeRef.current?.getStore();if(void 0===e)throw new Error("Invalid server runtime API call. Runtime APIs can only be called during ongoing requests.\n- You may be calling this API in the global scope.\n- You might be calling this API outside of a promise scoped to a request.\n- You might have more than one copy of this API installed.");return e}function assertSupport(e,r){if(void 0===r)throw new Error(`Unsupported server runtime API call: ${e}. This API is not supported in your current environment.`);return r}export{StatusError}from"./error";export function origin(){return assertSupport("origin()",enforcedRequestScope().origin)}export function environment(){return assertSupport("environment()",enforcedRequestScope().environment)}export function runTask(e){assertSupport("runTask()",enforcedRequestScope().waitUntil)(e())}export function deferTask(e){assertSupport("deferTask()",enforcedRequestScope().deferTask)(e)}export function setResponseHeaders(e){assertSupport("setResponseHeaders()",enforcedRequestScope().setResponseHeaders)(e)}