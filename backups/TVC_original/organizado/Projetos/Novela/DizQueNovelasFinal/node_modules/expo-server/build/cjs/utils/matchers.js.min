"use strict";function isResponse(e){return!!e&&"object"==typeof e&&e instanceof Response}function parseParams(e,t){const a={},{pathname:r}=new URL(e.url),n=t.namedRegex.exec(r);if(n?.groups)for(const[e,r]of Object.entries(n.groups)){a[t.routeKeys[e]]=r}return a}function getRedirectRewriteLocation(e,t,a){const r=e.searchParams.entries(),n=parseParams(t,a),s=a.page.split("/").map(e=>{let t;if(t=matchDynamicName(e)){const a=n[t];return delete n[t],"string"==typeof a?a.split("/")[0]:a??e}if(t=matchDeepDynamicRouteName(e)){const a=n[t];return delete n[t],a??e}return e}).join("/"),o=new URL(s,e.origin);for(const e in n)o.searchParams.append(e,n[e]);for(const[e,t]of r)o.searchParams.has(e)||o.searchParams.append(e,t);return o}function matchDynamicName(e){return e.match(/^\[([^[\](?:\.\.\.)]+?)\]$/)?.[1]}function matchDeepDynamicRouteName(e){return e.match(/^\[\.\.\.([^/]+?)\]$/)?.[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isResponse=isResponse,exports.parseParams=parseParams,exports.getRedirectRewriteLocation=getRedirectRewriteLocation,exports.matchDynamicName=matchDynamicName,exports.matchDeepDynamicRouteName=matchDeepDynamicRouteName;