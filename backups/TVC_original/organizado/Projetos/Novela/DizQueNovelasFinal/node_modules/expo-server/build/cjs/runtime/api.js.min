"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatusError=void 0,exports.origin=origin,exports.environment=environment,exports.runTask=runTask,exports.deferTask=deferTask,exports.setResponseHeaders=setResponseHeaders;const scope_1=require("./scope");function enforcedRequestScope(){const e=scope_1.scopeRef.current?.getStore();if(void 0===e)throw new Error("Invalid server runtime API call. Runtime APIs can only be called during ongoing requests.\n- You may be calling this API in the global scope.\n- You might be calling this API outside of a promise scoped to a request.\n- You might have more than one copy of this API installed.");return e}function assertSupport(e,r){if(void 0===r)throw new Error(`Unsupported server runtime API call: ${e}. This API is not supported in your current environment.`);return r}var error_1=require("./error");function origin(){return assertSupport("origin()",enforcedRequestScope().origin)}function environment(){return assertSupport("environment()",enforcedRequestScope().environment)}function runTask(e){assertSupport("runTask()",enforcedRequestScope().waitUntil)(e())}function deferTask(e){assertSupport("deferTask()",enforcedRequestScope().deferTask)(e)}function setResponseHeaders(e){assertSupport("setResponseHeaders()",enforcedRequestScope().setResponseHeaders)(e)}Object.defineProperty(exports,"StatusError",{enumerable:!0,get:function(){return error_1.StatusError}});