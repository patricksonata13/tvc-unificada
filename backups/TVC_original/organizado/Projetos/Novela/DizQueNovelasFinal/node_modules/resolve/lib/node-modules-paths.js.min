var path=require("path"),parse=path.parse||require("path-parse"),driveLetterRegex=/^([A-Za-z]:)/,uncPathRegex=/^\\\\/,getNodeModulesDirs=function(e,r){var t="/";driveLetterRegex.test(e)?t="":uncPathRegex.test(e)&&(t="\\\\");for(var a=[e],o=parse(e);o.dir!==a[a.length-1];)a.push(o.dir),o=parse(o.dir);return a.reduce(function(e,a){return e.concat(r.map(function(e){return path.resolve(t,a,e)}))},[])};module.exports=function(e,r,t){var a=r&&r.moduleDirectory?[].concat(r.moduleDirectory):["node_modules"];if(r&&"function"==typeof r.paths)return r.paths(t,e,function(){return getNodeModulesDirs(e,a)},r);var o=getNodeModulesDirs(e,a);return r&&r.paths?o.concat(r.paths):o};