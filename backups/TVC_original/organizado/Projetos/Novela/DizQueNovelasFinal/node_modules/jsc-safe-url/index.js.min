const URI_REGEX=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;function _rfc3986Parse(r){const t=r.match(URI_REGEX);if(null==t)throw new Error("Unexpected error - failed to regex-match URL");return{schemeAndAuthority:(t[1]||"")+(t[3]||""),path:t[5]||"",hasQueryPart:null!=t[6],queryWithoutQuestionMark:t[7]||"",fragmentWithHash:t[8]||""}}function isJscSafeUrl(r){return!_rfc3986Parse(r).hasQueryPart}function toNormalUrl(r){const t=_rfc3986Parse(r);return-1===t.path.indexOf("//&")?r:t.schemeAndAuthority+t.path.replace("//&","?")+(t.queryWithoutQuestionMark.length>0?"&"+t.queryWithoutQuestionMark:"")+t.fragmentWithHash}function toJscSafeUrl(r){if(!_rfc3986Parse(r).hasQueryPart)return r;const t=_rfc3986Parse(toNormalUrl(r));if(t.queryWithoutQuestionMark.length>0&&(""===t.path||"/"===t.path))throw new Error(`The given URL "${r}" has an empty path and cannot be converted to a JSC-safe format.`);return t.schemeAndAuthority+t.path+(t.queryWithoutQuestionMark.length>0?"//&"+t.queryWithoutQuestionMark.replace(/\?/g,"%3F"):"")+t.fragmentWithHash}module.exports={isJscSafeUrl:isJscSafeUrl,toNormalUrl:toNormalUrl,toJscSafeUrl:toJscSafeUrl};