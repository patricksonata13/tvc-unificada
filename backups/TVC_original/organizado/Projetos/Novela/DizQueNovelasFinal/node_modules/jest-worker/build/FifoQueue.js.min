"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class FifoQueue{_workerQueues=[];_sharedQueue=new InternalQueue;enqueue(e,u){if(null==u)return void this._sharedQueue.enqueue(e);let s=this._workerQueues[u];null==s&&(s=this._workerQueues[u]=new InternalQueue);const t={previousSharedTask:this._sharedQueue.peekLast(),task:e};s.enqueue(t)}dequeue(e){const u=this._workerQueues[e]?.peek(),s=u?.previousSharedTask?.request[1]??!0;return null!=u&&s?this._workerQueues[e]?.dequeue()?.task??null:this._sharedQueue.dequeue()}}exports.default=FifoQueue;class InternalQueue{_head=null;_last=null;enqueue(e){const u={next:null,value:e};null==this._last?this._head=u:this._last.next=u,this._last=u}dequeue(){if(null==this._head)return null;const e=this._head;return this._head=e.next,null==this._head&&(this._last=null),e.value}peek(){return this._head?.value??null}peekLast(){return this._last?.value??null}}