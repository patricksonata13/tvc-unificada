import{now}from"../utils/utils-consts";import{abs}from"../utils/utils-consts";import hasParent from"../utils/has-parent";import simpleCloneInputData from"./simple-clone-input-data";import getCenter from"./get-center";import getDistance from"./get-distance";import getAngle from"./get-angle";import getDirection from"./get-direction";import computeDeltaXY from"./compute-delta-xy";import getVelocity from"./get-velocity";import getScale from"./get-scale";import getRotation from"./get-rotation";import computeIntervalInputData from"./compute-interval-input-data";export default function computeInputData(t,e){let{session:o}=t,{pointers:i}=e,{length:r}=i;o.firstInput||(o.firstInput=simpleCloneInputData(e)),r>1&&!o.firstMultiple?o.firstMultiple=simpleCloneInputData(e):1===r&&(o.firstMultiple=!1);let{firstInput:n,firstMultiple:a}=o,l=a?a.center:n.center,p=e.center=getCenter(i);e.timeStamp=now(),e.deltaTime=e.timeStamp-n.timeStamp,e.angle=getAngle(l,p),e.distance=getDistance(l,p),computeDeltaXY(o,e),e.offsetDirection=getDirection(e.deltaX,e.deltaY);let m=getVelocity(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=m.x,e.overallVelocityY=m.y,e.overallVelocity=abs(m.x)>abs(m.y)?m.x:m.y,e.scale=a?getScale(a.pointers,i):1,e.rotation=a?getRotation(a.pointers,i):0,e.maxPointers=o.prevInput?e.pointers.length>o.prevInput.maxPointers?e.pointers.length:o.prevInput.maxPointers:e.pointers.length,computeIntervalInputData(o,e);let s=t.element;const c=e.srcEvent;let u;u=c.composedPath?c.composedPath()[0]:c.path?c.path[0]:c.target,hasParent(u,s)&&(s=u),e.target=s}