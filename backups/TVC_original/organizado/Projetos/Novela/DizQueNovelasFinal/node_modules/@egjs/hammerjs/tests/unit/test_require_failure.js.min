var el,hammer,pressPeriod=200,pressThreshold=20,pressCount=0,panStartCount=0,swipeCount=0;QUnit.module("Require Failure ( Swipe & Press )",{beforeEach:function(){el=utils.createHitArea(),hammer=new Hammer(el,{recognizers:[]});var e=new Hammer.Swipe({threshold:1}),s=new Hammer.Press({time:pressPeriod,threshold:pressThreshold});hammer.add(e),hammer.add(s),e.recognizeWith(s),s.requireFailure(e),pressCount=0,swipeCount=0,hammer.on("press",function(){pressCount++}),hammer.on("swipe",function(){swipeCount++})},afterEach:function(){hammer.destroy()}}),QUnit.test("When swipe does not recognize the gesture, a press gesture can be fired",function(e){var s=e.async();e.expect(1),utils.dispatchTouchEvent(el,"start",50,50),setTimeout(function(){e.equal(pressCount,1,"1 press recognized"),s()},pressPeriod+100)}),QUnit.test("When swipe does recognize the gesture, a press gesture cannot be fired",function(e){var s=e.async();e.expect(2),Simulator.gestures.swipe(el,null,function(){e.ok(swipeCount>0,"swipe gesture should be recognizing"),e.equal(pressCount,0,"press gesture should not be recognized because swipe gesture is recognizing"),s()})}),QUnit.module("Require Failure ( Pan & Press )",{beforeEach:function(){el=document.createElement("div"),document.body.appendChild(el),hammer=new Hammer(el,{recognizers:[]});var e=new Hammer.Pan({threshold:1}),s=new Hammer.Press({time:pressPeriod,threshold:pressThreshold});hammer.add([e,s]),e.recognizeWith(s),s.requireFailure(e),pressCount=0,panStartCount=0,hammer.on("press",function(){pressCount++}),hammer.on("panstart",function(){panStartCount++})},afterEach:function(){document.body.removeChild(el),hammer.destroy()}}),QUnit.test("When pan does not recognize the gesture, a press gesture can be fired",function(e){var s=e.async();e.expect(1),utils.dispatchTouchEvent(el,"start",50,50),setTimeout(function(){e.equal(pressCount,1,"1 press recognized"),s()},pressPeriod+100)}),QUnit.test("When pan recognizes the gesture, a press gesture cannot be fired",function(e){var s=e.async();e.expect(2),utils.dispatchTouchEvent(el,"start",50,50),utils.dispatchTouchEvent(el,"move",50+pressThreshold/4,50),setTimeout(function(){e.ok(panStartCount>0,"pan gesture should be recognizing"),e.equal(pressCount,0,"press gesture should not be recognized because pan gesture is recognizing"),s()},pressPeriod+100)});