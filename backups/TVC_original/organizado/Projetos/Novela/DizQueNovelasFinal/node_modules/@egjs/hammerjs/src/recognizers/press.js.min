import Recognizer from"../recognizerjs/recognizer-constructor";import{STATE_RECOGNIZED,STATE_FAILED}from"../recognizerjs/recognizer-consts";import{now}from"../utils/utils-consts";import{TOUCH_ACTION_AUTO}from"../touchactionjs/touchaction-Consts";import{INPUT_START,INPUT_END,INPUT_CANCEL}from"../inputjs/input-consts";export default class PressRecognizer extends Recognizer{constructor(t={}){super({event:"press",pointers:1,time:251,threshold:9,...t}),this._timer=null,this._input=null}getTouchAction(){return[TOUCH_ACTION_AUTO]}process(t){let{options:e}=this,i=t.pointers.length===e.pointers,s=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!s||!i||t.eventType&(INPUT_END|INPUT_CANCEL)&&!r)this.reset();else if(t.eventType&INPUT_START)this.reset(),this._timer=setTimeout(()=>{this.state=STATE_RECOGNIZED,this.tryEmit()},e.time);else if(t.eventType&INPUT_END)return STATE_RECOGNIZED;return STATE_FAILED}reset(){clearTimeout(this._timer)}emit(t){this.state===STATE_RECOGNIZED&&(t&&t.eventType&INPUT_END?this.manager.emit(`${this.options.event}up`,t):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input)))}}