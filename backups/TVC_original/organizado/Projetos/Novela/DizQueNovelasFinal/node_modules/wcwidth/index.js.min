"use strict";var defaults=require("defaults"),combining=require("./combining"),DEFAULTS={nul:0,control:0};function wcswidth(n,r){if("string"!=typeof n)return wcwidth(n,r);for(var i=0,t=0;t<n.length;t++){var e=wcwidth(n.charCodeAt(t),r);if(e<0)return-1;i+=e}return i}function wcwidth(n,r){return 0===n?r.nul:n<32||n>=127&&n<160?r.control:bisearch(n)?0:1+(n>=4352&&(n<=4447||9001==n||9002==n||n>=11904&&n<=42191&&12351!=n||n>=44032&&n<=55203||n>=63744&&n<=64255||n>=65040&&n<=65049||n>=65072&&n<=65135||n>=65280&&n<=65376||n>=65504&&n<=65510||n>=131072&&n<=196605||n>=196608&&n<=262141))}function bisearch(n){var r,i=0,t=combining.length-1;if(n<combining[0][0]||n>combining[t][1])return!1;for(;t>=i;)if(r=Math.floor((i+t)/2),n>combining[r][1])i=r+1;else{if(!(n<combining[r][0]))return!0;t=r-1}return!1}module.exports=function(n){return wcswidth(n,DEFAULTS)},module.exports.config=function(n){return n=defaults(n||{},DEFAULTS),function(r){return wcswidth(r,n)}};