"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUnionDef=exports.primitiveMappings=void 0;const parseDef_js_1=require("../parseDef.js");function parseUnionDef(e,n){if("openApi3"===n.target)return asAnyOf(e,n);const t=e.options instanceof Map?Array.from(e.options.values()):e.options;if(t.every(e=>e._def.typeName in exports.primitiveMappings&&(!e._def.checks||!e._def.checks.length))){const e=t.reduce((e,n)=>{const t=exports.primitiveMappings[n._def.typeName];return t&&!e.includes(t)?[...e,t]:e},[]);return{type:e.length>1?e:e[0]}}if(t.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=t.reduce((e,n)=>{const t=typeof n._def.value;switch(t){case"string":case"number":case"boolean":return[...e,t];case"bigint":return[...e,"integer"];case"object":if(null===n._def.value)return[...e,"null"];default:return e}},[]);if(e.length===t.length){const n=e.filter((e,n,t)=>t.indexOf(e)===n);return{type:n.length>1?n:n[0],enum:t.reduce((e,n)=>e.includes(n._def.value)?e:[...e,n._def.value],[])}}}else if(t.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:t.reduce((e,n)=>[...e,...n._def.values.filter(n=>!e.includes(n))],[])};return asAnyOf(e,n)}exports.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},exports.parseUnionDef=parseUnionDef;const asAnyOf=(e,n)=>{const t=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,t)=>(0,parseDef_js_1.parseDef)(e._def,{...n,currentPath:[...n.currentPath,"anyOf",`${t}`]})).filter(e=>!!e&&(!n.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return t.length?{anyOf:t}:void 0};