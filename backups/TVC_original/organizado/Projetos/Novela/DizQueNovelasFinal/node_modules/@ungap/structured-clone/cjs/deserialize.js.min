"use strict";const{VOID:VOID,PRIMITIVE:PRIMITIVE,ARRAY:ARRAY,OBJECT:OBJECT,DATE:DATE,REGEXP:REGEXP,MAP:MAP,SET:SET,ERROR:ERROR,BIGINT:BIGINT}=require("./types.js"),env="object"==typeof self?self:globalThis,deserializer=(e,r)=>{const s=(r,s)=>(e.set(s,r),r),t=n=>{if(e.has(n))return e.get(n);const[a,c]=r[n];switch(a){case PRIMITIVE:case VOID:return s(c,n);case ARRAY:{const e=s([],n);for(const r of c)e.push(t(r));return e}case OBJECT:{const e=s({},n);for(const[r,s]of c)e[t(r)]=t(s);return e}case DATE:return s(new Date(c),n);case REGEXP:{const{source:e,flags:r}=c;return s(new RegExp(e,r),n)}case MAP:{const e=s(new Map,n);for(const[r,s]of c)e.set(t(r),t(s));return e}case SET:{const e=s(new Set,n);for(const r of c)e.add(t(r));return e}case ERROR:{const{name:e,message:r}=c;return s(new env[e](r),n)}case BIGINT:return s(BigInt(c),n);case"BigInt":return s(Object(BigInt(c)),n);case"ArrayBuffer":return s(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:e}=new Uint8Array(c);return s(new DataView(e),c)}}return s(new env[a](c),n)};return t},deserialize=e=>deserializer(new Map,e)(0);exports.deserialize=deserialize;