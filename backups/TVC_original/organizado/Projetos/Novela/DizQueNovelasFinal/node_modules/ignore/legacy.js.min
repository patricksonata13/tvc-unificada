"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,c=[],u=!0,s=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw i}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function makeArray(t){return Array.isArray(t)?t:[t]}var EMPTY="",SPACE=" ",ESCAPE="\\",REGEX_TEST_BLANK_LINE=/^\s+$/,REGEX_INVALID_TRAILING_BACKSLASH=/(?:[^\\]|^)\\$/,REGEX_REPLACE_LEADING_EXCAPED_EXCLAMATION=/^\\!/,REGEX_REPLACE_LEADING_EXCAPED_HASH=/^\\#/,REGEX_SPLITALL_CRLF=/\r?\n/g,REGEX_TEST_INVALID_PATH=/^\.*\/|^\.+$/,SLASH="/",TMP_KEY_IGNORE="node-ignore";"undefined"!=typeof Symbol&&(TMP_KEY_IGNORE=Symbol.for("node-ignore"));var KEY_IGNORE=TMP_KEY_IGNORE,define=function(t,e,r){return Object.defineProperty(t,e,{value:r})},REGEX_REGEXP_RANGE=/([0-z])-([0-z])/g,RETURN_FALSE=function(){return!1},sanitizeRange=function(t){return t.replace(REGEX_REGEXP_RANGE,function(t,e,r){return e.charCodeAt(0)<=r.charCodeAt(0)?t:EMPTY})},cleanRangeBackSlash=function(t){var e=t.length;return t.slice(0,e-e%2)},REPLACERS=[[/^\uFEFF/,function(){return EMPTY}],[/((?:\\\\)*?)(\\?\s+)$/,function(t,e,r){return e+(0===r.indexOf("\\")?SPACE:EMPTY)}],[/(\\+?)\s/g,function(t,e){var r=e.length;return e.slice(0,r-r%2)+SPACE}],[/[\\$.|*+(){^]/g,function(t){return"\\".concat(t)}],[/(?!\\)\?/g,function(){return"[^/]"}],[/^\//,function(){return"^"}],[/\//g,function(){return"\\/"}],[/^\^*\\\*\\\*\\\//,function(){return"^(?:.*\\/)?"}],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,function(t,e,r){return e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"}],[/(^|[^\\]+)(\\\*)+(?=.+)/g,function(t,e,r){return e+r.replace(/\\\*/g,"[^\\/]*")}],[/\\\\\\(?=[$.|*+(){^])/g,function(){return ESCAPE}],[/\\\\/g,function(){return ESCAPE}],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,function(t,e,r,n,i){return e===ESCAPE?"\\[".concat(r).concat(cleanRangeBackSlash(n)).concat(i):"]"===i&&n.length%2==0?"[".concat(sanitizeRange(r)).concat(n,"]"):"[]"}],[/(?:[^*])$/,function(t){return/\/$/.test(t)?"".concat(t,"$"):"".concat(t,"(?=$|\\/$)")}],[/(\^|\\\/)?\\\*$/,function(t,e){var r=e?"".concat(e,"[^/]+"):"[^/]*";return"".concat(r,"(?=$|\\/$)")}]],regexCache=Object.create(null),makeRegex=function(t,e){var r=regexCache[t];return r||(r=REPLACERS.reduce(function(e,r){var n=_slicedToArray(r,2),i=n[0],o=n[1];return e.replace(i,o.bind(t))},t),regexCache[t]=r),e?new RegExp(r,"i"):new RegExp(r)},isString=function(t){return"string"==typeof t},checkPattern=function(t){return t&&isString(t)&&!REGEX_TEST_BLANK_LINE.test(t)&&!REGEX_INVALID_TRAILING_BACKSLASH.test(t)&&0!==t.indexOf("#")},splitPattern=function(t){return t.split(REGEX_SPLITALL_CRLF)},IgnoreRule=_createClass(function t(e,r,n,i){_classCallCheck(this,t),this.origin=e,this.pattern=r,this.negative=n,this.regex=i}),createRule=function(t,e){var r=t,n=!1;0===t.indexOf("!")&&(n=!0,t=t.substr(1)),t=t.replace(REGEX_REPLACE_LEADING_EXCAPED_EXCLAMATION,"!").replace(REGEX_REPLACE_LEADING_EXCAPED_HASH,"#");var i=makeRegex(t,e);return new IgnoreRule(r,t,n,i)},throwError=function(t,e){throw new e(t)},checkPath=function t(e,r,n){if(!isString(e))return n("path must be a string, but got `".concat(r,"`"),TypeError);if(!e)return n("path must not be empty",TypeError);if(t.isNotRelative(e)){return n("path should be a ".concat("`path.relative()`d",' string, but got "').concat(r,'"'),RangeError)}return!0},isNotRelative=function(t){return REGEX_TEST_INVALID_PATH.test(t)};checkPath.isNotRelative=isNotRelative,checkPath.convert=function(t){return t};var Ignore=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.ignorecase,n=void 0===r||r,i=e.ignoreCase,o=void 0===i?n:i,a=e.allowRelativePaths,c=void 0!==a&&a;_classCallCheck(this,t),define(this,KEY_IGNORE,!0),this._rules=[],this._ignoreCase=o,this._allowRelativePaths=c,this._initCache()}return _createClass(t,[{key:"_initCache",value:function(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}},{key:"_addPattern",value:function(t){if(t&&t[KEY_IGNORE])return this._rules=this._rules.concat(t._rules),void(this._added=!0);if(checkPattern(t)){var e=createRule(t,this._ignoreCase);this._added=!0,this._rules.push(e)}}},{key:"add",value:function(t){return this._added=!1,makeArray(isString(t)?splitPattern(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}},{key:"addPattern",value:function(t){return this.add(t)}},{key:"_testOne",value:function(t,e){var r=!1,n=!1;return this._rules.forEach(function(i){var o=i.negative;n===o&&r!==n||o&&!r&&!n&&!e||i.regex.test(t)&&(r=!o,n=o)}),{ignored:r,unignored:n}}},{key:"_test",value:function(t,e,r,n){var i=t&&checkPath.convert(t);return checkPath(i,t,this._allowRelativePaths?RETURN_FALSE:throwError),this._t(i,e,r,n)}},{key:"_t",value:function(t,e,r,n){if(t in e)return e[t];if(n||(n=t.split(SLASH)),n.pop(),!n.length)return e[t]=this._testOne(t,r);var i=this._t(n.join(SLASH)+SLASH,e,r,n);return e[t]=i.ignored?i:this._testOne(t,r)}},{key:"ignores",value:function(t){return this._test(t,this._ignoreCache,!1).ignored}},{key:"createFilter",value:function(){var t=this;return function(e){return!t.ignores(e)}}},{key:"filter",value:function(t){return makeArray(t).filter(this.createFilter())}},{key:"test",value:function(t){return this._test(t,this._testCache,!0)}}]),t}(),factory=function(t){return new Ignore(t)},isPathValid=function(t){return checkPath(t&&checkPath.convert(t),t,RETURN_FALSE)};if(factory.isPathValid=isPathValid,factory.default=factory,module.exports=factory,"undefined"!=typeof process&&(process.env&&process.env.IGNORE_TEST_WIN32||"win32"===process.platform)){var makePosix=function(t){return/^\\\\\?\\/.test(t)||/[\0-\x1F"<>\|]+/.test(t)?t:t.replace(/\\/g,"/")};checkPath.convert=makePosix;var REGIX_IS_WINDOWS_PATH_ABSOLUTE=/^[a-z]:\//i;checkPath.isNotRelative=function(t){return REGIX_IS_WINDOWS_PATH_ABSOLUTE.test(t)||isNotRelative(t)}}