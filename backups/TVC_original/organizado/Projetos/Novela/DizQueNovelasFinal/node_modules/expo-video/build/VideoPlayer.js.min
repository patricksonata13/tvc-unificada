import{useReleasingSharedObject}from"expo-modules-core";import NativeVideoModule from"./NativeVideoModule";import resolveAssetSource from"./resolveAssetSource";const replace=NativeVideoModule.VideoPlayer.prototype.replace;NativeVideoModule.VideoPlayer.prototype.replace=function(e,r=!1){return r||console.warn("On iOS `VideoPlayer.replace` loads the asset data synchronously on the main thread, which can lead to UI freezes and will be deprecated in a future release. Switch to `replaceAsync` for better user experience."),replace.call(this,parseSource(e))};const replaceAsync=NativeVideoModule.VideoPlayer.prototype.replaceAsync;NativeVideoModule.VideoPlayer.prototype.replaceAsync=function(e){return replaceAsync.call(this,parseSource(e))};export function createVideoPlayer(e){return new NativeVideoModule.VideoPlayer(parseSource(e))}export function useVideoPlayer(e,r){const o=parseSource(e);return useReleasingSharedObject(()=>{const e=new NativeVideoModule.VideoPlayer(o);return r?.(e),e},[JSON.stringify(o)])}function parseSource(e){return"number"==typeof e?{uri:resolveAssetSource(e).uri}:"string"==typeof e?{uri:e}:"number"!=typeof e?.assetId||e.uri?e:{...e,uri:resolveAssetSource(e.assetId).uri}}