"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const config_plugins_1=require("expo/config-plugins"),withExpoVideo=(i,{supportsBackgroundPlayback:e,supportsPictureInPicture:o}={})=>((0,config_plugins_1.withInfoPlist)(i,i=>{const n=i.modResults.UIBackgroundModes??[],s=e||o;return void 0===e&&void 0===o||(s&&!n.includes("audio")?i.modResults.UIBackgroundModes=[...n,"audio"]:s||(i.modResults.UIBackgroundModes=n.filter(i=>"audio"!==i))),i}),(0,config_plugins_1.withAndroidManifest)(i,i=>{const n=config_plugins_1.AndroidConfig.Manifest.getMainActivityOrThrow(i.modResults);if(void 0!==o&&(o?n.$["android:supportsPictureInPicture"]="true":delete n.$["android:supportsPictureInPicture"]),e){config_plugins_1.AndroidConfig.Permissions.ensurePermissions(i.modResults,["android.permission.FOREGROUND_SERVICE","android.permission.FOREGROUND_SERVICE_MEDIA_PLAYBACK"]);const e=config_plugins_1.AndroidConfig.Manifest.getMainApplicationOrThrow(i.modResults),o=e.service?.find(i=>"expo.modules.video.playbackService.ExpoVideoPlaybackService"===i.$?.["android:name"]);o||(e.service||(e.service=[]),e.service.push({$:{"android:name":"expo.modules.video.playbackService.ExpoVideoPlaybackService","android:exported":"false","android:foregroundServiceType":"mediaPlayback"},"intent-filter":[{action:[{$:{"android:name":"androidx.media3.session.MediaSessionService"}}]}]}))}return i}),i);exports.default=withExpoVideo;