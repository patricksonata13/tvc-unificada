"use strict";const diagnosticsChannel=require("node:diagnostics_channel"),util=require("node:util"),undiciDebugLog=util.debuglog("undici"),fetchDebuglog=util.debuglog("fetch"),websocketDebuglog=util.debuglog("websocket");let isClientSet=!1;const channels={beforeConnect:diagnosticsChannel.channel("undici:client:beforeConnect"),connected:diagnosticsChannel.channel("undici:client:connected"),connectError:diagnosticsChannel.channel("undici:client:connectError"),sendHeaders:diagnosticsChannel.channel("undici:client:sendHeaders"),create:diagnosticsChannel.channel("undici:request:create"),bodySent:diagnosticsChannel.channel("undici:request:bodySent"),headers:diagnosticsChannel.channel("undici:request:headers"),trailers:diagnosticsChannel.channel("undici:request:trailers"),error:diagnosticsChannel.channel("undici:request:error"),open:diagnosticsChannel.channel("undici:websocket:open"),close:diagnosticsChannel.channel("undici:websocket:close"),socketError:diagnosticsChannel.channel("undici:websocket:socket_error"),ping:diagnosticsChannel.channel("undici:websocket:ping"),pong:diagnosticsChannel.channel("undici:websocket:pong")};if(undiciDebugLog.enabled||fetchDebuglog.enabled){const e=fetchDebuglog.enabled?fetchDebuglog:undiciDebugLog;diagnosticsChannel.channel("undici:client:beforeConnect").subscribe(n=>{const{connectParams:{version:s,protocol:c,port:o,host:i}}=n;e("connecting to %s using %s%s",`${i}${o?`:${o}`:""}`,c,s)}),diagnosticsChannel.channel("undici:client:connected").subscribe(n=>{const{connectParams:{version:s,protocol:c,port:o,host:i}}=n;e("connected to %s using %s%s",`${i}${o?`:${o}`:""}`,c,s)}),diagnosticsChannel.channel("undici:client:connectError").subscribe(n=>{const{connectParams:{version:s,protocol:c,port:o,host:i},error:t}=n;e("connection to %s using %s%s errored - %s",`${i}${o?`:${o}`:""}`,c,s,t.message)}),diagnosticsChannel.channel("undici:client:sendHeaders").subscribe(n=>{const{request:{method:s,path:c,origin:o}}=n;e("sending request to %s %s/%s",s,o,c)}),diagnosticsChannel.channel("undici:request:headers").subscribe(n=>{const{request:{method:s,path:c,origin:o},response:{statusCode:i}}=n;e("received response to %s %s/%s - HTTP %d",s,o,c,i)}),diagnosticsChannel.channel("undici:request:trailers").subscribe(n=>{const{request:{method:s,path:c,origin:o}}=n;e("trailers received from %s %s/%s",s,o,c)}),diagnosticsChannel.channel("undici:request:error").subscribe(n=>{const{request:{method:s,path:c,origin:o},error:i}=n;e("request to %s %s/%s errored - %s",s,o,c,i.message)}),isClientSet=!0}if(websocketDebuglog.enabled){if(!isClientSet){const e=undiciDebugLog.enabled?undiciDebugLog:websocketDebuglog;diagnosticsChannel.channel("undici:client:beforeConnect").subscribe(n=>{const{connectParams:{version:s,protocol:c,port:o,host:i}}=n;e("connecting to %s%s using %s%s",i,o?`:${o}`:"",c,s)}),diagnosticsChannel.channel("undici:client:connected").subscribe(n=>{const{connectParams:{version:s,protocol:c,port:o,host:i}}=n;e("connected to %s%s using %s%s",i,o?`:${o}`:"",c,s)}),diagnosticsChannel.channel("undici:client:connectError").subscribe(n=>{const{connectParams:{version:s,protocol:c,port:o,host:i},error:t}=n;e("connection to %s%s using %s%s errored - %s",i,o?`:${o}`:"",c,s,t.message)}),diagnosticsChannel.channel("undici:client:sendHeaders").subscribe(n=>{const{request:{method:s,path:c,origin:o}}=n;e("sending request to %s %s/%s",s,o,c)})}diagnosticsChannel.channel("undici:websocket:open").subscribe(e=>{const{address:{address:n,port:s}}=e;websocketDebuglog("connection opened %s%s",n,s?`:${s}`:"")}),diagnosticsChannel.channel("undici:websocket:close").subscribe(e=>{const{websocket:n,code:s,reason:c}=e;websocketDebuglog("closed connection to %s - %s %s",n.url,s,c)}),diagnosticsChannel.channel("undici:websocket:socket_error").subscribe(e=>{websocketDebuglog("connection errored - %s",e.message)}),diagnosticsChannel.channel("undici:websocket:ping").subscribe(e=>{websocketDebuglog("ping received")}),diagnosticsChannel.channel("undici:websocket:pong").subscribe(e=>{websocketDebuglog("pong received")})}module.exports={channels:channels};