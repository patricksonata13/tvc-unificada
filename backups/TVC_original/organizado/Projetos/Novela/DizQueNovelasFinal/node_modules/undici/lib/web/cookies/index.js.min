"use strict";const{parseSetCookie:parseSetCookie}=require("./parse"),{stringify:stringify}=require("./util"),{webidl:webidl}=require("../fetch/webidl"),{Headers:Headers}=require("../fetch/headers");function getCookies(e){webidl.argumentLengthCheck(arguments,1,"getCookies"),webidl.brandCheck(e,Headers,{strict:!1});const t=e.get("cookie"),r={};if(!t)return r;for(const e of t.split(";")){const[t,...o]=e.split("=");r[t.trim()]=o.join("=")}return r}function deleteCookie(e,t,r){webidl.brandCheck(e,Headers,{strict:!1});const o="deleteCookie";webidl.argumentLengthCheck(arguments,2,o),t=webidl.converters.DOMString(t,o,"name"),r=webidl.converters.DeleteCookieAttributes(r),setCookie(e,{name:t,value:"",expires:new Date(0),...r})}function getSetCookies(e){webidl.argumentLengthCheck(arguments,1,"getSetCookies"),webidl.brandCheck(e,Headers,{strict:!1});const t=e.getSetCookie();return t?t.map(e=>parseSetCookie(e)):[]}function setCookie(e,t){webidl.argumentLengthCheck(arguments,2,"setCookie"),webidl.brandCheck(e,Headers,{strict:!1}),t=webidl.converters.Cookie(t);const r=stringify(t);r&&e.append("Set-Cookie",r)}webidl.converters.DeleteCookieAttributes=webidl.dictionaryConverter([{converter:webidl.nullableConverter(webidl.converters.DOMString),key:"path",defaultValue:()=>null},{converter:webidl.nullableConverter(webidl.converters.DOMString),key:"domain",defaultValue:()=>null}]),webidl.converters.Cookie=webidl.dictionaryConverter([{converter:webidl.converters.DOMString,key:"name"},{converter:webidl.converters.DOMString,key:"value"},{converter:webidl.nullableConverter(e=>"number"==typeof e?webidl.converters["unsigned long long"](e):new Date(e)),key:"expires",defaultValue:()=>null},{converter:webidl.nullableConverter(webidl.converters["long long"]),key:"maxAge",defaultValue:()=>null},{converter:webidl.nullableConverter(webidl.converters.DOMString),key:"domain",defaultValue:()=>null},{converter:webidl.nullableConverter(webidl.converters.DOMString),key:"path",defaultValue:()=>null},{converter:webidl.nullableConverter(webidl.converters.boolean),key:"secure",defaultValue:()=>null},{converter:webidl.nullableConverter(webidl.converters.boolean),key:"httpOnly",defaultValue:()=>null},{converter:webidl.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:webidl.sequenceConverter(webidl.converters.DOMString),key:"unparsed",defaultValue:()=>new Array(0)}]),module.exports={getCookies:getCookies,deleteCookie:deleteCookie,getSetCookies:getSetCookies,setCookie:setCookie};