"use strict";const{staticPropertyDescriptors:staticPropertyDescriptors,readOperation:readOperation,fireAProgressEvent:fireAProgressEvent}=require("./util"),{kState:kState,kError:kError,kResult:kResult,kEvents:kEvents,kAborted:kAborted}=require("./symbols"),{webidl:webidl}=require("../fetch/webidl"),{kEnumerableProperty:kEnumerableProperty}=require("../../core/util");class FileReader extends EventTarget{constructor(){super(),this[kState]="empty",this[kResult]=null,this[kError]=null,this[kEvents]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){webidl.brandCheck(this,FileReader),webidl.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=webidl.converters.Blob(e,{strict:!1}),readOperation(this,e,"ArrayBuffer")}readAsBinaryString(e){webidl.brandCheck(this,FileReader),webidl.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=webidl.converters.Blob(e,{strict:!1}),readOperation(this,e,"BinaryString")}readAsText(e,r=void 0){webidl.brandCheck(this,FileReader),webidl.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=webidl.converters.Blob(e,{strict:!1}),void 0!==r&&(r=webidl.converters.DOMString(r,"FileReader.readAsText","encoding")),readOperation(this,e,"Text",r)}readAsDataURL(e){webidl.brandCheck(this,FileReader),webidl.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=webidl.converters.Blob(e,{strict:!1}),readOperation(this,e,"DataURL")}abort(){"empty"!==this[kState]&&"done"!==this[kState]?("loading"===this[kState]&&(this[kState]="done",this[kResult]=null),this[kAborted]=!0,fireAProgressEvent("abort",this),"loading"!==this[kState]&&fireAProgressEvent("loadend",this)):this[kResult]=null}get readyState(){switch(webidl.brandCheck(this,FileReader),this[kState]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return webidl.brandCheck(this,FileReader),this[kResult]}get error(){return webidl.brandCheck(this,FileReader),this[kError]}get onloadend(){return webidl.brandCheck(this,FileReader),this[kEvents].loadend}set onloadend(e){webidl.brandCheck(this,FileReader),this[kEvents].loadend&&this.removeEventListener("loadend",this[kEvents].loadend),"function"==typeof e?(this[kEvents].loadend=e,this.addEventListener("loadend",e)):this[kEvents].loadend=null}get onerror(){return webidl.brandCheck(this,FileReader),this[kEvents].error}set onerror(e){webidl.brandCheck(this,FileReader),this[kEvents].error&&this.removeEventListener("error",this[kEvents].error),"function"==typeof e?(this[kEvents].error=e,this.addEventListener("error",e)):this[kEvents].error=null}get onloadstart(){return webidl.brandCheck(this,FileReader),this[kEvents].loadstart}set onloadstart(e){webidl.brandCheck(this,FileReader),this[kEvents].loadstart&&this.removeEventListener("loadstart",this[kEvents].loadstart),"function"==typeof e?(this[kEvents].loadstart=e,this.addEventListener("loadstart",e)):this[kEvents].loadstart=null}get onprogress(){return webidl.brandCheck(this,FileReader),this[kEvents].progress}set onprogress(e){webidl.brandCheck(this,FileReader),this[kEvents].progress&&this.removeEventListener("progress",this[kEvents].progress),"function"==typeof e?(this[kEvents].progress=e,this.addEventListener("progress",e)):this[kEvents].progress=null}get onload(){return webidl.brandCheck(this,FileReader),this[kEvents].load}set onload(e){webidl.brandCheck(this,FileReader),this[kEvents].load&&this.removeEventListener("load",this[kEvents].load),"function"==typeof e?(this[kEvents].load=e,this.addEventListener("load",e)):this[kEvents].load=null}get onabort(){return webidl.brandCheck(this,FileReader),this[kEvents].abort}set onabort(e){webidl.brandCheck(this,FileReader),this[kEvents].abort&&this.removeEventListener("abort",this[kEvents].abort),"function"==typeof e?(this[kEvents].abort=e,this.addEventListener("abort",e)):this[kEvents].abort=null}}FileReader.EMPTY=FileReader.prototype.EMPTY=0,FileReader.LOADING=FileReader.prototype.LOADING=1,FileReader.DONE=FileReader.prototype.DONE=2,Object.defineProperties(FileReader.prototype,{EMPTY:staticPropertyDescriptors,LOADING:staticPropertyDescriptors,DONE:staticPropertyDescriptors,readAsArrayBuffer:kEnumerableProperty,readAsBinaryString:kEnumerableProperty,readAsText:kEnumerableProperty,readAsDataURL:kEnumerableProperty,abort:kEnumerableProperty,readyState:kEnumerableProperty,result:kEnumerableProperty,error:kEnumerableProperty,onloadstart:kEnumerableProperty,onprogress:kEnumerableProperty,onload:kEnumerableProperty,onabort:kEnumerableProperty,onerror:kEnumerableProperty,onloadend:kEnumerableProperty,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}}),Object.defineProperties(FileReader,{EMPTY:staticPropertyDescriptors,LOADING:staticPropertyDescriptors,DONE:staticPropertyDescriptors}),module.exports={FileReader:FileReader};