"use strict";const{kConstruct:kConstruct}=require("./symbols"),{Cache:Cache}=require("./cache"),{webidl:webidl}=require("../fetch/webidl"),{kEnumerableProperty:kEnumerableProperty}=require("../../core/util");class CacheStorage{#e=new Map;constructor(){arguments[0]!==kConstruct&&webidl.illegalConstructor(),webidl.util.markAsUncloneable(this)}async match(e,t={}){if(webidl.brandCheck(this,CacheStorage),webidl.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=webidl.converters.RequestInfo(e),null!=(t=webidl.converters.MultiCacheQueryOptions(t)).cacheName){if(this.#e.has(t.cacheName)){const c=this.#e.get(t.cacheName),a=new Cache(kConstruct,c);return await a.match(e,t)}}else for(const c of this.#e.values()){const a=new Cache(kConstruct,c),r=await a.match(e,t);if(void 0!==r)return r}}async has(e){webidl.brandCheck(this,CacheStorage);const t="CacheStorage.has";return webidl.argumentLengthCheck(arguments,1,t),e=webidl.converters.DOMString(e,t,"cacheName"),this.#e.has(e)}async open(e){webidl.brandCheck(this,CacheStorage);const t="CacheStorage.open";if(webidl.argumentLengthCheck(arguments,1,t),e=webidl.converters.DOMString(e,t,"cacheName"),this.#e.has(e)){const t=this.#e.get(e);return new Cache(kConstruct,t)}const c=[];return this.#e.set(e,c),new Cache(kConstruct,c)}async delete(e){webidl.brandCheck(this,CacheStorage);const t="CacheStorage.delete";return webidl.argumentLengthCheck(arguments,1,t),e=webidl.converters.DOMString(e,t,"cacheName"),this.#e.delete(e)}async keys(){webidl.brandCheck(this,CacheStorage);return[...this.#e.keys()]}}Object.defineProperties(CacheStorage.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:kEnumerableProperty,has:kEnumerableProperty,open:kEnumerableProperty,delete:kEnumerableProperty,keys:kEnumerableProperty}),module.exports={CacheStorage:CacheStorage};