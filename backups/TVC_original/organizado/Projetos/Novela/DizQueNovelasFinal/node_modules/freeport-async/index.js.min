const net=require("net"),DEFAULT_PORT_RANGE_START=11e3;function testPortAsync(e,n){return new Promise(function(t,r){var o=net.createServer();o.listen({port:e,host:n},function(e){o.once("close",function(){setTimeout(()=>t(!0),0)}),o.close()}),o.on("error",function(e){setTimeout(()=>t(!1),0)})})}async function availableAsync(e,n={}){const t=n.hostnames&&n.hostnames.length?n.hostnames:[null];for(const n of t)if(!await testPortAsync(e,n))return!1;return!0}function freePortRangeAsync(e,n,t={}){return e=e||1,new Promise((r,o)=>{for(var s=n||11e3,a=[],c=0;c<e;c++)a.push(availableAsync(s+c,t));return Promise.all(a).then(function(n){for(var a=[],c=0;c<n.length;c++){if(!n[c])return freePortRangeAsync(e,s+e,t).then(r,o);a.push(s+c)}r(a)})})}async function freePortAsync(e,n={}){return(await freePortRangeAsync(1,e,n))[0]}module.exports=freePortAsync,module.exports.availableAsync=availableAsync,module.exports.rangeAsync=freePortRangeAsync;