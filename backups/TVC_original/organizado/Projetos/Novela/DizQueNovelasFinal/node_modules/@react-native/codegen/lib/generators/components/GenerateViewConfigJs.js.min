"use strict";const core=require("@babel/core"),t=core.types,FileTemplate=({imports:e,componentConfig:t})=>`\n/**\n * This code was generated by [react-native-codegen](https://www.npmjs.com/package/react-native-codegen).\n *\n * Do not edit this file as changes may cause incorrect behavior and will be lost\n * once the code is regenerated.\n *\n * @flow\n *\n * @generated by codegen project: GenerateViewConfigJs.js\n */\n\n'use strict';\n\n${e}\n\n${t}\n`,UIMANAGER_IMPORT='const {UIManager} = require("react-native")';function expression(e){return core.template.expression(e)()}function getReactDiffProcessValue(e){switch(e.type){case"BooleanTypeAnnotation":case"StringTypeAnnotation":case"Int32TypeAnnotation":case"DoubleTypeAnnotation":case"FloatTypeAnnotation":case"ObjectTypeAnnotation":case"StringEnumTypeAnnotation":case"Int32EnumTypeAnnotation":case"MixedTypeAnnotation":return t.booleanLiteral(!0);case"ReservedPropTypeAnnotation":switch(e.name){case"ColorPrimitive":return expression("{ process: require('react-native/Libraries/StyleSheet/processColor').default }");case"ImageSourcePrimitive":return expression("{ process: ((req) => 'default' in req ? req.default : req)(require('react-native/Libraries/Image/resolveAssetSource')) }");case"ImageRequestPrimitive":throw new Error("ImageRequest should not be used in props");case"PointPrimitive":return expression("{ diff: ((req) => 'default' in req ? req.default : req)(require('react-native/Libraries/Utilities/differ/pointsDiffer')) }");case"EdgeInsetsPrimitive":return expression("{ diff: ((req) => 'default' in req ? req.default : req)(require('react-native/Libraries/Utilities/differ/insetsDiffer')) }");case"DimensionPrimitive":return t.booleanLiteral(!0);default:throw e.name,new Error(`Received unknown native typeAnnotation: "${e.name}"`)}case"ArrayTypeAnnotation":if("ReservedPropTypeAnnotation"===e.elementType.type)switch(e.elementType.name){case"ColorPrimitive":return expression("{ process: ((req) => 'default' in req ? req.default : req)(require('react-native/Libraries/StyleSheet/processColorArray')) }");case"ImageSourcePrimitive":case"PointPrimitive":case"EdgeInsetsPrimitive":case"DimensionPrimitive":return t.booleanLiteral(!0);default:throw new Error(`Received unknown array native typeAnnotation: "${e.elementType.name}"`)}return t.booleanLiteral(!0);default:throw new Error(`Received unknown typeAnnotation: "${e.type}"`)}}const ComponentTemplate=({componentName:e,paperComponentName:t,paperComponentNameDeprecated:n})=>`\nlet nativeComponentName = '${null!=t?t:e}';\n${null!=n?DeprecatedComponentNameCheckTemplate({componentName:e,paperComponentNameDeprecated:n}):""}\n\nexport const __INTERNAL_VIEW_CONFIG = %%VIEW_CONFIG%%;\n\nexport default NativeComponentRegistry.get(nativeComponentName, () => __INTERNAL_VIEW_CONFIG);\n`.trim(),DeprecatedComponentNameCheckTemplate=({componentName:e,paperComponentNameDeprecated:t})=>`\nif (UIManager.hasViewManagerConfig('${e}')) {\n  nativeComponentName = '${e}';\n} else if (UIManager.hasViewManagerConfig('${t}')) {\n  nativeComponentName = '${t}';\n} else {\n  throw new Error('Failed to find native component for either "${e}" or "${t}"');\n}\n`.trim();function normalizeInputEventName(e){return e.startsWith("on")?e.replace(/^on/,"top"):e.startsWith("top")?e:`top${e[0].toUpperCase()}${e.slice(1)}`}function getValidAttributesForEvents(e,n){n.add("const {ConditionallyIgnoredEventHandlers} = require('react-native/Libraries/NativeComponent/ViewConfigIgnore');");const r=t.objectExpression(e.map(e=>t.objectProperty(t.identifier(e.name),t.booleanLiteral(!0))));return t.callExpression(t.identifier("ConditionallyIgnoredEventHandlers"),[r])}function generateBubblingEventInfo(e,n){return t.objectProperty(t.identifier(normalizeInputEventName(n||e.name)),t.objectExpression([t.objectProperty(t.identifier("phasedRegistrationNames"),t.objectExpression([t.objectProperty(t.identifier("captured"),t.stringLiteral(`${e.name}Capture`)),t.objectProperty(t.identifier("bubbled"),t.stringLiteral(e.name))]))]))}function generateDirectEventInfo(e,n){return t.objectProperty(t.identifier(normalizeInputEventName(n||e.name)),t.objectExpression([t.objectProperty(t.identifier("registrationName"),t.stringLiteral(e.name))]))}function buildViewConfig(e,n,r,o){const i=r.props,a=r.events;r.extendsProps.forEach(e=>{if("ReactNativeBuiltInType"===e.type){if("ReactNativeCoreViewProps"===e.knownTypeName)return void o.add("const NativeComponentRegistry = require('react-native/Libraries/NativeComponent/NativeComponentRegistry');");throw e.knownTypeName,new Error("Invalid knownTypeName")}throw e.type,new Error("Invalid extended type")});const s=t.objectExpression([...i.map(e=>t.objectProperty(t.identifier(e.name),getReactDiffProcessValue(e.typeAnnotation))),...a.length>0?[t.spreadElement(getValidAttributesForEvents(a,o))]:[]]),p=r.events.filter(e=>"bubble"===e.bubblingType).reduce((e,t)=>(t.paperTopLevelNameDeprecated?e.push(generateBubblingEventInfo(t,t.paperTopLevelNameDeprecated)):e.push(generateBubblingEventInfo(t)),e),[]),c=r.events.filter(e=>"direct"===e.bubblingType).reduce((e,t)=>(t.paperTopLevelNameDeprecated?e.push(generateDirectEventInfo(t,t.paperTopLevelNameDeprecated)):e.push(generateDirectEventInfo(t)),e),[]),m=[t.objectProperty(t.identifier("uiViewClassName"),t.stringLiteral(n))];return p.length>0&&m.push(t.objectProperty(t.identifier("bubblingEventTypes"),t.objectExpression(p))),c.length>0&&m.push(t.objectProperty(t.identifier("directEventTypes"),t.objectExpression(c))),m.push(t.objectProperty(t.identifier("validAttributes"),s)),t.objectExpression(m)}function buildCommands(e,n,r,o){const i=r.commands;if(0===i.length)return null;o.add('const {dispatchCommand} = require("react-native/Libraries/ReactNative/RendererProxy");');const a=t.objectExpression(i.map(e=>{const n=e.name,r=e.typeAnnotation.params,o=t.callExpression(t.identifier("dispatchCommand"),[t.identifier("ref"),t.stringLiteral(n),t.arrayExpression(r.map(e=>t.identifier(e.name)))]);return t.objectMethod("method",t.identifier(n),[t.identifier("ref"),...r.map(e=>t.identifier(e.name))],t.blockStatement([t.expressionStatement(o)]))}));return t.exportNamedDeclaration(t.variableDeclaration("const",[t.variableDeclarator(t.identifier("Commands"),a)]))}module.exports={generate(e,t){try{const n=`${e}NativeViewConfig.js`,r=new Set,o=Object.keys(t.modules).map(e=>{const n=t.modules[e];if("Component"!==n.type)return;const{components:o}=n;return Object.keys(o).map(e=>{var n;const i=o[e];i.paperComponentNameDeprecated&&r.add(UIMANAGER_IMPORT);const a=ComponentTemplate({componentName:e,paperComponentName:i.paperComponentName,paperComponentNameDeprecated:i.paperComponentNameDeprecated}),s=null!==(n=i.paperComponentName)&&void 0!==n?n:e,p=core.template.program(a)({VIEW_CONFIG:buildViewConfig(t,s,i,r)}),c=buildCommands(t,s,i,r);c&&p.body.push(c);return core.transformFromAstSync(p,void 0,{babelrc:!1,browserslistConfigFile:!1,configFile:!1}).code}).join("\n\n")}).filter(Boolean).join("\n\n"),i=FileTemplate({componentConfig:o,imports:Array.from(r).sort().join("\n")});return new Map([[n,i]])}catch(n){throw console.error(`\nError parsing schema for ${e}\n`),console.error(JSON.stringify(t)),n}}};