"use strict";const passthroughSyntaxPlugins=require("../passthrough-syntax-plugins"),lazyImports=require("./lazy-imports"),EXCLUDED_FIRST_PARTY_PATHS=[/[/\\]node_modules[/\\]/,/[/\\]packages[/\\]react-native[/\\]/,/[/\\]packages[/\\]virtualized-lists[/\\]/,/[/\\]private[/\\]react-native-fantom[/\\]/];function isTypeScriptSource(e){return!!e&&e.endsWith(".ts")}function isTSXSource(e){return!!e&&e.endsWith(".tsx")}function isFirstParty(e){return!!e&&!EXCLUDED_FIRST_PARTY_PATHS.some(r=>r.test(e))}const loose=!0,getPreset=(e,r)=>{const s=r&&r.unstable_transformProfile||"default",n="hermes-stable"===s,t="hermes-canary"===s,a=n||t,i=null==e,u=i||-1!==e.indexOf("class"),l=[],o=[];if(r.useTransformReactJSXExperimental||l.push([require("@babel/plugin-transform-react-jsx"),{runtime:"automatic"}]),r.disableStaticViewConfigsCodegen||null!==e&&!/\bcodegenNativeComponent</.test(e)||l.push([require("@react-native/babel-plugin-codegen")]),r&&r.disableImportExportTransform||l.push([require("@babel/plugin-proposal-export-default-from")],[require("@babel/plugin-transform-modules-commonjs"),{strict:!1,strictMode:!1,lazy:r&&null!=r.lazyImportExportTransform?r.lazyImportExportTransform:e=>lazyImports.has(e),allowTopLevelThis:!0}]),u&&l.push([require("@babel/plugin-transform-classes")]),a||!i&&!e.includes("=>")||l.push([require("@babel/plugin-transform-arrow-functions")]),a?(l.push([require("@babel/plugin-transform-named-capturing-groups-regex")]),t&&l.push([require("@babel/plugin-transform-optional-catch-binding")])):(l.push([require("@babel/plugin-transform-computed-properties")]),l.push([require("@babel/plugin-transform-parameters")]),l.push([require("@babel/plugin-transform-shorthand-properties")]),l.push([require("@babel/plugin-transform-optional-catch-binding")]),l.push([require("@babel/plugin-transform-function-name")]),l.push([require("@babel/plugin-transform-literals")]),l.push([require("@babel/plugin-transform-numeric-separator")]),l.push([require("@babel/plugin-transform-sticky-regex")])),l.push([require("@babel/plugin-transform-destructuring"),{useBuiltIns:!0}]),a||!i&&!u&&-1===e.indexOf("...")||l.push([require("@babel/plugin-transform-spread")],[require("@babel/plugin-transform-object-rest-spread"),{loose:!0,useBuiltIns:!0}]),(i||-1!==e.indexOf("async"))&&(l.push([require("@babel/plugin-transform-async-generator-functions")]),l.push([require("@babel/plugin-transform-async-to-generator")])),(i||-1!==e.indexOf("React.createClass")||-1!==e.indexOf("createReactClass"))&&l.push([require("@babel/plugin-transform-react-display-name")]),n||!i&&-1===e.indexOf("?.")||l.push([require("@babel/plugin-transform-optional-chaining"),{loose:!0}]),n||!i&&-1===e.indexOf("??")||l.push([require("@babel/plugin-transform-nullish-coalescing-operator"),{loose:!0}]),a||!i&&-1===e.indexOf("??=")&&-1===e.indexOf("||=")&&-1===e.indexOf("&&=")||l.push([require("@babel/plugin-transform-logical-assignment-operators"),{loose:!0}]),r&&r.dev&&!r.disableDeepImportWarnings&&o.push([require("../plugin-warn-on-deep-imports.js")]),r&&r.dev&&!r.useTransformReactJSXExperimental&&(l.push([require("@babel/plugin-transform-react-jsx-source")]),l.push([require("@babel/plugin-transform-react-jsx-self")])),t){(i||-1!==e.indexOf("for")&&-1!==e.indexOf("of"))&&l.push([require("@babel/plugin-transform-for-of"),{loose:!0}])}if(r&&!1===r.enableBabelRuntime)t&&l.push([require("@babel/plugin-transform-regenerator")]);else{const e="string"==typeof r?.enableBabelRuntime;l.push([require("@babel/plugin-transform-runtime"),{helpers:!0,regenerator:!n,...e&&{version:r.enableBabelRuntime}}])}return{comments:!1,compact:!1!==r.compact,overrides:[{plugins:[require("@babel/plugin-transform-flow-strip-types")]},{plugins:[[require("babel-plugin-syntax-hermes-parser"),{parseLangTypes:"flow",reactRuntimeTarget:"19",...r.hermesParserOptions}],[require("babel-plugin-transform-flow-enums")],[require("@babel/plugin-transform-block-scoping")],[require("@babel/plugin-transform-class-properties"),{loose:true}],[require("@babel/plugin-transform-private-methods"),{loose:true}],[require("@babel/plugin-transform-private-property-in-object"),{loose:true}],[require("@babel/plugin-syntax-dynamic-import")],[require("@babel/plugin-syntax-export-default-from")],...passthroughSyntaxPlugins,[require("@babel/plugin-transform-unicode-regex")]]},{test:isTypeScriptSource,plugins:[[require("@babel/plugin-transform-typescript"),{isTSX:!1,allowNamespaces:!0}]]},{test:isTSXSource,plugins:[[require("@babel/plugin-transform-typescript"),{isTSX:!0,allowNamespaces:!0}]]},{test:isFirstParty,plugins:o},{plugins:l}]}};module.exports=e=>{if(null==e.withDevTools){const r=process.env.BABEL_ENV||process.env.NODE_ENV;if(!r||"development"===r)return getPreset(null,{...e,dev:!0})}return getPreset(null,e)},module.exports.getPreset=getPreset;