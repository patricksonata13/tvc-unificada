"use strict";function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}const{capitalize:capitalize}=require("../../Utils");class PojoCollector{constructor(){_defineProperty(this,"_pojos",new Map)}process(e,t,n){switch(n.type){case"ObjectTypeAnnotation":return this._insertPojo(e,t,n),{type:"PojoTypeAliasTypeAnnotation",name:t};case"ArrayTypeAnnotation":{const o=n.elementType;return{type:"ArrayTypeAnnotation",elementType:(()=>{switch(o.type){case"ObjectTypeAnnotation":return this._insertPojo(e,`${t}Element`,o),{type:"PojoTypeAliasTypeAnnotation",name:`${t}Element`};case"ArrayTypeAnnotation":{const{elementType:n}=o;return this._insertPojo(e,`${t}ElementElement`,n),{type:"ArrayTypeAnnotation",elementType:{type:"PojoTypeAliasTypeAnnotation",name:`${t}ElementElement`}}}default:return o}})()}}default:return n}}_insertPojo(e,t,n){const o=n.properties.map(n=>{const o=t+capitalize(n.name);return{...n,typeAnnotation:this.process(e,o,n.typeAnnotation)}});this._pojos.set(t,{name:t,namespace:e,properties:o})}getAllPojos(){return[...this._pojos.values()]}}module.exports=PojoCollector;