import*as e from"../../../core/common/common.js";import*as i from"../../../models/extensions/extensions.js";let n=null;class t extends e.ObjectWrapper.ObjectWrapper{static instance(){return n||(n=new t),n}#e=new Map;constructor(){super(),this.attach()}attach(){const e=i.RecorderPluginManager.RecorderPluginManager.instance();e.addEventListener("pluginAdded",this.#t),e.addEventListener("pluginRemoved",this.#t),e.addEventListener("viewRegistered",this.#n);for(const t of e.views())this.#n({data:t})}detach(){const e=i.RecorderPluginManager.RecorderPluginManager.instance();e.removeEventListener("pluginAdded",this.#t),e.removeEventListener("pluginRemoved",this.#t),e.removeEventListener("viewRegistered",this.#n),this.#e.clear()}extensions(){return i.RecorderPluginManager.RecorderPluginManager.instance().plugins()}getView(e){const t=this.#e.get(e);if(!t)throw new Error("View not found");return t}#t=()=>{this.dispatchEventToListeners("extensionsUpdated",this.extensions())};#n=e=>{const t=e.data;this.#e.has(t.id)||this.#e.set(t.id,new s(t))}}class s{#s;#i;#r=!1;#o=!1;constructor(e){this.#s=e,this.#i=document.createElement("iframe"),this.#i.src=e.pagePath,this.#i.onload=this.#a}#a=()=>{this.#o=!0,this.#r&&this.#s.onShown()};show(){this.#r||(this.#r=!0,this.#o&&this.#s.onShown())}hide(){this.#r&&(this.#r=!1,this.#o=!1,this.#s.onHidden())}frame(){return this.#i}}var r=Object.freeze({__proto__:null,ExtensionManager:t});export{r as ExtensionManager};