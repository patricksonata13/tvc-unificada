"use strict";const{IncludeTemplate:IncludeTemplate,convertDefaultTypeToString:convertDefaultTypeToString,getImports:getImports,getSourceProp:getSourceProp,isWrappedPropType:isWrappedPropType}=require("./CppHelpers"),FileTemplate=({imports:e,componentClasses:n,headerPrefix:t})=>`\n/**\n * This code was generated by [react-native-codegen](https://www.npmjs.com/package/react-native-codegen).\n *\n * Do not edit this file as changes may cause incorrect behavior and will be lost\n * once the code is regenerated.\n *\n * @generated by codegen project: GeneratePropsCpp.js\n */\n\n${IncludeTemplate({headerPrefix:t,file:"Props.h"})}\n${e}\n\nnamespace facebook::react {\n\n${n}\n\n} // namespace facebook::react\n`,ComponentTemplate=({className:e,extendClasses:n,props:t,diffProps:r})=>`\n${e}::${e}(\n    const PropsParserContext &context,\n    const ${e} &sourceProps,\n    const RawProps &rawProps):${n}\n\n    ${t} {}\n    ${r}\n\n`.trim();function generatePropsDiffString(e,n,t){return`\n#ifdef RN_SERIALIZABLE_STATE\nComponentName ${e}::getDiffPropsImplementationTarget() const {\n  return "${n}";\n}\n\nfolly::dynamic ${e}::getDiffProps(\n    const Props* prevProps) const {\n  static const auto defaultProps = ${e}();\n  const ${e}* oldProps = prevProps == nullptr\n      ? &defaultProps\n      : static_cast<const ${e}*>(prevProps);\n  if (this == oldProps) {\n    return folly::dynamic::object();\n  }\n  folly::dynamic result = HostPlatformViewProps::getDiffProps(prevProps);\n  ${t.props.map(e=>{const n=e.typeAnnotation;switch(n.type){case"StringTypeAnnotation":case"Int32TypeAnnotation":case"BooleanTypeAnnotation":case"MixedTypeAnnotation":return`\n  if (${e.name} != oldProps->${e.name}) {\n    result["${e.name}"] = ${e.name};\n  }`;case"DoubleTypeAnnotation":case"FloatTypeAnnotation":return`\n  if ((${e.name} != oldProps->${e.name}) && !(std::isnan(${e.name}) && std::isnan(oldProps->${e.name}))) {\n    result["${e.name}"] = ${e.name};\n  }`;case"ArrayTypeAnnotation":case"ObjectTypeAnnotation":case"StringEnumTypeAnnotation":case"Int32EnumTypeAnnotation":return`\n  if (${e.name} != oldProps->${e.name}) {\n    result["${e.name}"] = toDynamic(${e.name});\n  }`;case"ReservedPropTypeAnnotation":switch(n.name){case"ColorPrimitive":return`\n  if (${e.name} != oldProps->${e.name}) {\n    result["${e.name}"] = *${e.name};\n  }`;case"ImageSourcePrimitive":case"PointPrimitive":case"EdgeInsetsPrimitive":case"DimensionPrimitive":return`\n  if (${e.name} != oldProps->${e.name}) {\n    result["${e.name}"] = toDynamic(${e.name});\n  }`;case"ImageRequestPrimitive":throw new Error("ImageRequestPrimitive should not be used in Props");default:throw n.name,new Error("Received unknown ReservedPropTypeAnnotation")}default:return""}}).join("\n    ")}\n  return result;\n}\n#endif`}function generatePropsString(e,n){return n.props.map(n=>{const t=getSourceProp(e,n),r=convertDefaultTypeToString(e,n),o=isWrappedPropType(n);let a=`convertRawProp(context, rawProps, "${n.name}", ${t}, {${r}})`;return o&&(a+=".value"),`${n.name}(${a})`}).join(",\n    ")}function getClassExtendString(e){return" "+e.extendsProps.map(e=>{if("ReactNativeBuiltInType"===e.type){if("ReactNativeCoreViewProps"===e.knownTypeName)return"ViewProps(context, sourceProps, rawProps)";throw e.knownTypeName,new Error("Invalid knownTypeName")}throw e.type,new Error("Invalid extended type")}).join(", ")+(e.props.length>0?",":"")}module.exports={generate(e,n,t,r=!1,o){const a=new Set(["#include <react/renderer/core/propsConversions.h>","#include <react/renderer/core/PropsParserContext.h>"]),s=Object.keys(n.modules).map(e=>{const t=n.modules[e];if("Component"!==t.type)return;const{components:r}=t;return null==r?null:Object.keys(r).map(e=>{const n=r[e],t=`${e}Props`,o=generatePropsString(e,n),s=getClassExtendString(n),p=generatePropsDiffString(t,e,n);getImports(n.props).forEach(a.add,a);return ComponentTemplate({className:t,extendClasses:s,props:o,diffProps:p})}).join("\n")}).filter(Boolean).join("\n"),p=FileTemplate({componentClasses:s,imports:Array.from(a).sort().join("\n").trim(),headerPrefix:null!=o?o:""});return new Map([["Props.cpp",p]])}};