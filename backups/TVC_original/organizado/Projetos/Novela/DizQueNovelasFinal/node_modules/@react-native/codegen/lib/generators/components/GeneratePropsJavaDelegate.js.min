"use strict";const{getDelegateJavaClassName:getDelegateJavaClassName,getImports:getImports,getInterfaceJavaClassName:getInterfaceJavaClassName,toSafeJavaString:toSafeJavaString}=require("./JavaHelpers"),FileTemplate=({packageName:e,imports:a,className:n,extendClasses:t,interfaceClassName:r,methods:o})=>`/**\n* This code was generated by [react-native-codegen](https://www.npmjs.com/package/react-native-codegen).\n*\n* Do not edit this file as changes may cause incorrect behavior and will be lost\n* once the code is regenerated.\n*\n* @generated by codegen project: GeneratePropsJavaDelegate.js\n*/\n\npackage ${e};\n\n${a}\n\npublic class ${n}<T extends ${t}, U extends BaseViewManager<T, ? extends LayoutShadowNode> & ${r}<T>> extends BaseViewManagerDelegate<T, U> {\n  public ${n}(U viewManager) {\n    super(viewManager);\n  }\n  ${o}\n}\n`,PropSetterTemplate=({propCases:e})=>`\n  @Override\n  public void setProperty(T view, String propName, @Nullable Object value) {\n    ${e}\n  }\n`.trim(),CommandsTemplate=({commandCases:e})=>`\n  @Override\n  public void receiveCommand(T view, String commandName, ReadableArray args) {\n    switch (commandName) {\n      ${e}\n    }\n  }\n`.trim();function getJavaValueForProp(e,a){const n=e.typeAnnotation;switch(n.type){case"BooleanTypeAnnotation":return null===n.default?"value == null ? null : (Boolean) value":`value == null ? ${n.default.toString()} : (boolean) value`;case"StringTypeAnnotation":return`value == null ? ${null===n.default?"null":`"${n.default}"`} : (String) value`;case"Int32TypeAnnotation":return`value == null ? ${n.default} : ((Double) value).intValue()`;case"DoubleTypeAnnotation":return e.optional?`value == null ? ${n.default}f : ((Double) value).doubleValue()`:"value == null ? Double.NaN : ((Double) value).doubleValue()";case"FloatTypeAnnotation":return null===n.default?"value == null ? null : ((Double) value).floatValue()":e.optional?`value == null ? ${n.default}f : ((Double) value).floatValue()`:"value == null ? Float.NaN : ((Double) value).floatValue()";case"ReservedPropTypeAnnotation":switch(n.name){case"ColorPrimitive":return"ColorPropConverter.getColor(value, view.getContext())";case"ImageSourcePrimitive":case"ImageRequestPrimitive":case"PointPrimitive":case"EdgeInsetsPrimitive":return"(ReadableMap) value";case"DimensionPrimitive":return"DimensionPropConverter.getDimension(value)";default:throw n.name,new Error("Received unknown ReservedPropTypeAnnotation")}case"ArrayTypeAnnotation":return"(ReadableArray) value";case"ObjectTypeAnnotation":return"(ReadableMap) value";case"StringEnumTypeAnnotation":return"(String) value";case"Int32EnumTypeAnnotation":return`value == null ? ${n.default} : ((Double) value).intValue()`;case"MixedTypeAnnotation":return"new DynamicFromObject(value)";default:throw new Error("Received invalid typeAnnotation")}}function generatePropCasesString(e,a){if(0===e.props.length)return"super.setProperty(view, propName, value);";return`switch (propName) {\n      ${e.props.map(e=>`case "${e.name}":\n        mViewManager.set${toSafeJavaString(e.name)}(view, ${getJavaValueForProp(e,a)});\n        break;`).join("\n      ")}\n      default:\n        super.setProperty(view, propName, value);\n    }`}function getCommandArgJavaType(e,a){const{typeAnnotation:n}=e;switch(n.type){case"ReservedTypeAnnotation":if("RootTag"===n.name)return`args.getDouble(${a})`;throw n.name,new Error(`Receieved invalid type: ${n.name}`);case"BooleanTypeAnnotation":return`args.getBoolean(${a})`;case"DoubleTypeAnnotation":return`args.getDouble(${a})`;case"FloatTypeAnnotation":return`(float) args.getDouble(${a})`;case"Int32TypeAnnotation":return`args.getInt(${a})`;case"StringTypeAnnotation":return`args.getString(${a})`;case"ArrayTypeAnnotation":return`args.getArray(${a})`;default:throw n.type,new Error(`Receieved invalid type: ${n.type}`)}}function getCommandArguments(e){return["view",...e.typeAnnotation.params.map(getCommandArgJavaType)].join(", ")}function generateCommandCasesString(e,a){if(0===e.commands.length)return null;return e.commands.map(e=>`case "${e.name}":\n        mViewManager.${toSafeJavaString(e.name,!1)}(${getCommandArguments(e)});\n        break;`).join("\n      ")}function getClassExtendString(e){return e.extendsProps.map(e=>{if("ReactNativeBuiltInType"===e.type){if("ReactNativeCoreViewProps"===e.knownTypeName)return"View";throw e.knownTypeName,new Error("Invalid knownTypeName")}throw e.type,new Error("Invalid extended type")}).join("")}function getDelegateImports(e){const a=getImports(e,"delegate");return e.commands.length>0&&a.add("import com.facebook.react.bridge.ReadableArray;"),a.add("import androidx.annotation.Nullable;"),a.add("import com.facebook.react.uimanager.BaseViewManagerDelegate;"),a.add("import com.facebook.react.uimanager.BaseViewManager;"),a.add("import com.facebook.react.uimanager.LayoutShadowNode;"),a}function generateMethods(e,a){return[PropSetterTemplate({propCases:e}),null!=a?CommandsTemplate({commandCases:a}):""].join("\n\n  ").trimRight()}module.exports={generate(e,a,n,t=!1,r){const o="com.facebook.react.viewmanagers",l=`java/${o.replace(/\./g,"/")}`,i=new Map;return Object.keys(a.modules).forEach(e=>{const n=a.modules[e];if("Component"!==n.type)return;const{components:t}=n;return null!=t?Object.keys(t).filter(e=>{const a=t[e];return!(a.excludedPlatforms&&a.excludedPlatforms.includes("android"))}).forEach(e=>{const a=t[e],n=getDelegateJavaClassName(e),r=getInterfaceJavaClassName(e),s=getDelegateImports(a),u=generatePropCasesString(a,e),m=generateCommandCasesString(a,e),c=getClassExtendString(a),p=FileTemplate({imports:Array.from(s).sort().join("\n"),packageName:o,className:n,extendClasses:c,methods:generateMethods(u,m),interfaceClassName:r});i.set(`${l}/${n}.java`,p)}):void 0}),i}};