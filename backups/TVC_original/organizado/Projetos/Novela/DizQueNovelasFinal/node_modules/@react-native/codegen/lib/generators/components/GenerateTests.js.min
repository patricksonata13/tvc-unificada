"use strict";const{toSafeCppString:toSafeCppString}=require("../Utils"),{getImports:getImports}=require("./CppHelpers"),FileTemplate=({libraryName:e,imports:r,componentTests:t})=>`\n/**\n * This code was generated by [react-native-codegen](https://www.npmjs.com/package/react-native-codegen).\n *\n * Do not edit this file as changes may cause incorrect behavior and will be lost\n * once the code is regenerated.\n *\n * @generated by codegen project: GenerateTests.js\n * */\n\n#include <gtest/gtest.h>\n#include <react/renderer/core/PropsParserContext.h>\n#include <react/renderer/components/${e}/Props.h>\n${r}\n\nusing namespace facebook::react;\n${t}\n`.trim(),TestTemplate=({componentName:e,testName:r,propName:t,propValue:n})=>`\nTEST(${e}_${r}, etc) {\n  auto propParser = RawPropsParser();\n  propParser.prepare<${e}>();\n  auto const &sourceProps = ${e}();\n  auto const &rawProps = RawProps(folly::dynamic::object("${t}", ${n}));\n\n  ContextContainer contextContainer{};\n  PropsParserContext parserContext{-1, contextContainer};\n\n  rawProps.parse(propParser, parserContext);\n  ${e}(parserContext, sourceProps, rawProps);\n}\n`;function getTestCasesForProp(e,r){const t=[];return"StringEnumTypeAnnotation"===r.type?r.options.forEach(r=>t.push({propName:e,testName:`${e}_${toSafeCppString(r)}`,propValue:r})):"StringTypeAnnotation"===r.type?t.push({propName:e,propValue:null!=r.default&&""!==r.default?r.default:"foo"}):"BooleanTypeAnnotation"===r.type?t.push({propName:e,propValue:null==r.default||r.default}):"IntegerTypeAnnotation"===r.type?t.push({propName:e,propValue:r.default||10}):"FloatTypeAnnotation"===r.type?t.push({propName:e,propValue:null!=r.default?r.default:.1}):"ReservedPropTypeAnnotation"===r.type&&("ColorPrimitive"===r.name?t.push({propName:e,propValue:1}):"PointPrimitive"===r.name?t.push({propName:e,propValue:'folly::dynamic::object("x", 1)("y", 1)',raw:!0}):"ImageSourcePrimitive"===r.name&&t.push({propName:e,propValue:'folly::dynamic::object("url", "testurl")',raw:!0})),t}function generateTestsString(e,r){return[{testName:"DoesNotDie",propName:"xx_invalid_xx",propValue:"xx_invalid_xx"},...r.props.reduce((e,r)=>e.concat(getTestCasesForProp(r.name,r.typeAnnotation)),[])].map(function({testName:r,propName:t,propValue:n,raw:o=!1}){return TestTemplate({componentName:e,testName:null!=r?r:t,propName:t,propValue:String(o||"string"!=typeof n?n:`"${n}"`)})}).join("")}module.exports={generate(e,r,t,n=!1,o){const p=new Set(["#include <react/renderer/core/propsConversions.h>","#include <react/renderer/core/RawProps.h>","#include <react/renderer/core/RawPropsParser.h>"]),a=Object.keys(r.modules).map(e=>{const t=r.modules[e];if("Component"!==t.type)return;const{components:n}=t;return null==n?null:Object.keys(n).map(e=>{const r=n[e],t=`${e}Props`;return getImports(r.props).forEach(p.add,p),generateTestsString(t,r)}).join("")}).filter(Boolean).join(""),s=Array.from(p).sort().join("\n").trim(),i=FileTemplate({imports:s,libraryName:e,componentTests:a});return new Map([["Tests.cpp",i]])}};