"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformProgram=transformProgram;var _SimpleTransform=require("../transform/SimpleTransform"),_createSyntaxError=require("../utils/createSyntaxError");const nodeWith=_SimpleTransform.SimpleTransform.nodeWith,EMPTY_PARENT=null;function createSimpleGenericTypeAnnotation(e,n){return{type:"GenericTypeAnnotation",id:{type:"Identifier",name:e,optional:!1,typeAnnotation:null,loc:n.loc,range:n.range,parent:null},typeParameters:null,loc:n.loc,range:n.range,parent:n.parent}}function createAnyTypeAnnotation(e){return{type:"AnyTypeAnnotation",loc:e.loc,range:e.range,parent:e.parent}}function mapDeclareEnum(e){return{type:"DeclareVariable",kind:"const",id:nodeWith(e.id,{typeAnnotation:{type:"TypeAnnotation",typeAnnotation:createAnyTypeAnnotation(e.body),loc:e.body.loc,range:e.body.range,parent:null}}),loc:e.loc,range:e.range,parent:e.parent}}function mapDeclareNamespace(e){return{type:"DeclareVariable",kind:"const",id:nodeWith(e.id,{typeAnnotation:{type:"TypeAnnotation",typeAnnotation:createAnyTypeAnnotation(e.body),loc:e.body.loc,range:e.body.range,parent:null}}),loc:e.loc,range:e.range,parent:e.parent}}function mapFunction(e){return 0!==e.params.length&&"this"===e.params[0].name?nodeWith(e,{params:e.params.slice(1)}):e}function mapQualifiedTypeofIdentifier(e){return{type:"QualifiedTypeIdentifier",qualification:"QualifiedTypeofIdentifier"===e.qualification.type?mapQualifiedTypeofIdentifier(e.qualification):e.qualification,id:e.id,loc:e.loc,range:e.range,parent:e.parent}}function transformProgram(e,n){return _SimpleTransform.SimpleTransform.transformProgram(e,{transform(e){switch(e.type){case"SymbolTypeAnnotation":return createSimpleGenericTypeAnnotation("symbol",e);case"BigIntTypeAnnotation":return createSimpleGenericTypeAnnotation("bigint",e);case"ObjectTypeAnnotation":return e.properties.some(e=>"ObjectTypeMappedTypeProperty"===e.type)?createAnyTypeAnnotation(e):e;case"ObjectTypeMappedTypeProperty":throw(0,_createSyntaxError.createSyntaxError)(e,"Invalid AST structure, ObjectTypeMappedTypeProperty found outside of an ObjectTypeAnnotation");case"IndexedAccessType":case"OptionalIndexedAccessType":case"KeyofTypeAnnotation":case"ConditionalTypeAnnotation":case"InferTypeAnnotation":case"TupleTypeLabeledElement":case"TupleTypeSpreadElement":case"ComponentTypeAnnotation":case"HookTypeAnnotation":case"TypeOperator":case"TypePredicate":return createAnyTypeAnnotation(e);case"QualifiedTypeofIdentifier":return mapQualifiedTypeofIdentifier(e);case"DeclareEnum":return mapDeclareEnum(e);case"DeclareNamespace":return mapDeclareNamespace(e);case"FunctionDeclaration":case"FunctionExpression":return mapFunction(e);default:return e}}})}