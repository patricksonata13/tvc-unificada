import*as e from"../common/common.js";import*as t from"../../models/text_utils/text_utils.js";import*as n from"../i18n/i18n.js";import*as r from"../platform/platform.js";import{assertNotNullOrUndefined as s,UserVisibleError as i}from"../platform/platform.js";import*as o from"../root/root.js";import*as a from"../host/host.js";import*as l from"../protocol_client/protocol_client.js";import*as d from"../../third_party/codemirror.next/codemirror.next.js";const c=new Map;class h extends e.ObjectWrapper.ObjectWrapper{#e;constructor(e){super(),this.#e=e}target(){return this.#e}async preSuspendModel(e){}async suspendModel(e){}async resumeModel(){}async postResumeModel(){}dispose(){}static register(e,t){if(t.early&&!t.autostart)throw new Error(`Error registering model ${e.name}: early models must be autostarted.`);c.set(e,t)}static get registeredModels(){return c}}var u=Object.freeze({__proto__:null,SDKModel:h});const g=[{inherited:!0,name:"-webkit-border-horizontal-spacing"},{name:"-webkit-border-image"},{inherited:!0,name:"-webkit-border-vertical-spacing"},{keywords:["stretch","start","center","end","baseline"],name:"-webkit-box-align"},{keywords:["slice","clone"],name:"-webkit-box-decoration-break"},{keywords:["normal","reverse"],name:"-webkit-box-direction"},{name:"-webkit-box-flex"},{name:"-webkit-box-ordinal-group"},{keywords:["horizontal","vertical"],name:"-webkit-box-orient"},{keywords:["start","center","end","justify"],name:"-webkit-box-pack"},{name:"-webkit-box-reflect"},{longhands:["break-after"],name:"-webkit-column-break-after"},{longhands:["break-before"],name:"-webkit-column-break-before"},{longhands:["break-inside"],name:"-webkit-column-break-inside"},{inherited:!0,name:"-webkit-font-smoothing"},{inherited:!0,keywords:["auto","loose","normal","strict","after-white-space","anywhere"],name:"-webkit-line-break"},{keywords:["none"],name:"-webkit-line-clamp"},{inherited:!0,name:"-webkit-locale"},{longhands:["-webkit-mask-box-image-source","-webkit-mask-box-image-slice","-webkit-mask-box-image-width","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat"],name:"-webkit-mask-box-image"},{name:"-webkit-mask-box-image-outset"},{name:"-webkit-mask-box-image-repeat"},{name:"-webkit-mask-box-image-slice"},{name:"-webkit-mask-box-image-source"},{name:"-webkit-mask-box-image-width"},{name:"-webkit-mask-position-x"},{name:"-webkit-mask-position-y"},{name:"-webkit-perspective-origin-x"},{name:"-webkit-perspective-origin-y"},{inherited:!0,keywords:["logical","visual"],name:"-webkit-rtl-ordering"},{inherited:!0,name:"-webkit-ruby-position"},{inherited:!0,name:"-webkit-tap-highlight-color"},{inherited:!0,name:"-webkit-text-combine"},{inherited:!0,name:"-webkit-text-decorations-in-effect"},{inherited:!0,name:"-webkit-text-fill-color"},{inherited:!0,name:"-webkit-text-orientation"},{inherited:!0,keywords:["none","disc","circle","square"],name:"-webkit-text-security"},{inherited:!0,longhands:["-webkit-text-stroke-width","-webkit-text-stroke-color"],name:"-webkit-text-stroke"},{inherited:!0,name:"-webkit-text-stroke-color"},{inherited:!0,name:"-webkit-text-stroke-width"},{name:"-webkit-transform-origin-x"},{name:"-webkit-transform-origin-y"},{name:"-webkit-transform-origin-z"},{keywords:["auto","none","element"],name:"-webkit-user-drag"},{inherited:!0,keywords:["read-only","read-write","read-write-plaintext-only"],name:"-webkit-user-modify"},{inherited:!0,name:"-webkit-writing-mode"},{inherited:!0,keywords:["auto","currentcolor"],name:"accent-color"},{name:"additive-symbols"},{name:"align-content"},{name:"align-items"},{name:"align-self"},{keywords:["auto","baseline","alphabetic","ideographic","middle","central","mathematical","before-edge","text-before-edge","after-edge","text-after-edge","hanging"],name:"alignment-baseline"},{longhands:["-webkit-border-horizontal-spacing","-webkit-border-vertical-spacing","-webkit-box-align","-webkit-box-decoration-break","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-reflect","-webkit-font-smoothing","-webkit-line-break","-webkit-line-clamp","-webkit-locale","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat","-webkit-mask-box-image-slice","-webkit-mask-box-image-source","-webkit-mask-box-image-width","-webkit-mask-position-x","-webkit-mask-position-y","-webkit-rtl-ordering","-webkit-ruby-position","-webkit-tap-highlight-color","-webkit-text-combine","-webkit-text-decorations-in-effect","-webkit-text-fill-color","-webkit-text-orientation","-webkit-text-security","-webkit-text-stroke-color","-webkit-text-stroke-width","-webkit-user-drag","-webkit-writing-mode","accent-color","additive-symbols","align-content","align-items","align-self","alignment-baseline","anchor-name","anchor-scope","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","animation-trigger-exit-range-end","animation-trigger-exit-range-start","animation-trigger-range-end","animation-trigger-range-start","animation-trigger-timeline","animation-trigger-type","app-region","appearance","ascent-override","aspect-ratio","backdrop-filter","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position-x","background-position-y","background-repeat","background-size","base-palette","baseline-shift","baseline-source","block-size","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start-color","border-block-start-style","border-block-start-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-start-end-radius","border-start-start-radius","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","buffered-rendering","caption-side","caret-animation","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","color-scheme","column-count","column-fill","column-gap","column-height","column-rule-break","column-rule-color","column-rule-outset","column-rule-style","column-rule-width","column-span","column-width","column-wrap","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-width","container-name","container-type","content","content-visibility","corner-bottom-left-shape","corner-bottom-right-shape","corner-end-end-shape","corner-end-start-shape","corner-start-end-shape","corner-start-start-shape","corner-top-left-shape","corner-top-right-shape","counter-increment","counter-reset","counter-set","cursor","cx","cy","d","descent-override","display","dominant-baseline","dynamic-range-limit","empty-cells","fallback","field-sizing","fill","fill-opacity","fill-rule","filter","flex-basis","flex-direction","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","font-display","font-family","font-feature-settings","font-kerning","font-optical-sizing","font-palette","font-size","font-size-adjust","font-stretch","font-style","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap-rule-paint-order","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column-end","grid-column-start","grid-row-end","grid-row-start","grid-template-areas","grid-template-columns","grid-template-rows","height","hyphenate-character","hyphenate-limit-chars","hyphens","image-orientation","image-rendering","inherits","initial-letter","initial-value","inline-size","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","interactivity","interest-target-hide-delay","interest-target-show-delay","interpolate-size","isolation","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-clamp","line-gap-override","line-height","list-style-image","list-style-position","list-style-type","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marker-end","marker-mid","marker-start","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-repeat","mask-size","mask-type","masonry-auto-tracks","masonry-direction","masonry-fill","masonry-slack","masonry-template-tracks","masonry-track-end","masonry-track-start","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","navigation","negative","object-fit","object-position","object-view-box","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","origin-trial-test-property","orphans","outline-color","outline-offset","outline-style","outline-width","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","override-colors","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","pad","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-orientation","paint-order","perspective","perspective-origin","pointer-events","position","position-anchor","position-area","position-try-fallbacks","position-try-order","position-visibility","prefix","print-color-adjust","quotes","r","range","reading-flow","reading-order","resize","result","right","rotate","row-gap","row-rule-break","row-rule-color","row-rule-outset","row-rule-style","row-rule-width","ruby-align","ruby-position","rx","ry","scale","scroll-behavior","scroll-initial-target","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-marker-contain","scroll-marker-group","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-start-block","scroll-start-inline","scroll-start-x","scroll-start-y","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","size","size-adjust","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","suffix","symbols","syntax","system","tab-size","table-layout","text-align","text-align-last","text-anchor","text-autospace","text-box-edge","text-box-trim","text-combine-upright","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-spacing-trim","text-transform","text-underline-offset","text-underline-position","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","types","unicode-range","user-select","vector-effect","vertical-align","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-class","view-transition-group","view-transition-name","visibility","white-space-collapse","widows","width","will-change","word-break","word-spacing","writing-mode","x","y","z-index","zoom"],name:"all"},{keywords:["none"],name:"anchor-name"},{keywords:["none","all"],name:"anchor-scope"},{longhands:["animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state","animation-name","animation-timeline","animation-range-start","animation-range-end"],name:"animation"},{keywords:["replace","add","accumulate"],name:"animation-composition"},{name:"animation-delay"},{keywords:["normal","reverse","alternate","alternate-reverse"],name:"animation-direction"},{name:"animation-duration"},{keywords:["none","forwards","backwards","both"],name:"animation-fill-mode"},{keywords:["infinite"],name:"animation-iteration-count"},{keywords:["none"],name:"animation-name"},{keywords:["running","paused"],name:"animation-play-state"},{longhands:["animation-range-start","animation-range-end"],name:"animation-range"},{name:"animation-range-end"},{name:"animation-range-start"},{keywords:["none","auto"],name:"animation-timeline"},{keywords:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"],name:"animation-timing-function"},{longhands:["animation-trigger-timeline","animation-trigger-type","animation-trigger-range-start","animation-trigger-range-end","animation-trigger-exit-range-start","animation-trigger-exit-range-end"],name:"animation-trigger"},{longhands:["animation-trigger-exit-range-start","animation-trigger-exit-range-end"],name:"animation-trigger-exit-range"},{name:"animation-trigger-exit-range-end"},{name:"animation-trigger-exit-range-start"},{longhands:["animation-trigger-range-start","animation-trigger-range-end"],name:"animation-trigger-range"},{name:"animation-trigger-range-end"},{name:"animation-trigger-range-start"},{keywords:["none","auto"],name:"animation-trigger-timeline"},{keywords:["once","repeat","alternate","state"],name:"animation-trigger-type"},{keywords:["none","drag","no-drag"],name:"app-region"},{name:"appearance"},{name:"ascent-override"},{keywords:["auto"],name:"aspect-ratio"},{keywords:["none"],name:"backdrop-filter"},{keywords:["visible","hidden"],name:"backface-visibility"},{longhands:["background-image","background-position-x","background-position-y","background-size","background-repeat","background-attachment","background-origin","background-clip","background-color"],name:"background"},{keywords:["scroll","fixed","local"],name:"background-attachment"},{keywords:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],name:"background-blend-mode"},{keywords:["border-box","padding-box","content-box","text"],name:"background-clip"},{keywords:["currentcolor"],name:"background-color"},{keywords:["auto","none"],name:"background-image"},{keywords:["border-box","padding-box","content-box"],name:"background-origin"},{longhands:["background-position-x","background-position-y"],name:"background-position"},{name:"background-position-x"},{name:"background-position-y"},{name:"background-repeat"},{keywords:["auto","cover","contain"],name:"background-size"},{name:"base-palette"},{keywords:["baseline","sub","super"],name:"baseline-shift"},{keywords:["auto","first","last"],name:"baseline-source"},{keywords:["auto"],name:"block-size"},{longhands:["border-top-color","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],name:"border"},{longhands:["border-block-start-color","border-block-start-style","border-block-start-width","border-block-end-color","border-block-end-style","border-block-end-width"],name:"border-block"},{longhands:["border-block-start-color","border-block-end-color"],name:"border-block-color"},{longhands:["border-block-end-width","border-block-end-style","border-block-end-color"],name:"border-block-end"},{name:"border-block-end-color"},{name:"border-block-end-style"},{name:"border-block-end-width"},{longhands:["border-block-start-width","border-block-start-style","border-block-start-color"],name:"border-block-start"},{name:"border-block-start-color"},{name:"border-block-start-style"},{name:"border-block-start-width"},{longhands:["border-block-start-style","border-block-end-style"],name:"border-block-style"},{longhands:["border-block-start-width","border-block-end-width"],name:"border-block-width"},{longhands:["border-bottom-width","border-bottom-style","border-bottom-color"],name:"border-bottom"},{keywords:["currentcolor"],name:"border-bottom-color"},{name:"border-bottom-left-radius"},{name:"border-bottom-right-radius"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"border-bottom-style"},{keywords:["thin","medium","thick"],name:"border-bottom-width"},{inherited:!0,keywords:["separate","collapse"],name:"border-collapse"},{longhands:["border-top-color","border-right-color","border-bottom-color","border-left-color"],name:"border-color"},{name:"border-end-end-radius"},{name:"border-end-start-radius"},{longhands:["border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],name:"border-image"},{name:"border-image-outset"},{keywords:["stretch","repeat","round","space"],name:"border-image-repeat"},{name:"border-image-slice"},{keywords:["none"],name:"border-image-source"},{keywords:["auto"],name:"border-image-width"},{longhands:["border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-end-color","border-inline-end-style","border-inline-end-width"],name:"border-inline"},{longhands:["border-inline-start-color","border-inline-end-color"],name:"border-inline-color"},{longhands:["border-inline-end-width","border-inline-end-style","border-inline-end-color"],name:"border-inline-end"},{name:"border-inline-end-color"},{name:"border-inline-end-style"},{name:"border-inline-end-width"},{longhands:["border-inline-start-width","border-inline-start-style","border-inline-start-color"],name:"border-inline-start"},{name:"border-inline-start-color"},{name:"border-inline-start-style"},{name:"border-inline-start-width"},{longhands:["border-inline-start-style","border-inline-end-style"],name:"border-inline-style"},{longhands:["border-inline-start-width","border-inline-end-width"],name:"border-inline-width"},{longhands:["border-left-width","border-left-style","border-left-color"],name:"border-left"},{keywords:["currentcolor"],name:"border-left-color"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"border-left-style"},{keywords:["thin","medium","thick"],name:"border-left-width"},{longhands:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],name:"border-radius"},{longhands:["border-right-width","border-right-style","border-right-color"],name:"border-right"},{keywords:["currentcolor"],name:"border-right-color"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"border-right-style"},{keywords:["thin","medium","thick"],name:"border-right-width"},{inherited:!0,longhands:["-webkit-border-horizontal-spacing","-webkit-border-vertical-spacing"],name:"border-spacing"},{name:"border-start-end-radius"},{name:"border-start-start-radius"},{keywords:["none"],longhands:["border-top-style","border-right-style","border-bottom-style","border-left-style"],name:"border-style"},{longhands:["border-top-width","border-top-style","border-top-color"],name:"border-top"},{keywords:["currentcolor"],name:"border-top-color"},{name:"border-top-left-radius"},{name:"border-top-right-radius"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"border-top-style"},{keywords:["thin","medium","thick"],name:"border-top-width"},{longhands:["border-top-width","border-right-width","border-bottom-width","border-left-width"],name:"border-width"},{keywords:["auto"],name:"bottom"},{keywords:["slice","clone"],name:"box-decoration-break"},{keywords:["none"],name:"box-shadow"},{keywords:["content-box","border-box"],name:"box-sizing"},{keywords:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"],name:"break-after"},{keywords:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"],name:"break-before"},{keywords:["auto","avoid","avoid-column","avoid-page"],name:"break-inside"},{keywords:["auto","dynamic","static"],name:"buffered-rendering"},{inherited:!0,keywords:["top","bottom"],name:"caption-side"},{inherited:!0,keywords:["auto","manual"],name:"caret-animation"},{inherited:!0,keywords:["auto","currentcolor"],name:"caret-color"},{keywords:["none","left","right","both","inline-start","inline-end"],name:"clear"},{keywords:["auto"],name:"clip"},{keywords:["border-box","padding-box","content-box","margin-box","fill-box","stroke-box","view-box","none"],name:"clip-path"},{inherited:!0,keywords:["nonzero","evenodd"],name:"clip-rule"},{inherited:!0,keywords:["currentcolor"],name:"color"},{inherited:!0,keywords:["auto","srgb","linearrgb"],name:"color-interpolation"},{inherited:!0,keywords:["auto","srgb","linearrgb"],name:"color-interpolation-filters"},{inherited:!0,keywords:["auto","optimizespeed","optimizequality"],name:"color-rendering"},{inherited:!0,name:"color-scheme"},{keywords:["auto"],name:"column-count"},{keywords:["balance","auto"],name:"column-fill"},{keywords:["normal"],name:"column-gap"},{keywords:["auto"],name:"column-height"},{longhands:["column-rule-width","column-rule-style","column-rule-color"],name:"column-rule"},{inherited:!1,keywords:["none","spanning-item","intersection"],name:"column-rule-break"},{keywords:["currentcolor"],name:"column-rule-color"},{inherited:!1,name:"column-rule-outset"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"column-rule-style"},{keywords:["thin","medium","thick"],name:"column-rule-width"},{keywords:["none","all"],name:"column-span"},{keywords:["auto"],name:"column-width"},{keywords:["nowrap","wrap"],name:"column-wrap"},{longhands:["column-width","column-count"],name:"columns"},{keywords:["none","strict","content","size","layout","style","paint","inline-size","block-size"],name:"contain"},{name:"contain-intrinsic-block-size"},{keywords:["none"],name:"contain-intrinsic-height"},{name:"contain-intrinsic-inline-size"},{longhands:["contain-intrinsic-width","contain-intrinsic-height"],name:"contain-intrinsic-size"},{keywords:["none"],name:"contain-intrinsic-width"},{longhands:["container-name","container-type"],name:"container"},{keywords:["none"],name:"container-name"},{keywords:["normal","inline-size","size","scroll-state"],name:"container-type"},{name:"content"},{keywords:["visible","auto","hidden"],name:"content-visibility"},{name:"corner-bottom-left-shape"},{name:"corner-bottom-right-shape"},{name:"corner-end-end-shape"},{name:"corner-end-start-shape"},{longhands:["corner-top-left-shape","corner-top-right-shape","corner-bottom-right-shape","corner-bottom-left-shape"],name:"corner-shape"},{name:"corner-start-end-shape"},{name:"corner-start-start-shape"},{name:"corner-top-left-shape"},{name:"corner-top-right-shape"},{keywords:["none"],name:"counter-increment"},{keywords:["none"],name:"counter-reset"},{keywords:["none"],name:"counter-set"},{inherited:!0,keywords:["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out","grab","grabbing"],name:"cursor"},{name:"cx"},{name:"cy"},{keywords:["none"],name:"d"},{name:"descent-override"},{inherited:!0,keywords:["ltr","rtl"],name:"direction"},{keywords:["inline","block","list-item","inline-block","table","inline-table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption","-webkit-box","-webkit-inline-box","flex","inline-flex","grid","inline-grid","contents","flow-root","none","flow","math","ruby","ruby-text","masonry","inline-masonry"],name:"display"},{inherited:!0,keywords:["auto","alphabetic","ideographic","middle","central","mathematical","hanging","use-script","no-change","reset-size","text-after-edge","text-before-edge"],name:"dominant-baseline"},{inherited:!0,keywords:["standard","no-limit","constrained"],name:"dynamic-range-limit"},{inherited:!0,keywords:["show","hide"],name:"empty-cells"},{name:"fallback"},{keywords:["fixed","content"],name:"field-sizing"},{inherited:!0,name:"fill"},{inherited:!0,name:"fill-opacity"},{inherited:!0,keywords:["nonzero","evenodd"],name:"fill-rule"},{keywords:["none"],name:"filter"},{longhands:["flex-grow","flex-shrink","flex-basis"],name:"flex"},{keywords:["auto","fit-content","min-content","max-content","content"],name:"flex-basis"},{keywords:["row","row-reverse","column","column-reverse"],name:"flex-direction"},{longhands:["flex-direction","flex-wrap"],name:"flex-flow"},{name:"flex-grow"},{name:"flex-shrink"},{keywords:["nowrap","wrap","wrap-reverse"],name:"flex-wrap"},{keywords:["none","left","right","inline-start","inline-end"],name:"float"},{keywords:["currentcolor"],name:"flood-color"},{name:"flood-opacity"},{inherited:!0,longhands:["font-style","font-variant-ligatures","font-variant-caps","font-variant-numeric","font-variant-east-asian","font-variant-alternates","font-variant-position","font-variant-emoji","font-weight","font-stretch","font-size","line-height","font-family","font-optical-sizing","font-size-adjust","font-kerning","font-feature-settings","font-variation-settings"],name:"font"},{name:"font-display"},{inherited:!0,name:"font-family"},{inherited:!0,keywords:["normal"],name:"font-feature-settings"},{inherited:!0,keywords:["auto","normal","none"],name:"font-kerning"},{inherited:!0,keywords:["auto","none"],name:"font-optical-sizing"},{inherited:!0,keywords:["normal","light","dark"],name:"font-palette"},{inherited:!0,keywords:["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller","-webkit-xxx-large"],name:"font-size"},{inherited:!0,keywords:["none","ex-height","cap-height","ch-width","ic-width","ic-height","from-font"],name:"font-size-adjust"},{inherited:!0,keywords:["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"],name:"font-stretch"},{inherited:!0,keywords:["normal","italic","oblique"],name:"font-style"},{inherited:!0,longhands:["font-synthesis-weight","font-synthesis-style","font-synthesis-small-caps"],name:"font-synthesis"},{inherited:!0,keywords:["auto","none"],name:"font-synthesis-small-caps"},{inherited:!0,keywords:["auto","none"],name:"font-synthesis-style"},{inherited:!0,keywords:["auto","none"],name:"font-synthesis-weight"},{inherited:!0,longhands:["font-variant-ligatures","font-variant-caps","font-variant-alternates","font-variant-numeric","font-variant-east-asian","font-variant-position","font-variant-emoji"],name:"font-variant"},{inherited:!0,keywords:["normal"],name:"font-variant-alternates"},{inherited:!0,keywords:["normal","small-caps","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps"],name:"font-variant-caps"},{inherited:!0,keywords:["normal","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"],name:"font-variant-east-asian"},{inherited:!0,keywords:["normal","text","emoji","unicode"],name:"font-variant-emoji"},{inherited:!0,keywords:["normal","none","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual"],name:"font-variant-ligatures"},{inherited:!0,keywords:["normal","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero"],name:"font-variant-numeric"},{inherited:!0,keywords:["normal","sub","super"],name:"font-variant-position"},{inherited:!0,keywords:["normal"],name:"font-variation-settings"},{inherited:!0,keywords:["normal","bold","bolder","lighter"],name:"font-weight"},{inherited:!0,keywords:["auto","none","preserve-parent-color"],name:"forced-color-adjust"},{longhands:["row-gap","column-gap"],name:"gap"},{inherited:!1,keywords:["row-over-column","column-over-row"],name:"gap-rule-paint-order"},{longhands:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-flow","grid-auto-rows","grid-auto-columns"],name:"grid"},{longhands:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],name:"grid-area"},{keywords:["auto","min-content","max-content"],name:"grid-auto-columns"},{keywords:["row","column"],name:"grid-auto-flow"},{keywords:["auto","min-content","max-content"],name:"grid-auto-rows"},{longhands:["grid-column-start","grid-column-end"],name:"grid-column"},{keywords:["auto"],name:"grid-column-end"},{keywords:["auto"],name:"grid-column-start"},{longhands:["grid-row-start","grid-row-end"],name:"grid-row"},{keywords:["auto"],name:"grid-row-end"},{keywords:["auto"],name:"grid-row-start"},{longhands:["grid-template-rows","grid-template-columns","grid-template-areas"],name:"grid-template"},{keywords:["none"],name:"grid-template-areas"},{keywords:["none"],name:"grid-template-columns"},{keywords:["none"],name:"grid-template-rows"},{keywords:["auto","fit-content","min-content","max-content"],name:"height"},{inherited:!0,name:"hyphenate-character"},{inherited:!0,keywords:["auto"],name:"hyphenate-limit-chars"},{inherited:!0,keywords:["none","manual","auto"],name:"hyphens"},{inherited:!0,name:"image-orientation"},{inherited:!0,keywords:["auto","optimizespeed","optimizequality","-webkit-optimize-contrast","pixelated"],name:"image-rendering"},{name:"inherits"},{inherited:!1,keywords:["drop","normal","raise"],name:"initial-letter"},{name:"initial-value"},{keywords:["auto"],name:"inline-size"},{longhands:["top","right","bottom","left"],name:"inset"},{longhands:["inset-block-start","inset-block-end"],name:"inset-block"},{name:"inset-block-end"},{name:"inset-block-start"},{longhands:["inset-inline-start","inset-inline-end"],name:"inset-inline"},{name:"inset-inline-end"},{name:"inset-inline-start"},{inherited:!0,keywords:["auto","inert"],name:"interactivity"},{longhands:["interest-target-show-delay","interest-target-hide-delay"],name:"interest-target-delay"},{name:"interest-target-hide-delay"},{name:"interest-target-show-delay"},{inherited:!0,keywords:["numeric-only","allow-keywords"],name:"interpolate-size"},{keywords:["auto","isolate"],name:"isolation"},{name:"justify-content"},{name:"justify-items"},{name:"justify-self"},{keywords:["auto"],name:"left"},{inherited:!0,keywords:["normal"],name:"letter-spacing"},{keywords:["currentcolor"],name:"lighting-color"},{inherited:!0,keywords:["auto","loose","normal","strict","anywhere"],name:"line-break"},{keywords:["none","auto"],name:"line-clamp"},{name:"line-gap-override"},{inherited:!0,keywords:["normal"],name:"line-height"},{inherited:!0,longhands:["list-style-position","list-style-image","list-style-type"],name:"list-style"},{inherited:!0,keywords:["none"],name:"list-style-image"},{inherited:!0,keywords:["outside","inside"],name:"list-style-position"},{inherited:!0,keywords:["disc","circle","square","disclosure-open","disclosure-closed","decimal","none"],name:"list-style-type"},{longhands:["margin-top","margin-right","margin-bottom","margin-left"],name:"margin"},{longhands:["margin-block-start","margin-block-end"],name:"margin-block"},{keywords:["auto"],name:"margin-block-end"},{keywords:["auto"],name:"margin-block-start"},{keywords:["auto"],name:"margin-bottom"},{longhands:["margin-inline-start","margin-inline-end"],name:"margin-inline"},{keywords:["auto"],name:"margin-inline-end"},{keywords:["auto"],name:"margin-inline-start"},{keywords:["auto"],name:"margin-left"},{keywords:["auto"],name:"margin-right"},{keywords:["auto"],name:"margin-top"},{inherited:!0,longhands:["marker-start","marker-mid","marker-end"],name:"marker"},{inherited:!0,keywords:["none"],name:"marker-end"},{inherited:!0,keywords:["none"],name:"marker-mid"},{inherited:!0,keywords:["none"],name:"marker-start"},{longhands:["mask-image","-webkit-mask-position-x","-webkit-mask-position-y","mask-size","mask-repeat","mask-origin","mask-clip","mask-composite","mask-mode"],name:"mask"},{name:"mask-clip"},{name:"mask-composite"},{name:"mask-image"},{name:"mask-mode"},{name:"mask-origin"},{longhands:["-webkit-mask-position-x","-webkit-mask-position-y"],name:"mask-position"},{name:"mask-repeat"},{name:"mask-size"},{keywords:["luminance","alpha"],name:"mask-type"},{keywords:["auto","min-content","max-content"],name:"masonry-auto-tracks"},{keywords:["row","row-reverse","column","column-reverse"],name:"masonry-direction"},{keywords:["normal","reverse"],name:"masonry-fill"},{longhands:["masonry-direction","masonry-fill"],name:"masonry-flow"},{keywords:["normal"],name:"masonry-slack"},{name:"masonry-template-tracks"},{longhands:["masonry-track-start","masonry-track-end"],name:"masonry-track"},{keywords:["auto"],name:"masonry-track-end"},{keywords:["auto"],name:"masonry-track-start"},{inherited:!0,name:"math-depth"},{inherited:!0,keywords:["normal","compact"],name:"math-shift"},{inherited:!0,keywords:["normal","compact"],name:"math-style"},{keywords:["none"],name:"max-block-size"},{keywords:["none"],name:"max-height"},{keywords:["none"],name:"max-inline-size"},{keywords:["none"],name:"max-width"},{name:"min-block-size"},{name:"min-height"},{name:"min-inline-size"},{name:"min-width"},{keywords:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],name:"mix-blend-mode"},{name:"navigation"},{name:"negative"},{keywords:["fill","contain","cover","none","scale-down"],name:"object-fit"},{name:"object-position"},{keywords:["none"],name:"object-view-box"},{longhands:["offset-position","offset-path","offset-distance","offset-rotate","offset-anchor"],name:"offset"},{keywords:["auto"],name:"offset-anchor"},{name:"offset-distance"},{keywords:["none"],name:"offset-path"},{keywords:["auto","normal"],name:"offset-position"},{keywords:["auto","reverse"],name:"offset-rotate"},{name:"opacity"},{name:"order"},{keywords:["normal","none"],name:"origin-trial-test-property"},{inherited:!0,name:"orphans"},{longhands:["outline-color","outline-style","outline-width"],name:"outline"},{keywords:["currentcolor"],name:"outline-color"},{name:"outline-offset"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"outline-style"},{keywords:["thin","medium","thick"],name:"outline-width"},{longhands:["overflow-x","overflow-y"],name:"overflow"},{inherited:!1,keywords:["visible","none","auto"],name:"overflow-anchor"},{name:"overflow-block"},{keywords:["border-box","content-box","padding-box"],name:"overflow-clip-margin"},{name:"overflow-inline"},{inherited:!0,keywords:["normal","break-word","anywhere"],name:"overflow-wrap"},{keywords:["visible","hidden","scroll","auto","overlay","clip"],name:"overflow-x"},{keywords:["visible","hidden","scroll","auto","overlay","clip"],name:"overflow-y"},{keywords:["none","auto"],name:"overlay"},{name:"override-colors"},{longhands:["overscroll-behavior-x","overscroll-behavior-y"],name:"overscroll-behavior"},{name:"overscroll-behavior-block"},{name:"overscroll-behavior-inline"},{keywords:["auto","contain","none"],name:"overscroll-behavior-x"},{keywords:["auto","contain","none"],name:"overscroll-behavior-y"},{name:"pad"},{longhands:["padding-top","padding-right","padding-bottom","padding-left"],name:"padding"},{longhands:["padding-block-start","padding-block-end"],name:"padding-block"},{name:"padding-block-end"},{name:"padding-block-start"},{name:"padding-bottom"},{longhands:["padding-inline-start","padding-inline-end"],name:"padding-inline"},{name:"padding-inline-end"},{name:"padding-inline-start"},{name:"padding-left"},{name:"padding-right"},{name:"padding-top"},{keywords:["auto"],name:"page"},{longhands:["break-after"],name:"page-break-after"},{longhands:["break-before"],name:"page-break-before"},{longhands:["break-inside"],name:"page-break-inside"},{name:"page-orientation"},{inherited:!0,keywords:["normal","fill","stroke","markers"],name:"paint-order"},{keywords:["none"],name:"perspective"},{name:"perspective-origin"},{longhands:["align-content","justify-content"],name:"place-content"},{longhands:["align-items","justify-items"],name:"place-items"},{longhands:["align-self","justify-self"],name:"place-self"},{inherited:!0,keywords:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","bounding-box","all"],name:"pointer-events"},{keywords:["static","relative","absolute","fixed","sticky"],name:"position"},{keywords:["auto"],name:"position-anchor"},{keywords:["none","top","bottom","center","left","right","x-start","x-end","y-start","y-end","start","end","self-start","self-end","all"],name:"position-area"},{longhands:["position-try-order","position-try-fallbacks"],name:"position-try"},{keywords:["none","flip-block","flip-inline","flip-start"],name:"position-try-fallbacks"},{keywords:["normal","most-width","most-height","most-block-size","most-inline-size"],name:"position-try-order"},{keywords:["always","anchors-visible","no-overflow"],name:"position-visibility"},{name:"prefix"},{inherited:!0,keywords:["economy","exact"],name:"print-color-adjust"},{inherited:!0,keywords:["auto","none"],name:"quotes"},{name:"r"},{name:"range"},{keywords:["normal","flex-visual","flex-flow","grid-rows","grid-columns","grid-order","source-order"],name:"reading-flow"},{name:"reading-order"},{keywords:["none","both","horizontal","vertical","block","inline"],name:"resize"},{name:"result"},{keywords:["auto"],name:"right"},{name:"rotate"},{keywords:["normal"],name:"row-gap"},{inherited:!1,keywords:["none","spanning-item","intersection"],name:"row-rule-break"},{keywords:["currentcolor"],name:"row-rule-color"},{inherited:!1,name:"row-rule-outset"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"row-rule-style"},{keywords:["thin","medium","thick"],name:"row-rule-width"},{inherited:!0,keywords:["space-around","start","center","space-between"],name:"ruby-align"},{inherited:!0,keywords:["over","under"],name:"ruby-position"},{keywords:["auto"],name:"rx"},{keywords:["auto"],name:"ry"},{name:"scale"},{keywords:["auto","smooth"],name:"scroll-behavior"},{keywords:["none","nearest"],name:"scroll-initial-target"},{longhands:["scroll-margin-top","scroll-margin-right","scroll-margin-bottom","scroll-margin-left"],name:"scroll-margin"},{longhands:["scroll-margin-block-start","scroll-margin-block-end"],name:"scroll-margin-block"},{name:"scroll-margin-block-end"},{name:"scroll-margin-block-start"},{name:"scroll-margin-bottom"},{longhands:["scroll-margin-inline-start","scroll-margin-inline-end"],name:"scroll-margin-inline"},{name:"scroll-margin-inline-end"},{name:"scroll-margin-inline-start"},{name:"scroll-margin-left"},{name:"scroll-margin-right"},{name:"scroll-margin-top"},{keywords:["none","auto"],name:"scroll-marker-contain"},{keywords:["none","after","before"],name:"scroll-marker-group"},{longhands:["scroll-padding-top","scroll-padding-right","scroll-padding-bottom","scroll-padding-left"],name:"scroll-padding"},{longhands:["scroll-padding-block-start","scroll-padding-block-end"],name:"scroll-padding-block"},{keywords:["auto"],name:"scroll-padding-block-end"},{keywords:["auto"],name:"scroll-padding-block-start"},{keywords:["auto"],name:"scroll-padding-bottom"},{longhands:["scroll-padding-inline-start","scroll-padding-inline-end"],name:"scroll-padding-inline"},{keywords:["auto"],name:"scroll-padding-inline-end"},{keywords:["auto"],name:"scroll-padding-inline-start"},{keywords:["auto"],name:"scroll-padding-left"},{keywords:["auto"],name:"scroll-padding-right"},{keywords:["auto"],name:"scroll-padding-top"},{keywords:["none","start","end","center"],name:"scroll-snap-align"},{keywords:["normal","always"],name:"scroll-snap-stop"},{keywords:["none","x","y","block","inline","both","mandatory","proximity"],name:"scroll-snap-type"},{longhands:["scroll-start-block","scroll-start-inline"],name:"scroll-start"},{name:"scroll-start-block"},{name:"scroll-start-inline"},{name:"scroll-start-x"},{name:"scroll-start-y"},{longhands:["scroll-timeline-name","scroll-timeline-axis"],name:"scroll-timeline"},{name:"scroll-timeline-axis"},{name:"scroll-timeline-name"},{inherited:!0,keywords:["auto"],name:"scrollbar-color"},{inherited:!1,keywords:["auto","stable","both-edges"],name:"scrollbar-gutter"},{inherited:!1,keywords:["auto","thin","none"],name:"scrollbar-width"},{name:"shape-image-threshold"},{keywords:["none"],name:"shape-margin"},{keywords:["none"],name:"shape-outside"},{inherited:!0,keywords:["auto","optimizespeed","crispedges","geometricprecision"],name:"shape-rendering"},{name:"size"},{name:"size-adjust"},{inherited:!0,keywords:["none","normal","spell-out","digits","literal-punctuation","no-punctuation"],name:"speak"},{name:"speak-as"},{name:"src"},{keywords:["currentcolor"],name:"stop-color"},{name:"stop-opacity"},{inherited:!0,name:"stroke"},{inherited:!0,keywords:["none"],name:"stroke-dasharray"},{inherited:!0,name:"stroke-dashoffset"},{inherited:!0,keywords:["butt","round","square"],name:"stroke-linecap"},{inherited:!0,keywords:["miter","bevel","round"],name:"stroke-linejoin"},{inherited:!0,name:"stroke-miterlimit"},{inherited:!0,name:"stroke-opacity"},{inherited:!0,name:"stroke-width"},{name:"suffix"},{name:"symbols"},{name:"syntax"},{name:"system"},{inherited:!0,name:"tab-size"},{keywords:["auto","fixed"],name:"table-layout"},{inherited:!0,keywords:["left","right","center","justify","-webkit-left","-webkit-right","-webkit-center","start","end"],name:"text-align"},{inherited:!0,keywords:["auto","start","end","left","right","center","justify"],name:"text-align-last"},{inherited:!0,keywords:["start","middle","end"],name:"text-anchor"},{inherited:!0,keywords:["normal","no-autospace"],name:"text-autospace"},{longhands:["text-box-trim","text-box-edge"],name:"text-box"},{inherited:!0,name:"text-box-edge"},{keywords:["none","trim-start","trim-end","trim-both"],name:"text-box-trim"},{inherited:!0,keywords:["none","all"],name:"text-combine-upright"},{longhands:["text-decoration-line","text-decoration-thickness","text-decoration-style","text-decoration-color"],name:"text-decoration"},{keywords:["currentcolor"],name:"text-decoration-color"},{keywords:["none","underline","overline","line-through","blink","spelling-error","grammar-error"],name:"text-decoration-line"},{inherited:!0,keywords:["none","auto"],name:"text-decoration-skip-ink"},{keywords:["solid","double","dotted","dashed","wavy"],name:"text-decoration-style"},{inherited:!1,keywords:["auto","from-font"],name:"text-decoration-thickness"},{inherited:!0,longhands:["text-emphasis-style","text-emphasis-color"],name:"text-emphasis"},{inherited:!0,keywords:["currentcolor"],name:"text-emphasis-color"},{inherited:!0,name:"text-emphasis-position"},{inherited:!0,name:"text-emphasis-style"},{inherited:!0,name:"text-indent"},{inherited:!0,keywords:["sideways","mixed","upright"],name:"text-orientation"},{keywords:["clip","ellipsis"],name:"text-overflow"},{inherited:!0,keywords:["auto","optimizespeed","optimizelegibility","geometricprecision"],name:"text-rendering"},{inherited:!0,keywords:["none"],name:"text-shadow"},{inherited:!0,keywords:["none","auto"],name:"text-size-adjust"},{inherited:!0,longhands:["text-autospace","text-spacing-trim"],name:"text-spacing"},{inherited:!0,keywords:["normal","space-all","space-first","trim-start"],name:"text-spacing-trim"},{inherited:!0,keywords:["capitalize","uppercase","lowercase","none","math-auto"],name:"text-transform"},{inherited:!0,keywords:["auto"],name:"text-underline-offset"},{inherited:!0,keywords:["auto","from-font","under","left","right"],name:"text-underline-position"},{inherited:!0,longhands:["text-wrap-mode","text-wrap-style"],name:"text-wrap"},{inherited:!0,keywords:["wrap","nowrap"],name:"text-wrap-mode"},{inherited:!0,keywords:["auto","balance","pretty","stable"],name:"text-wrap-style"},{name:"timeline-scope"},{keywords:["auto"],name:"top"},{keywords:["auto","none","pan-x","pan-left","pan-right","pan-y","pan-up","pan-down","pinch-zoom","manipulation"],name:"touch-action"},{keywords:["none"],name:"transform"},{keywords:["content-box","border-box","fill-box","stroke-box","view-box"],name:"transform-box"},{name:"transform-origin"},{keywords:["flat","preserve-3d"],name:"transform-style"},{longhands:["transition-property","transition-duration","transition-timing-function","transition-delay","transition-behavior"],name:"transition"},{keywords:["normal","allow-discrete"],name:"transition-behavior"},{name:"transition-delay"},{name:"transition-duration"},{keywords:["none"],name:"transition-property"},{keywords:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"],name:"transition-timing-function"},{name:"translate"},{name:"types"},{keywords:["normal","embed","bidi-override","isolate","plaintext","isolate-override"],name:"unicode-bidi"},{name:"unicode-range"},{inherited:!0,keywords:["auto","none","text","all","contain"],name:"user-select"},{keywords:["none","non-scaling-stroke"],name:"vector-effect"},{keywords:["baseline","sub","super","text-top","text-bottom","middle"],name:"vertical-align"},{longhands:["view-timeline-name","view-timeline-axis","view-timeline-inset"],name:"view-timeline"},{name:"view-timeline-axis"},{name:"view-timeline-inset"},{name:"view-timeline-name"},{keywords:["none"],name:"view-transition-class"},{keywords:["normal","contain","nearest"],name:"view-transition-group"},{keywords:["none","auto"],name:"view-transition-name"},{inherited:!0,keywords:["visible","hidden","collapse"],name:"visibility"},{inherited:!0,longhands:["white-space-collapse","text-wrap-mode"],name:"white-space"},{inherited:!0,keywords:["collapse","preserve","preserve-breaks","break-spaces"],name:"white-space-collapse"},{inherited:!0,name:"widows"},{keywords:["auto","fit-content","min-content","max-content"],name:"width"},{keywords:["auto"],name:"will-change"},{inherited:!0,keywords:["normal","break-all","keep-all","break-word","auto-phrase"],name:"word-break"},{inherited:!0,keywords:["normal"],name:"word-spacing"},{inherited:!0,keywords:["horizontal-tb","vertical-rl","vertical-lr","sideways-rl","sideways-lr"],name:"writing-mode"},{name:"x"},{name:"y"},{keywords:["auto"],name:"z-index"},{name:"zoom"}],p={"-webkit-box-align":{values:["stretch","start","center","end","baseline"]},"-webkit-box-decoration-break":{values:["slice","clone"]},"-webkit-box-direction":{values:["normal","reverse"]},"-webkit-box-orient":{values:["horizontal","vertical"]},"-webkit-box-pack":{values:["start","center","end","justify"]},"-webkit-line-break":{values:["auto","loose","normal","strict","after-white-space","anywhere"]},"-webkit-line-clamp":{values:["none"]},"-webkit-rtl-ordering":{values:["logical","visual"]},"-webkit-text-security":{values:["none","disc","circle","square"]},"-webkit-user-drag":{values:["auto","none","element"]},"-webkit-user-modify":{values:["read-only","read-write","read-write-plaintext-only"]},"accent-color":{values:["auto","currentcolor"]},"alignment-baseline":{values:["auto","baseline","alphabetic","ideographic","middle","central","mathematical","before-edge","text-before-edge","after-edge","text-after-edge","hanging"]},"anchor-name":{values:["none"]},"anchor-scope":{values:["none","all"]},"animation-composition":{values:["replace","add","accumulate"]},"animation-direction":{values:["normal","reverse","alternate","alternate-reverse"]},"animation-fill-mode":{values:["none","forwards","backwards","both"]},"animation-iteration-count":{values:["infinite"]},"animation-name":{values:["none"]},"animation-play-state":{values:["running","paused"]},"animation-timeline":{values:["none","auto"]},"animation-timing-function":{values:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"]},"animation-trigger-timeline":{values:["none","auto"]},"animation-trigger-type":{values:["once","repeat","alternate","state"]},"app-region":{values:["none","drag","no-drag"]},"aspect-ratio":{values:["auto"]},"backdrop-filter":{values:["none"]},"backface-visibility":{values:["visible","hidden"]},"background-attachment":{values:["scroll","fixed","local"]},"background-blend-mode":{values:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},"background-clip":{values:["border-box","padding-box","content-box","text"]},"background-color":{values:["currentcolor"]},"background-image":{values:["auto","none"]},"background-origin":{values:["border-box","padding-box","content-box"]},"background-size":{values:["auto","cover","contain"]},"baseline-shift":{values:["baseline","sub","super"]},"baseline-source":{values:["auto","first","last"]},"block-size":{values:["auto"]},"border-bottom-color":{values:["currentcolor"]},"border-bottom-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-bottom-width":{values:["thin","medium","thick"]},"border-collapse":{values:["separate","collapse"]},"border-image-repeat":{values:["stretch","repeat","round","space"]},"border-image-source":{values:["none"]},"border-image-width":{values:["auto"]},"border-left-color":{values:["currentcolor"]},"border-left-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-left-width":{values:["thin","medium","thick"]},"border-right-color":{values:["currentcolor"]},"border-right-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-right-width":{values:["thin","medium","thick"]},"border-style":{values:["none"]},"border-top-color":{values:["currentcolor"]},"border-top-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-top-width":{values:["thin","medium","thick"]},bottom:{values:["auto"]},"box-decoration-break":{values:["slice","clone"]},"box-shadow":{values:["none"]},"box-sizing":{values:["content-box","border-box"]},"break-after":{values:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"]},"break-before":{values:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"]},"break-inside":{values:["auto","avoid","avoid-column","avoid-page"]},"buffered-rendering":{values:["auto","dynamic","static"]},"caption-side":{values:["top","bottom"]},"caret-animation":{values:["auto","manual"]},"caret-color":{values:["auto","currentcolor"]},clear:{values:["none","left","right","both","inline-start","inline-end"]},clip:{values:["auto"]},"clip-path":{values:["border-box","padding-box","content-box","margin-box","fill-box","stroke-box","view-box","none"]},"clip-rule":{values:["nonzero","evenodd"]},color:{values:["currentcolor"]},"color-interpolation":{values:["auto","srgb","linearrgb"]},"color-interpolation-filters":{values:["auto","srgb","linearrgb"]},"color-rendering":{values:["auto","optimizespeed","optimizequality"]},"column-count":{values:["auto"]},"column-fill":{values:["balance","auto"]},"column-gap":{values:["normal"]},"column-height":{values:["auto"]},"column-rule-break":{values:["none","spanning-item","intersection"]},"column-rule-color":{values:["currentcolor"]},"column-rule-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"column-rule-width":{values:["thin","medium","thick"]},"column-span":{values:["none","all"]},"column-width":{values:["auto"]},"column-wrap":{values:["nowrap","wrap"]},contain:{values:["none","strict","content","size","layout","style","paint","inline-size","block-size"]},"contain-intrinsic-height":{values:["none"]},"contain-intrinsic-width":{values:["none"]},"container-name":{values:["none"]},"container-type":{values:["normal","inline-size","size","scroll-state"]},"content-visibility":{values:["visible","auto","hidden"]},"counter-increment":{values:["none"]},"counter-reset":{values:["none"]},"counter-set":{values:["none"]},cursor:{values:["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out","grab","grabbing"]},d:{values:["none"]},direction:{values:["ltr","rtl"]},display:{values:["inline","block","list-item","inline-block","table","inline-table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption","-webkit-box","-webkit-inline-box","flex","inline-flex","grid","inline-grid","contents","flow-root","none","flow","math","ruby","ruby-text","masonry","inline-masonry"]},"dominant-baseline":{values:["auto","alphabetic","ideographic","middle","central","mathematical","hanging","use-script","no-change","reset-size","text-after-edge","text-before-edge"]},"dynamic-range-limit":{values:["standard","no-limit","constrained"]},"empty-cells":{values:["show","hide"]},"field-sizing":{values:["fixed","content"]},"fill-rule":{values:["nonzero","evenodd"]},filter:{values:["none"]},"flex-basis":{values:["auto","fit-content","min-content","max-content","content"]},"flex-direction":{values:["row","row-reverse","column","column-reverse"]},"flex-wrap":{values:["nowrap","wrap","wrap-reverse"]},float:{values:["none","left","right","inline-start","inline-end"]},"flood-color":{values:["currentcolor"]},"font-feature-settings":{values:["normal"]},"font-kerning":{values:["auto","normal","none"]},"font-optical-sizing":{values:["auto","none"]},"font-palette":{values:["normal","light","dark"]},"font-size":{values:["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller","-webkit-xxx-large"]},"font-size-adjust":{values:["none","ex-height","cap-height","ch-width","ic-width","ic-height","from-font"]},"font-stretch":{values:["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"]},"font-style":{values:["normal","italic","oblique"]},"font-synthesis-small-caps":{values:["auto","none"]},"font-synthesis-style":{values:["auto","none"]},"font-synthesis-weight":{values:["auto","none"]},"font-variant-alternates":{values:["normal"]},"font-variant-caps":{values:["normal","small-caps","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps"]},"font-variant-east-asian":{values:["normal","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"]},"font-variant-emoji":{values:["normal","text","emoji","unicode"]},"font-variant-ligatures":{values:["normal","none","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual"]},"font-variant-numeric":{values:["normal","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero"]},"font-variant-position":{values:["normal","sub","super"]},"font-variation-settings":{values:["normal"]},"font-weight":{values:["normal","bold","bolder","lighter"]},"forced-color-adjust":{values:["auto","none","preserve-parent-color"]},"gap-rule-paint-order":{values:["row-over-column","column-over-row"]},"grid-auto-columns":{values:["auto","min-content","max-content"]},"grid-auto-flow":{values:["row","column"]},"grid-auto-rows":{values:["auto","min-content","max-content"]},"grid-column-end":{values:["auto"]},"grid-column-start":{values:["auto"]},"grid-row-end":{values:["auto"]},"grid-row-start":{values:["auto"]},"grid-template-areas":{values:["none"]},"grid-template-columns":{values:["none"]},"grid-template-rows":{values:["none"]},height:{values:["auto","fit-content","min-content","max-content"]},"hyphenate-limit-chars":{values:["auto"]},hyphens:{values:["none","manual","auto"]},"image-rendering":{values:["auto","optimizespeed","optimizequality","-webkit-optimize-contrast","pixelated"]},"initial-letter":{values:["drop","normal","raise"]},"inline-size":{values:["auto"]},interactivity:{values:["auto","inert"]},"interpolate-size":{values:["numeric-only","allow-keywords"]},isolation:{values:["auto","isolate"]},left:{values:["auto"]},"letter-spacing":{values:["normal"]},"lighting-color":{values:["currentcolor"]},"line-break":{values:["auto","loose","normal","strict","anywhere"]},"line-clamp":{values:["none","auto"]},"line-height":{values:["normal"]},"list-style-image":{values:["none"]},"list-style-position":{values:["outside","inside"]},"list-style-type":{values:["disc","circle","square","disclosure-open","disclosure-closed","decimal","none"]},"margin-block-end":{values:["auto"]},"margin-block-start":{values:["auto"]},"margin-bottom":{values:["auto"]},"margin-inline-end":{values:["auto"]},"margin-inline-start":{values:["auto"]},"margin-left":{values:["auto"]},"margin-right":{values:["auto"]},"margin-top":{values:["auto"]},"marker-end":{values:["none"]},"marker-mid":{values:["none"]},"marker-start":{values:["none"]},"mask-type":{values:["luminance","alpha"]},"masonry-auto-tracks":{values:["auto","min-content","max-content"]},"masonry-direction":{values:["row","row-reverse","column","column-reverse"]},"masonry-fill":{values:["normal","reverse"]},"masonry-slack":{values:["normal"]},"masonry-track-end":{values:["auto"]},"masonry-track-start":{values:["auto"]},"math-shift":{values:["normal","compact"]},"math-style":{values:["normal","compact"]},"max-block-size":{values:["none"]},"max-height":{values:["none"]},"max-inline-size":{values:["none"]},"max-width":{values:["none"]},"mix-blend-mode":{values:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},"object-fit":{values:["fill","contain","cover","none","scale-down"]},"object-view-box":{values:["none"]},"offset-anchor":{values:["auto"]},"offset-path":{values:["none"]},"offset-position":{values:["auto","normal"]},"offset-rotate":{values:["auto","reverse"]},"origin-trial-test-property":{values:["normal","none"]},"outline-color":{values:["currentcolor"]},"outline-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"outline-width":{values:["thin","medium","thick"]},"overflow-anchor":{values:["visible","none","auto"]},"overflow-clip-margin":{values:["border-box","content-box","padding-box"]},"overflow-wrap":{values:["normal","break-word","anywhere"]},"overflow-x":{values:["visible","hidden","scroll","auto","overlay","clip"]},"overflow-y":{values:["visible","hidden","scroll","auto","overlay","clip"]},overlay:{values:["none","auto"]},"overscroll-behavior-x":{values:["auto","contain","none"]},"overscroll-behavior-y":{values:["auto","contain","none"]},page:{values:["auto"]},"paint-order":{values:["normal","fill","stroke","markers"]},perspective:{values:["none"]},"pointer-events":{values:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","bounding-box","all"]},position:{values:["static","relative","absolute","fixed","sticky"]},"position-anchor":{values:["auto"]},"position-area":{values:["none","top","bottom","center","left","right","x-start","x-end","y-start","y-end","start","end","self-start","self-end","all"]},"position-try-fallbacks":{values:["none","flip-block","flip-inline","flip-start"]},"position-try-order":{values:["normal","most-width","most-height","most-block-size","most-inline-size"]},"position-visibility":{values:["always","anchors-visible","no-overflow"]},"print-color-adjust":{values:["economy","exact"]},quotes:{values:["auto","none"]},"reading-flow":{values:["normal","flex-visual","flex-flow","grid-rows","grid-columns","grid-order","source-order"]},resize:{values:["none","both","horizontal","vertical","block","inline"]},right:{values:["auto"]},"row-gap":{values:["normal"]},"row-rule-break":{values:["none","spanning-item","intersection"]},"row-rule-color":{values:["currentcolor"]},"row-rule-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"row-rule-width":{values:["thin","medium","thick"]},"ruby-align":{values:["space-around","start","center","space-between"]},"ruby-position":{values:["over","under"]},rx:{values:["auto"]},ry:{values:["auto"]},"scroll-behavior":{values:["auto","smooth"]},"scroll-initial-target":{values:["none","nearest"]},"scroll-marker-contain":{values:["none","auto"]},"scroll-marker-group":{values:["none","after","before"]},"scroll-padding-block-end":{values:["auto"]},"scroll-padding-block-start":{values:["auto"]},"scroll-padding-bottom":{values:["auto"]},"scroll-padding-inline-end":{values:["auto"]},"scroll-padding-inline-start":{values:["auto"]},"scroll-padding-left":{values:["auto"]},"scroll-padding-right":{values:["auto"]},"scroll-padding-top":{values:["auto"]},"scroll-snap-align":{values:["none","start","end","center"]},"scroll-snap-stop":{values:["normal","always"]},"scroll-snap-type":{values:["none","x","y","block","inline","both","mandatory","proximity"]},"scrollbar-color":{values:["auto"]},"scrollbar-gutter":{values:["auto","stable","both-edges"]},"scrollbar-width":{values:["auto","thin","none"]},"shape-margin":{values:["none"]},"shape-outside":{values:["none"]},"shape-rendering":{values:["auto","optimizespeed","crispedges","geometricprecision"]},speak:{values:["none","normal","spell-out","digits","literal-punctuation","no-punctuation"]},"stop-color":{values:["currentcolor"]},"stroke-dasharray":{values:["none"]},"stroke-linecap":{values:["butt","round","square"]},"stroke-linejoin":{values:["miter","bevel","round"]},"table-layout":{values:["auto","fixed"]},"text-align":{values:["left","right","center","justify","-webkit-left","-webkit-right","-webkit-center","start","end"]},"text-align-last":{values:["auto","start","end","left","right","center","justify"]},"text-anchor":{values:["start","middle","end"]},"text-autospace":{values:["normal","no-autospace"]},"text-box-trim":{values:["none","trim-start","trim-end","trim-both"]},"text-combine-upright":{values:["none","all"]},"text-decoration-color":{values:["currentcolor"]},"text-decoration-line":{values:["none","underline","overline","line-through","blink","spelling-error","grammar-error"]},"text-decoration-skip-ink":{values:["none","auto"]},"text-decoration-style":{values:["solid","double","dotted","dashed","wavy"]},"text-decoration-thickness":{values:["auto","from-font"]},"text-emphasis-color":{values:["currentcolor"]},"text-orientation":{values:["sideways","mixed","upright"]},"text-overflow":{values:["clip","ellipsis"]},"text-rendering":{values:["auto","optimizespeed","optimizelegibility","geometricprecision"]},"text-shadow":{values:["none"]},"text-size-adjust":{values:["none","auto"]},"text-spacing-trim":{values:["normal","space-all","space-first","trim-start"]},"text-transform":{values:["capitalize","uppercase","lowercase","none","math-auto"]},"text-underline-offset":{values:["auto"]},"text-underline-position":{values:["auto","from-font","under","left","right"]},"text-wrap-mode":{values:["wrap","nowrap"]},"text-wrap-style":{values:["auto","balance","pretty","stable"]},top:{values:["auto"]},"touch-action":{values:["auto","none","pan-x","pan-left","pan-right","pan-y","pan-up","pan-down","pinch-zoom","manipulation"]},transform:{values:["none"]},"transform-box":{values:["content-box","border-box","fill-box","stroke-box","view-box"]},"transform-style":{values:["flat","preserve-3d"]},"transition-behavior":{values:["normal","allow-discrete"]},"transition-property":{values:["none"]},"transition-timing-function":{values:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"]},"unicode-bidi":{values:["normal","embed","bidi-override","isolate","plaintext","isolate-override"]},"user-select":{values:["auto","none","text","all","contain"]},"vector-effect":{values:["none","non-scaling-stroke"]},"vertical-align":{values:["baseline","sub","super","text-top","text-bottom","middle"]},"view-transition-class":{values:["none"]},"view-transition-group":{values:["normal","contain","nearest"]},"view-transition-name":{values:["none","auto"]},visibility:{values:["visible","hidden","collapse"]},"white-space-collapse":{values:["collapse","preserve","preserve-breaks","break-spaces"]},width:{values:["auto","fit-content","min-content","max-content"]},"will-change":{values:["auto"]},"word-break":{values:["normal","break-all","keep-all","break-word","auto-phrase"]},"word-spacing":{values:["normal"]},"writing-mode":{values:["horizontal-tb","vertical-rl","vertical-lr","sideways-rl","sideways-lr"]},"z-index":{values:["auto"]}},m=new Map([["-epub-caption-side","caption-side"],["-epub-text-combine","-webkit-text-combine"],["-epub-text-emphasis","text-emphasis"],["-epub-text-emphasis-color","text-emphasis-color"],["-epub-text-emphasis-style","text-emphasis-style"],["-epub-text-orientation","-webkit-text-orientation"],["-epub-text-transform","text-transform"],["-epub-word-break","word-break"],["-epub-writing-mode","-webkit-writing-mode"],["-webkit-align-content","align-content"],["-webkit-align-items","align-items"],["-webkit-align-self","align-self"],["-webkit-animation","animation"],["-webkit-animation-delay","animation-delay"],["-webkit-animation-direction","animation-direction"],["-webkit-animation-duration","animation-duration"],["-webkit-animation-fill-mode","animation-fill-mode"],["-webkit-animation-iteration-count","animation-iteration-count"],["-webkit-animation-name","animation-name"],["-webkit-animation-play-state","animation-play-state"],["-webkit-animation-timing-function","animation-timing-function"],["-webkit-app-region","app-region"],["-webkit-appearance","appearance"],["-webkit-backface-visibility","backface-visibility"],["-webkit-background-clip","background-clip"],["-webkit-background-origin","background-origin"],["-webkit-background-size","background-size"],["-webkit-border-after","border-block-end"],["-webkit-border-after-color","border-block-end-color"],["-webkit-border-after-style","border-block-end-style"],["-webkit-border-after-width","border-block-end-width"],["-webkit-border-before","border-block-start"],["-webkit-border-before-color","border-block-start-color"],["-webkit-border-before-style","border-block-start-style"],["-webkit-border-before-width","border-block-start-width"],["-webkit-border-bottom-left-radius","border-bottom-left-radius"],["-webkit-border-bottom-right-radius","border-bottom-right-radius"],["-webkit-border-end","border-inline-end"],["-webkit-border-end-color","border-inline-end-color"],["-webkit-border-end-style","border-inline-end-style"],["-webkit-border-end-width","border-inline-end-width"],["-webkit-border-radius","border-radius"],["-webkit-border-start","border-inline-start"],["-webkit-border-start-color","border-inline-start-color"],["-webkit-border-start-style","border-inline-start-style"],["-webkit-border-start-width","border-inline-start-width"],["-webkit-border-top-left-radius","border-top-left-radius"],["-webkit-border-top-right-radius","border-top-right-radius"],["-webkit-box-shadow","box-shadow"],["-webkit-box-sizing","box-sizing"],["-webkit-clip-path","clip-path"],["-webkit-column-count","column-count"],["-webkit-column-gap","column-gap"],["-webkit-column-rule","column-rule"],["-webkit-column-rule-color","column-rule-color"],["-webkit-column-rule-style","column-rule-style"],["-webkit-column-rule-width","column-rule-width"],["-webkit-column-span","column-span"],["-webkit-column-width","column-width"],["-webkit-columns","columns"],["-webkit-filter","filter"],["-webkit-flex","flex"],["-webkit-flex-basis","flex-basis"],["-webkit-flex-direction","flex-direction"],["-webkit-flex-flow","flex-flow"],["-webkit-flex-grow","flex-grow"],["-webkit-flex-shrink","flex-shrink"],["-webkit-flex-wrap","flex-wrap"],["-webkit-font-feature-settings","font-feature-settings"],["-webkit-hyphenate-character","hyphenate-character"],["-webkit-justify-content","justify-content"],["-webkit-logical-height","block-size"],["-webkit-logical-width","inline-size"],["-webkit-margin-after","margin-block-end"],["-webkit-margin-before","margin-block-start"],["-webkit-margin-end","margin-inline-end"],["-webkit-margin-start","margin-inline-start"],["-webkit-mask","mask"],["-webkit-mask-clip","mask-clip"],["-webkit-mask-composite","mask-composite"],["-webkit-mask-image","mask-image"],["-webkit-mask-origin","mask-origin"],["-webkit-mask-position","mask-position"],["-webkit-mask-repeat","mask-repeat"],["-webkit-mask-size","mask-size"],["-webkit-max-logical-height","max-block-size"],["-webkit-max-logical-width","max-inline-size"],["-webkit-min-logical-height","min-block-size"],["-webkit-min-logical-width","min-inline-size"],["-webkit-opacity","opacity"],["-webkit-order","order"],["-webkit-padding-after","padding-block-end"],["-webkit-padding-before","padding-block-start"],["-webkit-padding-end","padding-inline-end"],["-webkit-padding-start","padding-inline-start"],["-webkit-perspective","perspective"],["-webkit-perspective-origin","perspective-origin"],["-webkit-print-color-adjust","print-color-adjust"],["-webkit-shape-image-threshold","shape-image-threshold"],["-webkit-shape-margin","shape-margin"],["-webkit-shape-outside","shape-outside"],["-webkit-text-emphasis","text-emphasis"],["-webkit-text-emphasis-color","text-emphasis-color"],["-webkit-text-emphasis-position","text-emphasis-position"],["-webkit-text-emphasis-style","text-emphasis-style"],["-webkit-text-size-adjust","text-size-adjust"],["-webkit-transform","transform"],["-webkit-transform-origin","transform-origin"],["-webkit-transform-style","transform-style"],["-webkit-transition","transition"],["-webkit-transition-delay","transition-delay"],["-webkit-transition-duration","transition-duration"],["-webkit-transition-property","transition-property"],["-webkit-transition-timing-function","transition-timing-function"],["-webkit-user-select","user-select"],["grid-column-gap","column-gap"],["grid-gap","gap"],["grid-row-gap","row-gap"],["word-wrap","overflow-wrap"]]);class f{#t=[];#s=new Map;#r=new Map;#i=new Set;#n=new Set;#o=new Map;#a=new Map;#l=[];#c=[];#d;constructor(e,t){this.#a=t;for(let t=0;t<e.length;++t){const s=e[t],r=s.name;if(!CSS.supports(r,"initial"))continue;this.#t.push(r),s.inherited&&this.#i.add(r),s.svg&&this.#n.add(r);const i=e[t].longhands;if(i){this.#s.set(r,i);for(let e=0;e<i.length;++e){const t=i[e];let s=this.#r.get(t);s||(s=[],this.#r.set(t,s)),s.push(r)}}}this.#t.sort(f.sortPrefixesAndCSSWideKeywordsToEnd),this.#d=new Set(this.#t);const s=new Map;for(const[e,t]of Object.entries(p))s.set(e,new Set(t.values));for(const[e,t]of D){const r=s.get(e);r?s.set(e,r.union(t)):s.set(e,t)}for(const[e,t]of s){for(const s of F)!t.has(s)&&CSS.supports(e,s)&&t.add(s);this.#o.set(e,[...t])}for(const e of this.#d){const t=this.specificPropertyValues(e).filter(t=>CSS.supports(e,t)).sort(f.sortPrefixesAndCSSWideKeywordsToEnd).map(t=>`${e}: ${t}`);this.isSVGProperty(e)||this.#l.push(...t),this.#c.push(...t)}}static isCSSWideKeyword(e){return y.includes(e)}static isPositionTryOrderKeyword(e){return v.includes(e)}static sortPrefixesAndCSSWideKeywordsToEnd(e,t){const s=f.isCSSWideKeyword(e),r=f.isCSSWideKeyword(t);if(s&&!r)return 1;if(!s&&r)return-1;const i=e.startsWith("-webkit-"),n=t.startsWith("-webkit-");return i&&!n?1:!i&&n||e<t?-1:e>t?1:0}allProperties(){return this.#t}aliasesFor(){return this.#a}nameValuePresets(e){return e?this.#c:this.#l}isSVGProperty(e){return e=e.toLowerCase(),this.#n.has(e)}getLonghands(e){return this.#s.get(e)||null}getShorthands(e){return this.#r.get(e)||null}isColorAwareProperty(e){return E.has(e.toLowerCase())||this.isCustomProperty(e.toLowerCase())}isFontFamilyProperty(e){return"font-family"===e.toLowerCase()}isAngleAwareProperty(e){const t=e.toLowerCase();return E.has(t)||L.has(t)}isGridAreaDefiningProperty(e){return"grid"===(e=e.toLowerCase())||"grid-template"===e||"grid-template-areas"===e}isGridColumnNameAwareProperty(e){return e=e.toLowerCase(),["grid-column","grid-column-start","grid-column-end"].includes(e)}isGridRowNameAwareProperty(e){return e=e.toLowerCase(),["grid-row","grid-row-start","grid-row-end"].includes(e)}isGridAreaNameAwareProperty(e){return"grid-area"===e.toLowerCase()}isGridNameAwareProperty(e){return this.isGridAreaNameAwareProperty(e)||this.isGridColumnNameAwareProperty(e)||this.isGridRowNameAwareProperty(e)}isLengthProperty(e){return"line-height"!==(e=e.toLowerCase())&&(T.has(e)||e.startsWith("margin")||e.startsWith("padding")||-1!==e.indexOf("width")||-1!==e.indexOf("height"))}isBezierAwareProperty(e){return e=e.toLowerCase(),M.has(e)||this.isCustomProperty(e)}isFontAwareProperty(e){return e=e.toLowerCase(),P.has(e)||this.isCustomProperty(e)}isCustomProperty(e){return e.startsWith("--")}isShadowProperty(e){return"box-shadow"===(e=e.toLowerCase())||"text-shadow"===e||"-webkit-box-shadow"===e}isStringProperty(e){return"content"===e.toLowerCase()}canonicalPropertyName(e){if(this.isCustomProperty(e))return e;e=e.toLowerCase();const t=this.#a.get(e);if(t)return t;if(!e||e.length<9||"-"!==e.charAt(0))return e;const s=e.match(/(?:-webkit-)(.+)/);return s&&this.#d.has(s[1])?s[1]:e}isCSSPropertyName(e){return!!((e=e.toLowerCase()).startsWith("--")&&e.length>2||e.startsWith("-moz-")||e.startsWith("-ms-")||e.startsWith("-o-")||e.startsWith("-webkit-"))||this.#d.has(e)}isPropertyInherited(e){return(e=e.toLowerCase()).startsWith("--")||this.#i.has(this.canonicalPropertyName(e))||this.#i.has(e)}specificPropertyValues(e){const t=e.replace(/^-webkit-/,""),s=this.#o;let r=s.get(e)||s.get(t);if(!r){r=[];for(const t of F)CSS.supports(e,t)&&r.push(t);s.set(e,r)}return r}getPropertyValues(t){t=t.toLowerCase();const s=[...this.specificPropertyValues(t),...y];if(this.isColorAwareProperty(t)){s.push("currentColor");for(const t of e.Color.Nicknames.keys())s.push(t)}return s.sort(f.sortPrefixesAndCSSWideKeywordsToEnd)}propertyUsageWeight(e){return N.get(e)||N.get(this.canonicalPropertyName(e))||0}getValuePreset(e,t){const s=R.get(e);let r=s?s.get(t):null;if(!r)return null;let i=r.length,n=r.length;return r&&(i=r.indexOf("|"),n=r.lastIndexOf("|"),n=i===n?n:n-1,r=r.replace(/\|/g,"")),{text:r,startColumn:i,endColumn:n}}isHighlightPseudoType(e){return"highlight"===e||"selection"===e||"target-text"===e||"grammar-error"===e||"spelling-error"===e}}const b=new Map([["linear","cubic-bezier(0, 0, 1, 1)"],["ease","cubic-bezier(0.25, 0.1, 0.25, 1)"],["ease-in","cubic-bezier(0.42, 0, 1, 1)"],["ease-in-out","cubic-bezier(0.42, 0, 0.58, 1)"],["ease-out","cubic-bezier(0, 0, 0.58, 1)"]]),y=["inherit","initial","revert","revert-layer","unset"],v=["normal","most-height","most-width","most-block-size","most-inline-size"],I=/((?:\[[\w\- ]+\]\s*)*(?:"[^"]+"|'[^']+'))[^'"\[]*\[?[^'"\[]*/;let w=null;function S(){return w||(w=new f(g,m)),w}const k=new Map([["linear-gradient","linear-gradient(|45deg, black, transparent|)"],["radial-gradient","radial-gradient(|black, transparent|)"],["repeating-linear-gradient","repeating-linear-gradient(|45deg, black, transparent 100px|)"],["repeating-radial-gradient","repeating-radial-gradient(|black, transparent 100px|)"],["url","url(||)"]]),C=new Map([["blur","blur(|1px|)"],["brightness","brightness(|0.5|)"],["contrast","contrast(|0.5|)"],["drop-shadow","drop-shadow(|2px 4px 6px black|)"],["grayscale","grayscale(|1|)"],["hue-rotate","hue-rotate(|45deg|)"],["invert","invert(|1|)"],["opacity","opacity(|0.5|)"],["saturate","saturate(|0.5|)"],["sepia","sepia(|1|)"],["url","url(||)"]]),x=new Map([["superellipse(0.5)","superellipse(|0.5|)"],["superellipse(infinity)","superellipse(|infinity|)"]]),R=new Map([["filter",C],["backdrop-filter",C],["background",k],["background-image",k],["-webkit-mask-image",k],["transform",new Map([["scale","scale(|1.5|)"],["scaleX","scaleX(|1.5|)"],["scaleY","scaleY(|1.5|)"],["scale3d","scale3d(|1.5, 1.5, 1.5|)"],["rotate","rotate(|45deg|)"],["rotateX","rotateX(|45deg|)"],["rotateY","rotateY(|45deg|)"],["rotateZ","rotateZ(|45deg|)"],["rotate3d","rotate3d(|1, 1, 1, 45deg|)"],["skew","skew(|10deg, 10deg|)"],["skewX","skewX(|10deg|)"],["skewY","skewY(|10deg|)"],["translate","translate(|10px, 10px|)"],["translateX","translateX(|10px|)"],["translateY","translateY(|10px|)"],["translateZ","translateZ(|10px|)"],["translate3d","translate3d(|10px, 10px, 10px|)"],["matrix","matrix(|1, 0, 0, 1, 0, 0|)"],["matrix3d","matrix3d(|1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1|)"],["perspective","perspective(|10px|)"]])],["corner-shape",x]]),T=new Set(["background-position","border-spacing","bottom","font-size","height","left","letter-spacing","max-height","max-width","min-height","min-width","right","text-indent","top","width","word-spacing","grid-row-gap","grid-column-gap","row-gap"]),M=new Set(["animation","animation-timing-function","transition","transition-timing-function","-webkit-animation","-webkit-animation-timing-function","-webkit-transition","-webkit-transition-timing-function"]),P=new Set(["font-size","line-height","font-weight","font-family","letter-spacing"]),E=new Set(["accent-color","background","background-color","background-image","border","border-color","border-image","border-image-source","border-bottom","border-bottom-color","border-left","border-left-color","border-right","border-right-color","border-top","border-top-color","border-block","border-block-color","border-block-end","border-block-end-color","border-block-start","border-block-start-color","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-start","border-inline-start-color","box-shadow","caret-color","color","column-rule","column-rule-color","content","fill","list-style-image","mask","mask-image","mask-border","mask-border-source","outline","outline-color","scrollbar-color","stop-color","stroke","text-decoration-color","text-shadow","text-emphasis","text-emphasis-color","-webkit-border-after","-webkit-border-after-color","-webkit-border-before","-webkit-border-before-color","-webkit-border-end","-webkit-border-end-color","-webkit-border-start","-webkit-border-start-color","-webkit-box-reflect","-webkit-box-shadow","-webkit-column-rule-color","-webkit-mask","-webkit-mask-box-image","-webkit-mask-box-image-source","-webkit-mask-image","-webkit-tap-highlight-color","-webkit-text-emphasis","-webkit-text-emphasis-color","-webkit-text-fill-color","-webkit-text-stroke","-webkit-text-stroke-color","flood-color","lighting-color","stop-color"]),L=new Set(["-webkit-border-image","transform","-webkit-transform","rotate","filter","-webkit-filter","backdrop-filter","offset","offset-rotate","font-style"]),A=new Set(["over","under","over right","over left","under right","under left"]),O=new Set(["none","dot","circle","double-circle","triangle","sesame","filled","open","dot open","circle open","double-circle open","triangle open","sesame open",'""']),D=new Map([["background-repeat",new Set(["repeat","repeat-x","repeat-y","no-repeat","space","round"])],["content",new Set(["normal","close-quote","no-close-quote","no-open-quote","open-quote"])],["baseline-shift",new Set(["baseline"])],["max-height",new Set(["min-content","max-content","-webkit-fill-available","fit-content"])],["color",new Set(["black"])],["background-color",new Set(["white"])],["box-shadow",new Set(["inset"])],["text-shadow",new Set(["0 0 black"])],["-webkit-writing-mode",new Set(["horizontal-tb","vertical-rl","vertical-lr"])],["writing-mode",new Set(["lr","rl","tb","lr-tb","rl-tb","tb-rl"])],["page-break-inside",new Set(["avoid"])],["cursor",new Set(["-webkit-zoom-in","-webkit-zoom-out","-webkit-grab","-webkit-grabbing"])],["border-width",new Set(["medium","thick","thin"])],["border-style",new Set(["hidden","inset","groove","ridge","outset","dotted","dashed","solid","double"])],["size",new Set(["a3","a4","a5","b4","b5","landscape","ledger","legal","letter","portrait"])],["overflow",new Set(["hidden","visible","overlay","scroll"])],["overscroll-behavior",new Set(["contain"])],["text-rendering",new Set(["optimizeSpeed","optimizeLegibility","geometricPrecision"])],["text-align",new Set(["-webkit-auto","-webkit-match-parent"])],["clip-path",new Set(["circle","ellipse","inset","polygon","url"])],["color-interpolation",new Set(["sRGB","linearRGB"])],["word-wrap",new Set(["normal","break-word"])],["font-weight",new Set(["100","200","300","400","500","600","700","800","900"])],["text-emphasis",O],["-webkit-text-emphasis",O],["color-rendering",new Set(["optimizeSpeed","optimizeQuality"])],["-webkit-text-combine",new Set(["horizontal"])],["text-orientation",new Set(["sideways-right"])],["outline",new Set(["inset","groove","ridge","outset","dotted","dashed","solid","double","medium","thick","thin"])],["font",new Set(["caption","icon","menu","message-box","small-caption","-webkit-mini-control","-webkit-small-control","-webkit-control","status-bar"])],["dominant-baseline",new Set(["text-before-edge","text-after-edge","use-script","no-change","reset-size"])],["text-emphasis-position",A],["-webkit-text-emphasis-position",A],["alignment-baseline",new Set(["before-edge","after-edge","text-before-edge","text-after-edge","hanging"])],["page-break-before",new Set(["left","right","always","avoid"])],["border-image",new Set(["repeat","stretch","space","round"])],["text-decoration",new Set(["blink","line-through","overline","underline","wavy","double","solid","dashed","dotted"])],["font-family",new Set(["serif","sans-serif","cursive","fantasy","monospace","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","-webkit-body"])],["zoom",new Set(["normal"])],["max-width",new Set(["min-content","max-content","-webkit-fill-available","fit-content"])],["-webkit-font-smoothing",new Set(["antialiased","subpixel-antialiased"])],["border",new Set(["hidden","inset","groove","ridge","outset","dotted","dashed","solid","double","medium","thick","thin"])],["font-variant",new Set(["small-caps","normal","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"])],["vertical-align",new Set(["top","bottom","-webkit-baseline-middle"])],["page-break-after",new Set(["left","right","always","avoid"])],["text-emphasis-style",O],["-webkit-text-emphasis-style",O],["transform",new Set(["scale","scaleX","scaleY","scale3d","rotate","rotateX","rotateY","rotateZ","rotate3d","skew","skewX","skewY","translate","translateX","translateY","translateZ","translate3d","matrix","matrix3d","perspective"])],["align-content",new Set(["normal","baseline","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end"])],["justify-content",new Set(["normal","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end","left","right"])],["place-content",new Set(["normal","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end","baseline"])],["align-items",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","anchor-center"])],["justify-items",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","left","right","legacy","anchor-center"])],["place-items",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","anchor-center"])],["align-self",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","anchor-center"])],["justify-self",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","left","right","anchor-center"])],["place-self",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","anchor-center"])],["perspective-origin",new Set(["left","center","right","top","bottom"])],["transform-origin",new Set(["left","center","right","top","bottom"])],["transition-timing-function",new Set(["cubic-bezier","steps"])],["animation-timing-function",new Set(["cubic-bezier","steps"])],["-webkit-backface-visibility",new Set(["visible","hidden"])],["-webkit-column-break-after",new Set(["always","avoid"])],["-webkit-column-break-before",new Set(["always","avoid"])],["-webkit-column-break-inside",new Set(["avoid"])],["-webkit-column-span",new Set(["all"])],["-webkit-column-gap",new Set(["normal"])],["filter",new Set(["url","blur","brightness","contrast","drop-shadow","grayscale","hue-rotate","invert","opacity","saturate","sepia"])],["backdrop-filter",new Set(["url","blur","brightness","contrast","drop-shadow","grayscale","hue-rotate","invert","opacity","saturate","sepia"])],["grid-template-columns",new Set(["min-content","max-content"])],["grid-template-rows",new Set(["min-content","max-content"])],["grid-auto-flow",new Set(["dense"])],["background",new Set(["repeat","repeat-x","repeat-y","no-repeat","top","bottom","left","right","center","fixed","local","scroll","space","round","border-box","content-box","padding-box","linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"])],["background-image",new Set(["linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"])],["background-position",new Set(["top","bottom","left","right","center"])],["background-position-x",new Set(["left","right","center"])],["background-position-y",new Set(["top","bottom","center"])],["background-repeat-x",new Set(["repeat","no-repeat"])],["background-repeat-y",new Set(["repeat","no-repeat"])],["border-bottom",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["border-left",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["border-right",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["border-top",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["buffered-rendering",new Set(["static","dynamic"])],["color-interpolation-filters",new Set(["srgb","linearrgb"])],["column-rule",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["flex-flow",new Set(["nowrap","row","row-reverse","column","column-reverse","wrap","wrap-reverse"])],["height",new Set(["-webkit-fill-available"])],["inline-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["list-style",new Set(["outside","inside","disc","circle","square","decimal","decimal-leading-zero","arabic-indic","bengali","cambodian","khmer","devanagari","gujarati","gurmukhi","kannada","lao","malayalam","mongolian","myanmar","oriya","persian","urdu","telugu","tibetan","thai","lower-roman","upper-roman","lower-greek","lower-alpha","lower-latin","upper-alpha","upper-latin","cjk-earthly-branch","cjk-heavenly-stem","ethiopic-halehame","ethiopic-halehame-am","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","hangul","hangul-consonant","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","hebrew","armenian","lower-armenian","upper-armenian","georgian","cjk-ideographic","simp-chinese-formal","simp-chinese-informal","trad-chinese-formal","trad-chinese-informal","hiragana","katakana","hiragana-iroha","katakana-iroha"])],["max-block-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["max-inline-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["min-block-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["min-height",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["min-inline-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["min-width",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["object-position",new Set(["top","bottom","left","right","center"])],["shape-outside",new Set(["border-box","content-box","padding-box","margin-box"])],["-webkit-appearance",new Set(["checkbox","radio","push-button","square-button","button","inner-spin-button","listbox","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","menulist","menulist-button","meter","progress-bar","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","searchfield","searchfield-cancel-button","textfield","textarea"])],["-webkit-border-after",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["-webkit-border-after-style",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"])],["-webkit-border-after-width",new Set(["medium","thick","thin"])],["-webkit-border-before",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["-webkit-border-before-style",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"])],["-webkit-border-before-width",new Set(["medium","thick","thin"])],["-webkit-border-end",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["-webkit-border-end-style",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"])],["-webkit-border-end-width",new Set(["medium","thick","thin"])],["-webkit-border-start",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["-webkit-border-start-style",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"])],["-webkit-border-start-width",new Set(["medium","thick","thin"])],["-webkit-logical-height",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-logical-width",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-mask-box-image",new Set(["repeat","stretch","space","round"])],["-webkit-mask-box-image-repeat",new Set(["repeat","stretch","space","round"])],["-webkit-mask-clip",new Set(["text","border","border-box","content","content-box","padding","padding-box"])],["-webkit-mask-composite",new Set(["clear","copy","source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","xor","plus-lighter"])],["-webkit-mask-image",new Set(["linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"])],["-webkit-mask-origin",new Set(["border","border-box","content","content-box","padding","padding-box"])],["-webkit-mask-position",new Set(["top","bottom","left","right","center"])],["-webkit-mask-position-x",new Set(["left","right","center"])],["-webkit-mask-position-y",new Set(["top","bottom","center"])],["-webkit-mask-repeat",new Set(["repeat","repeat-x","repeat-y","no-repeat","space","round"])],["-webkit-mask-size",new Set(["contain","cover"])],["-webkit-max-logical-height",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-max-logical-width",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-min-logical-height",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-min-logical-width",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-perspective-origin-x",new Set(["left","right","center"])],["-webkit-perspective-origin-y",new Set(["top","bottom","center"])],["-webkit-text-decorations-in-effect",new Set(["blink","line-through","overline","underline"])],["-webkit-text-stroke",new Set(["medium","thick","thin"])],["-webkit-text-stroke-width",new Set(["medium","thick","thin"])],["-webkit-transform-origin-x",new Set(["left","right","center"])],["-webkit-transform-origin-y",new Set(["top","bottom","center"])],["width",new Set(["-webkit-fill-available"])],["contain-intrinsic-width",new Set(["auto none","auto 100px"])],["contain-intrinsic-height",new Set(["auto none","auto 100px"])],["contain-intrinsic-size",new Set(["auto none","auto 100px"])],["contain-intrinsic-inline-size",new Set(["auto none","auto 100px"])],["contain-intrinsic-block-size",new Set(["auto none","auto 100px"])],["white-space",new Set(["normal","pre","pre-wrap","pre-line","nowrap","break-spaces"])],["text-box-edge",new Set(["auto","text","cap","ex","text alphabetic","cap alphabetic","ex alphabetic"])],["corner-shape",new Set(["round","scoop","bevel","notch","straight","squircle","superellipse(0.5)","superellipse(infinity)"])]]),N=new Map([["align-content",57],["align-items",129],["align-self",55],["animation",175],["animation-delay",114],["animation-direction",113],["animation-duration",137],["animation-fill-mode",132],["animation-iteration-count",124],["animation-name",139],["animation-play-state",104],["animation-timing-function",141],["backface-visibility",123],["background",260],["background-attachment",119],["background-clip",165],["background-color",259],["background-image",246],["background-origin",107],["background-position",237],["background-position-x",108],["background-position-y",93],["background-repeat",234],["background-size",203],["border",263],["border-bottom",233],["border-bottom-color",190],["border-bottom-left-radius",186],["border-bottom-right-radius",185],["border-bottom-style",150],["border-bottom-width",179],["border-collapse",209],["border-color",226],["border-image",89],["border-image-outset",50],["border-image-repeat",49],["border-image-slice",58],["border-image-source",32],["border-image-width",52],["border-left",221],["border-left-color",174],["border-left-style",142],["border-left-width",172],["border-radius",224],["border-right",223],["border-right-color",182],["border-right-style",130],["border-right-width",178],["border-spacing",198],["border-style",206],["border-top",231],["border-top-color",192],["border-top-left-radius",187],["border-top-right-radius",189],["border-top-style",152],["border-top-width",180],["border-width",214],["bottom",227],["box-shadow",213],["box-sizing",216],["caption-side",96],["clear",229],["clip",173],["clip-rule",5],["color",256],["content",219],["counter-increment",111],["counter-reset",110],["cursor",250],["direction",176],["display",262],["empty-cells",99],["fill",140],["fill-opacity",82],["fill-rule",22],["filter",160],["flex",133],["flex-basis",66],["flex-direction",85],["flex-flow",94],["flex-grow",112],["flex-shrink",61],["flex-wrap",68],["float",252],["font",211],["font-family",254],["font-kerning",18],["font-size",264],["font-stretch",77],["font-style",220],["font-variant",161],["font-weight",257],["height",266],["image-rendering",90],["justify-content",127],["left",248],["letter-spacing",188],["line-height",244],["list-style",215],["list-style-image",145],["list-style-position",149],["list-style-type",199],["margin",267],["margin-bottom",241],["margin-left",243],["margin-right",238],["margin-top",253],["mask",20],["max-height",205],["max-width",225],["min-height",217],["min-width",218],["object-fit",33],["opacity",251],["order",117],["orphans",146],["outline",222],["outline-color",153],["outline-offset",147],["outline-style",151],["outline-width",148],["overflow",255],["overflow-wrap",105],["overflow-x",184],["overflow-y",196],["padding",265],["padding-bottom",230],["padding-left",235],["padding-right",232],["padding-top",240],["page",8],["page-break-after",120],["page-break-before",69],["page-break-inside",121],["perspective",92],["perspective-origin",103],["pointer-events",183],["position",261],["quotes",158],["resize",168],["right",245],["shape-rendering",38],["size",64],["speak",118],["src",170],["stop-color",42],["stop-opacity",31],["stroke",98],["stroke-dasharray",36],["stroke-dashoffset",3],["stroke-linecap",30],["stroke-linejoin",21],["stroke-miterlimit",12],["stroke-opacity",34],["stroke-width",87],["table-layout",171],["tab-size",46],["text-align",260],["text-anchor",35],["text-decoration",247],["text-indent",207],["text-overflow",204],["text-rendering",155],["text-shadow",208],["text-transform",202],["top",258],["touch-action",80],["transform",181],["transform-origin",162],["transform-style",86],["transition",193],["transition-delay",134],["transition-duration",135],["transition-property",131],["transition-timing-function",122],["unicode-bidi",156],["unicode-range",136],["vertical-align",236],["visibility",242],["-webkit-appearance",191],["-webkit-backface-visibility",154],["-webkit-background-clip",164],["-webkit-background-origin",40],["-webkit-background-size",163],["-webkit-border-end",9],["-webkit-border-horizontal-spacing",81],["-webkit-border-image",75],["-webkit-border-radius",212],["-webkit-border-start",10],["-webkit-border-start-color",16],["-webkit-border-start-width",13],["-webkit-border-vertical-spacing",43],["-webkit-box-align",101],["-webkit-box-direction",51],["-webkit-box-flex",128],["-webkit-box-ordinal-group",91],["-webkit-box-orient",144],["-webkit-box-pack",106],["-webkit-box-reflect",39],["-webkit-box-shadow",210],["-webkit-column-break-inside",60],["-webkit-column-count",84],["-webkit-column-gap",76],["-webkit-column-rule",25],["-webkit-column-rule-color",23],["-webkit-columns",44],["-webkit-column-span",29],["-webkit-column-width",47],["-webkit-filter",159],["-webkit-font-feature-settings",59],["-webkit-font-smoothing",177],["-webkit-line-break",45],["-webkit-line-clamp",126],["-webkit-margin-after",67],["-webkit-margin-before",70],["-webkit-margin-collapse",14],["-webkit-margin-end",65],["-webkit-margin-start",100],["-webkit-mask",19],["-webkit-mask-box-image",72],["-webkit-mask-image",88],["-webkit-mask-position",54],["-webkit-mask-repeat",63],["-webkit-mask-size",79],["-webkit-padding-after",15],["-webkit-padding-before",28],["-webkit-padding-end",48],["-webkit-padding-start",73],["-webkit-print-color-adjust",83],["-webkit-rtl-ordering",7],["-webkit-tap-highlight-color",169],["-webkit-text-emphasis-color",11],["-webkit-text-fill-color",71],["-webkit-text-security",17],["-webkit-text-stroke",56],["-webkit-text-stroke-color",37],["-webkit-text-stroke-width",53],["-webkit-user-drag",95],["-webkit-user-modify",62],["-webkit-user-select",194],["-webkit-writing-mode",4],["white-space",228],["widows",115],["width",268],["will-change",74],["word-break",166],["word-spacing",157],["word-wrap",197],["writing-mode",41],["z-index",239],["zoom",200]]),F=["auto","none"];var B=Object.freeze({__proto__:null,CSSMetadata:f,CSSWideKeywords:y,CubicBezierKeywordValues:b,CustomVariableRegex:/(var\(*--[\w\d]+-([\w]+-[\w]+)\))/g,GridAreaRowRegex:I,PositionTryOrderKeywords:v,URLRegex:/url\(\s*('.+?'|".+?"|[^)]+)\s*\)/g,VariableNameRegex:/(\s*--.*?)/gs,VariableRegex:/(var\(\s*--.*?\))/gs,cssMetadata:S});const _="<opaque>";class H{#h;#u;#g;#m=new Map;#p=0;#f;#b=null;#y;constructor(e,t,s,r,i){this.#h=e,this.#u=t,this.#g=s,this.#f=r||"Medium",this.#y=i}static fromProtocolCookie(e){const t=new H(e.name,e.value,null,e.priority);return t.addAttribute("domain",e.domain),t.addAttribute("path",e.path),e.expires&&t.addAttribute("expires",1e3*e.expires),e.httpOnly&&t.addAttribute("http-only"),e.secure&&t.addAttribute("secure"),e.sameSite&&t.addAttribute("same-site",e.sameSite),"sourcePort"in e&&t.addAttribute("source-port",e.sourcePort),"sourceScheme"in e&&t.addAttribute("source-scheme",e.sourceScheme),"partitionKey"in e&&e.partitionKey&&t.setPartitionKey(e.partitionKey.topLevelSite,e.partitionKey.hasCrossSiteAncestor),"partitionKeyOpaque"in e&&e.partitionKeyOpaque&&t.addAttribute("partition-key",_),t.setSize(e.size),t}key(){return(this.domain()||"-")+" "+this.name()+" "+(this.path()||"-")+" "+(this.partitionKey()?this.topLevelSite()+" "+(this.hasCrossSiteAncestor()?"cross_site":"same_site"):"-")}name(){return this.#h}value(){return this.#u}type(){return this.#g}httpOnly(){return this.#m.has("http-only")}secure(){return this.#m.has("secure")}partitioned(){return this.#m.has("partitioned")||Boolean(this.partitionKey())||this.partitionKeyOpaque()}sameSite(){return this.#m.get("same-site")}partitionKey(){return this.#y}setPartitionKey(e,t){this.#y={topLevelSite:e,hasCrossSiteAncestor:t},this.#m.has("partitioned")||this.addAttribute("partitioned")}topLevelSite(){return this.#y?this.#y?.topLevelSite:""}setTopLevelSite(e,t){this.setPartitionKey(e,t)}hasCrossSiteAncestor(){return!!this.#y&&this.#y?.hasCrossSiteAncestor}setHasCrossSiteAncestor(e){this.partitionKey()&&Boolean(this.topLevelSite())&&this.setPartitionKey(this.topLevelSite(),e)}partitionKeyOpaque(){return!!this.#y&&this.topLevelSite()===_}setPartitionKeyOpaque(){this.addAttribute("partition-key",_),this.setPartitionKey(_,!1)}priority(){return this.#f}session(){return!(this.#m.has("expires")||this.#m.has("max-age"))}path(){return this.#m.get("path")}domain(){return this.#m.get("domain")}expires(){return this.#m.get("expires")}maxAge(){return this.#m.get("max-age")}sourcePort(){return this.#m.get("source-port")}sourceScheme(){return this.#m.get("source-scheme")}size(){return this.#p}url(){if(!this.domain()||!this.path())return null;let e="";const t=this.sourcePort();return t&&80!==t&&443!==t&&(e=`:${this.sourcePort()}`),(this.secure()?"https://":"http://")+this.domain()+e+this.path()}setSize(e){this.#p=e}expiresDate(e){return this.maxAge()?new Date(e.getTime()+1e3*this.maxAge()):this.expires()?new Date(this.expires()):null}addAttribute(e,t){e&&("priority"===e?this.#f=t:this.#m.set(e,t))}hasAttribute(e){return this.#m.has(e)}getAttribute(e){return this.#m.get(e)}setCookieLine(e){this.#b=e}getCookieLine(){return this.#b}matchesSecurityOrigin(e){const t=new URL(e).hostname;return H.isDomainMatch(this.domain(),t)}static isDomainMatch(e,t){return t===e||!(!e||"."!==e[0])&&(e.substr(1)===t||t.length>e.length&&t.endsWith(e))}}var U,q=Object.freeze({__proto__:null,Cookie:H});class z extends l.InspectorBackend.TargetBase{#w;#h;#v=r.DevToolsPath.EmptyUrlString;#k="";#S;#g;#x;#C;#I=new Map;#R;#T=!1;#P;#E;constructor(t,s,r,i,n,o,a,l,c){switch(super(i===U.NODE,n,o,l),this.#w=t,this.#h=r,this.#S=0,i){case U.FRAME:this.#S=1027519,n?.type()!==U.FRAME&&(this.#S|=21056,e.ParsedURL.schemeIs(c?.url,"chrome-extension:")&&(this.#S&=-513));break;case U.ServiceWorker:this.#S=657468,n?.type()!==U.FRAME&&(this.#S|=1);break;case U.SHARED_WORKER:this.#S=919612;break;case U.SHARED_STORAGE_WORKLET:this.#S=526348;break;case U.Worker:this.#S=917820;break;case U.WORKLET:this.#S=524316;break;case U.NODE:this.#S=20;break;case U.AUCTION_WORKLET:this.#S=524292;break;case U.BROWSER:this.#S=131104;break;case U.TAB:this.#S=160}this.#g=i,this.#x=n,this.#C=s,this.#R=a,this.#P=c}createModels(e){this.#E=!0;const t=Array.from(h.registeredModels.entries());for(const[e,s]of t)s.early&&this.model(e);for(const[s,r]of t)(r.autostart||e.has(s))&&this.model(s);this.#E=!1}id(){return this.#C}name(){return this.#h||this.#k}setName(e){this.#h!==e&&(this.#h=e,this.#w.onNameChange(this))}type(){return this.#g}markAsNodeJSForTest(){super.markAsNodeJSForTest(),this.#g=U.NODE}targetManager(){return this.#w}hasAllCapabilities(e){return(this.#S&e)===e}decorateLabel(e){return this.#g===U.Worker||this.#g===U.ServiceWorker?" "+e:e}parentTarget(){return this.#x}outermostTarget(){let e=null,t=this;do{t.type()!==U.TAB&&t.type()!==U.BROWSER&&(e=t),t=t.parentTarget()}while(t);return e}dispose(e){super.dispose(e),this.#w.removeTarget(this);for(const e of this.#I.values())e.dispose()}model(e){if(!this.#I.get(e)){const t=h.registeredModels.get(e);if(void 0===t)throw new Error("Model class is not registered");if((this.#S&t.capabilities)===t.capabilities){const t=new e(this);this.#I.set(e,t),this.#E||this.#w.modelAdded(this,e,t,this.#w.isInScope(this))}}return this.#I.get(e)||null}models(){return this.#I}inspectedURL(){return this.#v}setInspectedURL(t){this.#v=t;const s=e.ParsedURL.ParsedURL.fromString(t);this.#k=s?s.lastPathComponentWithFragment():"#"+this.#C,this.#w.onInspectedURLChange(this),this.#h||this.#w.onNameChange(this)}hasCrashed(){return this.#T}setHasCrashed(e){const t=this.#T;this.#T=e,t&&!e&&this.resume()}async suspend(e){this.#R||(this.#R=!0,this.#T||(await Promise.all(Array.from(this.models().values(),t=>t.preSuspendModel(e))),await Promise.all(Array.from(this.models().values(),t=>t.suspendModel(e)))))}async resume(){this.#R&&(this.#R=!1,this.#T||(await Promise.all(Array.from(this.models().values(),e=>e.resumeModel())),await Promise.all(Array.from(this.models().values(),e=>e.postResumeModel()))))}suspended(){return this.#R}updateTargetInfo(e){this.#P=e}targetInfo(){return this.#P}}!function(e){e.FRAME="frame",e.ServiceWorker="service-worker",e.Worker="worker",e.SHARED_WORKER="shared-worker",e.SHARED_STORAGE_WORKLET="shared-storage-worklet",e.NODE="node",e.BROWSER="browser",e.AUCTION_WORKLET="auction-worklet",e.WORKLET="worklet",e.TAB="tab"}(U||(U={}));var j=Object.freeze({__proto__:null,Target:z,get Type(){return U}});let V;class W extends e.ObjectWrapper.ObjectWrapper{#M;#L;#A;#O;#D;#R;#N;#F;#_;#U;constructor(){super(),this.#M=new Set,this.#L=new Set,this.#A=new r.MapUtilities.Multimap,this.#O=new r.MapUtilities.Multimap,this.#R=!1,this.#N=null,this.#F=null,this.#D=new WeakSet,this.#_=!1,this.#U=new Set}static instance({forceNew:e}={forceNew:!1}){return V&&!e||(V=new W),V}static removeInstance(){V=void 0}onInspectedURLChange(e){e===this.#F&&(a.InspectorFrontendHost.InspectorFrontendHostInstance.inspectedURLChanged(e.inspectedURL()||r.DevToolsPath.EmptyUrlString),this.dispatchEventToListeners("InspectedURLChanged",e))}onNameChange(e){this.dispatchEventToListeners("NameChanged",e)}async suspendAllTargets(e){if(this.#R)return;this.#R=!0,this.dispatchEventToListeners("SuspendStateChanged");const t=Array.from(this.#M.values(),t=>t.suspend(e));await Promise.all(t)}async resumeAllTargets(){if(!this.#R)return;this.#R=!1,this.dispatchEventToListeners("SuspendStateChanged");const e=Array.from(this.#M.values(),e=>e.resume());await Promise.all(e)}allTargetsSuspended(){return this.#R}models(e,t){const s=[];for(const r of this.#M){if(t?.scoped&&!this.isInScope(r))continue;const i=r.model(e);i&&s.push(i)}return s}inspectedURL(){const e=this.primaryPageTarget();return e?e.inspectedURL():""}observeModels(e,t,s){const r=this.models(e,s);this.#O.set(e,t),s?.scoped&&this.#D.add(t);for(const e of r)t.modelAdded(e)}unobserveModels(e,t){this.#O.delete(e,t),this.#D.delete(t)}modelAdded(e,t,s,r){for(const e of this.#O.get(t).values())this.#D.has(e)&&!r||e.modelAdded(s)}modelRemoved(e,t,s,r){for(const e of this.#O.get(t).values())this.#D.has(e)&&!r||e.modelRemoved(s)}addModelListener(e,t,s,r,i){const n=e=>{i?.scoped&&!this.isInScope(e)||s.call(r,e)};for(const s of this.models(e))s.addEventListener(t,n);this.#A.set(t,{modelClass:e,thisObject:r,listener:s,wrappedListener:n})}removeModelListener(e,t,s,r){if(!this.#A.has(t))return;let i=null;for(const n of this.#A.get(t))n.modelClass===e&&n.listener===s&&n.thisObject===r&&(i=n.wrappedListener,this.#A.delete(t,n));if(i)for(const s of this.models(e))s.removeEventListener(t,i)}observeTargets(e,t){if(this.#L.has(e))throw new Error("Observer can only be registered once");t?.scoped&&this.#D.add(e);for(const s of this.#M)t?.scoped&&!this.isInScope(s)||e.targetAdded(s);this.#L.add(e)}unobserveTargets(e){this.#L.delete(e),this.#D.delete(e)}createTarget(e,t,s,r,i,n,o,a){const l=new z(this,e,t,s,r,i||"",this.#R,o||null,a);n&&l.pageAgent().invoke_waitForDebugger(),l.createModels(new Set(this.#O.keysArray())),this.#M.add(l);const c=this.isInScope(l);for(const e of[...this.#L])this.#D.has(e)&&!c||e.targetAdded(l);for(const[e,t]of l.models().entries())this.modelAdded(l,e,t,c);for(const e of this.#A.keysArray())for(const t of this.#A.get(e)){const s=l.model(t.modelClass);s&&s.addEventListener(e,t.wrappedListener)}return l!==l.outermostTarget()||l.type()===U.FRAME&&l!==this.primaryPageTarget()||this.#_||this.setScopeTarget(l),l}removeTarget(e){if(!this.#M.has(e))return;const t=this.isInScope(e);this.#M.delete(e);for(const r of e.models().keys()){const i=e.models().get(r);s(i),this.modelRemoved(e,r,i,t)}for(const s of[...this.#L])this.#D.has(s)&&!t||s.targetRemoved(e);for(const t of this.#A.keysArray())for(const s of this.#A.get(t)){const r=e.model(s.modelClass);r&&r.removeEventListener(t,s.wrappedListener)}}targets(){return[...this.#M]}targetById(e){return this.targets().find(t=>t.id()===e)||null}rootTarget(){return 0===this.#M.size?null:this.#M.values().next().value??null}primaryPageTarget(){let e=this.rootTarget();return e?.type()===U.TAB&&(e=this.targets().find(t=>t.parentTarget()===e&&t.type()===U.FRAME&&!t.targetInfo()?.subtype?.length)||null),e}browserTarget(){return this.#N}async maybeAttachInitialTarget(){if(!Boolean(o.Runtime.Runtime.queryParam("browserConnection")))return!1;this.#N||(this.#N=new z(this,"main","browser",U.BROWSER,null,"",!1,null,void 0),this.#N.createModels(new Set(this.#O.keysArray())));const e=await a.InspectorFrontendHost.InspectorFrontendHostInstance.initialTargetId();return this.#N.targetAgent().invoke_autoAttachRelated({targetId:e,waitForDebuggerOnStart:!0}),!0}clearAllTargetsForTest(){this.#M.clear()}isInScope(e){if(!e)return!1;for(function(e){return"source"in e&&e.source instanceof h}(e)&&(e=e.source),e instanceof h&&(e=e.target());e&&e!==this.#F;)e=e.parentTarget();return Boolean(e)&&e===this.#F}setScopeTarget(e){if(e!==this.#F){for(const e of this.targets())if(this.isInScope(e)){for(const t of this.#O.keysArray()){const s=e.models().get(t);if(s)for(const e of[...this.#O.get(t)].filter(e=>this.#D.has(e)))e.modelRemoved(s)}for(const t of[...this.#L].filter(e=>this.#D.has(e)))t.targetRemoved(e)}this.#F=e;for(const e of this.targets())if(this.isInScope(e)){for(const t of[...this.#L].filter(e=>this.#D.has(e)))t.targetAdded(e);for(const[t,s]of e.models().entries())for(const e of[...this.#O.get(t)].filter(e=>this.#D.has(e)))e.modelAdded(s)}for(const e of this.#U)e();e&&e.inspectedURL()&&this.onInspectedURLChange(e)}}addScopeChangeListener(e){this.#U.add(e)}scopeTarget(){return this.#F}}var G=Object.freeze({__proto__:null,Observer:class{targetAdded(e){}targetRemoved(e){}},SDKModelObserver:class{modelAdded(e){}modelRemoved(e){}},TargetManager:W});const K={noContentForWebSocket:"Content for WebSockets is currently not supported",noContentForRedirect:"No content available because this request was redirected",noContentForPreflight:"No content available for preflight request",noThrottling:"No throttling",offline:"Offline",slowG:"3G",fastG:"Slow 4G",fast4G:"Fast 4G",requestWasBlockedByDevtoolsS:'Request was blocked by DevTools: "{PH1}"',sFailedLoadingSS:'{PH1} failed loading: {PH2} "{PH3}".',sFinishedLoadingSS:'{PH1} finished loading: {PH2} "{PH3}".',directSocketStatusOpening:"Opening",directSocketStatusOpen:"Open",directSocketStatusClosed:"Closed",directSocketStatusAborted:"Aborted"},Q=n.i18n.registerUIStrings("core/sdk/NetworkManager.ts",K),$=n.i18n.getLocalizedString.bind(void 0,Q),X=n.i18n.getLazilyComputedLocalizedString.bind(void 0,Q),J=new WeakMap,Y=new Map([["2g","cellular2g"],["3g","cellular3g"],["4g","cellular4g"],["bluetooth","bluetooth"],["wifi","wifi"],["wimax","wimax"]]);class Z extends h{dispatcher;fetchDispatcher;#B;#H;constructor(t){super(t),this.dispatcher=new le(this),this.fetchDispatcher=new ae(t.fetchAgent(),this),this.#B=t.networkAgent(),t.registerNetworkDispatcher(this.dispatcher),t.registerFetchDispatcher(this.fetchDispatcher),e.Settings.Settings.instance().moduleSetting("cache-disabled").get()&&this.#B.invoke_setCacheDisabled({cacheDisabled:!0}),o.Runtime.hostConfig.devToolsPrivacyUI?.enabled&&!0!==o.Runtime.hostConfig.thirdPartyCookieControls?.managedBlockThirdPartyCookies&&(e.Settings.Settings.instance().createSetting("cookie-control-override-enabled",void 0).get()||e.Settings.Settings.instance().createSetting("grace-period-mitigation-disabled",void 0).get()||e.Settings.Settings.instance().createSetting("heuristic-mitigation-disabled",void 0).get())&&this.cookieControlFlagsSettingChanged(),this.#B.invoke_enable({maxPostDataSize:oe}),this.#B.invoke_setAttachDebugStack({enabled:!0}),this.#H=e.Settings.Settings.instance().createSetting("bypass-service-worker",!1),this.#H.get()&&this.bypassServiceWorkerChanged(),this.#H.addChangeListener(this.bypassServiceWorkerChanged,this),e.Settings.Settings.instance().moduleSetting("cache-disabled").addChangeListener(this.cacheDisabledSettingChanged,this),e.Settings.Settings.instance().createSetting("cookie-control-override-enabled",void 0).addChangeListener(this.cookieControlFlagsSettingChanged,this),e.Settings.Settings.instance().createSetting("grace-period-mitigation-disabled",void 0).addChangeListener(this.cookieControlFlagsSettingChanged,this),e.Settings.Settings.instance().createSetting("heuristic-mitigation-disabled",void 0).addChangeListener(this.cookieControlFlagsSettingChanged,this)}static forRequest(e){return J.get(e)||null}static canReplayRequest(t){return Boolean(J.get(t))&&Boolean(t.backendRequestId())&&!t.isRedirect()&&t.resourceType()===e.ResourceType.resourceTypes.XHR}static replayRequest(e){const t=J.get(e),s=e.backendRequestId();t&&s&&!e.isRedirect()&&t.#B.invoke_replayXHR({requestId:s})}static async searchInRequest(e,s,r,i){const n=Z.forRequest(e),o=e.backendRequestId();if(!n||!o||e.isRedirect())return[];const a=await n.#B.invoke_searchInResponseBody({requestId:o,query:s,caseSensitive:r,isRegex:i});return t.TextUtils.performSearchInSearchMatches(a.result||[],s,r,i)}static async requestContentData(s){if(s.resourceType()===e.ResourceType.resourceTypes.WebSocket)return{error:$(K.noContentForWebSocket)};if(s.finished||await s.once(Ti.FINISHED_LOADING),s.isRedirect())return{error:$(K.noContentForRedirect)};if(s.isPreflightRequest())return{error:$(K.noContentForPreflight)};const r=Z.forRequest(s);if(!r)return{error:"No network manager for request"};const i=s.backendRequestId();if(!i)return{error:"No backend request id for request"};const n=await r.#B.invoke_getResponseBody({requestId:i}),o=n.getError();return o?{error:o}:new t.ContentData.ContentData(n.body,n.base64Encoded,s.mimeType,s.charset()??void 0)}static async streamResponseBody(e){if(e.finished)return{error:"Streaming the response body is only available for in-flight requests."};const s=Z.forRequest(e);if(!s)return{error:"No network manager for request"};const r=e.backendRequestId();if(!r)return{error:"No backend request id for request"};const i=await s.#B.invoke_streamResourceContent({requestId:r}),n=i.getError();return n?{error:n}:(await e.waitForResponseReceived(),new t.ContentData.ContentData(i.bufferedData,!0,e.mimeType,e.charset()??void 0))}static async requestPostData(e){const t=Z.forRequest(e);if(!t)return console.error("No network manager for request"),null;const s=e.backendRequestId();if(!s)return console.error("No backend request id for request"),null;try{const{postData:e}=await t.#B.invoke_getRequestPostData({requestId:s});return e}catch(e){return e.message}}static connectionType(e){if(!e.download&&!e.upload)return"none";try{const t="function"==typeof e.title?e.title().toLowerCase():e.title.toLowerCase();for(const[e,s]of Y)if(t.includes(e))return s}catch{return"none"}return"other"}static lowercaseHeaders(e){const t={};for(const s in e)t[s.toLowerCase()]=e[s];return t}requestForURL(e){return this.dispatcher.requestForURL(e)}requestForId(e){return this.dispatcher.requestForId(e)}requestForLoaderId(e){return this.dispatcher.requestForLoaderId(e)}cacheDisabledSettingChanged({data:e}){this.#B.invoke_setCacheDisabled({cacheDisabled:e})}cookieControlFlagsSettingChanged(){const t=Boolean(e.Settings.Settings.instance().createSetting("cookie-control-override-enabled",void 0).get()),s=!!t&&Boolean(e.Settings.Settings.instance().createSetting("grace-period-mitigation-disabled",void 0).get()),r=!!t&&Boolean(e.Settings.Settings.instance().createSetting("heuristic-mitigation-disabled",void 0).get());this.#B.invoke_setCookieControls({enableThirdPartyCookieRestriction:t,disableThirdPartyCookieMetadata:s,disableThirdPartyCookieHeuristics:r})}dispose(){e.Settings.Settings.instance().moduleSetting("cache-disabled").removeChangeListener(this.cacheDisabledSettingChanged,this)}bypassServiceWorkerChanged(){this.#B.invoke_setBypassServiceWorker({bypass:this.#H.get()})}async getSecurityIsolationStatus(e){const t=await this.#B.invoke_getSecurityIsolationStatus({frameId:e??void 0});return t.getError()?null:t.status}async enableReportingApi(e=!0){return await this.#B.invoke_enableReportingApi({enable:e})}async loadNetworkResource(e,t,s){const r=await this.#B.invoke_loadNetworkResource({frameId:e??void 0,url:t,options:s});if(r.getError())throw new Error(r.getError());return r.resource}clearRequests(){this.dispatcher.clearRequests()}}var ee;!function(e){e.RequestStarted="RequestStarted",e.RequestUpdated="RequestUpdated",e.RequestFinished="RequestFinished",e.RequestUpdateDropped="RequestUpdateDropped",e.ResponseReceived="ResponseReceived",e.MessageGenerated="MessageGenerated",e.RequestRedirected="RequestRedirected",e.LoadingFinished="LoadingFinished",e.ReportingApiReportAdded="ReportingApiReportAdded",e.ReportingApiReportUpdated="ReportingApiReportUpdated",e.ReportingApiEndpointsChangedForOrigin="ReportingApiEndpointsChangedForOrigin"}(ee||(ee={}));const te={title:X(K.noThrottling),i18nTitleKey:K.noThrottling,download:-1,upload:-1,latency:0},ne={title:X(K.offline),i18nTitleKey:K.offline,download:0,upload:0,latency:0},re={title:X(K.slowG),i18nTitleKey:K.slowG,download:5e4,upload:5e4,latency:2e3,targetLatency:400},se={title:X(K.fastG),i18nTitleKey:K.fastG,download:18e4,upload:84375,latency:562.5,targetLatency:150},ie={title:X(K.fast4G),i18nTitleKey:K.fast4G,download:1012500,upload:168750,latency:165,targetLatency:60},oe=65536;class ae{#q;#z;constructor(e,t){this.#q=e,this.#z=t}requestPaused({requestId:e,request:t,resourceType:s,responseStatusCode:r,responseHeaders:i,networkId:n}){const o=n?this.#z.requestForId(n):null;0===o?.originalResponseHeaders.length&&i&&(o.originalResponseHeaders=i),ce.instance().requestIntercepted(new he(this.#q,t,s,e,o,r,i))}authRequired({}){}}class le{#z;#j=new Map;#W=new Map;#V=new Map;#G=new Map;#K=new Map;constructor(e){this.#z=e,ce.instance().addEventListener("RequestIntercepted",this.#$.bind(this))}#$(e){const t=this.requestForId(e.data);t&&t.setWasIntercepted(!0)}headersMapToHeadersArray(e){const t=[];for(const s in e){const r=e[s].split("\n");for(let e=0;e<r.length;++e)t.push({name:s,value:r[e]})}return t}updateNetworkRequestWithRequest(e,t){e.requestMethod=t.method,e.setRequestHeaders(this.headersMapToHeadersArray(t.headers)),e.setRequestFormData(Boolean(t.hasPostData),t.postData||null),e.setInitialPriority(t.initialPriority),e.mixedContentType=t.mixedContentType||"none",e.setReferrerPolicy(t.referrerPolicy),e.setIsSameSite(t.isSameSite||!1)}updateNetworkRequestWithResponse(t,s){s.url&&t.url()!==s.url&&t.setUrl(s.url),t.mimeType=s.mimeType,t.setCharset(s.charset),t.statusCode&&!t.wasIntercepted()||(t.statusCode=s.status),t.statusText&&!t.wasIntercepted()||(t.statusText=s.statusText),t.hasExtraResponseInfo()&&!t.wasIntercepted()||(t.responseHeaders=this.headersMapToHeadersArray(s.headers)),s.encodedDataLength>=0&&t.setTransferSize(s.encodedDataLength),s.requestHeaders&&!t.hasExtraRequestInfo()&&(t.setRequestHeaders(this.headersMapToHeadersArray(s.requestHeaders)),t.setRequestHeadersText(s.requestHeadersText||"")),t.connectionReused=s.connectionReused,t.connectionId=String(s.connectionId),s.remoteIPAddress&&t.setRemoteAddress(s.remoteIPAddress,s.remotePort||-1),s.fromServiceWorker&&(t.fetchedViaServiceWorker=!0),s.fromDiskCache&&t.setFromDiskCache(),s.fromPrefetchCache&&t.setFromPrefetchCache(),s.fromEarlyHints&&t.setFromEarlyHints(),s.cacheStorageCacheName&&t.setResponseCacheStorageCacheName(s.cacheStorageCacheName),s.serviceWorkerRouterInfo&&(t.serviceWorkerRouterInfo=s.serviceWorkerRouterInfo),s.responseTime&&t.setResponseRetrievalTime(new Date(s.responseTime)),t.timing=s.timing,t.protocol=s.protocol||"",t.alternateProtocolUsage=s.alternateProtocolUsage,s.serviceWorkerResponseSource&&t.setServiceWorkerResponseSource(s.serviceWorkerResponseSource),t.setSecurityState(s.securityState),s.securityDetails&&t.setSecurityDetails(s.securityDetails);const r=e.ResourceType.ResourceType.fromMimeTypeOverride(t.mimeType);r&&t.setResourceType(r),t.responseReceivedPromiseResolve?t.responseReceivedPromiseResolve():t.responseReceivedPromise=Promise.resolve()}requestForId(e){return this.#j.get(e)||null}requestForURL(e){return this.#W.get(e)||null}requestForLoaderId(e){return this.#V.get(e)||null}resourceChangedPriority({requestId:e,newPriority:t}){const s=this.#j.get(e);s&&s.setPriority(t)}signedExchangeReceived({requestId:t,info:s}){let r=this.#j.get(t);(r||(r=this.#W.get(s.outerResponse.url),r))&&(r.setSignedExchangeInfo(s),r.setResourceType(e.ResourceType.resourceTypes.SignedExchange),this.updateNetworkRequestWithResponse(r,s.outerResponse),this.updateNetworkRequest(r),this.#z.dispatchEventToListeners(ee.ResponseReceived,{request:r,response:s.outerResponse}))}requestWillBeSent({requestId:t,loaderId:s,documentURL:r,request:i,timestamp:n,wallTime:o,initiator:a,redirectResponse:l,type:c,frameId:d,hasUserGesture:h}){let u=this.#j.get(t);if(u){if(!l)return;u.signedExchangeInfo()||this.responseReceived({requestId:t,loaderId:s,timestamp:n,type:c||"Other",response:l,hasExtraInfo:!1,frameId:d}),u=this.appendRedirect(t,n,i.url),this.#z.dispatchEventToListeners(ee.RequestRedirected,u)}else u=Ri.create(t,i.url,r,d??null,s,a,h),J.set(u,this.#z);u.hasNetworkData=!0,this.updateNetworkRequestWithRequest(u,i),u.setIssueTime(n,o),u.setResourceType(c?e.ResourceType.resourceTypes[c]:e.ResourceType.resourceTypes.Other),i.trustTokenParams&&u.setTrustTokenParams(i.trustTokenParams);const g=this.#K.get(t);g&&(u.setTrustTokenOperationDoneEvent(g),this.#K.delete(t)),this.getExtraInfoBuilder(t).addRequest(u),this.startNetworkRequest(u,i)}requestServedFromCache({requestId:e}){const t=this.#j.get(e);t&&t.setFromMemoryCache()}responseReceived({requestId:t,loaderId:s,timestamp:r,type:i,response:n,frameId:o}){const a=this.#j.get(t),l=Z.lowercaseHeaders(n.headers);if(a)a.responseReceivedTime=r,a.setResourceType(e.ResourceType.resourceTypes[i]),this.updateNetworkRequestWithResponse(a,n),this.updateNetworkRequest(a),this.#z.dispatchEventToListeners(ee.ResponseReceived,{request:a,response:n});else{const e=l["last-modified"],t={url:n.url,frameId:o??null,loaderId:s,resourceType:i,mimeType:n.mimeType,lastModified:e?new Date(e):null};this.#z.dispatchEventToListeners(ee.RequestUpdateDropped,t)}}dataReceived(e){let t=this.#j.get(e.requestId);t||(t=this.maybeAdoptMainResourceRequest(e.requestId)),t&&(t.addDataReceivedEvent(e),this.updateNetworkRequest(t))}loadingFinished({requestId:e,timestamp:t,encodedDataLength:s}){let r=this.#j.get(e);r||(r=this.maybeAdoptMainResourceRequest(e)),r&&(this.getExtraInfoBuilder(e).finished(),this.finishNetworkRequest(r,t,s),this.#z.dispatchEventToListeners(ee.LoadingFinished,r))}loadingFailed({requestId:t,timestamp:s,type:r,errorText:i,canceled:n,blockedReason:o,corsErrorStatus:a}){const l=this.#j.get(t);if(l){if(l.failed=!0,l.setResourceType(e.ResourceType.resourceTypes[r]),l.canceled=Boolean(n),o&&(l.setBlockedReason(o),"inspector"===o)){const e=$(K.requestWasBlockedByDevtoolsS,{PH1:l.url()});this.#z.dispatchEventToListeners(ee.MessageGenerated,{message:e,requestId:t,warning:!0})}a&&l.setCorsErrorStatus(a),l.localizedFailDescription=i,this.getExtraInfoBuilder(t).finished(),this.finishNetworkRequest(l,s,-1)}}webSocketCreated({requestId:t,url:s,initiator:r}){const i=Ri.createForWebSocket(t,s,r);J.set(i,this.#z),i.setResourceType(e.ResourceType.resourceTypes.WebSocket),this.startNetworkRequest(i,null)}webSocketWillSendHandshakeRequest({requestId:e,timestamp:t,wallTime:s,request:r}){const i=this.#j.get(e);i&&(i.requestMethod="GET",i.setRequestHeaders(this.headersMapToHeadersArray(r.headers)),i.setIssueTime(t,s),this.updateNetworkRequest(i))}webSocketHandshakeResponseReceived({requestId:e,timestamp:t,response:s}){const r=this.#j.get(e);r&&(r.statusCode=s.status,r.statusText=s.statusText,r.responseHeaders=this.headersMapToHeadersArray(s.headers),r.responseHeadersText=s.headersText||"",s.requestHeaders&&r.setRequestHeaders(this.headersMapToHeadersArray(s.requestHeaders)),s.requestHeadersText&&r.setRequestHeadersText(s.requestHeadersText),r.responseReceivedTime=t,r.protocol="websocket",this.updateNetworkRequest(r))}webSocketFrameReceived({requestId:e,timestamp:t,response:s}){const r=this.#j.get(e);r&&(r.addProtocolFrame(s,t,!1),r.responseReceivedTime=t,this.updateNetworkRequest(r))}webSocketFrameSent({requestId:e,timestamp:t,response:s}){const r=this.#j.get(e);r&&(r.addProtocolFrame(s,t,!0),r.responseReceivedTime=t,this.updateNetworkRequest(r))}webSocketFrameError({requestId:e,timestamp:t,errorMessage:s}){const r=this.#j.get(e);r&&(r.addProtocolFrameError(s,t),r.responseReceivedTime=t,this.updateNetworkRequest(r))}webSocketClosed({requestId:e,timestamp:t}){const s=this.#j.get(e);s&&this.finishNetworkRequest(s,t,-1)}eventSourceMessageReceived({requestId:e,timestamp:t,eventName:s,eventId:r,data:i}){const n=this.#j.get(e);n&&n.addEventSourceMessage(t,s,r,i)}requestIntercepted({}){}requestWillBeSentExtraInfo({requestId:e,associatedCookies:t,headers:s,clientSecurityState:r,connectTiming:i,siteHasCookieInOtherPartition:n}){const o=[],a=[];for(const{blockedReasons:e,exemptionReason:s,cookie:r}of t)0===e.length?a.push({exemptionReason:s,cookie:H.fromProtocolCookie(r)}):o.push({blockedReasons:e,cookie:H.fromProtocolCookie(r)});const l={blockedRequestCookies:o,includedRequestCookies:a,requestHeaders:this.headersMapToHeadersArray(s),clientSecurityState:r,connectTiming:i,siteHasCookieInOtherPartition:n};this.getExtraInfoBuilder(e).addRequestExtraInfo(l)}responseReceivedEarlyHints({requestId:e,headers:t}){this.getExtraInfoBuilder(e).setEarlyHintsHeaders(this.headersMapToHeadersArray(t))}responseReceivedExtraInfo({requestId:e,blockedCookies:t,headers:s,headersText:r,resourceIPAddressSpace:i,statusCode:n,cookiePartitionKey:o,cookiePartitionKeyOpaque:a,exemptedCookies:l}){const c={blockedResponseCookies:t.map(e=>({blockedReasons:e.blockedReasons,cookieLine:e.cookieLine,cookie:e.cookie?H.fromProtocolCookie(e.cookie):null})),responseHeaders:this.headersMapToHeadersArray(s),responseHeadersText:r,resourceIPAddressSpace:i,statusCode:n,cookiePartitionKey:o,cookiePartitionKeyOpaque:a,exemptedResponseCookies:l?.map(e=>({cookie:H.fromProtocolCookie(e.cookie),cookieLine:e.cookieLine,exemptionReason:e.exemptionReason}))};this.getExtraInfoBuilder(e).addResponseExtraInfo(c)}getExtraInfoBuilder(e){let t;return this.#G.has(e)?t=this.#G.get(e):(t=new ue,this.#G.set(e,t)),t}appendRedirect(e,t,s){const r=this.#j.get(e);if(!r)throw new Error(`Could not find original network request for ${e}`);let i=0;for(let e=r.redirectSource();e;e=e.redirectSource())i++;r.markAsRedirect(i),this.finishNetworkRequest(r,t,-1);const n=Ri.create(e,s,r.documentURL,r.frameId,r.loaderId,r.initiator(),r.hasUserGesture()??void 0);return J.set(n,this.#z),n.setRedirectSource(r),r.setRedirectDestination(n),n}maybeAdoptMainResourceRequest(e){const t=ce.instance().inflightMainResourceRequests.get(e);if(!t)return null;const s=Z.forRequest(t).dispatcher;s.#j.delete(e),s.#W.delete(t.url());const r=t.loaderId;r&&s.#V.delete(r);const i=s.#G.get(e);return s.#G.delete(e),this.#j.set(e,t),this.#W.set(t.url(),t),r&&this.#V.set(r,t),i&&this.#G.set(e,i),J.set(t,this.#z),t}startNetworkRequest(e,t){this.#j.set(e.requestId(),e),this.#W.set(e.url(),e);const s=e.loaderId;s&&this.#V.set(s,e),e.loaderId!==e.requestId()&&""!==e.loaderId||ce.instance().inflightMainResourceRequests.set(e.requestId(),e),this.#z.dispatchEventToListeners(ee.RequestStarted,{request:e,originalRequest:t})}updateNetworkRequest(e){this.#z.dispatchEventToListeners(ee.RequestUpdated,e)}finishNetworkRequest(t,s,r){if(t.endTime=s,t.finished=!0,r>=0){const e=t.redirectSource();e?.signedExchangeInfo()?(t.setTransferSize(0),e.setTransferSize(r),this.updateNetworkRequest(e)):t.setTransferSize(r)}if(this.#z.dispatchEventToListeners(ee.RequestFinished,t),ce.instance().inflightMainResourceRequests.delete(t.requestId()),e.Settings.Settings.instance().moduleSetting("monitoring-xhr-enabled").get()&&t.resourceType().category()===e.ResourceType.resourceCategories.XHR){let e;const s=t.failed||t.hasErrorStatusCode();e=$(s?K.sFailedLoadingSS:K.sFinishedLoadingSS,{PH1:t.resourceType().title(),PH2:t.requestMethod,PH3:t.url()}),this.#z.dispatchEventToListeners(ee.MessageGenerated,{message:e,requestId:t.requestId(),warning:!1})}}clearRequests(){for(const[e,t]of this.#j)t.finished&&this.#j.delete(e);for(const[e,t]of this.#W)t.finished&&this.#W.delete(e);for(const[e,t]of this.#V)t.finished&&this.#V.delete(e);for(const[e,t]of this.#G)t.isFinished()&&this.#G.delete(e)}webTransportCreated({transportId:t,url:s,timestamp:r,initiator:i}){const n=Ri.createForWebSocket(t,s,i);n.hasNetworkData=!0,J.set(n,this.#z),n.setResourceType(e.ResourceType.resourceTypes.WebTransport),n.setIssueTime(r,0),this.startNetworkRequest(n,null)}webTransportConnectionEstablished({transportId:e,timestamp:t}){const s=this.#j.get(e);s&&(s.responseReceivedTime=t,s.endTime=t+.001,this.updateNetworkRequest(s))}webTransportClosed({transportId:e,timestamp:t}){const s=this.#j.get(e);s&&(s.endTime=t,this.finishNetworkRequest(s,t,0))}directTCPSocketCreated(t){const s=0===t.remotePort?t.remoteAddr:`${t.remoteAddr}:${t.remotePort}`,r=Ri.createForWebSocket(t.identifier,s,t.initiator);r.hasNetworkData=!0,r.setRemoteAddress(t.remoteAddr,t.remotePort),r.protocol=n.i18n.lockedString("tcp"),r.statusText=$(K.directSocketStatusOpening),r.directSocketInfo={type:Li.TCP,status:Ai.OPENING,createOptions:{remoteAddr:t.remoteAddr,remotePort:t.remotePort,noDelay:t.options.noDelay,keepAliveDelay:t.options.keepAliveDelay,sendBufferSize:t.options.sendBufferSize,receiveBufferSize:t.options.receiveBufferSize,dnsQueryType:t.options.dnsQueryType}},r.setResourceType(e.ResourceType.resourceTypes.DirectSocket),r.setIssueTime(t.timestamp,t.timestamp),J.set(r,this.#z),this.startNetworkRequest(r,null)}directTCPSocketOpened(e){const t=this.#j.get(e.identifier);if(!t?.directSocketInfo)return;t.responseReceivedTime=e.timestamp,t.directSocketInfo.status=Ai.OPEN,t.statusText=$(K.directSocketStatusOpen),t.directSocketInfo.openInfo={remoteAddr:e.remoteAddr,remotePort:e.remotePort,localAddr:e.localAddr,localPort:e.localPort},t.setRemoteAddress(e.remoteAddr,e.remotePort);const s=0===e.remotePort?e.remoteAddr:`${e.remoteAddr}:${e.remotePort}`;t.setUrl(s),this.updateNetworkRequest(t)}directTCPSocketAborted(e){const t=this.#j.get(e.identifier);t?.directSocketInfo&&(t.failed=!0,t.directSocketInfo.status=Ai.ABORTED,t.statusText=$(K.directSocketStatusAborted),t.directSocketInfo.errorMessage=e.errorMessage,this.finishNetworkRequest(t,e.timestamp,0))}directTCPSocketClosed(e){const t=this.#j.get(e.identifier);t?.directSocketInfo&&(t.statusText=$(K.directSocketStatusClosed),t.directSocketInfo.status=Ai.CLOSED,this.finishNetworkRequest(t,e.timestamp,0))}trustTokenOperationDone(e){const t=this.#j.get(e.requestId);t?t.setTrustTokenOperationDoneEvent(e):this.#K.set(e.requestId,e)}subresourceWebBundleMetadataReceived({requestId:e,urls:t}){const s=this.getExtraInfoBuilder(e);s.setWebBundleInfo({resourceUrls:t});const r=s.finalRequest();r&&this.updateNetworkRequest(r)}subresourceWebBundleMetadataError({requestId:e,errorMessage:t}){const s=this.getExtraInfoBuilder(e);s.setWebBundleInfo({errorMessage:t});const r=s.finalRequest();r&&this.updateNetworkRequest(r)}subresourceWebBundleInnerResponseParsed({innerRequestId:e,bundleRequestId:t}){const s=this.getExtraInfoBuilder(e);s.setWebBundleInnerRequestInfo({bundleRequestId:t});const r=s.finalRequest();r&&this.updateNetworkRequest(r)}subresourceWebBundleInnerResponseError({innerRequestId:e,errorMessage:t}){const s=this.getExtraInfoBuilder(e);s.setWebBundleInnerRequestInfo({errorMessage:t});const r=s.finalRequest();r&&this.updateNetworkRequest(r)}reportingApiReportAdded(e){this.#z.dispatchEventToListeners(ee.ReportingApiReportAdded,e.report)}reportingApiReportUpdated(e){this.#z.dispatchEventToListeners(ee.ReportingApiReportUpdated,e.report)}reportingApiEndpointsChangedForOrigin(e){this.#z.dispatchEventToListeners(ee.ReportingApiEndpointsChangedForOrigin,e)}policyUpdated(){}createNetworkRequest(e,t,s,r,i,n){const o=Ri.create(e,r,i,t,s,n);return J.set(o,this.#z),o}}let de;class ce extends e.ObjectWrapper.ObjectWrapper{#Q="";#Y=null;#J=null;#X=new Set;#Z=new Set;inflightMainResourceRequests=new Map;#ee=te;#te=null;#se=e.Settings.Settings.instance().moduleSetting("request-blocking-enabled");#re=e.Settings.Settings.instance().createSetting("network-blocked-patterns",[]);#ie=[];#ne=new r.MapUtilities.Multimap;#oe;#ae;constructor(){super();const e=()=>{this.updateBlockedPatterns(),this.dispatchEventToListeners("BlockedPatternsChanged")};this.#se.addChangeListener(e),this.#re.addChangeListener(e),this.updateBlockedPatterns(),W.instance().observeModels(Z,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return de&&!t||(de=new ce),de}static dispose(){de=null}static patchUserAgentWithChromeVersion(e){const t=o.Runtime.getChromeVersion();if(t.length>0){const s=t.split(".",1)[0]+".0.100.0";return r.StringUtilities.sprintf(e,t,s)}return e}static patchUserAgentMetadataWithChromeVersion(e){if(!e.brands)return;const t=o.Runtime.getChromeVersion();if(0===t.length)return;const s=t.split(".",1)[0];for(const t of e.brands)t.version.includes("%s")&&(t.version=r.StringUtilities.sprintf(t.version,s));e.fullVersion&&e.fullVersion.includes("%s")&&(e.fullVersion=r.StringUtilities.sprintf(e.fullVersion,t))}modelAdded(e){const t=e.target().networkAgent(),s=e.target().fetchAgent();this.#oe&&t.invoke_setExtraHTTPHeaders({headers:this.#oe}),this.currentUserAgent()&&t.invoke_setUserAgentOverride({userAgent:this.currentUserAgent(),userAgentMetadata:this.#Y||void 0}),this.#ie.length&&t.invoke_setBlockedURLs({urls:this.#ie}),this.isIntercepting()&&s.invoke_enable({patterns:this.#ne.valuesArray()}),null===this.#J?t.invoke_clearAcceptedEncodingsOverride():t.invoke_setAcceptedEncodings({encodings:this.#J}),this.#X.add(t),this.#Z.add(s),this.isThrottling()&&this.updateNetworkConditions(t)}modelRemoved(e){for(const t of this.inflightMainResourceRequests)Z.forRequest(t[1])===e&&this.inflightMainResourceRequests.delete(t[0]);this.#X.delete(e.target().networkAgent()),this.#Z.delete(e.target().fetchAgent())}isThrottling(){return this.#ee.download>=0||this.#ee.upload>=0||this.#ee.latency>0}isOffline(){return!this.#ee.download&&!this.#ee.upload}setNetworkConditions(e){this.#ee=e;for(const e of this.#X)this.updateNetworkConditions(e);this.dispatchEventToListeners("ConditionsChanged")}networkConditions(){return this.#ee}updateNetworkConditions(e){const t=this.#ee;this.isThrottling()?e.invoke_emulateNetworkConditions({offline:this.isOffline(),latency:t.latency,downloadThroughput:t.download<0?0:t.download,uploadThroughput:t.upload<0?0:t.upload,packetLoss:(t.packetLoss??0)<0?0:t.packetLoss,packetQueueLength:t.packetQueueLength,packetReordering:t.packetReordering,connectionType:Z.connectionType(t)}):e.invoke_emulateNetworkConditions({offline:!1,latency:0,downloadThroughput:0,uploadThroughput:0})}setExtraHTTPHeaders(e){this.#oe=e;for(const e of this.#X)e.invoke_setExtraHTTPHeaders({headers:this.#oe})}currentUserAgent(){return this.#ae?this.#ae:this.#Q}updateUserAgentOverride(){const e=this.currentUserAgent();for(const t of this.#X)t.invoke_setUserAgentOverride({userAgent:e,userAgentMetadata:this.#Y||void 0})}setUserAgentOverride(e,t){const s=this.#Q!==e;this.#Q=e,this.#ae?this.#Y=null:(this.#Y=t,this.updateUserAgentOverride()),s&&this.dispatchEventToListeners("UserAgentChanged")}userAgentOverride(){return this.#Q}setCustomUserAgentOverride(e,t=null){this.#ae=e,this.#Y=t,this.updateUserAgentOverride()}setCustomAcceptedEncodingsOverride(e){this.#J=e,this.updateAcceptedEncodingsOverride(),this.dispatchEventToListeners("AcceptedEncodingsChanged")}clearCustomAcceptedEncodingsOverride(){this.#J=null,this.updateAcceptedEncodingsOverride(),this.dispatchEventToListeners("AcceptedEncodingsChanged")}isAcceptedEncodingOverrideSet(){return null!==this.#J}updateAcceptedEncodingsOverride(){const e=this.#J;for(const t of this.#X)null===e?t.invoke_clearAcceptedEncodingsOverride():t.invoke_setAcceptedEncodings({encodings:e})}blockedPatterns(){return this.#re.get().slice()}blockingEnabled(){return this.#se.get()}isBlocking(){return Boolean(this.#ie.length)}setBlockedPatterns(e){this.#re.set(e)}setBlockingEnabled(e){this.#se.get()!==e&&this.#se.set(e)}updateBlockedPatterns(){const e=[];if(this.#se.get())for(const t of this.#re.get())t.enabled&&e.push(t.url);if(e.length||this.#ie.length){this.#ie=e;for(const e of this.#X)e.invoke_setBlockedURLs({urls:this.#ie})}}isIntercepting(){return Boolean(this.#ne.size)}setInterceptionHandlerForPatterns(e,t){this.#ne.deleteAll(t);for(const s of e)this.#ne.set(t,s);return this.updateInterceptionPatternsOnNextTick()}updateInterceptionPatternsOnNextTick(){return this.#te||(this.#te=Promise.resolve().then(this.updateInterceptionPatterns.bind(this))),this.#te}async updateInterceptionPatterns(){e.Settings.Settings.instance().moduleSetting("cache-disabled").get()||e.Settings.Settings.instance().moduleSetting("cache-disabled").set(!0),this.#te=null;const t=[];for(const e of this.#Z)t.push(e.invoke_enable({patterns:this.#ne.valuesArray()}));this.dispatchEventToListeners("InterceptorsChanged"),await Promise.all(t)}async requestIntercepted(e){for(const t of this.#ne.keysArray())if(await t(e),e.hasResponded()&&e.networkRequest)return void this.dispatchEventToListeners("RequestIntercepted",e.networkRequest.requestId());e.hasResponded()||e.continueRequestWithoutChange()}clearBrowserCache(){for(const e of this.#X)e.invoke_clearBrowserCache()}clearBrowserCookies(){for(const e of this.#X)e.invoke_clearBrowserCookies()}async getCertificate(e){const t=W.instance().primaryPageTarget();if(!t)return[];const s=await t.networkAgent().invoke_getCertificate({origin:e});return s?s.tableNames:[]}async loadResource(t){const s={},r=this.currentUserAgent();r&&(s["User-Agent"]=r),e.Settings.Settings.instance().moduleSetting("cache-disabled").get()&&(s["Cache-Control"]="no-cache");const i=e.Settings.Settings.instance().moduleSetting("network.enable-remote-file-loading").get();return await new Promise(e=>a.ResourceLoader.load(t,s,(t,s,r,i)=>{e({success:t,content:r,errorDescription:i})},i))}}class he{#q;#le;request;resourceType;responseStatusCode;responseHeaders;requestId;networkRequest;constructor(e,t,s,r,i,n,o){this.#q=e,this.#le=!1,this.request=t,this.resourceType=s,this.responseStatusCode=n,this.responseHeaders=o,this.requestId=r,this.networkRequest=i}hasResponded(){return this.#le}static mergeSetCookieHeaders(e,t){const s=e=>{const t=new Map;for(const s of e){const e=s.value.match(/^([a-zA-Z0-9!#$%&'*+.^_`|~-]+=)(.*)$/);e?t.has(e[1])?t.get(e[1])?.push(s.value):t.set(e[1],[s.value]):t.has(s.value)?t.get(s.value)?.push(s.value):t.set(s.value,[s.value])}return t},r=s(e),i=s(t),n=[];for(const[e,t]of r)if(i.has(e))for(const t of i.get(e)||[])n.push({name:"set-cookie",value:t});else for(const e of t)n.push({name:"set-cookie",value:e});for(const[e,t]of i)if(!r.has(e))for(const e of t)n.push({name:"set-cookie",value:e});return n}async continueRequestWithContent(t,s,r,i){this.#le=!0;const n=s?await t.text():await e.Base64.encode(t).catch(e=>(console.error(e),"")),o=i?200:this.responseStatusCode||200;if(this.networkRequest){const e=this.networkRequest?.originalResponseHeaders.filter(e=>"set-cookie"===e.name)||[],t=r.filter(e=>"set-cookie"===e.name);this.networkRequest.setCookieHeaders=he.mergeSetCookieHeaders(e,t),this.networkRequest.hasOverriddenContent=i}this.#q.invoke_fulfillRequest({requestId:this.requestId,responseCode:o,body:n,responseHeaders:r}),ce.instance().dispatchEventToListeners("RequestFulfilled",this.request.url)}continueRequestWithoutChange(){console.assert(!this.#le),this.#le=!0,this.#q.invoke_continueRequest({requestId:this.requestId})}continueRequestWithError(e){console.assert(!this.#le),this.#le=!0,this.#q.invoke_failRequest({requestId:this.requestId,errorReason:e})}async responseBody(){const e=await this.#q.invoke_getResponseBody({requestId:this.requestId}),s=e.getError();if(s)return{error:s};const{mimeType:r,charset:i}=this.getMimeTypeAndCharset();return new t.ContentData.ContentData(e.body,e.base64Encoded,r??"application/octet-stream",i??void 0)}isRedirect(){return void 0!==this.responseStatusCode&&this.responseStatusCode>=300&&this.responseStatusCode<400}getMimeTypeAndCharset(){for(const e of this.responseHeaders??[])if("content-type"===e.name.toLowerCase())return r.MimeType.parseContentType(e.value);return{mimeType:this.networkRequest?.mimeType??null,charset:this.networkRequest?.charset()??null}}}class ue{#ce;#de;#he;#ue;#ge;#me;#pe;constructor(){this.#ce=[],this.#de=[],this.#ue=[],this.#he=[],this.#ge=!1,this.#me=null,this.#pe=null}addRequest(e){this.#ce.push(e),this.sync(this.#ce.length-1)}addRequestExtraInfo(e){this.#de.push(e),this.sync(this.#de.length-1)}addResponseExtraInfo(e){this.#he.push(e),this.sync(this.#he.length-1)}setEarlyHintsHeaders(e){this.#ue=e,this.updateFinalRequest()}setWebBundleInfo(e){this.#me=e,this.updateFinalRequest()}setWebBundleInnerRequestInfo(e){this.#pe=e,this.updateFinalRequest()}finished(){this.#ge=!0,this.updateFinalRequest()}isFinished(){return this.#ge}sync(e){const t=this.#ce[e];if(!t)return;const s=this.#de[e];s&&(t.addExtraRequestInfo(s),this.#de[e]=null);const r=this.#he[e];r&&(t.addExtraResponseInfo(r),this.#he[e]=null)}finalRequest(){return this.#ge&&this.#ce[this.#ce.length-1]||null}updateFinalRequest(){if(!this.#ge)return;const e=this.finalRequest();e?.setWebBundleInfo(this.#me),e?.setWebBundleInnerRequestInfo(this.#pe),e?.setEarlyHintsHeaders(this.#ue)}}h.register(Z,{capabilities:16,autostart:!0});var ge=Object.freeze({__proto__:null,ConditionsSerializer:class{stringify(e){const t=e;return JSON.stringify({...t,title:"function"==typeof t.title?t.title():t.title})}parse(e){const t=JSON.parse(e);return{...t,title:t.i18nTitleKey?X(t.i18nTitleKey):t.title}}},get Events(){return ee},Fast4GConditions:ie,FetchDispatcher:ae,InterceptedRequest:he,MultitargetNetworkManager:ce,NetworkDispatcher:le,NetworkManager:Z,NoThrottlingConditions:te,OfflineConditions:ne,Slow3GConditions:re,Slow4GConditions:se,networkConditionsEqual:function(e,t){const s=e.i18nTitleKey||("function"==typeof e.title?e.title():e.title),r=t.i18nTitleKey||("function"==typeof t.title?t.title():t.title);return t.download===e.download&&t.upload===e.upload&&t.latency===e.latency&&e.packetLoss===t.packetLoss&&e.packetQueueLength===t.packetQueueLength&&e.packetReordering===t.packetReordering&&r===s}});class pe{#fe;#be;#ye=new Map;#we;#ve;constructor(e){this.#fe=e.fontFamily,this.#be=e.fontVariationAxes||[],this.#we=e.src,this.#ve=e.fontDisplay;for(const e of this.#be)this.#ye.set(e.tag,e)}getFontFamily(){return this.#fe}getSrc(){return this.#we}getFontDisplay(){return this.#ve}getVariationAxisByTag(e){return this.#ye.get(e)}}var me=Object.freeze({__proto__:null,CSSFontFace:pe});class fe{text;node;name;fallback;matching;computedTextCallback;constructor(e,t,s,r,i,n){this.text=e,this.node=t,this.name=s,this.fallback=r,this.matching=i,this.computedTextCallback=n}computedText(){return this.computedTextCallback(this,this.matching)}}class be extends(kt(fe)){#ke;constructor(e){super(),this.#ke=e}matches(e,t){const s=e.getChild("Callee"),r=e.getChild("ArgList");if("CallExpression"!==e.name||!s||"var"!==t.ast.text(s)||!r)return null;const[i,n,...o]=Pt.children(r);if("("!==i?.name||"VariableName"!==n?.name)return null;if(o.length<=1&&")"!==o[0]?.name)return null;let a=[];if(o.length>1){if(","!==o.shift()?.name)return null;if(")"!==o.pop()?.name)return null;if(a=o,0===a.length)return null;if(a.some(e=>","===e.name))return null}const l=t.ast.text(n);return l.startsWith("--")?new fe(t.ast.text(e),e,l,a,t,this.#ke):null}}class ye extends fe{matchedStyles;style;constructor(e,t,s,r,i,n,o){super(e,t,s,r,i,()=>this.resolveVariable()?.value??this.fallbackValue()),this.matchedStyles=n,this.style=o}resolveVariable(){return this.matchedStyles.computeCSSVariable(this.style,this.name)}fallbackValue(){return 0===this.fallback.length||this.matching.hasUnresolvedVarsRange(this.fallback[0],this.fallback[this.fallback.length-1])?null:this.matching.getComputedTextRange(this.fallback[0],this.fallback[this.fallback.length-1])}}class ve extends(kt(ye)){matchedStyles;style;constructor(e,t){super(),this.matchedStyles=e,this.style=t}matches(e,t){const s=new be(()=>null).matches(e,t);return s?new ye(s.text,s.node,s.name,s.fallback,s.matching,this.matchedStyles,this.style):null}}class Ie{text;node;constructor(e,t){this.text=e,this.node=t}}class we extends(kt(Ie)){accepts(){return!0}matches(e,t){return"BinaryExpression"===e.name?new Ie(t.ast.text(e),e):null}}class Se{text;node;computedText;constructor(e,t){this.text=e,this.node=t,"Comment"===t.name&&(this.computedText=()=>"")}render(){const e=document.createElement("span");return e.appendChild(document.createTextNode(this.text)),[e]}}class ke extends(kt(Se)){accepts(){return!0}matches(e,t){if(!e.firstChild||"NumberLiteral"===e.name){const s=t.ast.text(e);if(s.length)return new Se(s,e)}return null}}class Ce{text;node;constructor(e,t){this.text=e,this.node=t}computedText(){return this.text}}class xe extends(kt(Ce)){accepts(e){return S().isAngleAwareProperty(e)}matches(e,t){if("NumberLiteral"!==e.name)return null;const s=e.getChild("Unit");return s&&["deg","grad","rad","turn"].includes(t.ast.text(s))?new Ce(t.ast.text(e),e):null}}function Re(e,t){if("NumberLiteral"!==e.type.name)return null;const s=t.text(e);return Number(s.substring(0,s.length-t.text(e.getChild("Unit")).length))}class Te{text;node;space;color1;color2;constructor(e,t,s,r,i){this.text=e,this.node=t,this.space=s,this.color1=r,this.color2=i}}class Me extends(kt(Te)){accepts(e){return S().isColorAwareProperty(e)}matches(e,t){if("CallExpression"!==e.name||"color-mix"!==t.ast.text(e.getChild("Callee")))return null;const s=Lt("--property",t.getComputedText(e));if(!s)return null;const r=Pt.declValue(s.tree);if(!r)return null;const i=Pt.callArgs(r);if(3!==i.length)return null;const[n,o,a]=i;if(n.length<2||"in"!==s.text(Pt.stripComments(n).next().value)||o.length<1||a.length<1)return null;const l=o.filter(e=>"NumberLiteral"===e.type.name&&"%"===s.text(e.getChild("Unit"))),c=a.filter(e=>"NumberLiteral"===e.type.name&&"%"===s.text(e.getChild("Unit")));if(l.length>1||c.length>1)return null;if(l[0]&&c[0]&&0===(Re(l[0],s)??0)&&0===(Re(c[0],s)??0))return null;const d=Pt.callArgs(e);return 3!==d.length?null:new Te(t.ast.text(e),e,d[0],d[1],d[2])}}class Pe{url;text;node;constructor(e,t,s){this.url=e,this.text=t,this.node=s}}class Ee extends(kt(Pe)){matches(e,t){if("CallLiteral"!==e.name)return null;const s=e.getChild("CallTag");if(!s||"url"!==t.ast.text(s))return null;const[,r,i,n]=Pt.siblings(s);if("("!==t.ast.text(r)||"ParenthesizedContent"!==i.name&&"StringLiteral"!==i.name||")"!==t.ast.text(n))return null;const o=t.ast.text(i),a="StringLiteral"===i.name?o.substr(1,o.length-2):o.trim();return new Pe(a,t.ast.text(e),e)}}class Le{text;node;constructor(e,t){this.text=e,this.node=t}}class Ae extends(kt(Le)){matches(e,t){const s=t.ast.text(e);return"CallExpression"===e.name&&"linear-gradient"===t.ast.text(e.getChild("Callee"))?new Le(s,e):null}accepts(e){return["background","background-image","-webkit-mask-image"].includes(e)}}class Oe{text;node;currentColorCallback;computedText;constructor(e,t,s){this.text=e,this.node=t,this.currentColorCallback=s,this.computedText=s}}class De extends(kt(Oe)){currentColorCallback;constructor(e){super(),this.currentColorCallback=e}accepts(e){return S().isColorAwareProperty(e)}matches(t,s){const r=s.ast.text(t);if("ColorLiteral"===t.name)return new Oe(r,t);if("ValueName"===t.name){if(e.Color.Nicknames.has(r))return new Oe(r,t);if("currentcolor"===r.toLowerCase()&&this.currentColorCallback){const e=this.currentColorCallback;return new Oe(r,t,()=>e()??r)}}if("CallExpression"===t.name){const e=t.getChild("Callee");if(e&&s.ast.text(e).match(/^(rgba?|hsla?|hwba?|lab|lch|oklab|oklch|color)$/))return new Oe(r,t)}return null}}class Ne{text;node;light;dark;style;constructor(e,t,s,r,i){this.text=e,this.node=t,this.light=s,this.dark=r,this.style=i}}class Fe extends(kt(Ne)){style;constructor(e){super(),this.style=e}accepts(e){return S().isColorAwareProperty(e)}matches(e,t){if("CallExpression"!==e.name||"light-dark"!==t.ast.text(e.getChild("Callee")))return null;const s=Pt.callArgs(e);return 2!==s.length||0===s[0].length||0===s[1].length?null:new Ne(t.ast.text(e),e,s[0],s[1],this.style)}}class Be{text;node;auto;base;constructor(e,t,s,r){this.text=e,this.node=t,this.auto=s,this.base=r}}class _e extends(kt(Be)){matches(e,t){if("CallExpression"!==e.name||"-internal-auto-base"!==t.ast.text(e.getChild("Callee")))return null;const s=Pt.callArgs(e);return 2!==s.length||0===s[0].length||0===s[1].length?null:new Be(t.ast.text(e),e,s[0],s[1])}}class He{text;node;propertyName;constructor(e,t,s){this.text=e,this.node=t,this.propertyName=s}}class Ue extends(kt(He)){static isLinkableNameProperty(e){return["animation","animation-name","font-palette","position-try-fallbacks","position-try"].includes(e)}static identifierAnimationLonghandMap=new Map(Object.entries({normal:"direction",alternate:"direction",reverse:"direction","alternate-reverse":"direction",none:"fill-mode",forwards:"fill-mode",backwards:"fill-mode",both:"fill-mode",running:"play-state",paused:"play-state",infinite:"iteration-count",linear:"easing-function",ease:"easing-function","ease-in":"easing-function","ease-out":"easing-function","ease-in-out":"easing-function",steps:"easing-function","step-start":"easing-function","step-end":"easing-function"}));matchAnimationNameInShorthand(e,t){const s=t.ast.text(e);if(!Ue.identifierAnimationLonghandMap.has(s))return new He(s,e,"animation");const r=Pt.split(Pt.siblings(Pt.declValue(t.ast.tree))).find(t=>t[0].from<=e.from&&t[t.length-1].to>=e.to);if(!r)return null;const i=Lt("--p",t.getComputedTextRange(r[0],e));if(!i)return null;const n=Ue.identifierAnimationLonghandMap.get(s);for(let t=Pt.declValue(i.tree);t?.nextSibling;t=t.nextSibling)if("ValueName"===t.name){const r=Ue.identifierAnimationLonghandMap.get(i.text(t));if(r&&r===n)return new He(s,e,"animation")}return null}accepts(e){return Ue.isLinkableNameProperty(e)}matches(e,t){const{propertyName:s}=t.ast,r=t.ast.text(e),i=e.parent;if(!i)return null;const n="Declaration"===i.name,o="ArgList"===i.name&&"Callee"===i.prevSibling?.name&&"var"===t.ast.text(i.prevSibling),a=n||o,l="position-try"===s||"position-try-fallbacks"===s;return!s||"ValueName"!==e.name&&"VariableName"!==e.name||!a||"ValueName"===e.name&&l?null:"animation"===s?this.matchAnimationNameInShorthand(e,t):new He(r,e,s)}}class qe{text;node;constructor(e,t){this.text=e,this.node=t}}class ze extends(kt(qe)){accepts(e){return S().isBezierAwareProperty(e)}matches(e,t){const s=t.ast.text(e),r="ValueName"===e.name&&b.has(s),i="CallExpression"===e.name&&["cubic-bezier","linear"].includes(t.ast.text(e.getChild("Callee")));return r||i?new qe(s,e):null}}class je{text;node;constructor(e,t){this.text=e,this.node=t}}class Ve extends(kt(je)){matches(e,t){return"StringLiteral"===e.name?new je(t.ast.text(e),e):null}}class We{text;node;shadowType;constructor(e,t,s){this.text=e,this.node=t,this.shadowType=s}}class Ge extends(kt(We)){accepts(e){return S().isShadowProperty(e)}matches(e,t){if("Declaration"!==e.name)return null;const s=Pt.siblings(Pt.declValue(e));if(0===s.length)return null;const r=t.ast.textRange(s[0],s[s.length-1]);return new We(r,e,"text-shadow"===t.ast.propertyName?"textShadow":"boxShadow")}}class Ke{text;node;constructor(e,t){this.text=e,this.node=t}}class Qe extends(kt(Ke)){accepts(e){return S().isFontAwareProperty(e)}matches(e,t){if("Declaration"!==e.name)return null;const s=Pt.siblings(Pt.declValue(e));if(0===s.length)return null;const r="font-family"===t.ast.propertyName?["ValueName","StringLiteral","Comment",","]:["Comment","ValueName","NumberLiteral"];if(s.some(e=>!r.includes(e.name)))return null;const i=t.ast.textRange(s[0],s[s.length-1]);return new Ke(i,e)}}class $e{text;node;unit;constructor(e,t,s){this.text=e,this.node=t,this.unit=s}}class Xe extends(kt($e)){static LENGTH_UNITS=new Set(["em","ex","ch","cap","ic","lh","rem","rex","rch","rlh","ric","rcap","pt","pc","in","cm","mm","Q","vw","vh","vi","vb","vmin","vmax","dvw","dvh","dvi","dvb","dvmin","dvmax","svw","svh","svi","svb","svmin","svmax","lvw","lvh","lvi","lvb","lvmin","lvmax","cqw","cqh","cqi","cqb","cqmin","cqmax","cqem","cqlh","cqex","cqch"]);matches(e,t){if("NumberLiteral"!==e.name)return null;const s=t.ast.text(e.getChild("Unit"));if(!Xe.LENGTH_UNITS.has(s))return null;const r=t.ast.text(e);return new $e(r,e,s)}}class Je{text;node;func;args;constructor(e,t,s,r){this.text=e,this.node=t,this.func=s,this.args=r}}class Ye extends(kt(Je)){matches(e,t){if("CallExpression"!==e.name)return null;const s=t.ast.text(e.getChild("Callee"));if(!["min","max","clamp","calc"].includes(s))return null;const r=Pt.callArgs(e);if(r.some(e=>0===e.length||t.hasUnresolvedVarsRange(e[0],e[e.length-1])))return null;const i=t.ast.text(e);return new Je(i,e,s,r)}}class Ze{text;node;isFlex;constructor(e,t,s){this.text=e,this.node=t,this.isFlex=s}}class et extends(kt(Ze)){static FLEX=["flex","inline-flex","block flex","inline flex"];static GRID=["grid","inline-grid","block grid","inline grid"];accepts(e){return"display"===e}matches(e,t){if("Declaration"!==e.name)return null;const s=Pt.siblings(Pt.declValue(e));if(s.length<1)return null;const r=s.filter(e=>"Important"!==e.name).map(e=>t.getComputedText(e).trim()).filter(e=>e),i=r.join(" ");return et.FLEX.includes(i)?new Ze(t.ast.text(e),e,!0):et.GRID.includes(i)?new Ze(t.ast.text(e),e,!1):null}}class tt{text;node;lines;constructor(e,t,s){this.text=e,this.node=t,this.lines=s}}class nt extends(kt(tt)){accepts(e){return S().isGridAreaDefiningProperty(e)}matches(e,t){if("Declaration"!==e.name||t.hasUnresolvedVars(e))return null;const s=[];let r=[],i=!1,n=!1;const o=Pt.siblings(Pt.declValue(e));!function e(o,a=!1){for(const l of o)if(t.getMatch(l)instanceof fe){const o=Lt("--property",t.getComputedText(l));if(!o)continue;const a=Pt.siblings(Pt.declValue(o.tree));if(0===a.length)continue;"StringLiteral"===a[0].name&&!i||"LineNames"===a[0].name&&!n?(s.push(r),r=[l]):r.push(l),e(a,!0)}else"BinaryExpression"===l.name?e(Pt.siblings(l.firstChild)):"StringLiteral"===l.name?(a||(i?r.push(l):(s.push(r),r=[l])),n=!0,i=!1):"LineNames"===l.name?(a||(n?r.push(l):(s.push(r),r=[l])),i=!n,n=!n):a||r.push(l)}(o),s.push(r);const a=t.ast.textRange(o[0],o[o.length-1]);return new tt(a,e,s.filter(e=>e.length>0))}}class rt{text;node;functionName;constructor(e,t,s){this.text=e,this.node=t,this.functionName=s}}class st extends(kt(rt)){anchorFunction(e,t){if("CallExpression"!==e.name)return null;const s=t.ast.text(e.getChild("Callee"));return"anchor"===s||"anchor-size"===s?s:null}matches(e,t){if("VariableName"===e.name){let s=e.parent;return s&&"ArgList"===s.name?(s=s.parent,s&&this.anchorFunction(s,t)?new rt(t.ast.text(e),e,null):null):null}const s=this.anchorFunction(e,t);if(!s)return null;const r=Pt.children(e.getChild("ArgList"));return"anchor"===s&&r.length<=2||r.find(e=>"VariableName"===e.name)?null:new rt(t.ast.text(e),e,s)}}class it{text;matching;node;constructor(e,t,s){this.text=e,this.matching=t,this.node=s}}class ot extends(kt(it)){accepts(e){return"position-anchor"===e}matches(e,t){if("VariableName"!==e.name)return null;const s=t.ast.text(e);return new it(s,t,e)}}class at{text;node;property;matchedStyles;constructor(e,t,s,r){this.text=e,this.node=t,this.property=s,this.matchedStyles=r}resolveProperty(){return this.matchedStyles.resolveGlobalKeyword(this.property,this.text)}computedText(){return this.resolveProperty()?.value??null}}class lt extends(kt(at)){property;matchedStyles;constructor(e,t){super(),this.property=e,this.matchedStyles=t}matches(e,t){const s=e.parent;if("ValueName"!==e.name||"Declaration"!==s?.name)return null;if(Array.from(Pt.stripComments(Pt.siblings(Pt.declValue(s)))).some(t=>!Pt.equals(t,e)))return null;const r=t.ast.text(e);return f.isCSSWideKeyword(r)?new at(r,e,this.property,this.matchedStyles):null}}class dt{text;node;preamble;fallbacks;constructor(e,t,s,r){this.text=e,this.node=t,this.preamble=s,this.fallbacks=r}}class ct extends(kt(dt)){accepts(e){return"position-try"===e||"position-try-fallbacks"===e}matches(e,t){if("Declaration"!==e.name)return null;let s=[];const r=Pt.siblings(Pt.declValue(e)),i=Pt.split(r);if("position-try"===t.ast.propertyName)for(const[e,r]of i[0].entries()){const n=t.getComputedText(r);if(f.isCSSWideKeyword(n))return null;if(f.isPositionTryOrderKeyword(n)){s=i[0].splice(0,e+1);break}}const n=t.ast.textRange(r[0],r[r.length-1]);return new dt(n,e,s,i)}}var ht=Object.freeze({__proto__:null,AnchorFunctionMatch:rt,AnchorFunctionMatcher:st,AngleMatch:Ce,AngleMatcher:xe,AutoBaseMatch:Be,AutoBaseMatcher:_e,BaseVariableMatch:fe,BaseVariableMatcher:be,BezierMatch:qe,BezierMatcher:ze,BinOpMatch:Ie,BinOpMatcher:we,CSSWideKeywordMatch:at,CSSWideKeywordMatcher:lt,ColorMatch:Oe,ColorMatcher:De,ColorMixMatch:Te,ColorMixMatcher:Me,FlexGridMatch:Ze,FlexGridMatcher:et,FontMatch:Ke,FontMatcher:Qe,GridTemplateMatch:tt,GridTemplateMatcher:nt,LengthMatch:$e,LengthMatcher:Xe,LightDarkColorMatch:Ne,LightDarkColorMatcher:Fe,LinearGradientMatch:Le,LinearGradientMatcher:Ae,LinkableNameMatch:He,LinkableNameMatcher:Ue,MathFunctionMatch:Je,MathFunctionMatcher:Ye,PositionAnchorMatch:it,PositionAnchorMatcher:ot,PositionTryMatch:dt,PositionTryMatcher:ct,ShadowMatch:We,ShadowMatcher:Ge,StringMatch:je,StringMatcher:Ve,TextMatch:Se,TextMatcher:ke,URLMatch:Pe,URLMatcher:Ee,VariableMatch:ye,VariableMatcher:ve});const ut=new Set(["inherit","initial","unset"]),gt=/[\x20-\x7E]{4}/,pt=new RegExp(`(?:'(${gt.source})')|(?:"(${gt.source})")\\s+(${/[+-]?(?:\d*\.)?\d+(?:[eE]\d+)?/.source})`),mt=/^"(.+)"|'(.+)'$/;function ft(e){return e.split(",").map(e=>e.trim())}function bt(e){return e.replaceAll(/(\/\*(?:.|\s)*?\*\/)/g,"")}const yt=d.css.cssLanguage.parser;function vt(e,t){return It(e,e,t)}function It(e,t,s){return s.substring(e.from,t.to)}class wt{propertyValue;rule;tree;trailingNodes;propertyName;constructor(e,t,s,r,i=[]){this.propertyName=r,this.propertyValue=e,this.rule=t,this.tree=s,this.trailingNodes=i}text(e){return null===e?"":vt(e??this.tree,this.rule)}textRange(e,t){return It(e,t,this.rule)}subtree(e){return new wt(this.propertyValue,this.rule,e)}}class St{ast;constructor(e){this.ast=e}static walkExcludingSuccessors(e,...t){const s=new this(e,...t);return"Declaration"===e.tree.name?s.iterateDeclaration(e.tree):s.iterateExcludingSuccessors(e.tree),s}static walk(e,...t){const s=new this(e,...t);return"Declaration"===e.tree.name?s.iterateDeclaration(e.tree):s.iterate(e.tree),s}iterateDeclaration(e){if("Declaration"===e.name){if(this.enter(e))for(const t of Pt.siblings(Pt.declValue(e)))t.cursor().iterate(this.enter.bind(this),this.leave.bind(this));this.leave(e)}}iterate(e){for(const t of Pt.siblings(e))t.cursor().iterate(this.enter.bind(this),this.leave.bind(this))}iterateExcludingSuccessors(e){e.cursor().iterate(this.enter.bind(this),this.leave.bind(this))}enter(e){return!0}leave(e){}}function kt(e){return class{matchType=e;accepts(e){return!0}matches(e,t){return null}}}class Ct extends St{#Se=[];#xe=new Map;computedText;#Ce(e){return`${e.from}:${e.to}`}constructor(e,t){super(e),this.computedText=new Rt(e.rule.substring(e.tree.from)),this.#Se.push(...t.filter(t=>!e.propertyName||t.accepts(e.propertyName))),this.#Se.push(new ke)}leave({node:e}){for(const t of this.#Se){const s=t.matches(e,this);if(s){this.computedText.push(s,e.from-this.ast.tree.from),this.#xe.set(this.#Ce(e),s);break}}}matchText(e){const t=this.#Se.splice(0);this.#Se.push(new ke),this.iterateExcludingSuccessors(e),this.#Se.push(...t)}hasMatches(...e){return Boolean(this.#xe.values().find(t=>e.some(e=>t instanceof e)))}getMatch(e){return this.#xe.get(this.#Ce(e))}hasUnresolvedVars(e){return this.hasUnresolvedVarsRange(e,e)}hasUnresolvedVarsRange(e,t){return this.computedText.hasUnresolvedVars(e.from-this.ast.tree.from,t.to-this.ast.tree.from)}getComputedText(e,t){return this.getComputedTextRange(e,e,t)}getComputedPropertyValueText(){const[e,t]=Pt.range(Pt.siblings(Pt.declValue(this.ast.tree)));return this.getComputedTextRange(e??this.ast.tree,t??this.ast.tree)}getComputedTextRange(e,t,s){return this.computedText.get(e.from-this.ast.tree.from,t.to-this.ast.tree.from,s)}}class xt{match;offset;#Ie=null;constructor(e,t){this.match=e,this.offset=t}get end(){return this.offset+this.length}get length(){return this.match.text.length}get computedText(){return null===this.#Ie&&(this.#Ie=this.match.computedText()),this.#Ie}}class Rt{#Re=[];text;#Te=!0;constructor(e){this.text=e}clear(){this.#Re.splice(0)}get chunkCount(){return this.#Re.length}#Pe(){this.#Te||(this.#Re.sort((e,t)=>e.offset<t.offset?-1:t.offset<e.offset?1:e.end>t.end?-1:e.end<t.end?1:0),this.#Te=!0)}push(e,t){if(!function(e){return Boolean(e.computedText)}(e)||t<0||t>=this.text.length)return;const s=new xt(e,t);s.end>this.text.length||(this.#Te=!1,this.#Re.push(s))}*#Ee(e,t){this.#Pe();let s=this.#Re.findIndex(t=>t.offset>=e);for(;s>=0&&s<this.#Re.length&&this.#Re[s].end>e&&e<t;)if(this.#Re[s].end>t)s++;else for(yield this.#Re[s],e=this.#Re[s].end;e<t&&s<this.#Re.length&&this.#Re[s].offset<e;)s++}hasUnresolvedVars(e,t){for(const s of this.#Ee(e,t))if(null===s.computedText)return!0;return!1}*#Me(e,t){for(const s of this.#Ee(e,t)){const r=this.text.substring(e,Math.min(s.offset,t));yield r,t>=s.end&&(yield s),e=s.end}if(e<t){const s=this.text.substring(e,t);yield s}}get(e,t,s){const r=[],i=e=>{if("string"==typeof e)return e;const t=s?.get(e.match);return t?i(t):e.computedText??e.match.text};for(const s of this.#Me(e,t)){const e=i(s);0!==e.length&&(r.length>0&&Tt(r[r.length-1],e)&&r.push(" "),r.push(e))}return r.join("")}}function Tt(e,t){const s=Array.isArray(e)?e.findLast(e=>e.textContent)?.textContent:e,r=Array.isArray(t)?t.find(e=>e.textContent)?.textContent:t,i=s?s[s.length-1]:"",n=r?r[0]:"";return!(/\s/.test(i)||/\s/.test(n)||["","(","{","}",";","["].includes(i)||["","(",")",",",":","*","{",";","]"].includes(n))}const Mt=Map;var Pt;function Et(e){return yt.parse(e).topNode.getChild("RuleSet")?.getChild("Block")?.getChild("Declaration")??null}function Lt(e,t){const s=At(e);if(!s)return null;const r=`*{${s}: ${t};}`,i=Et(r);if(!i||i.type.isError)return null;const n=Pt.children(i);if(n.length<2)return null;const[o,a,l]=n;if(!o||o.type.isError||!a||a.type.isError||l?.type.isError)return null;const c=Pt.siblings(i).slice(1),[d,h]=c.splice(c.length-2,2);if(";"!==d?.name&&"}"!==h?.name)return null;const u=new wt(t,r,i,s,c);return u.text(o)!==s||":"!==a.name?null:u}function At(e){const t=`*{${e}: inherit;}`,s=Et(t);if(!s||s.type.isError)return null;const r=s.getChild("PropertyName")??s.getChild("VariableName");return r?vt(r,t):null}function Ot(e,t,s){const r=Lt(e,t),i=r&&Ct.walk(r,s);return r?.trailingNodes.forEach(e=>i?.matchText(e)),i}!function(e){function t(e){const t=[];for(;e;)t.push(e),e=e.nextSibling;return t}function s(e){return t(e?.firstChild??null)}function r(e){const t=[];let s=[];for(const r of e)","===r.name?(t.push(s),s=[]):s.push(r);return t.push(s),t}e.siblings=t,e.children=s,e.range=function(e){return[e[0],e[e.length-1]]},e.declValue=function(e){return"Declaration"!==e.name?null:s(e).find(e=>":"===e.name)?.nextSibling??null},e.stripComments=function*(e){for(const t of e)"Comment"!==t.type.name&&(yield t)},e.split=r,e.callArgs=function(e){const t=s(e.getChild("ArgList")),i=t.splice(0,1)[0],n=t.pop();return"("!==i?.name||")"!==n?.name?[]:r(t)},e.equals=function(e,t){return e.name===t.name&&e.from===t.from&&e.to===t.to}}(Pt||(Pt={}));class Dt extends St{#Le=null;#Ae;constructor(e,t){super(e),this.#Ae=t}enter({node:e}){return!(this.#Le||this.#Ae(e)&&(this.#Le=this.#Le??e,1))}static find(e,t){return Dt.walk(e,t).#Le}static findAll(e,t){const s=[];return Dt.walk(e,e=>(t(e)&&s.push(e),!1)),s}}var Nt=Object.freeze({__proto__:null,get ASTUtils(){return Pt},BottomUpTreeMatching:Ct,CSSControlMap:Mt,ComputedText:Rt,SyntaxTree:wt,TreeSearch:Dt,TreeWalker:St,matchDeclaration:Ot,matcherBase:kt,parseFontFamily:function(e){if(ut.has(e.trim()))return[];const t=[];for(const s of ft(bt(e))){const e=s.match(mt);e?t.push(e[1]||e[2]):t.push(s)}return t},parseFontVariationSettings:function(e){if(ut.has(e.trim())||"normal"===e.trim())return[];const t=[];for(const s of ft(bt(e))){const e=s.match(pt);e&&t.push({tag:e[1]||e[2],value:parseFloat(e[3])})}return t},requiresSpace:Tt,splitByComma:ft,stripComments:bt,tokenizeDeclaration:Lt,tokenizePropertyName:At});class Ft extends e.ObjectWrapper.ObjectWrapper{ownerStyle;index;name;value;important;disabled;parsedOk;implicit;text;range;#Oe;#De;#Ne;#Fe;#_e=[];constructor(e,s,r,i,n,o,a,l,c,d,h){if(super(),this.ownerStyle=e,this.index=s,this.name=r,this.value=i,this.important=n,this.disabled=o,this.parsedOk=a,this.implicit=l,this.text=c,this.range=d?t.TextRange.TextRange.fromObject(d):null,this.#Oe=!0,this.#De=null,this.#Ne=null,h&&h.length>0)for(const t of h)this.#_e.push(new Ft(e,++s,t.name,t.value,n,o,a,!0));else{const t=S().getLonghands(r);for(const r of t||[])this.#_e.push(new Ft(e,++s,r,"",n,o,a,!0))}}static parsePayload(e,t,s){return new Ft(e,t,s.name,s.value,s.important||!1,s.disabled||!1,!("parsedOk"in s)||Boolean(s.parsedOk),Boolean(s.implicit),s.text,s.range,s.longhandProperties)}parseExpression(e,t,s){return this.parsedOk?Ot(this.name,e,this.#Se(t,s)):null}parseValue(e,t){return this.parsedOk?Ot(this.name,this.value,this.#Se(e,t)):null}#Se(e,t){const s=e.propertyMatchers(this.ownerStyle,t);return s.push(new lt(this,e)),o.Runtime.experiments.isEnabled("font-editor")&&s.push(new Qe),s}ensureRanges(){if(this.#De&&this.#Ne)return;const e=this.range,s=this.text?new t.Text.Text(this.text):null;if(!e||!s)return;const r=s.value().indexOf(this.name),i=s.value().lastIndexOf(this.value);if(-1===r||-1===i||r>i)return;const n=new t.TextRange.SourceRange(r,this.name.length),o=new t.TextRange.SourceRange(i,this.value.length);function a(e,t,s){return 0===e.startLine&&(e.startColumn+=s,e.endColumn+=s),e.startLine+=t,e.endLine+=t,e}this.#De=a(s.toTextRange(n),e.startLine,e.startColumn),this.#Ne=a(s.toTextRange(o),e.startLine,e.startColumn)}nameRange(){return this.ensureRanges(),this.#De}valueRange(){return this.ensureRanges(),this.#Ne}rebase(e){this.ownerStyle.styleSheetId===e.styleSheetId&&this.range&&(this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}setActive(e){this.#Oe=e}get propertyText(){return void 0!==this.text?this.text:""===this.name?"":this.name+": "+this.value+(this.important?" !important":"")+";"}activeInStyle(){return this.#Oe}async setText(s,i,n){if(!this.ownerStyle)throw new Error("No ownerStyle for property");if(!this.ownerStyle.styleSheetId)throw new Error("No owner style id");if(!this.range||!this.ownerStyle.range)throw new Error("Style not editable");if(i&&(a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited),this.ownerStyle.parentRule?.isKeyframeRule()&&a.userMetrics.actionTaken(a.UserMetrics.Action.StylePropertyInsideKeyframeEdited),this.name.startsWith("--")&&a.userMetrics.actionTaken(a.UserMetrics.Action.CustomPropertyEdited)),n&&s===this.propertyText)return this.ownerStyle.cssModel().domModel().markUndoableState(!i),!0;const o=this.range.relativeTo(this.ownerStyle.range.startLine,this.ownerStyle.range.startColumn),l=this.ownerStyle.cssText?this.detectIndentation(this.ownerStyle.cssText):e.Settings.Settings.instance().moduleSetting("text-editor-indent").get(),c=this.ownerStyle.cssText?l.substring(0,this.ownerStyle.range.endColumn):"",d=new t.Text.Text(this.ownerStyle.cssText||"").replaceRange(o,r.StringUtilities.sprintf(";%s;",s)),h=await Ft.formatStyle(d,l,c);return await this.ownerStyle.setText(h,i)}static async formatStyle(e,s,r){const i=s.substring(r.length)+s;s&&(s="\n"+s);let n="",o="",a="",l=!1,c=!1;const d=t.CodeMirrorUtils.createCssTokenizer();return await d("*{"+e+"}",function(e,t){if(!l){const r=t?.includes("comment")&&function(e){const t=e.indexOf(":");if(-1===t)return!1;const s=e.substring(2,t).trim();return S().isCSSPropertyName(s)}(e),i=t?.includes("def")||t?.includes("string")||t?.includes("meta")||t?.includes("property")||t?.includes("variableName")&&"variableName.function"!==t;return r?n=n.trimEnd()+s+e:i?(l=!0,a=e):(";"!==e||c)&&(n+=e,e.trim()&&!t?.includes("comment")&&(c=";"!==e)),void("{"!==e||t||(c=!1))}if("}"===e||";"===e){const t=a.trim();return n=n.trimEnd()+s+t+(t.endsWith(":")?" ":"")+e,c=!1,l=!1,void(o="")}if(S().isGridAreaDefiningProperty(o)){const t=I.exec(e);t&&0===t.index&&!a.trimEnd().endsWith("]")&&(a=a.trimEnd()+"\n"+i)}o||":"!==e||(o=a),a+=e}),l&&(n+=a),n=n.substring(2,n.length-1).trimEnd(),n+(s?"\n"+r:"")}detectIndentation(e){const s=e.split("\n");return s.length<2?"":t.TextUtils.Utils.lineIndent(s[1])}setValue(e,t,s,r){const i=this.name+": "+e+(this.important?" !important":"")+";";this.setText(i,t,s).then(r)}setLocalValue(e){this.value=e,this.dispatchEventToListeners("localValueUpdated")}async setDisabled(e){if(!this.ownerStyle)return!1;if(e===this.disabled)return!0;if(!this.text)return!0;const t=this.text.trim(),s=e=>e+(e.endsWith(";")?"":";");let r;return r=e?"/* "+s(bt(t))+" */":s(this.text.substring(2,t.length-2).trim()),await this.setText(r,!0,!0)}setDisplayedStringForInvalidProperty(e){this.#Fe=e}getInvalidStringForInvalidProperty(){return this.#Fe}getLonghandProperties(){return this.#_e}}var Bt=Object.freeze({__proto__:null,CSSProperty:Ft});class _t{text="";range;styleSheetId;cssModel;constructor(e){this.cssModel=e}rebase(e){this.styleSheetId===e.styleSheetId&&this.range&&(e.oldRange.equal(this.range)?this.reinitialize(e.payload):this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}equal(e){return!!(this.styleSheetId&&this.range&&e.range)&&this.styleSheetId===e.styleSheetId&&this.range.equal(e.range)}lineNumberInSource(){if(this.range)return this.header()?.lineNumberInSource(this.range.startLine)}columnNumberInSource(){if(this.range)return this.header()?.columnNumberInSource(this.range.startLine,this.range.startColumn)}header(){return this.styleSheetId?this.cssModel.styleSheetHeaderForId(this.styleSheetId):null}rawLocation(){const e=this.header();if(!e||void 0===this.lineNumberInSource())return null;const t=Number(this.lineNumberInSource());return new Ur(e,t,this.columnNumberInSource())}}var Ht=Object.freeze({__proto__:null,CSSQuery:_t});class Ut extends _t{name;physicalAxes;logicalAxes;queriesScrollState;static parseContainerQueriesPayload(e,t){return t.map(t=>new Ut(e,t))}constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){this.text=e.text,this.range=e.range?t.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId,this.name=e.name,this.physicalAxes=e.physicalAxes,this.logicalAxes=e.logicalAxes,this.queriesScrollState=e.queriesScrollState}active(){return!0}async getContainerForNode(e){const t=await this.cssModel.domModel().getContainerForNode(e,this.name,this.physicalAxes,this.logicalAxes,this.queriesScrollState);if(t)return new qt(t)}}class qt{containerNode;constructor(e){this.containerNode=e}async getContainerSizeDetails(){const e=await this.containerNode.domModel().cssModel().getComputedStyle(this.containerNode.id);if(!e)return;const t=e.get("container-type"),s=e.get("writing-mode");if(!t||!s)return;const r=zt(`${t}`),i=jt(r,s);let n,o;return"Both"!==i&&"Horizontal"!==i||(n=e.get("width")),"Both"!==i&&"Vertical"!==i||(o=e.get("height")),{queryAxis:r,physicalAxis:i,width:n,height:o}}}const zt=e=>{const t=e.split(" ");let s=!1;for(const e of t){if("size"===e)return"size";s=s||"inline-size"===e}return s?"inline-size":""},jt=(e,t)=>{const s=t.startsWith("vertical");switch(e){case"":return"";case"size":return"Both";case"inline-size":return s?"Vertical":"Horizontal";case"block-size":return s?"Horizontal":"Vertical"}};var Vt=Object.freeze({__proto__:null,CSSContainerQuery:Ut,CSSContainerQueryContainer:qt,getPhysicalAxisFromQueryAxis:jt,getQueryAxisFromContainerType:zt});class Wt extends _t{static parseLayerPayload(e,t){return t.map(t=>new Wt(e,t))}constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){this.text=e.text,this.range=e.range?t.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId}active(){return!0}}var Gt=Object.freeze({__proto__:null,CSSLayer:Wt});class Kt{#Ue;#Be;constructor(e){this.#Ue=e.active,this.#Be=[];for(let t=0;t<e.expressions.length;++t)this.#Be.push(Qt.parsePayload(e.expressions[t]))}static parsePayload(e){return new Kt(e)}active(){return this.#Ue}expressions(){return this.#Be}}class Qt{#u;#He;#qe;#Ne;#ze;constructor(e){this.#u=e.value,this.#He=e.unit,this.#qe=e.feature,this.#Ne=e.valueRange?t.TextRange.TextRange.fromObject(e.valueRange):null,this.#ze=e.computedLength||null}static parsePayload(e){return new Qt(e)}value(){return this.#u}unit(){return this.#He}feature(){return this.#qe}valueRange(){return this.#Ne}computedLength(){return this.#ze}}class $t extends _t{source;sourceURL;mediaList;static parseMediaArrayPayload(e,t){return t.map(t=>new $t(e,t))}constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){if(this.text=e.text,this.source=e.source,this.sourceURL=e.sourceURL||"",this.range=e.range?t.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId,this.mediaList=null,e.mediaList){this.mediaList=[];for(let t=0;t<e.mediaList.length;++t)this.mediaList.push(Kt.parsePayload(e.mediaList[t]))}}active(){if(!this.mediaList)return!0;for(let e=0;e<this.mediaList.length;++e)if(this.mediaList[e].active())return!0;return!1}}var Xt=Object.freeze({__proto__:null,CSSMedia:$t,CSSMediaQuery:Kt,CSSMediaQueryExpression:Qt,Source:{LINKED_SHEET:"linkedSheet",INLINE_SHEET:"inlineSheet",MEDIA_RULE:"mediaRule",IMPORT_RULE:"importRule"}});class Jt extends _t{static parseScopesPayload(e,t){return t.map(t=>new Jt(e,t))}constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){this.text=e.text,this.range=e.range?t.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId}active(){return!0}}var Yt,Zt=Object.freeze({__proto__:null,CSSScope:Jt});class en{#je;parentRule;#We;styleSheetId;range;cssText;#Ve=new Map;#Ge=new Set;#Ke=new Map;#$e;type;#Qe;constructor(e,t,s,r,i){this.#je=e,this.parentRule=t,this.#Ye(s),this.type=r,this.#Qe=i}rebase(e){if(this.styleSheetId===e.styleSheetId&&this.range)if(e.oldRange.equal(this.range))this.#Ye(e.payload);else{this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange);for(let t=0;t<this.#We.length;++t)this.#We[t].rebase(e)}}animationName(){return this.#Qe}#Ye(e){this.styleSheetId=e.styleSheetId,this.range=e.range?t.TextRange.TextRange.fromObject(e.range):null;const s=e.shorthandEntries;this.#Ve=new Map,this.#Ge=new Set;for(let e=0;e<s.length;++e)this.#Ve.set(s[e].name,s[e].value),s[e].important&&this.#Ge.add(s[e].name);if(this.#We=[],e.cssText&&this.range){const t=[];for(const s of e.cssProperties){if(!s.range)continue;const e=Ft.parsePayload(this,this.#We.length,s);this.#We.push(e);for(const s of e.getLonghandProperties())t.push(s)}for(const e of t)e.index=this.#We.length,this.#We.push(e)}else for(const t of e.cssProperties)this.#We.push(Ft.parsePayload(this,this.#We.length,t));this.#Je(),this.#Xe(),this.#Ke=new Map;for(const e of this.#We)e.activeInStyle()&&this.#Ke.set(e.name,e);this.cssText=e.cssText,this.#$e=null}#Je(){if(this.range)return;if(!this.#Ve.size)return;const e=new Set;for(const t of this.#We)e.add(t.name);const t=[];for(const s of this.#We){const r=S().getShorthands(s.name)||[];for(const s of r){if(e.has(s))continue;const r=this.#Ve.get(s);if(!r)continue;const i=Boolean(this.#Ge.has(s)),n=new Ft(this,this.allProperties().length,s,r,i,!1,!0,!1);t.push(n),e.add(s)}}this.#We=this.#We.concat(t)}#Ze(){if(this.range)return this.#We.filter(function(e){return Boolean(e.range)});const e=[];for(const t of this.#We){const s=S().getShorthands(t.name)||[];let r=!1;for(const e of s)if(this.#Ve.get(e)){r=!0;break}r||e.push(t)}return e}leadingProperties(){return this.#$e||(this.#$e=this.#Ze()),this.#$e}target(){return this.#je.target()}cssModel(){return this.#je}#Xe(){const e=new Map,t=new Set;for(const s of this.#We){const r=S(),i=r.canonicalPropertyName(s.name);if(s.disabled||!s.parsedOk){!s.disabled&&r.isCustomProperty(s.name)&&(e.get(i)?.setActive(!1),e.delete(i)),s.setActive(!1);continue}if(t.has(s))continue;for(const r of s.getLonghandProperties()){const s=e.get(r.name);s?!s.important||r.important?(s.setActive(!1),e.set(r.name,r)):r.setActive(!1):e.set(r.name,r),t.add(r)}const n=e.get(i);n?!n.important||s.important?(n.setActive(!1),e.set(i,s)):s.setActive(!1):e.set(i,s)}}allProperties(){return this.#We}hasActiveProperty(e){return this.#Ke.has(e)}getPropertyValue(e){const t=this.#Ke.get(e);return t?t.value:""}isPropertyImplicit(e){const t=this.#Ke.get(e);return!!t&&t.implicit}propertyAt(e){return e<this.allProperties().length?this.allProperties()[e]:null}pastLastSourcePropertyIndex(){for(let e=this.allProperties().length-1;e>=0;--e)if(this.allProperties()[e].range)return e+1;return 0}#et(e){const t=this.propertyAt(e);if(t?.range)return t.range.collapseToStart();if(!this.range)throw new Error("CSSStyleDeclaration.range is null");return this.range.collapseToEnd()}newBlankProperty(e){return e=void 0===e?this.pastLastSourcePropertyIndex():e,new Ft(this,e,"","",!1,!1,!0,!1,"",this.#et(e))}setText(e,t){return this.range&&this.styleSheetId?this.#je.setStyleText(this.styleSheetId,this.range,e,t):Promise.resolve(!1)}insertPropertyAt(e,t,s,r){this.newBlankProperty(e).setText(t+": "+s+";",!1,!0).then(r)}appendProperty(e,t,s){this.insertPropertyAt(this.allProperties().length,e,t,s)}}!function(e){e.Regular="Regular",e.Inline="Inline",e.Attributes="Attributes",e.Pseudo="Pseudo",e.Transition="Transition",e.Animation="Animation"}(Yt||(Yt={}));var tn=Object.freeze({__proto__:null,CSSStyleDeclaration:en,get Type(){return Yt}});class nn extends _t{static parseSupportsPayload(e,t){return t.map(t=>new nn(e,t))}#Oe=!0;constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){this.text=e.text,this.range=e.range?t.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId,this.#Oe=e.active}active(){return this.#Oe}}var rn=Object.freeze({__proto__:null,CSSSupports:nn});class sn{cssModelInternal;styleSheetId;sourceURL;origin;style;constructor(e,t){if(this.cssModelInternal=e,this.styleSheetId=t.styleSheetId,this.styleSheetId){const e=this.getStyleSheetHeader(this.styleSheetId);this.sourceURL=e.sourceURL}this.origin=t.origin,this.style=new en(this.cssModelInternal,this,t.style,Yt.Regular)}rebase(e){this.styleSheetId===e.styleSheetId&&this.style.rebase(e)}resourceURL(){return this.styleSheetId?this.getStyleSheetHeader(this.styleSheetId).resourceURL():r.DevToolsPath.EmptyUrlString}isUserAgent(){return"user-agent"===this.origin}isInjected(){return"injected"===this.origin}isViaInspector(){return"inspector"===this.origin}isRegular(){return"regular"===this.origin}isKeyframeRule(){return!1}cssModel(){return this.cssModelInternal}getStyleSheetHeader(e){const t=this.cssModelInternal.styleSheetHeaderForId(e);return console.assert(null!==t),t}}class on{text;range;specificity;constructor(e){this.text=e.text,e.range&&(this.range=t.TextRange.TextRange.fromObject(e.range)),e.specificity&&(this.specificity=e.specificity)}rebase(e){this.range&&(this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}}class an extends sn{selectors;nestingSelectors;media;containerQueries;supports;scopes;layers;ruleTypes;wasUsed;constructor(e,t,s){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.reinitializeSelectors(t.selectorList),this.nestingSelectors=t.nestingSelectors,this.media=t.media?$t.parseMediaArrayPayload(e,t.media):[],this.containerQueries=t.containerQueries?Ut.parseContainerQueriesPayload(e,t.containerQueries):[],this.scopes=t.scopes?Jt.parseScopesPayload(e,t.scopes):[],this.supports=t.supports?nn.parseSupportsPayload(e,t.supports):[],this.layers=t.layers?Wt.parseLayerPayload(e,t.layers):[],this.ruleTypes=t.ruleTypes||[],this.wasUsed=s||!1}static createDummyRule(e,s){const r={selectorList:{text:"",selectors:[{text:s,value:void 0}]},style:{styleSheetId:"0",range:new t.TextRange.TextRange(0,0,0,0),shorthandEntries:[],cssProperties:[]},origin:"inspector"};return new an(e,r)}reinitializeSelectors(e){this.selectors=[];for(let t=0;t<e.selectors.length;++t)this.selectors.push(new on(e.selectors[t]))}setSelectorText(e){const t=this.styleSheetId;if(!t)throw new Error("No rule stylesheet id");const s=this.selectorRange();if(!s)throw new Error("Rule selector is not editable");return this.cssModelInternal.setSelectorText(t,s,e)}selectorText(){return this.selectors.map(e=>e.text).join(", ")}selectorRange(){if(0===this.selectors.length)return null;const e=this.selectors[0].range,s=this.selectors[this.selectors.length-1].range;return e&&s?new t.TextRange.TextRange(e.startLine,e.startColumn,s.endLine,s.endColumn):null}lineNumberInSource(e){const t=this.selectors[e];return t?.range&&this.styleSheetId?this.getStyleSheetHeader(this.styleSheetId).lineNumberInSource(t.range.startLine):0}columnNumberInSource(e){const t=this.selectors[e];if(t?.range&&this.styleSheetId)return this.getStyleSheetHeader(this.styleSheetId).columnNumberInSource(t.range.startLine,t.range.startColumn)}rebase(e){if(this.styleSheetId!==e.styleSheetId)return;const t=this.selectorRange();if(t?.equal(e.oldRange))this.reinitializeSelectors(e.payload);else for(let t=0;t<this.selectors.length;++t)this.selectors[t].rebase(e);this.media.forEach(t=>t.rebase(e)),this.containerQueries.forEach(t=>t.rebase(e)),this.scopes.forEach(t=>t.rebase(e)),this.supports.forEach(t=>t.rebase(e)),super.rebase(e)}}class ln extends sn{#tt;constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.#tt=new on(t.propertyName)}propertyName(){return this.#tt}initialValue(){return this.style.hasActiveProperty("initial-value")?this.style.getPropertyValue("initial-value"):null}syntax(){return this.style.getPropertyValue("syntax")}inherits(){return"true"===this.style.getPropertyValue("inherits")}setPropertyName(e){const t=this.styleSheetId;if(!t)throw new Error("No rule stylesheet id");const s=this.#tt.range;if(!s)throw new Error("Property name is not editable");return this.cssModelInternal.setPropertyRulePropertyName(t,s,e)}}class dn extends sn{#st;constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.#st=new on(t.fontPaletteName)}name(){return this.#st}}class cn{#Qe;#rt;constructor(e,t){this.#Qe=new on(t.animationName),this.#rt=t.keyframes.map(t=>new hn(e,t))}name(){return this.#Qe}keyframes(){return this.#rt}}class hn extends sn{#it;constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.reinitializeKey(t.keyText)}key(){return this.#it}reinitializeKey(e){this.#it=new on(e)}rebase(e){this.styleSheetId===e.styleSheetId&&this.#it.range&&(e.oldRange.equal(this.#it.range)?this.reinitializeKey(e.payload):this.#it.rebase(e),super.rebase(e))}isKeyframeRule(){return!0}setKeyText(e){const t=this.styleSheetId;if(!t)throw new Error("No rule stylesheet id");const s=this.#it.range;if(!s)throw new Error("Keyframe key is not editable");return this.cssModelInternal.setKeyframeKey(t,s,e)}}class un extends sn{#tt;#Oe;constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.#tt=new on(t.name),this.#Oe=t.active}name(){return this.#tt}active(){return this.#Oe}}class gn extends sn{#tt;#nt;#ot;constructor(e,t){super(e,{origin:t.origin,style:{cssProperties:[],shorthandEntries:[]},styleSheetId:t.styleSheetId}),this.#tt=new on(t.name),this.#nt=t.parameters.map(({name:e})=>e),this.#ot=this.protocolNodesToNestedStyles(t.children)}functionName(){return this.#tt}parameters(){return this.#nt}children(){return this.#ot}protocolNodesToNestedStyles(e){const t=[];for(const s of e){const e=this.protocolNodeToNestedStyle(s);e&&t.push(e)}return t}protocolNodeToNestedStyle(e){if(e.style)return{style:new en(this.cssModelInternal,this,e.style,Yt.Regular)};if(e.condition){const t=this.protocolNodesToNestedStyles(e.condition.children);return e.condition.media?{children:t,media:new $t(this.cssModelInternal,e.condition.media)}:e.condition.containerQueries?{children:t,container:new Ut(this.cssModelInternal,e.condition.containerQueries)}:e.condition.supports?{children:t,supports:new nn(this.cssModelInternal,e.condition.supports)}:void console.error("A function rule condition must have a media, container, or supports")}console.error("A function rule node must have a style or condition")}}var pn=Object.freeze({__proto__:null,CSSFontPaletteValuesRule:dn,CSSFunctionRule:gn,CSSKeyframeRule:hn,CSSKeyframesRule:cn,CSSPositionTryRule:un,CSSPropertyRule:ln,CSSRule:sn,CSSStyleRule:an});function mn(e,t){if(!t.styleSheetId||!t.range)return!1;for(const s of e)if(t.styleSheetId===s.styleSheetId&&s.range&&t.range.equal(s.range))return!0;return!1}function fn(e){const t=e.allProperties();for(let e=0;e<t.length;++e){const s=t[e];if(s.activeInStyle()&&S().isPropertyInherited(s.name))return!0}return!1}function bn(e){for(const t of e)i(t);const t=[];for(const i of e){const e=t[t.length-1];e&&"user-agent"===i.rule.origin&&"user-agent"===e.rule.origin&&i.rule.selectorList.text===e.rule.selectorList.text&&r(i)===r(e)?s(i,e):t.push(i)}return t;function s(e,t){const s=new Map,r=new Map;for(const e of t.rule.style.shorthandEntries)s.set(e.name,e.value);for(const e of t.rule.style.cssProperties)r.set(e.name,e.value);for(const t of e.rule.style.shorthandEntries)s.set(t.name,t.value);for(const t of e.rule.style.cssProperties)r.set(t.name,t.value);t.rule.style.shorthandEntries=[...s.entries()].map(([e,t])=>({name:e,value:t})),t.rule.style.cssProperties=[...r.entries()].map(([e,t])=>({name:e,value:t}))}function r(e){return e.rule.media?e.rule.media.map(e=>e.text).join(", "):null}function i(e){const{matchingSelectors:t,rule:s}=e;"user-agent"===s.origin&&t.length&&(s.selectorList.selectors=s.selectorList.selectors.filter((e,s)=>t.includes(s)),s.selectorList.text=s.selectorList.selectors.map(e=>e.text).join(", "),e.matchingSelectors=t.map((e,t)=>t))}}function yn(e){const t=new Map;for(let s=0;s<e.matchingSelectors.length;s++){const r=e.matchingSelectors[s],i=e.rule.selectorList.selectors[r].text.match(/::highlight\((.*)\)/);if(i){const e=i[1],s=t.get(e);s?s.push(r):t.set(e,[r])}}return t}class vn{#at;#lt;#ct;constructor(e,t){this.#lt=e,this.#at=t}propertyName(){return this.#at instanceof ln?this.#at.propertyName().text:this.#at.propertyName}initialValue(){return this.#at instanceof ln?this.#at.initialValue():this.#at.initialValue?.text??null}inherits(){return this.#at instanceof ln?this.#at.inherits():this.#at.inherits}syntax(){return this.#at instanceof ln?this.#at.syntax():`"${this.#at.syntax}"`}parseValue(e,t){const s=this.initialValue();return s?Ot(this.propertyName(),s,e.propertyMatchers(this.style(),t)):null}#dt(){if(this.#at instanceof ln)return[];const{inherits:e,initialValue:t,syntax:s}=this.#at,r=[{name:"inherits",value:`${e}`},{name:"syntax",value:`"${s}"`}];return void 0!==t&&r.push({name:"initial-value",value:t.text}),r}style(){return this.#ct||(this.#ct=this.#at instanceof ln?this.#at.style:new en(this.#lt,null,{cssProperties:this.#dt(),shorthandEntries:[]},Yt.Pseudo)),this.#ct}}class In{#je;#ht;#ut=new Map;#gt=new Map;#rt=[];#mt;#pt=new Map;#ft=new Map;#bt=new Set;#yt=new Map;#wt;#vt;#kt;#St;#xt;#Ct;#It;#Rt;static async create(e){const t=new In(e);return await t.init(e),t}constructor({cssModel:e,node:t,animationsPayload:s,parentLayoutNodeId:r,positionTryRules:i,propertyRules:n,cssPropertyRegistrations:o,fontPaletteValuesRule:a,activePositionFallbackIndex:l,functionRules:c}){this.#je=e,this.#ht=t,this.#mt=[...n.map(t=>new ln(e,t)),...o].map(t=>new vn(e,t)),s&&(this.#rt=s.map(t=>new cn(e,t))),this.#vt=i.map(t=>new un(e,t)),this.#wt=r,this.#Rt=a?new dn(e,a):void 0,this.#kt=l,this.#It=c.map(t=>new gn(e,t))}async init({matchedPayload:e,inheritedPayload:t,inlinePayload:s,attributesPayload:r,pseudoPayload:i,inheritedPseudoPayload:n,animationStylesPayload:o,transitionsStylePayload:a,inheritedAnimatedPayload:l}){e=bn(e);for(const e of t)e.matchedCSSRules=bn(e.matchedCSSRules);this.#St=await this.buildMainCascade(s,r,e,t,o,a,l),[this.#xt,this.#Ct]=this.buildPseudoCascades(i,n);for(const e of Array.from(this.#Ct.values()).concat(Array.from(this.#xt.values())).concat(this.#St))for(const t of e.styles())this.#yt.set(t,e);for(const e of this.#mt)this.#pt.set(e.propertyName(),e)}async buildMainCascade(e,t,s,r,i,n,o){const a=[],l=[];function c(){if(!t)return;const e=new en(this.#je,null,t,Yt.Attributes);this.#ft.set(e,this.#ht),l.push(e)}if(n){const e=new en(this.#je,null,n,Yt.Transition);this.#ft.set(e,this.#ht),l.push(e)}for(const e of i){const t=new en(this.#je,null,e.style,Yt.Animation,e.name);this.#ft.set(t,this.#ht),l.push(t)}if(e&&this.#ht.nodeType()===Node.ELEMENT_NODE){const t=new en(this.#je,null,e,Yt.Inline);this.#ft.set(t,this.#ht),l.push(t)}let d;for(let e=s.length-1;e>=0;--e){const t=new an(this.#je,s[e].rule);!t.isInjected()&&!t.isUserAgent()||d||(d=!0,c.call(this)),this.#ft.set(t.style,this.#ht),l.push(t.style),this.addMatchingSelectors(this.#ht,t,s[e].matchingSelectors)}d||c.call(this),a.push(new wn(this,l,!1));let h=this.#ht.parentNode;const u=async e=>e.hasAssignedSlot()?await(e.assignedSlot?.deferredNode.resolvePromise())??null:e.parentNode;for(let e=0;h&&r&&e<r.length;++e){const t=[],s=r[e],i=o[e],n=s.inlineStyle?new en(this.#je,null,s.inlineStyle,Yt.Inline):null,c=i?.transitionsStyle?new en(this.#je,null,i?.transitionsStyle,Yt.Transition):null,d=i?.animationStyles?.map(e=>new en(this.#je,null,e.style,Yt.Animation,e.name))??[];c&&fn(c)&&(this.#ft.set(c,h),t.push(c),this.#bt.add(c));for(const e of d)fn(e)&&(this.#ft.set(e,h),t.push(e),this.#bt.add(e));n&&fn(n)&&(this.#ft.set(n,h),t.push(n),this.#bt.add(n));const g=s.matchedCSSRules||[];for(let e=g.length-1;e>=0;--e){const s=new an(this.#je,g[e].rule);this.addMatchingSelectors(h,s,g[e].matchingSelectors),fn(s.style)&&(s.style.allProperties().some(e=>S().isCustomProperty(e.name))||!mn(l,s.style)&&!mn(this.#bt,s.style))&&(this.#ft.set(s.style,h),t.push(s.style),this.#bt.add(s.style))}h=await u(h),a.push(new wn(this,t,!0))}return new Tn(a,this.#mt)}buildSplitCustomHighlightCascades(e,t,s,r){const i=new Map;for(let r=e.length-1;r>=0;--r){const n=yn(e[r]);for(const[o,a]of n){const n=new an(this.#je,e[r].rule);this.#ft.set(n.style,t),s&&this.#bt.add(n.style),this.addMatchingSelectors(t,n,a);const l=i.get(o);l?l.push(n.style):i.set(o,[n.style])}}for(const[e,t]of i){const i=new wn(this,t,s,!0),n=r.get(e);n?n.push(i):r.set(e,[i])}}buildPseudoCascades(e,t){const s=new Map,r=new Map;if(!e)return[s,r];const i=new Map,n=new Map;for(let t=0;t<e.length;++t){const s=e[t],r=this.#ht.pseudoElements().get(s.pseudoType)?.at(-1)||null,o=[],a=s.matches||[];if("highlight"===s.pseudoType)this.buildSplitCustomHighlightCascades(a,this.#ht,!1,n);else{for(let e=a.length-1;e>=0;--e){const t=new an(this.#je,a[e].rule);o.push(t.style);const i=S().isHighlightPseudoType(s.pseudoType)?this.#ht:r;this.#ft.set(t.style,i),i&&this.addMatchingSelectors(i,t,a[e].matchingSelectors)}const e=S().isHighlightPseudoType(s.pseudoType),t=new wn(this,o,!1,e);i.set(s.pseudoType,[t])}}if(t){let e=this.#ht.parentNode;for(let s=0;e&&s<t.length;++s){const r=t[s].pseudoElements;for(let t=0;t<r.length;++t){const s=r[t],o=s.matches||[];if("highlight"===s.pseudoType)this.buildSplitCustomHighlightCascades(o,e,!0,n);else{const t=[];for(let s=o.length-1;s>=0;--s){const r=new an(this.#je,o[s].rule);t.push(r.style),this.#ft.set(r.style,e),this.#bt.add(r.style),this.addMatchingSelectors(e,r,o[s].matchingSelectors)}const r=S().isHighlightPseudoType(s.pseudoType),n=new wn(this,t,!0,r),a=i.get(s.pseudoType);a?a.push(n):i.set(s.pseudoType,[n])}}e=e.parentNode}}for(const[e,t]of i.entries())s.set(e,new Tn(t,this.#mt));for(const[e,t]of n.entries())r.set(e,new Tn(t,this.#mt));return[s,r]}addMatchingSelectors(e,t,s){for(const r of s){const s=t.selectors[r];s&&this.setSelectorMatches(e,s.text,!0)}}node(){return this.#ht}cssModel(){return this.#je}hasMatchingSelectors(e){return(0===e.selectors.length||this.getMatchingSelectors(e).length>0)&&function(e){if(!e.parentRule)return!0;const t=e.parentRule,s=[...t.media,...t.containerQueries,...t.supports,...t.scopes];for(const e of s)if(!e.active())return!1;return!0}(e.style)}getParentLayoutNodeId(){return this.#wt}getMatchingSelectors(e){const t=this.nodeForStyle(e.style);if(!t||"number"!=typeof t.id)return[];const s=this.#gt.get(t.id);if(!s)return[];const r=[];for(let t=0;t<e.selectors.length;++t)s.get(e.selectors[t].text)&&r.push(t);return r}async recomputeMatchingSelectors(e){const t=this.nodeForStyle(e.style);if(!t)return;const s=[];for(const i of e.selectors)s.push(r.call(this,t,i.text));async function r(e,t){const s=e.ownerDocument;if(!s)return;if("number"==typeof e.id){const s=this.#gt.get(e.id);if(s?.has(t))return}if("number"!=typeof s.id)return;const r=await this.#ht.domModel().querySelectorAll(s.id,t);r&&("number"==typeof e.id?this.setSelectorMatches(e,t,-1!==r.indexOf(e.id)):this.setSelectorMatches(e,t,!1))}await Promise.all(s)}addNewRule(e,t){return this.#ut.set(e.style,t),this.recomputeMatchingSelectors(e)}setSelectorMatches(e,t,s){if("number"!=typeof e.id)return;let r=this.#gt.get(e.id);r||(r=new Map,this.#gt.set(e.id,r)),r.set(t,s)}nodeStyles(){return r.assertNotNullOrUndefined(this.#St),this.#St.styles()}inheritedStyles(){return this.#St?.styles().filter(e=>this.isInherited(e))??[]}animationStyles(){return this.#St?.styles().filter(e=>!this.isInherited(e)&&e.type===Yt.Animation)??[]}transitionsStyle(){return this.#St?.styles().find(e=>!this.isInherited(e)&&e.type===Yt.Transition)??null}registeredProperties(){return this.#mt}getRegisteredProperty(e){return this.#pt.get(e)}functionRules(){return this.#It}fontPaletteValuesRule(){return this.#Rt}keyframes(){return this.#rt}positionTryRules(){return this.#vt}activePositionFallbackIndex(){return this.#kt}pseudoStyles(e){r.assertNotNullOrUndefined(this.#xt);const t=this.#xt.get(e);return t?t.styles():[]}pseudoTypes(){return r.assertNotNullOrUndefined(this.#xt),new Set(this.#xt.keys())}customHighlightPseudoStyles(e){r.assertNotNullOrUndefined(this.#Ct);const t=this.#Ct.get(e);return t?t.styles():[]}customHighlightPseudoNames(){return r.assertNotNullOrUndefined(this.#Ct),new Set(this.#Ct.keys())}nodeForStyle(e){return this.#ut.get(e)||this.#ft.get(e)||null}availableCSSVariables(e){const t=this.#yt.get(e);return t?t.findAvailableCSSVariables(e):[]}computeCSSVariable(e,t){const s=this.#yt.get(e);return s?s.computeCSSVariable(e,t):null}resolveProperty(e,t){return this.#yt.get(t)?.resolveProperty(e,t)??null}resolveGlobalKeyword(e,t){const s=this.#yt.get(e.ownerStyle)?.resolveGlobalKeyword(e,t);return s?new kn(s):null}isInherited(e){return this.#bt.has(e)}propertyState(e){const t=this.#yt.get(e.ownerStyle);return t?t.propertyState(e):null}resetActiveProperties(){r.assertNotNullOrUndefined(this.#St),r.assertNotNullOrUndefined(this.#xt),r.assertNotNullOrUndefined(this.#Ct),this.#St.reset();for(const e of this.#xt.values())e.reset();for(const e of this.#Ct.values())e.reset()}propertyMatchers(e,t){return[new ve(this,e),new De(()=>t?.get("color")??null),new Me,new Ee,new xe,new Ue,new ze,new Ve,new Ge,new Fe(e),new nt,new Ae,new st,new ot,new et,new ct,new Xe,new Ye,new _e,new we]}}class wn{#Tt;styles;#Pt;#Et;propertiesState=new Map;activeProperties=new Map;constructor(e,t,s,r=!1){this.#Tt=e,this.styles=t,this.#Pt=s,this.#Et=r}computeActiveProperties(){this.propertiesState.clear(),this.activeProperties.clear();for(let e=this.styles.length-1;e>=0;e--){const t=this.styles[e],s=t.parentRule;if((!s||s instanceof an)&&(!s||this.#Tt.hasMatchingSelectors(s)))for(const e of t.allProperties()){const s=S();if(this.#Pt&&!this.#Et&&!s.isPropertyInherited(e.name))continue;if(t.range&&!e.range)continue;if(!e.activeInStyle()){this.propertiesState.set(e,"Overloaded");continue}if(this.#Pt){const t=this.#Tt.getRegisteredProperty(e.name);if(t&&!t.inherits()){this.propertiesState.set(e,"Overloaded");continue}}const r=s.canonicalPropertyName(e.name);this.updatePropertyState(e,r);for(const t of e.getLonghandProperties())s.isCSSPropertyName(t.name)&&this.updatePropertyState(t,t.name)}}}updatePropertyState(e,t){const s=this.activeProperties.get(t);!s?.important||e.important?(s&&this.propertiesState.set(s,"Overloaded"),this.propertiesState.set(e,"Active"),this.activeProperties.set(t,e)):this.propertiesState.set(e,"Overloaded")}}function Sn(e){return"ownerStyle"in e}class kn{declaration;constructor(e){this.declaration=e}get value(){return Sn(this.declaration)?this.declaration.value:this.declaration.initialValue()}get style(){return Sn(this.declaration)?this.declaration.ownerStyle:this.declaration.style()}get name(){return Sn(this.declaration)?this.declaration.name:this.declaration.propertyName()}}class Cn{nodeCascade;name;discoveryTime;rootDiscoveryTime;get isRootEntry(){return this.rootDiscoveryTime===this.discoveryTime}updateRoot(e){this.rootDiscoveryTime=Math.min(this.rootDiscoveryTime,e.rootDiscoveryTime)}constructor(e,t,s){this.nodeCascade=e,this.name=t,this.discoveryTime=s,this.rootDiscoveryTime=s}}class xn{#Mt=0;#Lt=[];#At=new Map;get(e,t){return this.#At.get(e)?.get(t)}add(e,t){const s=this.get(e,t);if(s)return s;const r=new Cn(e,t,this.#Mt++);this.#Lt.push(r);let i=this.#At.get(e);return i||(i=new Map,this.#At.set(e,i)),i.set(t,r),r}isInInProgressSCC(e){return this.#Lt.includes(e)}finishSCC(e){const t=this.#Lt.lastIndexOf(e);return console.assert(t>=0,"Root is not an in-progress scc"),this.#Lt.splice(t)}}function*Rn(e,t){for(let s=void 0!==t?e.indexOf(t)+1:0;s<e.length;++s)yield e[s]}class Tn{#Ot=new Map;#Dt=new Map;#Nt=new Map;#Ft=new Map;#_t=!1;#Ut;#mt;constructor(e,t){this.#Ut=e,this.#mt=t;for(const t of e)for(const e of t.styles)this.#Ft.set(e,t)}findAvailableCSSVariables(e){const t=this.#Ft.get(e);if(!t)return[];this.ensureInitialized();const s=this.#Dt.get(t);return s?Array.from(s.keys()):[]}#Bt(e,t){const s=this.#Ft.get(e.ownerStyle);if(!s)return null;for(const r of Rn(s.styles,e.ownerStyle)){const s=r.allProperties().findLast(s=>s.name===e.name&&t(s));if(s)return s}return null}resolveProperty(e,t){const s=this.#Ft.get(t);if(!s)return null;for(const r of function*(e,t){(void 0===t||e.includes(t))&&(void 0!==t&&(yield t),yield*Rn(e,t))}(s.styles,t)){const t=r.allProperties().findLast(t=>t.name===e);if(t)return t}return this.#Ht({name:e,ownerStyle:t})}#qt(e){const t=this.#Ft.get(e.ownerStyle);if(!t)return null;for(const s of Rn(this.#Ut,t))for(const t of s.styles){const s=t.allProperties().findLast(t=>t.name===e.name);if(s)return s}return null}#Ht(e){return S().isPropertyInherited(e.name)&&(this.#zt(e.name)?.inherits()??1)?this.#qt(e):null}#zt(e){return this.#mt.find(t=>t.propertyName()===e)||null}resolveGlobalKeyword(e,t){const s=t=>t.ownerStyle.parentRule instanceof an&&(e.ownerStyle.type===Yt.Inline||e.ownerStyle.parentRule instanceof an&&"regular"===t.ownerStyle.parentRule?.origin&&JSON.stringify(t.ownerStyle.parentRule.layers)!==JSON.stringify(e.ownerStyle.parentRule.layers));switch(t){case"initial":return this.#zt(e.name);case"inherit":return this.#qt(e)??this.#zt(e.name);case"revert":return this.#Bt(e,t=>null!==t.ownerStyle.parentRule&&t.ownerStyle.parentRule.origin!==(e.ownerStyle.parentRule?.origin??"regular"))??this.resolveGlobalKeyword(e,"unset");case"revert-layer":return this.#Bt(e,s)??this.resolveGlobalKeyword(e,"revert");case"unset":return this.#Ht(e)??this.#zt(e.name)}}computeCSSVariable(e,t){const s=this.#Ft.get(e);return s?(this.ensureInitialized(),this.innerComputeCSSVariable(s,t)):null}innerComputeCSSVariable(e,t,s=new xn){const r=this.#Dt.get(e),i=this.#Nt.get(e);if(!i||!r?.has(t))return null;if(i?.has(t))return i.get(t)||null;let n=r.get(t);if(null==n)return null;if(n.declaration.declaration instanceof Ft&&n.declaration.value&&f.isCSSWideKeyword(n.declaration.value)){const e=this.resolveGlobalKeyword(n.declaration.declaration,n.declaration.value);if(!e)return n;const t=new kn(e),{value:s}=t;if(!s)return n;n={declaration:t,value:s}}const o=Lt(`--${t}`,n.value);if(!o)return null;const a=s.add(e,t),l=Ct.walk(o,[new be(e=>{const t=n.declaration.style,r=this.#Ft.get(t);if(!r)return null;const i=s.get(r,e.name);if(i)return s.isInInProgressSCC(i)?(a.updateRoot(i),null):this.#Nt.get(r)?.get(e.name)?.value??null;const o=this.innerComputeCSSVariable(r,e.name,s),l=s.get(r,e.name);return l&&a.updateRoot(l),void 0!==o?.value?o.value:0===e.fallback.length||e.matching.hasUnresolvedVarsRange(e.fallback[0],e.fallback[e.fallback.length-1])?null:e.matching.getComputedTextRange(e.fallback[0],e.fallback[e.fallback.length-1])})]),c=Pt.siblings(Pt.declValue(l.ast.tree)),d=c.length>0?l.getComputedTextRange(c[0],c[c.length-1]):"";if(a.isRootEntry){const t=s.finishSCC(a);if(t.length>1){for(const s of t)console.assert(s.nodeCascade===e,"Circles should be within the cascade"),i.set(s.name,null);return null}}if(c.length>0&&l.hasUnresolvedVarsRange(c[0],c[c.length-1]))return i.set(t,null),null;const h={value:d,declaration:n.declaration};return i.set(t,h),h}styles(){return Array.from(this.#Ft.keys())}propertyState(e){return this.ensureInitialized(),this.#Ot.get(e)||null}reset(){this.#_t=!1,this.#Ot.clear(),this.#Dt.clear(),this.#Nt.clear()}ensureInitialized(){if(this.#_t)return;this.#_t=!0;const e=new Map;for(const t of this.#Ut){t.computeActiveProperties();for(const[s,r]of t.propertiesState){if("Overloaded"===r){this.#Ot.set(s,"Overloaded");continue}const t=S().canonicalPropertyName(s.name);e.has(t)?this.#Ot.set(s,"Overloaded"):(e.set(t,s),this.#Ot.set(s,"Active"))}}for(const[t,s]of e){const r=s.ownerStyle,i=s.getLonghandProperties();if(!i.length)continue;let n=!1;for(const t of i){const s=S().canonicalPropertyName(t.name),i=e.get(s);if(i&&i.ownerStyle===r){n=!0;break}}n||(e.delete(t),this.#Ot.set(s,"Overloaded"))}const t=new Map;for(const e of this.#mt){const s=e.initialValue();t.set(e.propertyName(),null!==s?{value:s,declaration:new kn(e)}:null)}for(let e=this.#Ut.length-1;e>=0;--e){const s=this.#Ut[e],r=[];for(const e of s.activeProperties.entries()){const s=e[0],i=e[1];s.startsWith("--")&&(t.set(s,{value:i.value,declaration:new kn(i)}),r.push(s))}const i=new Map(t),n=new Map;this.#Dt.set(s,i),this.#Nt.set(s,n);for(const e of r){const r=t.get(e);t.delete(e);const i=this.innerComputeCSSVariable(s,e);r&&i?.value===r.value&&(i.declaration=r.declaration),t.set(e,i)}}}}var Mn=Object.freeze({__proto__:null,CSSMatchedStyles:In,CSSRegisteredProperty:vn,CSSValueSource:kn});const Pn={couldNotFindTheOriginalStyle:"Could not find the original style sheet.",thereWasAnErrorRetrievingThe:"There was an error retrieving the source styles."},En=n.i18n.registerUIStrings("core/sdk/CSSStyleSheetHeader.ts",Pn),Ln=n.i18n.getLocalizedString.bind(void 0,En);class An{#je;id;frameId;sourceURL;hasSourceURL;origin;title;disabled;isInline;isMutable;isConstructed;startLine;startColumn;endLine;endColumn;contentLength;ownerNode;sourceMapURL;loadingFailed;#jt;constructor(e,t){this.#je=e,this.id=t.styleSheetId,this.frameId=t.frameId,this.sourceURL=t.sourceURL,this.hasSourceURL=Boolean(t.hasSourceURL),this.origin=t.origin,this.title=t.title,this.disabled=t.disabled,this.isInline=t.isInline,this.isMutable=t.isMutable,this.isConstructed=t.isConstructed,this.startLine=t.startLine,this.startColumn=t.startColumn,this.endLine=t.endLine,this.endColumn=t.endColumn,this.contentLength=t.length,t.ownerNode&&(this.ownerNode=new js(e.target(),t.ownerNode)),this.sourceMapURL=t.sourceMapURL,this.loadingFailed=t.loadingFailed??!1,this.#jt=null}originalContentProvider(){if(!this.#jt){const e=async()=>{const e=await this.#je.originalStyleSheetText(this);return null===e?{error:Ln(Pn.couldNotFindTheOriginalStyle)}:new t.ContentData.ContentData(e,!1,"text/css")};this.#jt=new t.StaticContentProvider.StaticContentProvider(this.contentURL(),this.contentType(),e)}return this.#jt}setSourceMapURL(e){this.sourceMapURL=e}cssModel(){return this.#je}isAnonymousInlineStyleSheet(){return!this.resourceURL()&&!this.#je.sourceMapManager().sourceMapForClient(this)}isConstructedByNew(){return this.isConstructed&&0===this.sourceURL.length}resourceURL(){return this.isViaInspector()?this.viaInspectorResourceURL():this.sourceURL}getFrameURLPath(){const t=this.#je.target().model(ii);if(console.assert(Boolean(t)),!t)return"";const s=t.frameForId(this.frameId);if(!s)return"";console.assert(Boolean(s));const r=new e.ParsedURL.ParsedURL(s.url);let i=r.host+r.folderPathComponents;return i.endsWith("/")||(i+="/"),i}viaInspectorResourceURL(){return`inspector:///inspector-stylesheet#${this.id}`}lineNumberInSource(e){return this.startLine+e}columnNumberInSource(e,t){return(e?0:this.startColumn)+t}containsLocation(e,t){const s=e===this.startLine&&t>=this.startColumn||e>this.startLine,r=e<this.endLine||e===this.endLine&&t<=this.endColumn;return s&&r}contentURL(){return this.resourceURL()}contentType(){return e.ResourceType.resourceTypes.Stylesheet}requestContent(){return this.requestContentData().then(t.ContentData.ContentData.asDeferredContent.bind(void 0))}async requestContentData(){const e=await this.#je.getStyleSheetText(this.id);return null===e?{error:Ln(Pn.thereWasAnErrorRetrievingThe)}:new t.ContentData.ContentData(e,!1,"text/css")}async searchInContent(e,s,r){const i=await this.requestContentData();return t.TextUtils.performSearchInContentData(i,e,s,r)}isViaInspector(){return"inspector"===this.origin}createPageResourceLoadInitiator(){return{target:this.#je.target(),frameId:this.frameId,initiatorUrl:this.hasSourceURL?r.DevToolsPath.EmptyUrlString:this.sourceURL}}}var On=Object.freeze({__proto__:null,CSSStyleSheetHeader:An});let Dn=null;class Nn extends e.ObjectWrapper.ObjectWrapper{#Wt=new WeakMap;#Vt=new Map;#Gt=new Map;#Kt=null;#$t=new Map;#Qt=new Map;constructor(){super(),W.instance().observeModels(ii,this)}static instance({forceNew:e}={forceNew:!1}){return Dn&&!e||(Dn=new Nn),Dn}static removeInstance(){Dn=null}modelAdded(e){const t=e.addEventListener(ri.FrameAdded,this.frameAdded,this),s=e.addEventListener(ri.FrameDetached,this.frameDetached,this),r=e.addEventListener(ri.FrameNavigated,this.frameNavigated,this),i=e.addEventListener(ri.ResourceAdded,this.resourceAdded,this);this.#Wt.set(e,[t,s,r,i]),this.#Gt.set(e.target().id(),new Set)}modelRemoved(t){const s=this.#Wt.get(t);s&&e.EventTarget.removeEventListeners(s);const r=this.#Gt.get(t.target().id());if(r)for(const e of r)this.decreaseOrRemoveFrame(e);this.#Gt.delete(t.target().id())}frameAdded(e){const t=e.data,s=this.#Vt.get(t.id);if(s)t.setCreationStackTrace(s.frame.getCreationStackTraceData()),this.#Vt.set(t.id,{frame:t,count:s.count+1});else{const e=this.#$t.get(t.id);e?.creationStackTrace&&e?.creationStackTraceTarget&&t.setCreationStackTrace({creationStackTrace:e.creationStackTrace,creationStackTraceTarget:e.creationStackTraceTarget}),this.#Vt.set(t.id,{frame:t,count:1}),this.#$t.delete(t.id)}this.resetOutermostFrame();const r=this.#Gt.get(t.resourceTreeModel().target().id());r&&r.add(t.id),this.dispatchEventToListeners("FrameAddedToTarget",{frame:t}),this.resolveAwaitedFrame(t)}frameDetached(e){const{frame:t,isSwap:s}=e.data;if(this.decreaseOrRemoveFrame(t.id),s&&!this.#Vt.get(t.id)){const e=t.getCreationStackTraceData(),s={...e.creationStackTrace&&{creationStackTrace:e.creationStackTrace},...e.creationStackTrace&&{creationStackTraceTarget:e.creationStackTraceTarget}};this.#$t.set(t.id,s)}const r=this.#Gt.get(t.resourceTreeModel().target().id());r&&r.delete(t.id)}frameNavigated(e){const t=e.data;this.dispatchEventToListeners("FrameNavigated",{frame:t}),t.isOutermostFrame()&&this.dispatchEventToListeners("OutermostFrameNavigated",{frame:t})}resourceAdded(e){this.dispatchEventToListeners("ResourceAdded",{resource:e.data})}decreaseOrRemoveFrame(e){const t=this.#Vt.get(e);t&&(1===t.count?(this.#Vt.delete(e),this.resetOutermostFrame(),this.dispatchEventToListeners("FrameRemoved",{frameId:e})):t.count--)}resetOutermostFrame(){const e=this.getAllFrames().filter(e=>e.isOutermostFrame());this.#Kt=e.length>0?e[0]:null}getFrame(e){const t=this.#Vt.get(e);return t?t.frame:null}getAllFrames(){return Array.from(this.#Vt.values(),e=>e.frame)}getOutermostFrame(){return this.#Kt}async getOrWaitForFrame(e,t){const s=this.getFrame(e);return!s||t&&t===s.resourceTreeModel().target()?await new Promise(s=>{const r=this.#Qt.get(e);r?r.push({notInTarget:t,resolve:s}):this.#Qt.set(e,[{notInTarget:t,resolve:s}])}):s}resolveAwaitedFrame(e){const t=this.#Qt.get(e.id);if(!t)return;const s=t.filter(({notInTarget:t,resolve:s})=>!(!t||t!==e.resourceTreeModel().target())||(s(e),!1));s.length>0?this.#Qt.set(e.id,s):this.#Qt.delete(e.id)}}var Fn=Object.freeze({__proto__:null,FrameManager:Nn});class Bn{static fromLocalObject(e){return new zn(e)}static type(e){if(null===e)return"null";const t=typeof e;return"object"!==t&&"function"!==t?t:e.type}static isNullOrUndefined(e){if(void 0===e)return!0;switch(e.type){case"object":return"null"===e.subtype;case"undefined":return!0;default:return!1}}static arrayNameFromDescription(e){return e.replace(Gn,"").replace(Kn,"")}static arrayLength(e){if("array"!==e.subtype&&"typedarray"!==e.subtype)return 0;const t=e.description?.match(Gn),s=e.description?.match(Kn);return t?parseInt(t[1],10):s?parseInt(s[1],10):0}static arrayBufferByteLength(e){if("arraybuffer"!==e.subtype)return 0;const t=e.description?.match(Gn);return t?parseInt(t[1],10):0}static unserializableDescription(e){if("number"==typeof e){const t=String(e);if(0===e&&1/e<0)return"-0";if("NaN"===t||"Infinity"===t||"-Infinity"===t)return t}return"bigint"==typeof e?e+"n":null}static toCallArgument(e){const t=typeof e;if("undefined"===t)return{};const s=Bn.unserializableDescription(e);if("number"===t)return null!==s?{unserializableValue:s}:{value:e};if("bigint"===t)return{unserializableValue:s};if("string"===t||"boolean"===t)return{value:e};if(!e)return{value:null};const r=e;if(e instanceof Bn){const t=e.unserializableValue();if(void 0!==t)return{unserializableValue:t}}else if(void 0!==r.unserializableValue)return{unserializableValue:r.unserializableValue};return void 0!==r.objectId?{objectId:r.objectId}:{value:r.value}}static async loadFromObjectPerProto(e,t,s=!1){const r=await Promise.all([e.getAllProperties(!0,t,s),e.getOwnProperties(t,s)]),i=r[0].properties,n=r[1].properties,o=r[1].internalProperties;if(!n||!i)return{properties:null,internalProperties:null};const a=new Map,l=[];for(let e=0;e<i.length;e++){const t=i[e];t.symbol?l.push(t):(t.isOwn||"__proto__"!==t.name)&&a.set(t.name,t)}for(let e=0;e<n.length;e++){const t=n[e];t.isAccessorProperty()||(t.private||t.symbol?l.push(t):a.set(t.name,t))}return{properties:[...a.values()].concat(l),internalProperties:o||null}}customPreview(){return null}unserializableValue(){throw new Error("Not implemented")}get preview(){}get className(){return null}callFunction(e,t){throw new Error("Not implemented")}callFunctionJSON(e,t){throw new Error("Not implemented")}arrayBufferByteLength(){throw new Error("Not implemented")}deleteProperty(e){throw new Error("Not implemented")}setPropertyValue(e,t){throw new Error("Not implemented")}release(){}debuggerModel(){throw new Error("DebuggerModel-less object")}runtimeModel(){throw new Error("RuntimeModel-less object")}isNode(){return!1}isLinearMemoryInspectable(){return!1}webIdl}class _n extends Bn{runtimeModelInternal;#Yt;#g;#Jt;#Xt;#Zt;hasChildrenInternal;#es;#ts;#u;#ss;#rs;constructor(e,t,s,r,i,n,o,a,l,c){super(),this.runtimeModelInternal=e,this.#Yt=e.target().runtimeAgent(),this.#g=s,this.#Jt=r,t?(this.#Xt=t,this.#Zt=o,this.hasChildrenInternal="symbol"!==s,this.#es=a):(this.#Zt=o,!this.description&&n&&(this.#Zt=n),this.#Zt||"object"==typeof i&&null!==i||(this.#Zt=String(i)),this.hasChildrenInternal=!1,"string"==typeof n?(this.#ts=n,"Infinity"===n||"-Infinity"===n||"-0"===n||"NaN"===n?this.#u=Number(n):"bigint"===s&&n.endsWith("n")?this.#u=BigInt(n.substring(0,n.length-1)):this.#u=n):this.#u=i),this.#ss=l||null,this.#rs="string"==typeof c?c:null}customPreview(){return this.#ss}get objectId(){return this.#Xt}get type(){return this.#g}get subtype(){return this.#Jt}get value(){return this.#u}unserializableValue(){return this.#ts}get description(){return this.#Zt}set description(e){this.#Zt=e}get hasChildren(){return this.hasChildrenInternal}get preview(){return this.#es}get className(){return this.#rs}getOwnProperties(e,t=!1){return this.doGetProperties(!0,!1,t,e)}getAllProperties(e,t,s=!1){return this.doGetProperties(!1,e,s,t)}async createRemoteObject(e){return this.runtimeModelInternal.createRemoteObject(e)}async doGetProperties(e,t,s,r){if(!this.#Xt)return{properties:null,internalProperties:null};const i=await this.#Yt.invoke_getProperties({objectId:this.#Xt,ownProperties:e,accessorPropertiesOnly:t,nonIndexedPropertiesOnly:s,generatePreview:r});if(i.getError())return{properties:null,internalProperties:null};if(i.exceptionDetails)return this.runtimeModelInternal.exceptionThrown(Date.now(),i.exceptionDetails),{properties:null,internalProperties:null};const{result:n=[],internalProperties:o=[],privateProperties:a=[]}=i,l=[];for(const e of n){const t=e.value?await this.createRemoteObject(e.value):null,s=e.symbol?this.runtimeModelInternal.createRemoteObject(e.symbol):null,r=new qn(e.name,t,Boolean(e.enumerable),Boolean(e.writable),Boolean(e.isOwn),Boolean(e.wasThrown),s);void 0===e.value&&(e.get&&"undefined"!==e.get.type&&(r.getter=this.runtimeModelInternal.createRemoteObject(e.get)),e.set&&"undefined"!==e.set.type&&(r.setter=this.runtimeModelInternal.createRemoteObject(e.set))),l.push(r)}for(const e of a){const t=e.value?this.runtimeModelInternal.createRemoteObject(e.value):null,s=new qn(e.name,t,!0,!0,!0,!1,void 0,!1,void 0,!0);void 0===e.value&&(e.get&&"undefined"!==e.get.type&&(s.getter=this.runtimeModelInternal.createRemoteObject(e.get)),e.set&&"undefined"!==e.set.type&&(s.setter=this.runtimeModelInternal.createRemoteObject(e.set))),l.push(s)}const c=[];for(const e of o){if(!e.value)continue;const t=this.runtimeModelInternal.createRemoteObject(e.value);c.push(new qn(e.name,t,!0,!1,void 0,void 0,void 0,!0))}return{properties:l,internalProperties:c}}async setPropertyValue(e,t){if(!this.#Xt)return"Cant set a property of non-object.";const s=await this.#Yt.invoke_evaluate({expression:t,silent:!0});if(s.getError()||s.exceptionDetails)return s.getError()||("string"!==s.result.type?s.result.description:s.result.value);"string"==typeof e&&(e=Bn.toCallArgument(e));const r=this.doSetObjectPropertyValue(s.result,e);return s.result.objectId&&this.#Yt.invoke_releaseObject({objectId:s.result.objectId}),await r}async doSetObjectPropertyValue(e,t){const s=[t,Bn.toCallArgument(e)],r=await this.#Yt.invoke_callFunctionOn({objectId:this.#Xt,functionDeclaration:"function(a, b) { this[a] = b; }",arguments:s,silent:!0}),i=r.getError();return i||r.exceptionDetails?i||r.result.description:void 0}async deleteProperty(e){if(!this.#Xt)return"Cant delete a property of non-object.";const t=await this.#Yt.invoke_callFunctionOn({objectId:this.#Xt,functionDeclaration:"function(a) { delete this[a]; return !(a in this); }",arguments:[e],silent:!0});return t.getError()||t.exceptionDetails?t.getError()||t.result.description:t.result.value?void 0:"Failed to delete property."}async callFunction(e,t){const s=await this.#Yt.invoke_callFunctionOn({objectId:this.#Xt,functionDeclaration:e.toString(),arguments:t,silent:!0});return s.getError()?{object:null,wasThrown:!1}:{object:this.runtimeModelInternal.createRemoteObject(s.result),wasThrown:Boolean(s.exceptionDetails)}}async callFunctionJSON(e,t){const s=await this.#Yt.invoke_callFunctionOn({objectId:this.#Xt,functionDeclaration:e.toString(),arguments:t,silent:!0,returnByValue:!0});return s.getError()||s.exceptionDetails?null:s.result.value}release(){this.#Xt&&this.#Yt.invoke_releaseObject({objectId:this.#Xt})}arrayLength(){return Bn.arrayLength(this)}arrayBufferByteLength(){return Bn.arrayBufferByteLength(this)}debuggerModel(){return this.runtimeModelInternal.debuggerModel()}runtimeModel(){return this.runtimeModelInternal}isNode(){return Boolean(this.#Xt)&&"object"===this.type&&"node"===this.subtype}isLinearMemoryInspectable(){return"object"===this.type&&void 0!==this.subtype&&["webassemblymemory","typedarray","dataview","arraybuffer"].includes(this.subtype)}}class Hn extends _n{#is;#ns;constructor(e,t,s,r,i,n,o,a,l){super(e,t,r,i,n,o,a,l),this.#is=s,this.#ns=void 0}async doGetProperties(e,t,s){if(t)return{properties:[],internalProperties:[]};if(this.#ns)return{properties:this.#ns.slice(),internalProperties:null};const r=await super.doGetProperties(e,t,!1,!0);if(Array.isArray(r.properties)){this.#ns=r.properties.slice();for(const e of this.#ns)e.writable=!1}return r}async doSetObjectPropertyValue(e,t){const s=t.value,r=await this.debuggerModel().setVariableValue(this.#is.number,s,Bn.toCallArgument(e),this.#is.callFrameId);if(r)return r;if(this.#ns)for(const t of this.#ns)t.name===s&&(t.value=this.runtimeModel().createRemoteObject(e))}}class Un{number;callFrameId;constructor(e,t){this.number=e,this.callFrameId=t}}class qn{name;value;enumerable;writable;isOwn;wasThrown;symbol;synthetic;syntheticSetter;private;getter;setter;webIdl;constructor(e,t,s,r,i,n,o,a,l,c){this.name=e,this.value=null!==t?t:void 0,this.enumerable=void 0===s||s;const d=!a||Boolean(l);this.writable=void 0!==r?r:d,this.isOwn=Boolean(i),this.wasThrown=Boolean(n),o&&(this.symbol=o),this.synthetic=Boolean(a),l&&(this.syntheticSetter=l),this.private=Boolean(c)}async setSyntheticValue(e){if(!this.syntheticSetter)return!1;const t=await this.syntheticSetter(e);return t&&(this.value=t),Boolean(t)}isAccessorProperty(){return Boolean(this.getter||this.setter)}match({includeNullOrUndefinedValues:e,regex:t}){return!(null!==t&&!t.test(this.name)&&!t.test(this.value?.description??"")||!e&&!this.isAccessorProperty()&&Bn.isNullOrUndefined(this.value))}cloneWithNewName(e){const t=new qn(e,this.value??null,this.enumerable,this.writable,this.isOwn,this.wasThrown,this.symbol,this.synthetic,this.syntheticSetter,this.private);return t.getter=this.getter,t.setter=this.setter,t}}class zn extends Bn{valueInternal;#os;#as;constructor(e){super(),this.valueInternal=e}get objectId(){}get value(){return this.valueInternal}unserializableValue(){return Bn.unserializableDescription(this.valueInternal)||void 0}get description(){if(this.#os)return this.#os;if("object"===this.type)switch(this.subtype){case"array":this.#os=this.concatenate("[","]",function(e){return this.formatValue(e.value||null)}.bind(this));break;case"date":this.#os=String(this.valueInternal);break;case"null":this.#os="null";break;default:this.#os=this.concatenate("{","}",function(e){let t=e.name;return/^\s|\s$|^$|\n/.test(t)&&(t='"'+t.replace(/\n/g,"")+'"'),t+": "+this.formatValue(e.value||null)}.bind(this))}else this.#os=String(this.valueInternal);return this.#os}formatValue(e){if(!e)return"undefined";const t=e.description||"";return"string"===e.type?'"'+t.replace(/\n/g,"")+'"':t}concatenate(e,t,s){let r=e;const i=this.children();for(let e=0;e<i.length;++e){const t=s(i[e]);if(r.length+t.length>100){r+=",";break}e&&(r+=", "),r+=t}return r+=t,r}get type(){return typeof this.valueInternal}get subtype(){return null===this.valueInternal?"null":Array.isArray(this.valueInternal)?"array":this.valueInternal instanceof Date?"date":void 0}get hasChildren(){return"object"==typeof this.valueInternal&&null!==this.valueInternal&&Boolean(Object.keys(this.valueInternal).length)}async getOwnProperties(e,t=!1){let s=this.children();return t&&(s=s.filter(e=>!function(e){const t=Number(e)>>>0;return String(t)===e}(e.name))),{properties:s,internalProperties:null}}async getAllProperties(e,t,s=!1){return e?{properties:[],internalProperties:null}:await this.getOwnProperties(t,s)}children(){return this.hasChildren?(this.#as||(this.#as=Object.entries(this.valueInternal).map(([e,t])=>new qn(e,t instanceof Bn?t:Bn.fromLocalObject(t)))),this.#as):[]}arrayLength(){return Array.isArray(this.valueInternal)?this.valueInternal.length:0}async callFunction(e,t){const s=this.valueInternal,r=t?t.map(e=>e.value):[];let i,n=!1;try{i=e.apply(s,r)}catch{n=!0}return{object:Bn.fromLocalObject(i),wasThrown:n}}async callFunctionJSON(e,t){const s=this.valueInternal,r=t?t.map(e=>e.value):[];let i;try{i=e.apply(s,r)}catch{i=null}return i}}class jn{#ls;constructor(e){this.#ls=e}static objectAsArray(e){if(!e||"object"!==e.type||"array"!==e.subtype&&"typedarray"!==e.subtype)throw new Error("Object is empty or not an array");return new jn(e)}static async createFromRemoteObjects(e){if(!e.length)throw new Error("Input array is empty");const t=await e[0].callFunction(function(...e){return e},e.map(Bn.toCallArgument));if(t.wasThrown||!t.object)throw new Error("Call function throws exceptions or returns empty value");return jn.objectAsArray(t.object)}async at(e){if(e<0||e>this.#ls.arrayLength())throw new Error("Out of range");const t=await this.#ls.callFunction(function(e){return this[e]},[Bn.toCallArgument(e)]);if(t.wasThrown||!t.object)throw new Error("Exception in callFunction or result value is empty");return t.object}length(){return this.#ls.arrayLength()}map(e){const t=[];for(let s=0;s<this.length();++s)t.push(this.at(s).then(e));return Promise.all(t)}object(){return this.#ls}}class Vn{#cs;constructor(e){this.#cs=e}static objectAsFunction(e){if("function"!==e.type)throw new Error("Object is empty or not a function");return new Vn(e)}async targetFunction(){const e=await this.#cs.getOwnProperties(!1),t=e.internalProperties?.find(({name:e})=>"[[TargetFunction]]"===e);return t?.value??this.#cs}async targetFunctionDetails(){const e=await this.targetFunction(),t=await e.debuggerModel().functionDetailsPromise(e);return this.#cs!==e&&e.release(),t}}class Wn{#cs;#ds;#hs;constructor(e){this.#cs=e}static objectAsError(e){if("error"!==e.subtype)throw new Error(`Object of type ${e.subtype} is not an error`);return new Wn(e)}get errorStack(){return this.#cs.description??""}exceptionDetails(){return this.#ds||(this.#ds=this.#us()),this.#ds}#us(){return this.#cs.objectId?this.#cs.runtimeModel().getExceptionDetails(this.#cs.objectId):Promise.resolve(void 0)}cause(){return this.#hs||(this.#hs=this.#gs()),this.#hs}async#gs(){const e=await this.#cs.getAllProperties(!1,!1),t=e.properties?.find(e=>"cause"===e.name);return t?.value}}const Gn=/\(([0-9]+)\)/,Kn=/\[([0-9]+)\]/;var Qn=Object.freeze({__proto__:null,LinearMemoryInspectable:class{object;expression;constructor(e,t){if(!e.isLinearMemoryInspectable())throw new Error("object must be linear memory inspectable");this.object=e,this.expression=t}},LocalJSONObject:zn,RemoteArray:jn,RemoteArrayBuffer:class{#ls;constructor(e){if("object"!==e.type||"arraybuffer"!==e.subtype)throw new Error("Object is not an arraybuffer");this.#ls=e}byteLength(){return this.#ls.arrayBufferByteLength()}async bytes(e=0,t=this.byteLength()){if(e<0||e>=this.byteLength())throw new RangeError("start is out of range");if(t<e||t>this.byteLength())throw new RangeError("end is out of range");return await this.#ls.callFunctionJSON(function(e,t){return[...new Uint8Array(this,e,t)]},[{value:e},{value:t-e}])}object(){return this.#ls}},RemoteError:Wn,RemoteFunction:Vn,RemoteObject:Bn,RemoteObjectImpl:_n,RemoteObjectProperty:qn,ScopeRef:Un,ScopeRemoteObject:Hn});class $n extends h{constructor(e){super(e)}async read(t,s,r){const i=await this.target().ioAgent().invoke_read({handle:t,offset:r,size:s});if(i.getError())throw new Error(i.getError());return i.eof?null:i.base64Encoded?e.Base64.decode(i.data):i.data}async close(e){(await this.target().ioAgent().invoke_close({handle:e})).getError()&&console.error("Could not close stream.")}async resolveBlob(e){const t=e instanceof Bn?e.objectId:e;if(!t)throw new Error("Remote object has undefined objectId");const s=await this.target().ioAgent().invoke_resolveBlob({objectId:t});if(s.getError())throw new Error(s.getError());return`blob:${s.uuid}`}async readToString(e){const t=[],s=new TextDecoder;for(;;){const r=await this.read(e,4194304);if(null===r){t.push(s.decode());break}r instanceof ArrayBuffer?t.push(s.decode(r,{stream:!0})):t.push(r)}return t.join("")}}h.register($n,{capabilities:131072,autostart:!0});var Xn=Object.freeze({__proto__:null,IOModel:$n});const Jn={loadCanceledDueToReloadOf:"Load canceled due to reload of inspected page"},Yn=n.i18n.registerUIStrings("core/sdk/PageResourceLoader.ts",Jn),Zn=n.i18n.getLocalizedString.bind(void 0,Yn);function er(e){return"extensionId"in e}let tr=null;class nr extends e.ObjectWrapper.ObjectWrapper{#ms=0;#ps=new Map;#fs;#bs=new Map;#ys=[];#ws;constructor(e,t){super(),this.#fs=t,W.instance().addModelListener(ii,ri.PrimaryPageChanged,this.onPrimaryPageChanged,this),this.#ws=e}static instance({forceNew:e,loadOverride:t,maxConcurrentLoads:s}={forceNew:!1,loadOverride:null,maxConcurrentLoads:500}){return tr&&!e||(tr=new nr(t,s)),tr}static removeInstance(){tr=null}onPrimaryPageChanged(e){const{frame:t,type:s}=e.data;if(!t.isOutermostFrame())return;for(const{reject:e}of this.#ys)e(new Error(Zn(Jn.loadCanceledDueToReloadOf)));this.#ys=[];const r=t.resourceTreeModel().target(),i=new Map;for(const[e,t]of this.#bs.entries())"Activation"===s&&r===t.initiator.target&&i.set(e,t);this.#bs=i,this.dispatchEventToListeners("Update")}getResourcesLoaded(){return this.#bs}getScopedResourcesLoaded(){return new Map([...this.#bs].filter(([e,t])=>W.instance().isInScope(t.initiator.target)||er(t.initiator)))}getNumberOfResources(){return{loading:this.#ms,queued:this.#ys.length,resources:this.#bs.size}}getScopedNumberOfResources(){const e=W.instance();let t=0;for(const[s,r]of this.#ps){const i=e.targetById(s);e.isInScope(i)&&(t+=r)}return{loading:t,resources:this.getScopedResourcesLoaded().size}}async acquireLoadSlot(e){if(this.#ms++,e){const t=this.#ps.get(e.id())||0;this.#ps.set(e.id(),t+1)}if(this.#ms>this.#fs){const{promise:e,resolve:t,reject:s}=Promise.withResolvers();this.#ys.push({resolve:t,reject:s}),await e}}releaseLoadSlot(e){if(this.#ms--,e){const t=this.#ps.get(e.id());t&&this.#ps.set(e.id(),t-1)}const t=this.#ys.shift();t&&t.resolve()}static makeExtensionKey(e,t){if(er(t)&&t.extensionId)return`${e}-${t.extensionId}`;throw new Error("Invalid initiator")}static makeKey(e,t){if(t.frameId)return`${e}-${t.frameId}`;if(t.target)return`${e}-${t.target.id()}`;throw new Error("Invalid initiator")}resourceLoadedThroughExtension(e){const t=nr.makeExtensionKey(e.url,e.initiator);this.#bs.set(t,e),this.dispatchEventToListeners("Update")}async loadResource(e,t){if(er(t))throw new Error("Invalid initiator");const s=nr.makeKey(e,t),r={success:null,size:null,duration:null,errorMessage:void 0,url:e,initiator:t};this.#bs.set(s,r),this.dispatchEventToListeners("Update");const i=performance.now();try{await this.acquireLoadSlot(t.target);const s=this.dispatchLoad(e,t),i=await s;if(r.errorMessage=i.errorDescription.message,r.success=i.success,i.success)return r.size=i.content.length,{content:i.content};throw new Error(i.errorDescription.message)}catch(e){throw void 0===r.errorMessage&&(r.errorMessage=e.message),null===r.success&&(r.success=!1),e}finally{r.duration=performance.now()-i,this.releaseLoadSlot(t.target),this.dispatchEventToListeners("Update")}}async dispatchLoad(t,s){if(er(s))throw new Error("Invalid initiator");let r=null;if(this.#ws)return await this.#ws(t);const i=new e.ParsedURL.ParsedURL(t),n=rr().get()&&i&&"file"!==i.scheme&&"data"!==i.scheme&&"devtools"!==i.scheme;if(a.userMetrics.developerResourceScheme(this.getDeveloperResourceScheme(i)),n){try{if(s.target){a.userMetrics.developerResourceLoaded(0),a.rnPerfMetrics.developerResourceLoadingStarted(i,0);const e=await this.loadFromTarget(s.target,s.frameId,t);return a.rnPerfMetrics.developerResourceLoadingFinished(i,0,e),e}const e=Nn.instance().getFrame(s.frameId);if(e){a.userMetrics.developerResourceLoaded(1),a.rnPerfMetrics.developerResourceLoadingStarted(i,1);const r=await this.loadFromTarget(e.resourceTreeModel().target(),s.frameId,t);return a.rnPerfMetrics.developerResourceLoadingFinished(i,0,r),r}}catch(e){e instanceof Error&&(a.userMetrics.developerResourceLoaded(2),r=e.message),a.rnPerfMetrics.developerResourceLoadingFinished(i,2,{success:!1,errorDescription:{message:r}})}a.userMetrics.developerResourceLoaded(3),a.rnPerfMetrics.developerResourceLoadingStarted(i,3)}else{const e=rr().get()?6:5;a.userMetrics.developerResourceLoaded(e),a.rnPerfMetrics.developerResourceLoadingStarted(i,e)}const o=await ce.instance().loadResource(t);return n&&!o.success&&a.userMetrics.developerResourceLoaded(7),r&&(o.errorDescription.message=`Fetch through target failed: ${r}; Fallback: ${o.errorDescription.message}`),a.rnPerfMetrics.developerResourceLoadingFinished(i,4,o),o}getDeveloperResourceScheme(e){if(!e||""===e.scheme)return 1;const t="localhost"===e.host||e.host.endsWith(".localhost");switch(e.scheme){case"file":return 7;case"data":return 6;case"blob":return 8;case"http":return t?4:2;case"https":return t?5:3}return 0}async loadFromTarget(t,s,r){const i=t.model(Z),n=t.model($n),o=e.Settings.Settings.instance().moduleSetting("cache-disabled").get(),l=await i.loadNetworkResource(s,r,{disableCache:o,includeCredentials:!0});try{const e=l.stream?await n.readToString(l.stream):"";return{success:l.success,content:e,errorDescription:{statusCode:l.httpStatusCode||0,netError:l.netError,netErrorName:l.netErrorName,message:a.ResourceLoader.netErrorToMessage(l.netError,l.httpStatusCode,l.netErrorName)||"",urlValid:void 0}}}finally{l.stream&&n.close(l.stream)}}}function rr(){return e.Settings.Settings.instance().createSetting("load-through-target",!0)}var sr=Object.freeze({__proto__:null,PageResourceLoader:nr,ResourceKey:class{key;constructor(e){this.key=e}},getLoadThroughTargetSetting:rr});function ir(e,t){return e.line-t.line||e.column-t.column}function or(e,t={line:0,column:0}){if(!e.originalScopes||void 0===e.generatedRanges)throw new Error('Cant decode scopes without "originalScopes" or "generatedRanges"');const s=ar(e.originalScopes,e.names??[]);return{originalScopes:s.map(e=>e.root),generatedRanges:dr(e.generatedRanges,s,e.names??[],t)}}function ar(e,t){return e.map(e=>function(e,t){const s=new Map,r=[];let i=0,n=0;for(const[o,a]of function*(e){const t=new Er(e);let s=0,r=0;for(;t.hasNext();){","===t.peek()&&t.next();const[e,i]=[t.nextVLQ(),t.nextVLQ()];if(0===e&&i<s)throw new Error("Malformed original scope encoding: start/end items must be ordered w.r.t. source positions");if(s=i,!t.hasNext()||","===t.peek()){yield[r++,{line:e,column:i}];continue}const n={line:e,column:i,flags:t.nextVLQ(),variables:[]};for(1&n.flags&&(n.name=t.nextVLQ()),2&n.flags&&(n.kind=t.nextVLQ());t.hasNext()&&","!==t.peek();)n.variables.push(t.nextVLQ());yield[r++,n]}}(e)){i+=a.line;const{column:e}=a;if(lr(a)){let l;void 0!==a.kind&&(n+=a.kind,l=ur(n,t));const c=ur(a.name,t),d=a.variables.map(e=>t[e]),h={start:{line:i,column:e},end:{line:i,column:e},kind:l,name:c,isStackFrame:Boolean(4&a.flags),variables:d,children:[]};r.push(h),s.set(o,h)}else{const t=r.pop();if(!t)throw new Error('Scope items not nested properly: encountered "end" item without "start" item');if(t.end={line:i,column:e},0===r.length)return{root:t,scopeForItemIndex:s};t.parent=r[r.length-1],r[r.length-1].children.push(t)}}throw new Error("Malformed original scope encoding")}(e,t))}function lr(e){return"flags"in e}function dr(e,t,s,r={line:0,column:0}){const i=[{start:{line:0,column:0},end:{line:0,column:0},isStackFrame:!1,isHidden:!1,children:[],values:[]}],n=new Map;for(const o of function*(e,t){const s=new Er(e);let r=t.line;const i={line:t.line,column:t.column,defSourceIdx:0,defScopeIdx:0,callsiteSourceIdx:0,callsiteLine:0,callsiteColumn:0};for(;s.hasNext();){if(";"===s.peek()){s.next(),++r;continue}if(","===s.peek()){s.next();continue}if(i.column=s.nextVLQ()+(r===i.line?i.column:0),i.line=r,null===s.peekVLQ()){yield{line:r,column:i.column};continue}const e={line:r,column:i.column,flags:s.nextVLQ(),bindings:[]};if(1&e.flags){const t=s.nextVLQ(),r=s.nextVLQ();i.defScopeIdx=r+(0===t?i.defScopeIdx:0),i.defSourceIdx+=t,e.definition={sourceIdx:i.defSourceIdx,scopeIdx:i.defScopeIdx}}if(2&e.flags){const t=s.nextVLQ(),r=s.nextVLQ(),n=s.nextVLQ();i.callsiteColumn=n+(0===r&&0===t?i.callsiteColumn:0),i.callsiteLine=r+(0===t?i.callsiteLine:0),i.callsiteSourceIdx+=t,e.callsite={sourceIdx:i.callsiteSourceIdx,line:i.callsiteLine,column:i.callsiteColumn}}for(;s.hasNext()&&";"!==s.peek()&&","!==s.peek();){const t=[];e.bindings.push(t);const r=s.nextVLQ();if(r>=-1){t.push({line:e.line,column:e.column,nameIdx:r});continue}t.push({line:e.line,column:e.column,nameIdx:s.nextVLQ()});const i=-r;for(let e=0;e<i-1;++e){const e=s.nextVLQ(),r=s.nextVLQ(),i=s.nextVLQ(),n=t.at(-1)?.line??0,o=t.at(-1)?.column??0;t.push({line:e+n,column:r+(0===e?o:0),nameIdx:i})}}yield e}}(e,r))if(hr(o)){const e={start:{line:o.line,column:o.column},end:{line:o.line,column:o.column},isStackFrame:Boolean(4&o.flags),isHidden:Boolean(8&o.flags),values:[],children:[]};if(o.definition){const{scopeIdx:s,sourceIdx:r}=o.definition;if(!t[r])throw new Error("Invalid source index!");const i=t[r].scopeForItemIndex.get(s);if(!i)throw new Error("Invalid original scope index!");e.originalScope=i}if(o.callsite){const{sourceIdx:s,line:r,column:i}=o.callsite;if(!t[s])throw new Error("Invalid source index!");e.callsite={sourceIndex:s,line:r,column:i}}n.set(e,o),i.push(e)}else{const e=i.pop();if(!e)throw new Error('Range items not nested properly: encountered "end" item without "start" item');e.end={line:o.line,column:o.column},cr(e,s,n.get(e)?.bindings),i[i.length-1].children.push(e)}if(1!==i.length)throw new Error("Malformed generated range encoding");return i[0].children}function cr(e,t,s){void 0!==s&&(e.values=s.map(s=>{if(1===s.length)return ur(s[0].nameIdx,t);const r=s.map(e=>({from:{line:e.line,column:e.column},to:{line:e.line,column:e.column},value:ur(e.nameIdx,t)}));for(let e=1;e<r.length;++e)r[e-1].to={...r[e].from};return r[r.length-1].to={...e.end},r}))}function hr(e){return"flags"in e}function ur(e,t){if(!(void 0===e||e<0))return t[e]}var gr=Object.freeze({__proto__:null,comparePositions:ir,decodeGeneratedRanges:dr,decodeOriginalScopes:ar,decodeScopes:or});function pr(e){!function(e){for(const t of e)if(ir(t.start,t.end)>=0)throw new Error(`Invalid range. End before start: ${JSON.stringify(t)}`)}(e),e.sort((e,t)=>ir(e.start,t.start)||ir(t.end,e.end));const t={start:{line:0,column:0},end:{line:Number.POSITIVE_INFINITY,column:Number.POSITIVE_INFINITY},kind:"Global",isStackFrame:!1,children:[],variables:[]},s=[t];for(const t of e){let e=s.at(-1);for(;ir(e.end,t.start)<=0;)s.pop(),e=s.at(-1);if(ir(t.start,e.end)<0&&ir(e.end,t.end)<0)throw new Error(`Range ${JSON.stringify(t)} and ${JSON.stringify(e)} partially overlap.`);const r=mr(t);e.children.push(r),s.push(r)}const r=t.children.at(-1);return r&&(t.end=r.end),t}function mr(e){return{...e,kind:"Function",isStackFrame:!0,children:[],variables:[]}}function fr(e,t){const s=[];let r=0,i=0,n=0,o=0,a=0;const l=new Er(e);let c=!0;for(;l.hasNext();){if(c)c=!1;else{if(","!==l.peek())break;l.next()}r+=l.nextVLQ(),i=o+l.nextVLQ(),n+=l.nextVLQ(),o=i+l.nextVLQ(),a+=l.nextVLQ();const e=t[r];void 0!==e&&s.push({start:{line:i,column:n},end:{line:o,column:a},name:e})}return s}var br=Object.freeze({__proto__:null,buildOriginalScopes:pr,decodePastaRanges:fr});const yr={local:"Local",closure:"Closure",block:"Block",global:"Global",returnValue:"Return value"},vr=n.i18n.registerUIStrings("core/sdk/SourceMapScopeChainEntry.ts",yr),Ir=n.i18n.getLocalizedString.bind(void 0,vr);class wr{#vs;#ks;#Ee;#Ss;#xs;constructor(e,t,s,r,i){this.#vs=e,this.#ks=t,this.#Ee=s,this.#Ss=r,this.#xs=i}extraProperties(){return this.#xs?[new qn(Ir(yr.returnValue),this.#xs,void 0,void 0,void 0,void 0,void 0,!0)]:[]}callFrame(){return this.#vs}type(){switch(this.#ks.kind){case"global":return"global";case"function":return this.#Ss?"local":"closure";case"block":return"block"}return this.#ks.kind??""}typeName(){switch(this.#ks.kind){case"global":return Ir(yr.global);case"function":return this.#Ss?Ir(yr.local):Ir(yr.closure);case"block":return Ir(yr.block)}return this.#ks.kind??""}name(){return this.#ks.name}range(){return null}object(){return new Sr(this.#vs,this.#ks,this.#Ee)}description(){return""}icon(){}}class Sr extends _n{#vs;#ks;#Ee;constructor(e,t,s){super(e.debuggerModel.runtimeModel(),void 0,"object",void 0,null),this.#vs=e,this.#ks=t,this.#Ee=s}async doGetProperties(e,t,s){if(t)return{properties:[],internalProperties:[]};const r=[];for(const[e,t]of this.#ks.variables.entries()){const i=this.#Cs(e);if(null===i){r.push(Sr.#Is(t));continue}const n=await this.#vs.evaluate({expression:i,generatePreview:s});"error"in n||n.exceptionDetails?r.push(Sr.#Is(t)):r.push(new qn(t,n.object,!1,!1,!0,!1))}return{properties:r,internalProperties:[]}}#Cs(e){if(!this.#Ee)return null;const t=this.#Ee.values[e];if("string"==typeof t)return t;if(void 0===t)return null;const s=this.#vs.location();for(const e of t)if(xr({start:e.from,end:e.to},s.lineNumber,s.columnNumber))return e.value??null;return null}static#Is(e){return new qn(e,null,!1,!1,!0,!1)}}var kr=Object.freeze({__proto__:null,SourceMapScopeChainEntry:wr});class Cr{#Rs;#Ts;#Ps;#Es=null;constructor(e,t,s){this.#Rs=e,this.#Ts=t,this.#Ps=s}addOriginalScopes(e){for(const t of e)this.#Ts.push(t)}addGeneratedRanges(e){for(const t of e)this.#Ps.push(t)}hasOriginalScopes(e){return Boolean(this.#Ts[e])}addOriginalScopesAtIndex(e,t){if(this.#Ts[e])throw new Error(`Trying to re-augment existing scopes for source at index: ${e}`);this.#Ts[e]=t}findInlinedFunctions(e,t){const s=this.#Ms(e,t),r={inlinedFunctions:[],originalFunctionName:""};for(let e=s.length-1;e>=0;--e){const t=s[e];if(t.callsite&&r.inlinedFunctions.push({name:t.originalScope?.name??"",callsite:t.callsite}),t.isStackFrame){r.originalFunctionName=t.originalScope?.name??"";break}}return r}expandCallFrame(e){const{originalFunctionName:t,inlinedFunctions:s}=this.findInlinedFunctions(e.location().lineNumber,e.location().columnNumber),r=[];for(const[t,i]of s.entries())r.push(e.createVirtualCallFrame(t,i.name));return r.push(e.createVirtualCallFrame(r.length,t)),r}#Ms(e,t){const s=[];return function r(i){for(const n of i)xr(n,e,t)&&(s.push(n),r(n.children))}(this.#Ps),s}hasVariablesAndBindings(){return null===this.#Es&&(this.#Es=this.#Ls()),this.#Es}#Ls(){function e(t){for(const s of t)if(s){if("variables"in s&&s.variables.length>0)return!0;if("values"in s&&s.values.some(e=>void 0!==e))return!0;if(e(s.children))return!0}return!1}return e(this.#Ts)&&e(this.#Ps)}resolveMappedScopeChain(e){const t=this.#As(e),s=t.at(-1)?.originalScope;if(void 0===s)return null;let r=!1;const i=[];for(let s=t.at(-1)?.originalScope;s;s=s.parent){const n=t.findLast(e=>e.originalScope===s),o="function"===s.kind,a=o&&!r,l=a?e.returnValue():null;i.push(new wr(e,s,n,a,l??void 0)),r||=o}if(null!==e.returnValue())for(;i.length&&"local"!==i[0].type();)i.shift();return i}#As(e){const t=this.#Ms(e.location().lineNumber,e.location().columnNumber);if(0===e.inlineFrameIndex)return t;for(let s=0;s<e.inlineFrameIndex;){const e=t.pop();e?.callsite&&++s}return t}findOriginalFunctionName({line:e,column:t}){let s;if(this.#Ps.length>0){const r=this.#Ms(e,t);s=r.at(-1)?.originalScope}else{const r=this.#Rs.findEntry(e,t);if(void 0===r?.sourceIndex)return null;s=this.#Os({sourceIndex:r.sourceIndex,line:r.sourceLineNumber,column:r.sourceColumnNumber}).at(-1)}for(let e=s;e;e=e.parent)if(e.isStackFrame)return e.name??"";return null}#Os({sourceIndex:e,line:t,column:s}){const r=this.#Ts[e];if(!r)return[];const i=[];return function e(r){for(const n of r)xr(n,t,s)&&(i.push(n),e(n.children))}([r]),i}}function xr(e,t,s){return!(e.start.line>t||e.start.line===t&&e.start.column>s||e.end.line<t||e.end.line===t&&e.end.column<=s)}var Rr=Object.freeze({__proto__:null,SourceMapScopesInfo:Cr,contains:xr});function Tr(e){return e.startsWith(")]}")&&(e=e.substring(e.indexOf("\n"))),65279===e.charCodeAt(0)&&(e=e.slice(1)),JSON.parse(e)}class Mr{lineNumber;columnNumber;sourceIndex;sourceURL;sourceLineNumber;sourceColumnNumber;name;constructor(e,t,s,r,i,n,o){this.lineNumber=e,this.columnNumber=t,this.sourceIndex=s,this.sourceURL=r,this.sourceLineNumber=i,this.sourceColumnNumber=n,this.name=o}static compare(e,t){return e.lineNumber!==t.lineNumber?e.lineNumber-t.lineNumber:e.columnNumber-t.columnNumber}}class Pr{static retainRawSourceMaps=!1;#Ds;#Ns;#Fs;#_s;#Us;#Bs=[];#Hs=new Map;#qs=null;constructor(t,s,r){this.#Ds=r,this.#Ns=t,this.#Fs=s,this.#_s=e.ParsedURL.schemeIs(s,"data:")?t:s,this.#Us=null,"sections"in this.#Ds&&this.#Ds.sections.find(e=>"url"in e)&&e.Console.Console.instance().warn(`SourceMap "${s}" contains unsupported "URL" field in one of its sections.`),this.eachSection(this.parseSources.bind(this))}json(){return this.#Ds}augmentWithScopes(e,t){if(this.#zs(),this.#Ds&&this.#Ds.version>3)throw new Error("Only support augmenting source maps up to version 3.");const s=this.#js(e);if(!(s>=0))throw new Error(`Could not find sourceURL ${e} in sourceMap`);if(this.#qs||(this.#qs=new Cr(this,[],[])),!this.#qs.hasOriginalScopes(s)){const e=pr(t);this.#qs.addOriginalScopesAtIndex(s,e)}}#js(e){return this.#Bs.findIndex(t=>t.sourceURL===e)}compiledURL(){return this.#Ns}url(){return this.#Fs}sourceURLs(){return[...this.#Hs.keys()]}embeddedContentByURL(e){const t=this.#Hs.get(e);return t?t.content:null}hasScopeInfo(){return this.#zs(),null!==this.#qs}findEntry(e,t,s){if(this.#zs(),s&&null!==this.#qs){const{inlinedFunctions:r}=this.#qs.findInlinedFunctions(e,t),{callsite:i}=r[s-1];return i?{lineNumber:e,columnNumber:t,sourceIndex:i.sourceIndex,sourceURL:this.sourceURLs()[i.sourceIndex],sourceLineNumber:i.line,sourceColumnNumber:i.column,name:void 0}:(console.error("Malformed source map. Expected to have a callsite info for index",s),null)}const i=this.mappings(),n=r.ArrayUtilities.upperBound(i,void 0,(s,r)=>e-r.lineNumber||t-r.columnNumber);return n?i[n-1]:null}findEntryRanges(e,s){const i=this.mappings(),n=r.ArrayUtilities.upperBound(i,void 0,(t,r)=>e-r.lineNumber||s-r.columnNumber);if(!n)return null;const o=n-1,a=i[o].sourceURL;if(!a)return null;const l=n<i.length?i[n].lineNumber:2**31-1,c=n<i.length?i[n].columnNumber:2**31-1,d=new t.TextRange.TextRange(i[o].lineNumber,i[o].columnNumber,l,c),h=this.reversedMappings(a),u=i[o].sourceLineNumber,g=i[o].sourceColumnNumber,m=r.ArrayUtilities.upperBound(h,void 0,(e,t)=>u-i[t].sourceLineNumber||g-i[t].sourceColumnNumber);if(!m)return null;const p=m<h.length?i[h[m]].sourceLineNumber:2**31-1,f=m<h.length?i[h[m]].sourceColumnNumber:2**31-1;return{range:d,sourceRange:new t.TextRange.TextRange(u,g,p,f),sourceURL:a}}sourceLineMapping(e,t,s){const i=this.mappings(),n=this.reversedMappings(e),o=r.ArrayUtilities.lowerBound(n,t,d),a=r.ArrayUtilities.upperBound(n,t,d);if(o>=n.length||i[n[o]].sourceLineNumber!==t)return null;const l=n.slice(o,a);if(!l.length)return null;const c=r.ArrayUtilities.lowerBound(l,s,(e,t)=>e-i[t].sourceColumnNumber);return c>=l.length?i[l[l.length-1]]:i[l[c]];function d(e,t){return e-i[t].sourceLineNumber}}findReverseIndices(e,t,s){const i=this.mappings(),n=this.reversedMappings(e),o=r.ArrayUtilities.upperBound(n,void 0,(e,r)=>t-i[r].sourceLineNumber||s-i[r].sourceColumnNumber);let a=o;for(;a>0&&i[n[a-1]].sourceLineNumber===i[n[o-1]].sourceLineNumber&&i[n[a-1]].sourceColumnNumber===i[n[o-1]].sourceColumnNumber;)--a;return n.slice(a,o)}findReverseEntries(e,t,s){const r=this.mappings();return this.findReverseIndices(e,t,s).map(e=>r[e])}findReverseRanges(e,s,r){const i=this.mappings(),n=this.findReverseIndices(e,s,r),o=[];for(let e=0;e<n.length;++e){const s=n[e];let r=s+1;for(;e+1<n.length&&r===n[e+1];)++r,++e;const a=i[s].lineNumber,l=i[s].columnNumber,c=r<i.length?i[r].lineNumber:2**31-1,d=r<i.length?i[r].columnNumber:2**31-1;o.push(new t.TextRange.TextRange(a,l,c,d))}return o}mappings(){return this.#zs(),this.#Us??[]}reversedMappings(e){return this.#zs(),this.#Hs.get(e)?.reverseMappings??[]}#zs(){if(null===this.#Us){this.#Us=[];try{this.eachSection(this.parseMap.bind(this))}catch(e){console.error("Failed to parse source map",e),this.#Us=[]}this.mappings().sort(Mr.compare),this.#Ws(this.#Us)}Pr.retainRawSourceMaps||(this.#Ds=null)}#Ws(e){const t=new Map;for(let s=0;s<e.length;s++){const r=e[s].sourceURL;if(!r)continue;let i=t.get(r);i||(i=[],t.set(r,i)),i.push(s)}for(const[e,r]of t.entries()){const t=this.#Hs.get(e);t&&(r.sort(s),t.reverseMappings=r)}function s(t,s){const r=e[t],i=e[s];return r.sourceLineNumber-i.sourceLineNumber||r.sourceColumnNumber-i.sourceColumnNumber||r.lineNumber-i.lineNumber||r.columnNumber-i.columnNumber}}eachSection(e){if(this.#Ds)if("sections"in this.#Ds){let t=0;for(const s of this.#Ds.sections)"map"in s&&(e(s.map,t,s.offset.line,s.offset.column),t+=s.map.sources.length)}else e(this.#Ds,0,0,0)}parseSources(t){const s=t.sourceRoot??"",r=new Set(t.ignoreList??t.x_google_ignoreList);for(let i=0;i<t.sources.length;++i){let n=t.sources[i];e.ParsedURL.ParsedURL.isRelativeURL(n)&&(n=s&&!s.endsWith("/")&&n&&!n.startsWith("/")?s.concat("/",n):s.concat(n));const o=e.ParsedURL.ParsedURL.completeURL(this.#_s,n)||n,a=t.sourcesContent?.[i],l={sourceURL:o,content:a??null,ignoreListHint:r.has(i),reverseMappings:null};this.#Bs.push(l),this.#Hs.has(o)||this.#Hs.set(o,l)}}parseMap(e,t,s,r){let i=t,n=s,a=r,l=0,c=0,d=0;const h=e.names??[],u=new Er(e.mappings);let g=this.#Bs[i]?.sourceURL;for(;;){if(","===u.peek())u.next();else{for(;";"===u.peek();)n+=1,a=0,u.next();if(!u.hasNext())break}if(a+=u.nextVLQ(),!u.hasNext()||this.isSeparator(u.peek())){this.mappings().push(new Mr(n,a));continue}const e=u.nextVLQ();e&&(i+=e,g=this.#Bs[i]?.sourceURL),l+=u.nextVLQ(),c+=u.nextVLQ(),u.hasNext()&&!this.isSeparator(u.peek())?(d+=u.nextVLQ(),this.mappings().push(new Mr(n,a,i,g,l,c,h[d]))):this.mappings().push(new Mr(n,a,i,g,l,c))}if(o.Runtime.experiments.isEnabled("use-source-map-scopes"))if(this.#qs||(this.#qs=new Cr(this,[],[])),e.originalScopes&&e.generatedRanges){const{originalScopes:t,generatedRanges:i}=or(e,{line:s,column:r});this.#qs.addOriginalScopes(t),this.#qs.addGeneratedRanges(i)}else if(e.x_com_bloomberg_sourcesFunctionMappings){const t=this.parseBloombergScopes(e);this.#qs.addOriginalScopes(t)}else this.#qs.addOriginalScopes(new Array(e.sources.length))}parseBloombergScopes(e){const t=e.x_com_bloomberg_sourcesFunctionMappings;if(!t)throw new Error("Cant decode pasta scopes without x_com_bloomberg_sourcesFunctionMappings field");if(t.length!==e.sources.length)throw new Error(`x_com_bloomberg_sourcesFunctionMappings must have ${e.sources.length} scope trees`);const s=e.names??[];return t.map(e=>{if(e)return pr(fr(e,s))})}isSeparator(e){return","===e||";"===e}reverseMapTextRanges(e,s){const i=this.reversedMappings(e),n=this.mappings();if(0===i.length)return[];let o=r.ArrayUtilities.lowerBound(i,s,({startLine:e,startColumn:t},s)=>{const{sourceLineNumber:r,sourceColumnNumber:i}=n[s];return e-r||t-i});for(;o===i.length||o>0&&(n[i[o]].sourceLineNumber>s.startLine||n[i[o]].sourceColumnNumber>s.startColumn);)o--;let a=o+1;for(;a<i.length;++a){const{sourceLineNumber:e,sourceColumnNumber:t}=n[i[a]];if(!(e<s.endLine||e===s.endLine&&t<s.endColumn))break}const l=[];for(let e=o;e<a;++e){const s=i[e],r=s+1,o=t.TextRange.TextRange.createUnboundedFromLocation(n[s].lineNumber,n[s].columnNumber);r<n.length&&(o.endLine=n[r].lineNumber,o.endColumn=n[r].columnNumber),l.push(o)}l.sort(t.TextRange.TextRange.comparator);let c=0;for(let e=1;e<l.length;++e)l[c].immediatelyPrecedes(l[e])?(l[c].endLine=l[e].endLine,l[c].endColumn=l[e].endColumn):l[++c]=l[e];return l.length=c+1,l}mapsOrigin(){const e=this.mappings();if(e.length>0){const t=e[0];return 0===t?.lineNumber||0===t.columnNumber}return!1}hasIgnoreListHint(e){return this.#Hs.get(e)?.ignoreListHint??!1}findRanges(e,s){const r=this.mappings(),i=[];if(!r.length)return[];let n=null;0===r[0].lineNumber&&0===r[0].columnNumber||!s?.isStartMatching||(n=t.TextRange.TextRange.createUnboundedFromLocation(0,0),i.push(n));for(const{sourceURL:s,lineNumber:o,columnNumber:a}of r){const r=s&&e(s);n||!r?n&&!r&&(n.endLine=o,n.endColumn=a,n=null):(n=t.TextRange.TextRange.createUnboundedFromLocation(o,a),i.push(n))}return i}compatibleForURL(e,t){return this.embeddedContentByURL(e)===t.embeddedContentByURL(e)&&this.hasIgnoreListHint(e)===t.hasIgnoreListHint(e)}expandCallFrame(e){return this.#zs(),null===this.#qs?[e]:this.#qs.expandCallFrame(e)}resolveScopeChain(e){return this.#zs(),null===this.#qs?null:this.#qs.resolveMappedScopeChain(e)}findOriginalFunctionName(e){return this.#zs(),this.#qs?.findOriginalFunctionName(e)??null}}class Er{#Vs;#Gs;constructor(e){this.#Vs=e,this.#Gs=0}next(){return this.#Vs.charAt(this.#Gs++)}nextCharCode(){return this.#Vs.charCodeAt(this.#Gs++)}peek(){return this.#Vs.charAt(this.#Gs)}hasNext(){return this.#Gs<this.#Vs.length}nextVLQ(){let t=0,s=0,r=32;for(;32&r;){if(!this.hasNext())throw new Error("Unexpected end of input while decodling VLQ number!");const i=this.nextCharCode();if(r=e.Base64.BASE64_CODES[i],65!==i&&0===r)throw new Error(`Unexpected char '${String.fromCharCode(i)}' encountered while decoding`);t+=(31&r)<<s,s+=5}const i=1&t;return t>>=1,i?-t:t}peekVLQ(){const e=this.#Gs;try{return this.nextVLQ()}catch{return null}finally{this.#Gs=e}}}var Lr,Ar=Object.freeze({__proto__:null,SourceMap:Pr,SourceMapEntry:Mr,TokenIterator:Er,parseSourceMap:Tr});class Or extends e.ObjectWrapper.ObjectWrapper{#Ks;#$s=!0;#Qs=new Map;#Ys=new Map;#Js=null;constructor(e){super(),this.#Ks=e}setEnabled(e){if(e===this.#$s)return;const t=[...this.#Qs.entries()];for(const[e]of t)this.detachSourceMap(e);this.#$s=e;for(const[e,{relativeSourceURL:s,relativeSourceMapURL:r}]of t)this.attachSourceMap(e,s,r)}static getBaseUrl(e){for(;e&&e.type()!==U.FRAME;)e=e.parentTarget();return e?.inspectedURL()??r.DevToolsPath.EmptyUrlString}static resolveRelativeSourceURL(t,s){return e.ParsedURL.ParsedURL.completeURL(Or.getBaseUrl(t),s)??s}sourceMapForClient(e){return this.#Qs.get(e)?.sourceMap}sourceMapForClientPromise(e){const t=this.#Qs.get(e);return t?t.sourceMapPromise:Promise.resolve(void 0)}clientForSourceMap(e){return this.#Ys.get(e)}attachSourceMap(t,s,r){if(this.#Qs.has(t))throw new Error("SourceMap is already attached or being attached to client");if(!r)return;let i={relativeSourceURL:s,relativeSourceMapURL:r,sourceMap:void 0,sourceMapPromise:Promise.resolve(void 0)};if(this.#$s){const n=Or.resolveRelativeSourceURL(this.#Ks,s),o=e.ParsedURL.ParsedURL.completeURL(n,r);if(o)if(this.#Js&&console.error("Attaching source map may cancel previously attaching source map"),this.#Js=t,this.dispatchEventToListeners(Lr.SourceMapWillAttach,{client:t}),this.#Js===t){this.#Js=null;const e=t.createPageResourceLoadInitiator();i.sourceMapPromise=Dr(o,e).then(e=>{const s=new Pr(n,o,e);return this.#Qs.get(t)===i&&(i.sourceMap=s,this.#Ys.set(s,t),this.dispatchEventToListeners(Lr.SourceMapAttached,{client:t,sourceMap:s})),s},()=>{this.#Qs.get(t)===i&&this.dispatchEventToListeners(Lr.SourceMapFailedToAttach,{client:t})})}else this.#Js&&console.error("Cancelling source map attach because another source map is attaching"),i=null,this.dispatchEventToListeners(Lr.SourceMapFailedToAttach,{client:t})}i&&this.#Qs.set(t,i)}cancelAttachSourceMap(e){e===this.#Js?this.#Js=null:this.#Js?console.error("cancel attach source map requested but a different source map was being attached"):console.error("cancel attach source map requested but no source map was being attached")}detachSourceMap(e){const t=this.#Qs.get(e);if(!t)return;if(this.#Qs.delete(e),!this.#$s)return;const{sourceMap:s}=t;s?(this.#Ys.delete(s),this.dispatchEventToListeners(Lr.SourceMapDetached,{client:e,sourceMap:s})):this.dispatchEventToListeners(Lr.SourceMapFailedToAttach,{client:e})}}async function Dr(e,t){try{const{content:s}=await nr.instance().loadResource(e,t);return Tr(s)}catch(t){throw new Error(`Could not load content for ${e}: ${t.message}`,{cause:t})}}!function(e){e.SourceMapWillAttach="SourceMapWillAttach",e.SourceMapFailedToAttach="SourceMapFailedToAttach",e.SourceMapAttached="SourceMapAttached",e.SourceMapDetached="SourceMapDetached"}(Lr||(Lr={}));var Nr,Fr=Object.freeze({__proto__:null,get Events(){return Lr},SourceMapManager:Or,loadSourceMap:Dr,tryLoadSourceMap:async function(e,t){try{const{content:s}=await nr.instance().loadResource(e,t);return Tr(s)}catch(t){return console.error(`Could not load content for ${e}: ${t.message}`,{cause:t}),null}}});class Br extends h{agent;#Xs;#Zs=new Map;#er=new Map;#tr;#sr;#rr;#ir=new e.Throttler.Throttler(Wr);#nr=new Map;#or=new Map;#ar=null;#lr=null;#cr=null;#dr=!1;#$s=!1;#hr=!1;#ur=!1;#gr;constructor(t){super(t),this.#Xs=t.model(Gs),this.#sr=new Or(t),this.agent=t.cssAgent(),this.#rr=new zr(this),this.#tr=t.model(ii),this.#tr&&this.#tr.addEventListener(ri.PrimaryPageChanged,this.onPrimaryPageChanged,this),t.registerCSSDispatcher(new qr(this)),t.suspended()||this.enable(),this.#sr.setEnabled(e.Settings.Settings.instance().moduleSetting("css-source-maps-enabled").get()),e.Settings.Settings.instance().moduleSetting("css-source-maps-enabled").addChangeListener(e=>this.#sr.setEnabled(e.data))}async colorScheme(){if(!this.#gr){const e=await(this.domModel()?.target().runtimeAgent().invoke_evaluate({expression:'window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches'}));!e||e.exceptionDetails||e.getError()||(this.#gr=e.result.value?"dark":"light")}return this.#gr}async resolveValues(e,...t){const s=await this.agent.invoke_resolveValues({values:t,nodeId:e});return s.getError()?null:s.results}headersForSourceURL(e){const t=[];for(const s of this.getStyleSheetIdsForURL(e)){const e=this.styleSheetHeaderForId(s);e&&t.push(e)}return t}createRawLocationsByURL(e,t,s=0){const i=this.headersForSourceURL(e);i.sort(function(e,t){return e.startLine-t.startLine||e.startColumn-t.startColumn||e.id.localeCompare(t.id)});const n=r.ArrayUtilities.upperBound(i,void 0,(e,r)=>t-r.startLine||s-r.startColumn);if(!n)return[];const o=[],a=i[n-1];for(let e=n-1;e>=0&&i[e].startLine===a.startLine&&i[e].startColumn===a.startColumn;--e)i[e].containsLocation(t,s)&&o.push(new Ur(i[e],t,s));return o}sourceMapManager(){return this.#sr}static readableLayerName(e){return e||"<anonymous>"}static trimSourceURL(e){let t=e.lastIndexOf("/*# sourceURL=");if(-1===t&&(t=e.lastIndexOf("/*@ sourceURL="),-1===t))return e;const s=e.lastIndexOf("\n",t);if(-1===s)return e;const r=e.substr(s+1).split("\n",1)[0];return-1===r.search(/[\x20\t]*\/\*[#@] sourceURL=[\x20\t]*([^\s]*)[\x20\t]*\*\/[\x20\t]*$/)?e:e.substr(0,s)+e.substr(s+r.length+1)}domModel(){return this.#Xs}async trackComputedStyleUpdatesForNode(e){await this.agent.invoke_trackComputedStyleUpdatesForNode({nodeId:e})}async setStyleText(e,t,s,r){try{await this.ensureOriginalStyleSheetText(e);const{styles:i}=await this.agent.invoke_setStyleTexts({edits:[{styleSheetId:e,range:t.serializeToObject(),text:s}]});if(!i||1!==i.length)return!1;this.#Xs.markUndoableState(!r);const n=new Hr(e,t,s,i[0]);return this.fireStyleSheetChanged(e,n),!0}catch(e){return console.error(e),!1}}async setSelectorText(e,t,s){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{selectorList:r}=await this.agent.invoke_setRuleSelector({styleSheetId:e,range:t,selector:s});if(!r)return!1;this.#Xs.markUndoableState();const i=new Hr(e,t,s,r);return this.fireStyleSheetChanged(e,i),!0}catch(e){return console.error(e),!1}}async setPropertyRulePropertyName(e,t,s){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{propertyName:r}=await this.agent.invoke_setPropertyRulePropertyName({styleSheetId:e,range:t,propertyName:s});if(!r)return!1;this.#Xs.markUndoableState();const i=new Hr(e,t,s,r);return this.fireStyleSheetChanged(e,i),!0}catch(e){return console.error(e),!1}}async setKeyframeKey(e,t,s){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{keyText:r}=await this.agent.invoke_setKeyframeKey({styleSheetId:e,range:t,keyText:s});if(!r)return!1;this.#Xs.markUndoableState();const i=new Hr(e,t,s,r);return this.fireStyleSheetChanged(e,i),!0}catch(e){return console.error(e),!1}}startCoverage(){return this.#hr=!0,this.agent.invoke_startRuleUsageTracking()}async takeCoverageDelta(){const e=await this.agent.invoke_takeCoverageDelta();return{timestamp:e?.timestamp||0,coverage:e?.coverage||[]}}setLocalFontsEnabled(e){return this.agent.invoke_setLocalFontsEnabled({enabled:e})}async stopCoverage(){this.#hr=!1,await this.agent.invoke_stopRuleUsageTracking()}async getMediaQueries(){const{medias:e}=await this.agent.invoke_getMediaQueries();return e?$t.parseMediaArrayPayload(this,e):[]}async getRootLayer(e){const{rootLayer:t}=await this.agent.invoke_getLayersForNode({nodeId:e});return t}isEnabled(){return this.#$s}async enable(){await this.agent.invoke_enable(),this.#$s=!0,this.#hr&&await this.startCoverage(),this.dispatchEventToListeners(Nr.ModelWasEnabled)}async getAnimatedStylesForNode(e){const t=await this.agent.invoke_getAnimatedStylesForNode({nodeId:e});return t.getError()?null:t}async getMatchedStyles(e){const t=this.#Xs.nodeForId(e);if(!t)return null;const s=o.Runtime.hostConfig.devToolsAnimationStylesInStylesTab?.enabled,[r,i]=await Promise.all([this.agent.invoke_getMatchedStylesForNode({nodeId:e}),s?this.agent.invoke_getAnimatedStylesForNode({nodeId:e}):void 0]);if(r.getError())return null;const n={cssModel:this,node:t,inlinePayload:r.inlineStyle||null,attributesPayload:r.attributesStyle||null,matchedPayload:r.matchedCSSRules||[],pseudoPayload:r.pseudoElements||[],inheritedPayload:r.inherited||[],inheritedPseudoPayload:r.inheritedPseudoElements||[],animationsPayload:r.cssKeyframesRules||[],parentLayoutNodeId:r.parentLayoutNodeId,positionTryRules:r.cssPositionTryRules||[],propertyRules:r.cssPropertyRules??[],functionRules:r.cssFunctionRules??[],cssPropertyRegistrations:r.cssPropertyRegistrations??[],fontPaletteValuesRule:r.cssFontPaletteValuesRule,activePositionFallbackIndex:r.activePositionFallbackIndex??-1,animationStylesPayload:i?.animationStyles||[],inheritedAnimatedPayload:i?.inherited||[],transitionsStylePayload:i?.transitionsStyle||null};return await In.create(n)}async getClassNames(e){const{classNames:t}=await this.agent.invoke_collectClassNames({styleSheetId:e});return t||[]}async getComputedStyle(e){return this.isEnabled()||await this.enable(),await this.#rr.computedStylePromise(e)}async getLayoutPropertiesFromComputedStyle(e){const t=await this.getComputedStyle(e);if(!t)return null;const s=t.get("display"),r="flex"===s||"inline-flex"===s,i="grid"===s||"inline-grid"===s,n=(i&&(t.get("grid-template-columns")?.startsWith("subgrid")||t.get("grid-template-rows")?.startsWith("subgrid")))??!1,o=t.get("container-type");return{isFlex:r,isGrid:i,isSubgrid:n,isContainer:Boolean(o)&&""!==o&&"normal"!==o,hasScroll:Boolean(t.get("scroll-snap-type"))&&"none"!==t.get("scroll-snap-type")}}async getBackgroundColors(e){const t=await this.agent.invoke_getBackgroundColors({nodeId:e});return t.getError()?null:{backgroundColors:t.backgroundColors||null,computedFontSize:t.computedFontSize||"",computedFontWeight:t.computedFontWeight||""}}async getPlatformFonts(e){const{fonts:t}=await this.agent.invoke_getPlatformFontsForNode({nodeId:e});return t}allStyleSheets(){const e=[...this.#or.values()];return e.sort(function(e,t){return e.sourceURL<t.sourceURL?-1:e.sourceURL>t.sourceURL?1:e.startLine-t.startLine||e.startColumn-t.startColumn}),e}async getInlineStyles(e){const t=await this.agent.invoke_getInlineStylesForNode({nodeId:e});if(t.getError()||!t.inlineStyle)return null;const s=new en(this,null,t.inlineStyle,Yt.Inline),r=t.attributesStyle?new en(this,null,t.attributesStyle,Yt.Attributes):null;return new jr(s,r)}forcePseudoState(e,t,s){const i=e.marker(_r)||[],n=i.includes(t);if(s){if(n)return!1;i.push(t),e.setMarker(_r,i)}else{if(!n)return!1;r.ArrayUtilities.removeElement(i,t),i.length?e.setMarker(_r,i):e.setMarker(_r,null)}return void 0!==e.id&&(this.agent.invoke_forcePseudoState({nodeId:e.id,forcedPseudoClasses:i}),this.dispatchEventToListeners(Nr.PseudoStateForced,{node:e,pseudoClass:t,enable:s}),!0)}pseudoState(e){return e.marker(_r)||[]}async setMediaText(e,t,s){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{media:r}=await this.agent.invoke_setMediaText({styleSheetId:e,range:t,text:s});if(!r)return!1;this.#Xs.markUndoableState();const i=new Hr(e,t,s,r);return this.fireStyleSheetChanged(e,i),!0}catch(e){return console.error(e),!1}}async setContainerQueryText(e,t,s){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{containerQuery:r}=await this.agent.invoke_setContainerQueryText({styleSheetId:e,range:t,text:s});if(!r)return!1;this.#Xs.markUndoableState();const i=new Hr(e,t,s,r);return this.fireStyleSheetChanged(e,i),!0}catch(e){return console.error(e),!1}}async setSupportsText(e,t,s){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{supports:r}=await this.agent.invoke_setSupportsText({styleSheetId:e,range:t,text:s});if(!r)return!1;this.#Xs.markUndoableState();const i=new Hr(e,t,s,r);return this.fireStyleSheetChanged(e,i),!0}catch(e){return console.error(e),!1}}async setScopeText(e,t,s){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{scope:r}=await this.agent.invoke_setScopeText({styleSheetId:e,range:t,text:s});if(!r)return!1;this.#Xs.markUndoableState();const i=new Hr(e,t,s,r);return this.fireStyleSheetChanged(e,i),!0}catch(e){return console.error(e),!1}}async addRule(e,t,s){try{await this.ensureOriginalStyleSheetText(e);const{rule:r}=await this.agent.invoke_addRule({styleSheetId:e,ruleText:t,location:s});if(!r)return null;this.#Xs.markUndoableState();const i=new Hr(e,s,t,r);return this.fireStyleSheetChanged(e,i),new an(this,r)}catch(e){return console.error(e),null}}async requestViaInspectorStylesheet(e){const t=e||(this.#tr&&this.#tr.mainFrame?this.#tr.mainFrame.id:null),s=[...this.#or.values()].find(e=>e.frameId===t&&e.isViaInspector());if(s)return s;if(!t)return null;try{return await this.createInspectorStylesheet(t)}catch(e){return console.error(e),null}}async createInspectorStylesheet(e,t=!1){const s=await this.agent.invoke_createStyleSheet({frameId:e,force:t});if(s.getError())throw new Error(s.getError());return this.#or.get(s.styleSheetId)||null}mediaQueryResultChanged(){this.#gr=void 0,this.dispatchEventToListeners(Nr.MediaQueryResultChanged)}fontsUpdated(e){e&&this.#Zs.set(e.src,new pe(e)),this.dispatchEventToListeners(Nr.FontsUpdated)}fontFaces(){return[...this.#Zs.values()]}fontFaceForSource(e){return this.#Zs.get(e)}styleSheetHeaderForId(e){return this.#or.get(e)||null}styleSheetHeaders(){return[...this.#or.values()]}fireStyleSheetChanged(e,t){this.dispatchEventToListeners(Nr.StyleSheetChanged,{styleSheetId:e,edit:t})}ensureOriginalStyleSheetText(e){const t=this.styleSheetHeaderForId(e);if(!t)return Promise.resolve(null);let s=this.#er.get(t);return s||(s=this.getStyleSheetText(t.id),this.#er.set(t,s),this.originalContentRequestedForTest(t)),s}originalContentRequestedForTest(e){}originalStyleSheetText(e){return this.ensureOriginalStyleSheetText(e.id)}getAllStyleSheetHeaders(){return this.#or.values()}computedStyleUpdated(e){this.dispatchEventToListeners(Nr.ComputedStyleUpdated,{nodeId:e})}styleSheetAdded(e){console.assert(!this.#or.get(e.styleSheetId)),e.loadingFailed&&(e.hasSourceURL=!1,e.isConstructed=!0,e.isInline=!1,e.isMutable=!1,e.sourceURL="",e.sourceMapURL=void 0);const t=new An(this,e);this.#or.set(e.styleSheetId,t);const s=t.resourceURL();let r=this.#nr.get(s);if(r||(r=new Map,this.#nr.set(s,r)),r){let e=r.get(t.frameId);e||(e=new Set,r.set(t.frameId,e)),e.add(t.id)}this.#sr.attachSourceMap(t,t.sourceURL,t.sourceMapURL),this.dispatchEventToListeners(Nr.StyleSheetAdded,t)}styleSheetRemoved(e){const t=this.#or.get(e);if(console.assert(Boolean(t)),!t)return;this.#or.delete(e);const s=t.resourceURL(),r=this.#nr.get(s);if(console.assert(Boolean(r),"No frameId to styleSheetId map is available for given style sheet URL."),r){const i=r.get(t.frameId);i&&(i.delete(e),i.size||(r.delete(t.frameId),r.size||this.#nr.delete(s)))}this.#er.delete(t),this.#sr.detachSourceMap(t),this.dispatchEventToListeners(Nr.StyleSheetRemoved,t)}getStyleSheetIdsForURL(e){const t=this.#nr.get(e);if(!t)return[];const s=[];for(const e of t.values())s.push(...e);return s}async setStyleSheetText(e,t,s){const r=this.#or.get(e);if(!r)return"Unknown stylesheet in CSS.setStyleSheetText";t=Br.trimSourceURL(t),r.hasSourceURL&&(t+="\n/*# sourceURL="+r.sourceURL+" */"),await this.ensureOriginalStyleSheetText(e);const i=(await this.agent.invoke_setStyleSheetText({styleSheetId:r.id,text:t})).sourceMapURL;return this.#sr.detachSourceMap(r),r.setSourceMapURL(i),this.#sr.attachSourceMap(r,r.sourceURL,r.sourceMapURL),null===i?"Error in CSS.setStyleSheetText":(this.#Xs.markUndoableState(!s),this.fireStyleSheetChanged(e),null)}async getStyleSheetText(e){const t=await this.agent.invoke_getStyleSheetText({styleSheetId:e});if(t.getError())return null;const{text:s}=t;return s&&Br.trimSourceURL(s)}async onPrimaryPageChanged(e){e.data.frame.backForwardCacheDetails.restoredFromCache?(await this.suspendModel(),await this.resumeModel()):"Activation"!==e.data.type&&(this.resetStyleSheets(),this.resetFontFaces())}resetStyleSheets(){const e=[...this.#or.values()];this.#nr.clear(),this.#or.clear();for(const t of e)this.#sr.detachSourceMap(t),this.dispatchEventToListeners(Nr.StyleSheetRemoved,t)}resetFontFaces(){this.#Zs.clear()}async suspendModel(){this.#$s=!1,await this.agent.invoke_disable(),this.resetStyleSheets(),this.resetFontFaces()}async resumeModel(){return await this.enable()}setEffectivePropertyValueForNode(e,t,s){this.agent.invoke_setEffectivePropertyValueForNode({nodeId:e,propertyName:t,value:s})}cachedMatchedCascadeForNode(e){if(this.#ar!==e&&this.discardCachedMatchedCascade(),this.#ar=e,!this.#lr){if(!e.id)return Promise.resolve(null);this.#lr=this.getMatchedStyles(e.id)}return this.#lr}discardCachedMatchedCascade(){this.#ar=null,this.#lr=null}createCSSPropertyTracker(e){return new Vr(this,e)}enableCSSPropertyTracker(e){const t=e.getTrackedProperties();0!==t.length&&(this.agent.invoke_trackComputedStyleUpdates({propertiesToTrack:t}),this.#dr=!0,this.#cr=e,this.pollComputedStyleUpdates())}disableCSSPropertyTracker(){this.#dr=!1,this.#cr=null,this.agent.invoke_trackComputedStyleUpdates({propertiesToTrack:[]})}async pollComputedStyleUpdates(){if(!this.#ur){if(this.#dr){this.#ur=!0;const e=await this.agent.invoke_takeComputedStyleUpdates();if(this.#ur=!1,e.getError()||!e.nodeIds||!this.#dr)return;this.#cr&&this.#cr.dispatchEventToListeners("TrackedCSSPropertiesUpdated",e.nodeIds.map(e=>this.#Xs.nodeForId(e)))}this.#dr&&this.#ir.schedule(this.pollComputedStyleUpdates.bind(this))}}dispose(){this.disableCSSPropertyTracker(),super.dispose(),this.dispatchEventToListeners(Nr.ModelDisposed,this)}getAgent(){return this.agent}}!function(e){e.FontsUpdated="FontsUpdated",e.MediaQueryResultChanged="MediaQueryResultChanged",e.ModelWasEnabled="ModelWasEnabled",e.ModelDisposed="ModelDisposed",e.PseudoStateForced="PseudoStateForced",e.StyleSheetAdded="StyleSheetAdded",e.StyleSheetChanged="StyleSheetChanged",e.StyleSheetRemoved="StyleSheetRemoved",e.ComputedStyleUpdated="ComputedStyleUpdated"}(Nr||(Nr={}));const _r="pseudo-state-marker";class Hr{styleSheetId;oldRange;newRange;newText;payload;constructor(e,s,r,i){this.styleSheetId=e,this.oldRange=s,this.newRange=t.TextRange.TextRange.fromEdit(s,r),this.newText=r,this.payload=i}}class Ur{#je;styleSheetId;url;lineNumber;columnNumber;constructor(e,t,s){this.#je=e.cssModel(),this.styleSheetId=e.id,this.url=e.resourceURL(),this.lineNumber=t,this.columnNumber=s||0}cssModel(){return this.#je}header(){return this.#je.styleSheetHeaderForId(this.styleSheetId)}}class qr{#lt;constructor(e){this.#lt=e}mediaQueryResultChanged(){this.#lt.mediaQueryResultChanged()}fontsUpdated({font:e}){this.#lt.fontsUpdated(e)}styleSheetChanged({styleSheetId:e}){this.#lt.fireStyleSheetChanged(e)}styleSheetAdded({header:e}){this.#lt.styleSheetAdded(e)}styleSheetRemoved({styleSheetId:e}){this.#lt.styleSheetRemoved(e)}computedStyleUpdated({nodeId:e}){this.#lt.computedStyleUpdated(e)}}class zr{#lt;#mr=new Map;constructor(e){this.#lt=e}computedStylePromise(e){let t=this.#mr.get(e);return t||(t=this.#lt.getAgent().invoke_getComputedStyleForNode({nodeId:e}).then(({computedStyle:t})=>{if(this.#mr.delete(e),!t?.length)return null;const s=new Map;for(const e of t)s.set(e.name,e.value);return s}),this.#mr.set(e,t),t)}}class jr{inlineStyle;attributesStyle;constructor(e,t){this.inlineStyle=e,this.attributesStyle=t}}class Vr extends e.ObjectWrapper.ObjectWrapper{#lt;#pr;constructor(e,t){super(),this.#lt=e,this.#pr=t}start(){this.#lt.enableCSSPropertyTracker(this)}stop(){this.#lt.disableCSSPropertyTracker()}getTrackedProperties(){return this.#pr}}const Wr=1e3;h.register(Br,{capabilities:2,autostart:!0});var Gr=Object.freeze({__proto__:null,CSSLocation:Ur,CSSModel:Br,CSSPropertyTracker:Vr,Edit:Hr,get Events(){return Nr},InlineStyleResult:jr});class Kr extends h{#fr;#br;#yr;#wr;constructor(e){super(e),e.registerHeapProfilerDispatcher(new Qr(this)),this.#fr=!1,this.#br=e.heapProfilerAgent(),this.#yr=e.model(Jr),this.#wr=0}debuggerModel(){return this.#yr.debuggerModel()}runtimeModel(){return this.#yr}async enable(){this.#fr||(this.#fr=!0,await this.#br.invoke_enable())}async startSampling(e){if(this.#wr++)return!1;const t=await this.#br.invoke_startSampling({samplingInterval:e||16384});return Boolean(t.getError())}async stopSampling(){if(!this.#wr)throw new Error("Sampling profiler is not running.");if(--this.#wr)return await this.getSamplingProfile();const e=await this.#br.invoke_stopSampling();return e.getError()?null:e.profile}async getSamplingProfile(){const e=await this.#br.invoke_getSamplingProfile();return e.getError()?null:e.profile}async collectGarbage(){const e=await this.#br.invoke_collectGarbage();return Boolean(e.getError())}async snapshotObjectIdForObjectId(e){const t=await this.#br.invoke_getHeapObjectId({objectId:e});return t.getError()?null:t.heapSnapshotObjectId}async objectForSnapshotObjectId(e,t){const s=await this.#br.invoke_getObjectByHeapObjectId({objectId:e,objectGroup:t});return s.getError()?null:this.#yr.createRemoteObject(s.result)}async addInspectedHeapObject(e){const t=await this.#br.invoke_addInspectedHeapObject({heapObjectId:e});return Boolean(t.getError())}async takeHeapSnapshot(e){const t=await this.#br.invoke_takeHeapSnapshot(e);return Boolean(t.getError())}async startTrackingHeapObjects(e){const t=await this.#br.invoke_startTrackingHeapObjects({trackAllocations:e});return Boolean(t.getError())}async stopTrackingHeapObjects(e){const t=await this.#br.invoke_stopTrackingHeapObjects({reportProgress:e});return Boolean(t.getError())}heapStatsUpdate(e){this.dispatchEventToListeners("HeapStatsUpdate",e)}lastSeenObjectId(e,t){this.dispatchEventToListeners("LastSeenObjectId",{lastSeenObjectId:e,timestamp:t})}addHeapSnapshotChunk(e){this.dispatchEventToListeners("AddHeapSnapshotChunk",e)}reportHeapSnapshotProgress(e,t,s){this.dispatchEventToListeners("ReportHeapSnapshotProgress",{done:e,total:t,finished:s})}resetProfiles(){this.dispatchEventToListeners("ResetProfiles",this)}}class Qr{#vr;constructor(e){this.#vr=e}heapStatsUpdate({statsUpdate:e}){this.#vr.heapStatsUpdate(e)}lastSeenObjectId({lastSeenObjectId:e,timestamp:t}){this.#vr.lastSeenObjectId(e,t)}addHeapSnapshotChunk({chunk:e}){this.#vr.addHeapSnapshotChunk(e)}reportHeapSnapshotProgress({done:e,total:t,finished:s}){this.#vr.reportHeapSnapshotProgress(e,t,s)}resetProfiles(){this.#vr.resetProfiles()}}h.register(Kr,{capabilities:4,autostart:!1});var $r,Xr=Object.freeze({__proto__:null,HeapProfilerModel:Kr});class Jr extends h{agent;#kr=new Map;#Sr=Zr.comparator;constructor(t){super(t),this.agent=t.runtimeAgent(),this.target().registerRuntimeDispatcher(new Yr(this)),this.agent.invoke_enable(),e.Settings.Settings.instance().moduleSetting("custom-formatters").get()&&this.agent.invoke_setCustomObjectFormatterEnabled({enabled:!0}),e.Settings.Settings.instance().moduleSetting("custom-formatters").addChangeListener(this.customFormattersStateChanged.bind(this))}static isSideEffectFailure(e){const t="exceptionDetails"in e&&e.exceptionDetails;return Boolean(t&&t.exception?.description?.startsWith("EvalError: Possible side-effect in debug-evaluate"))}debuggerModel(){return this.target().model(ms)}heapProfilerModel(){return this.target().model(Kr)}executionContexts(){return[...this.#kr.values()].sort(this.executionContextComparator())}setExecutionContextComparator(e){this.#Sr=e}executionContextComparator(){return this.#Sr}defaultExecutionContext(){for(const e of this.executionContexts())if(e.isDefault)return e;return null}executionContext(e){return this.#kr.get(e)||null}executionContextCreated(e){const t=e.auxData||{isDefault:!0},s=new Zr(this,e.id,e.uniqueId,e.name,e.origin,t.isDefault,t.frameId);this.#kr.set(s.id,s),this.dispatchEventToListeners($r.ExecutionContextCreated,s)}executionContextDestroyed(e){const t=this.#kr.get(e);t&&(this.debuggerModel().executionContextDestroyed(t),this.#kr.delete(e),this.dispatchEventToListeners($r.ExecutionContextDestroyed,t))}fireExecutionContextOrderChanged(){this.dispatchEventToListeners($r.ExecutionContextOrderChanged,this)}executionContextsCleared(){this.debuggerModel().globalObjectCleared();const e=this.executionContexts();this.#kr.clear();for(let t=0;t<e.length;++t)this.dispatchEventToListeners($r.ExecutionContextDestroyed,e[t])}createRemoteObject(e){return console.assert("object"==typeof e,"Remote object payload should only be an object"),new _n(this,e.objectId,e.type,e.subtype,e.value,e.unserializableValue,e.description,e.preview,e.customPreview,e.className)}createScopeRemoteObject(e,t){return new Hn(this,e.objectId,t,e.type,e.subtype,e.value,e.unserializableValue,e.description,e.preview)}createRemoteObjectFromPrimitiveValue(e){const t=typeof e;let s;const r=Bn.unserializableDescription(e);return null!==r&&(s=r),void 0!==s&&(e=void 0),new _n(this,void 0,t,void 0,e,s)}createRemotePropertyFromPrimitiveValue(e,t){return new qn(e,this.createRemoteObjectFromPrimitiveValue(t))}discardConsoleEntries(){this.agent.invoke_discardConsoleEntries()}releaseObjectGroup(e){this.agent.invoke_releaseObjectGroup({objectGroup:e})}releaseEvaluationResult(e){if("object"in e&&e.object&&e.object.release(),"exceptionDetails"in e&&e.exceptionDetails?.exception){const t=e.exceptionDetails.exception;this.createRemoteObject({type:t.type,objectId:t.objectId}).release()}}runIfWaitingForDebugger(){this.agent.invoke_runIfWaitingForDebugger()}customFormattersStateChanged({data:e}){this.agent.invoke_setCustomObjectFormatterEnabled({enabled:e})}async compileScript(e,t,s,r){const i=await this.agent.invoke_compileScript({expression:e,sourceURL:t,persistScript:s,executionContextId:r});return i.getError()?(console.error(i.getError()),null):{scriptId:i.scriptId,exceptionDetails:i.exceptionDetails}}async runScript(e,t,s,r,i,n,o,a){const l=await this.agent.invoke_runScript({scriptId:e,executionContextId:t,objectGroup:s,silent:r,includeCommandLineAPI:i,returnByValue:n,generatePreview:o,awaitPromise:a}),c=l.getError();return c?(console.error(c),{error:c}):{object:this.createRemoteObject(l.result),exceptionDetails:l.exceptionDetails}}async queryObjects(e){if(!e.objectId)return{error:"Prototype should be an Object."};const t=await this.agent.invoke_queryObjects({prototypeObjectId:e.objectId,objectGroup:"console"}),s=t.getError();return s?(console.error(s),{error:s}):{objects:this.createRemoteObject(t.objects)}}async isolateId(){const e=await this.agent.invoke_getIsolateId();return e.getError()||!e.id?this.target().id():e.id}async heapUsage(){const e=await this.agent.invoke_getHeapUsage();return e.getError()?null:e}inspectRequested(t,s,r){const i=this.createRemoteObject(t);if(null!==s&&"object"==typeof s){if("copyToClipboard"in s&&Boolean(s.copyToClipboard))return void this.copyRequested(i);if("queryObjects"in s&&s.queryObjects)return void this.queryObjectsRequested(i,r)}i.isNode()?e.Revealer.reveal(i).then(i.release.bind(i)):"function"!==i.type?i.release():Vn.objectAsFunction(i).targetFunctionDetails().then(function(t){i.release(),t?.location&&e.Revealer.reveal(t.location)})}async addBinding(e){return await this.agent.invoke_addBinding(e)}async removeBinding(e){return await this.agent.invoke_removeBinding(e)}bindingCalled(e){this.dispatchEventToListeners($r.BindingCalled,e)}copyRequested(t){if(!t.objectId)return void a.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(t.unserializableValue()||t.value);const s=e.Settings.Settings.instance().moduleSetting("text-editor-indent").get();t.callFunctionJSON(function(e){const t=e.subtype,s=e.indent;if("node"===t)return this instanceof Element?this.outerHTML:void 0;if(t&&void 0===this)return String(t);try{return JSON.stringify(this,null,s)}catch{return String(this)}},[{value:{subtype:t.subtype,indent:s}}]).then(a.InspectorFrontendHost.InspectorFrontendHostInstance.copyText.bind(a.InspectorFrontendHost.InspectorFrontendHostInstance))}async queryObjectsRequested(t,s){const r=await this.queryObjects(t);t.release(),"error"in r?e.Console.Console.instance().error(r.error):this.dispatchEventToListeners($r.QueryObjectRequested,{objects:r.objects,executionContextId:s})}static simpleTextFromException(e){let t=e.text;if(e.exception?.description){let s=e.exception.description;-1!==s.indexOf("\n")&&(s=s.substring(0,s.indexOf("\n"))),t+=" "+s}return t}exceptionThrown(e,t){const s={timestamp:e,details:t};this.dispatchEventToListeners($r.ExceptionThrown,s)}exceptionRevoked(e){this.dispatchEventToListeners($r.ExceptionRevoked,e)}consoleAPICalled(e,t,s,r,i,n){const o={type:e,args:t,executionContextId:s,timestamp:r,stackTrace:i,context:n};this.dispatchEventToListeners($r.ConsoleAPICalled,o)}executionContextIdForScriptId(e){const t=this.debuggerModel().scriptForId(e);return t?t.executionContextId:0}executionContextForStackTrace(e){let t=e;for(;t&&!t.callFrames.length;)t=t.parent||null;return t?.callFrames.length?this.executionContextIdForScriptId(t.callFrames[0].scriptId):0}terminateExecution(){return this.agent.invoke_terminateExecution()}async getExceptionDetails(e){const t=await this.agent.invoke_getExceptionDetails({errorObjectId:e});if(!t.getError())return t.exceptionDetails}}!function(e){e.BindingCalled="BindingCalled",e.ExecutionContextCreated="ExecutionContextCreated",e.ExecutionContextDestroyed="ExecutionContextDestroyed",e.ExecutionContextChanged="ExecutionContextChanged",e.ExecutionContextOrderChanged="ExecutionContextOrderChanged",e.ExceptionThrown="ExceptionThrown",e.ExceptionRevoked="ExceptionRevoked",e.ConsoleAPICalled="ConsoleAPICalled",e.QueryObjectRequested="QueryObjectRequested"}($r||($r={}));class Yr{#xr;constructor(e){this.#xr=e}executionContextCreated({context:e}){this.#xr.executionContextCreated(e)}executionContextDestroyed({executionContextId:e}){this.#xr.executionContextDestroyed(e)}executionContextsCleared(){this.#xr.executionContextsCleared()}exceptionThrown({timestamp:e,exceptionDetails:t}){this.#xr.exceptionThrown(e,t)}exceptionRevoked({exceptionId:e}){this.#xr.exceptionRevoked(e)}consoleAPICalled({type:e,args:t,executionContextId:s,timestamp:r,stackTrace:i,context:n}){this.#xr.consoleAPICalled(e,t,s,r,i,n)}inspectRequested({object:e,hints:t,executionContextId:s}){this.#xr.inspectRequested(e,t,s)}bindingCalled(e){this.#xr.bindingCalled(e)}}class Zr{id;uniqueId;name;#Cr;origin;isDefault;runtimeModel;debuggerModel;frameId;constructor(e,t,s,r,i,n,o){this.id=t,this.uniqueId=s,this.name=r,this.#Cr=null,this.origin=i,this.isDefault=n,this.runtimeModel=e,this.debuggerModel=e.debuggerModel(),this.frameId=o,this.setLabelInternal("")}target(){return this.runtimeModel.target()}static comparator(e,t){function s(e){return e.parentTarget()?.type()!==U.FRAME?5:e.type()===U.FRAME?4:e.type()===U.ServiceWorker?3:e.type()===U.Worker||e.type()===U.SHARED_WORKER?2:1}function r(e){let t=e;const s=[];for(;t;)s.push(t),t=t.parentTarget();return s.reverse()}const i=r(e.target()),n=r(t.target());let o,a;for(let e=0;;e++)if(!i[e]||!n[e]||i[e]!==n[e]){o=i[e],a=n[e];break}if(!o&&a)return-1;if(!a&&o)return 1;if(o&&a){const e=s(o)-s(a);return e?-e:o.id().localeCompare(a.id())}return e.isDefault?-1:t.isDefault?1:e.name.localeCompare(t.name)}async evaluate(e,t,s){return this.debuggerModel.selectedCallFrame()?await this.debuggerModel.evaluateOnSelectedCallFrame(e):await this.evaluateGlobal(e,t,s)}globalObject(e,t){const s={expression:"this",objectGroup:e,includeCommandLineAPI:!1,silent:!0,returnByValue:!1,generatePreview:t};return this.evaluateGlobal(s,!1,!1)}async callFunctionOn(e){const t=await this.runtimeModel.agent.invoke_callFunctionOn({functionDeclaration:e.functionDeclaration,returnByValue:e.returnByValue,userGesture:e.userGesture,awaitPromise:e.awaitPromise,throwOnSideEffect:e.throwOnSideEffect,arguments:e.arguments,...this.uniqueId?{uniqueContextId:this.uniqueId}:{contextId:this.id}}),s=t.getError();return s?{error:s}:{object:this.runtimeModel.createRemoteObject(t.result),exceptionDetails:t.exceptionDetails}}async evaluateGlobal(e,t,s){e.expression||(e.expression="this");const r=await this.runtimeModel.agent.invoke_evaluate({expression:e.expression,objectGroup:e.objectGroup,includeCommandLineAPI:e.includeCommandLineAPI,silent:e.silent,returnByValue:e.returnByValue,generatePreview:e.generatePreview,userGesture:t,awaitPromise:s,throwOnSideEffect:e.throwOnSideEffect,timeout:e.timeout,disableBreaks:e.disableBreaks,replMode:e.replMode,allowUnsafeEvalBlockedByCSP:e.allowUnsafeEvalBlockedByCSP,...this.uniqueId?{uniqueContextId:this.uniqueId}:{contextId:this.id}}),i=r.getError();return i?(console.error(i),{error:i}):{object:this.runtimeModel.createRemoteObject(r.result),exceptionDetails:r.exceptionDetails}}async globalLexicalScopeNames(){const e=await this.runtimeModel.agent.invoke_globalLexicalScopeNames({executionContextId:this.id});return e.getError()?[]:e.names}label(){return this.#Cr}setLabel(e){this.setLabelInternal(e),this.runtimeModel.dispatchEventToListeners($r.ExecutionContextChanged,this)}setLabelInternal(t){if(t)return void(this.#Cr=t);if(this.name)return void(this.#Cr=this.name);const s=e.ParsedURL.ParsedURL.fromString(this.origin);this.#Cr=s?s.lastPathComponentWithFragment():""}}h.register(Jr,{capabilities:4,autostart:!0});var es=Object.freeze({__proto__:null,get Events(){return $r},ExecutionContext:Zr,RuntimeModel:Jr});const ts={scriptRemovedOrDeleted:"Script removed or deleted.",unableToFetchScriptSource:"Unable to fetch script source."},ns=n.i18n.registerUIStrings("core/sdk/Script.ts",ts),rs=n.i18n.getLocalizedString.bind(void 0,ns);let ss=null;class is{debuggerModel;scriptId;sourceURL;lineOffset;columnOffset;endLine;endColumn;executionContextId;hash;#Ir;#Rr;sourceMapURL;debugSymbols;hasSourceURL;contentLength;originStackTrace;#Tr;#Pr;#Er;#Mr;isModule;constructor(e,t,s,r,i,n,o,a,l,c,d,h,u,g,m,p,f,b,y,w){this.debuggerModel=e,this.scriptId=t,this.sourceURL=s,this.lineOffset=r,this.columnOffset=i,this.endLine=n,this.endColumn=o,this.isModule=m,this.executionContextId=a,this.hash=l,this.#Ir=c,this.#Rr=d,this.sourceMapURL=h,this.debugSymbols=y,this.hasSourceURL=u,this.contentLength=g,this.originStackTrace=p,this.#Tr=f,this.#Pr=b,this.#Er=null,this.#Mr=w}embedderName(){return this.#Mr}target(){return this.debuggerModel.target()}static trimSourceURLComment(e){let t=e.lastIndexOf("//# sourceURL=");if(-1===t&&(t=e.lastIndexOf("//@ sourceURL="),-1===t))return e;const s=e.lastIndexOf("\n",t);return-1===s?e:e.substr(s+1).match(as)?e.substr(0,s):e}isContentScript(){return this.#Ir}codeOffset(){return this.#Tr}isJavaScript(){return"JavaScript"===this.#Pr}isWasm(){return"WebAssembly"===this.#Pr}scriptLanguage(){return this.#Pr}executionContext(){return this.debuggerModel.runtimeModel().executionContext(this.executionContextId)}isLiveEdit(){return this.#Rr}contentURL(){return this.sourceURL}contentType(){return e.ResourceType.resourceTypes.Script}async loadTextContent(){const s=await this.debuggerModel.target().debuggerAgent().invoke_getScriptSource({scriptId:this.scriptId});if(s.getError())throw new Error(s.getError());const{scriptSource:r,bytecode:i}=s;if(i)return new t.ContentData.ContentData(i,!0,"application/wasm");let n=r||"";return this.hasSourceURL&&e.ParsedURL.schemeIs(this.sourceURL,"snippet:")&&(n=is.trimSourceURLComment(n)),new t.ContentData.ContentData(n,!1,"text/javascript")}async loadWasmContent(){if(!this.isWasm())throw new Error("Not a wasm script");const e=await this.debuggerModel.target().debuggerAgent().invoke_disassembleWasmModule({scriptId:this.scriptId});if(e.getError()){const e=await this.loadTextContent();return await ls(e.base64)}const{streamId:s,functionBodyOffsets:r,chunk:{lines:i,bytecodeOffsets:n}}=e,o=[],a=[];let l=i.reduce((e,t)=>e+t.length+1,0);if(s)for(;;){const e=await this.debuggerModel.target().debuggerAgent().invoke_nextWasmDisassemblyChunk({streamId:s});if(e.getError())throw new Error(e.getError());const{chunk:{lines:t,bytecodeOffsets:r}}=e;if(l+=t.reduce((e,t)=>e+t.length+1,0),0===t.length)break;if(l>=999999989){o.push(["<truncated>"]),a.push([0]);break}o.push(t),a.push(r)}const c=[];for(let e=0;e<r.length;e+=2)c.push({start:r[e],end:r[e+1]});return new t.WasmDisassembly.WasmDisassembly(i.concat(...o),n.concat(...a),c)}requestContentData(){if(!this.#Er){const e=65535;if(this.hash&&!this.#Rr&&this.contentLength>e){ss||(ss={cache:new Map,registry:new FinalizationRegistry(e=>ss?.cache.delete(e))});const e=[this.#Pr,this.contentLength,this.lineOffset,this.columnOffset,this.endLine,this.endColumn,this.#Tr,this.hash].join(":"),t=ss.cache.get(e)?.deref();t?this.#Er=t:(this.#Er=this.requestContentInternal(),ss.cache.set(e,new WeakRef(this.#Er)),ss.registry.register(this.#Er,e))}else this.#Er=this.requestContentInternal()}return this.#Er}async requestContent(){const e=await this.requestContentData();return t.ContentData.ContentData.asDeferredContent(e)}async requestContentInternal(){if(!this.scriptId)return{error:rs(ts.scriptRemovedOrDeleted)};try{return this.isWasm()?await this.loadWasmContent():await this.loadTextContent()}catch{return{error:rs(ts.unableToFetchScriptSource)}}}async getWasmBytecode(){const e=await this.debuggerModel.target().debuggerAgent().invoke_getWasmBytecode({scriptId:this.scriptId}),t=await fetch(`data:application/wasm;base64,${e.bytecode}`);return await t.arrayBuffer()}originalContentProvider(){return new t.StaticContentProvider.StaticContentProvider(this.contentURL(),this.contentType(),()=>this.requestContentData())}async searchInContent(e,s,r){if(!this.scriptId)return[];const i=await this.debuggerModel.target().debuggerAgent().invoke_searchInContent({scriptId:this.scriptId,query:e,caseSensitive:s,isRegex:r});return t.TextUtils.performSearchInSearchMatches(i.result||[],e,s,r)}appendSourceURLCommentIfNeeded(e){return this.hasSourceURL?e+"\n //# sourceURL="+this.sourceURL:e}async editSource(e){if(e=is.trimSourceURLComment(e),e=this.appendSourceURLCommentIfNeeded(e),t.ContentData.ContentData.textOr(await this.requestContentData(),null)===e)return{changed:!1,status:"Ok"};const s=await this.debuggerModel.target().debuggerAgent().invoke_setScriptSource({scriptId:this.scriptId,scriptSource:e,allowTopFrameEditing:!0});if(s.getError())throw new Error(`Script#editSource failed for script with id ${this.scriptId}: ${s.getError()}`);return s.getError()||"Ok"!==s.status||(this.#Er=Promise.resolve(new t.ContentData.ContentData(e,!1,"text/javascript"))),this.debuggerModel.dispatchEventToListeners(ys.ScriptSourceWasEdited,{script:this,status:s.status}),{changed:!0,status:s.status,exceptionDetails:s.exceptionDetails}}rawLocation(e,t){return this.containsLocation(e,t)?new Is(this.debuggerModel,this.scriptId,e,t):null}isInlineScript(){const e=!this.lineOffset&&!this.columnOffset;return!this.isWasm()&&Boolean(this.sourceURL)&&!e}isAnonymousScript(){return!this.sourceURL}async setBlackboxedRanges(e){return!(await this.debuggerModel.target().debuggerAgent().invoke_setBlackboxedRanges({scriptId:this.scriptId,positions:e})).getError()}containsLocation(e,t){const s=e===this.lineOffset&&t>=this.columnOffset||e>this.lineOffset,r=e<this.endLine||e===this.endLine&&t<=this.endColumn;return s&&r}get frameId(){return"string"!=typeof this[os]&&(this[os]=function(e){const t=e.executionContext();if(t)return t.frameId||null;const s=e.debuggerModel.target().model(ii);return s?.mainFrame?s.mainFrame.id:null}(this)),this[os]}get isBreakpointCondition(){return[Rs,xs].includes(this.sourceURL)}sourceMap(){return this.debuggerModel.sourceMapManager().sourceMapForClient(this)}createPageResourceLoadInitiator(){return{target:this.target(),frameId:this.frameId,initiatorUrl:this.embedderName()}}rawLocationToRelativeLocation(e){let{lineNumber:t,columnNumber:s}=e;return!this.hasSourceURL&&this.isInlineScript()&&(t-=this.lineOffset,0===t&&void 0!==s&&(s-=this.columnOffset)),{lineNumber:t,columnNumber:s}}relativeLocationToRawLocation(e){let{lineNumber:t,columnNumber:s}=e;return!this.hasSourceURL&&this.isInlineScript()&&(0===t&&void 0!==s&&(s+=this.columnOffset),t+=this.lineOffset),{lineNumber:t,columnNumber:s}}}const os=Symbol("frameid"),as=/^[\x20\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/;async function ls(s){const r=e.Worker.WorkerWrapper.fromURL(new URL("../../entrypoints/wasmparser_worker/wasmparser_worker-entrypoint.js",import.meta.url)),i=new Promise((e,s)=>{r.onmessage=({data:r})=>{if("method"in r&&"disassemble"===r.method)if("error"in r)s(r.error);else if("result"in r){const{lines:s,offsets:i,functionBodyOffsets:n}=r.result;e(new t.WasmDisassembly.WasmDisassembly(s,i,n))}},r.onerror=s});r.postMessage({method:"disassemble",params:{content:s}});try{return await i}finally{r.terminate()}}var ds=Object.freeze({__proto__:null,Script:is,disassembleWasm:ls,sourceURLRegex:as});const cs={local:"Local",closure:"Closure",block:"Block",script:"Script",withBlock:"`With` block",catchBlock:"`Catch` block",global:"Global",module:"Module",expression:"Expression",exception:"Exception",returnValue:"Return value"},hs=n.i18n.registerUIStrings("core/sdk/DebuggerModel.ts",cs),us=n.i18n.getLocalizedString.bind(void 0,hs);function gs(e){function t(e,t){return e.lineNumber-t.lineNumber||e.columnNumber-t.columnNumber}function s(e,s){if(e.scriptId!==s.scriptId)return!1;const r=t(e.start,s.start);return r<0?t(e.end,s.start)>=0:!(r>0)||t(e.start,s.end)<=0}if(0===e.length)return[];e.sort((e,s)=>e.scriptId<s.scriptId?-1:e.scriptId>s.scriptId?1:t(e.start,s.start)||t(e.end,s.end));let r=e[0];const i=[];for(let n=1;n<e.length;++n){const o=e[n];s(r,o)?t(r.end,o.end)<=0&&(r={...r,end:o.end}):(i.push(r),r=o)}return i.push(r),i}const ps=["ExternalDWARF","EmbeddedDWARF","SourceMap"];class ms extends h{agent;runtimeModelInternal;#Lr;#Ar=null;#Or=new Map;#Dr=new Map;#Nr=[];continueToLocationCallback=null;#Fr=null;#_r=!1;#Ur=null;#Br=0;#Hr=null;#qr=null;#zr=null;evaluateOnCallFrameCallback=null;#jr=null;#Wr=new e.ObjectWrapper.ObjectWrapper;#Vr=null;#Gr=!1;constructor(t){super(t),t.registerDebuggerDispatcher(new vs(this)),this.agent=t.debuggerAgent(),this.runtimeModelInternal=t.model(Jr),this.#Lr=new Or(t),e.Settings.Settings.instance().moduleSetting("pause-on-exception-enabled").addChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("pause-on-caught-exception").addChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("pause-on-uncaught-exception").addChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("disable-async-stack-traces").addChangeListener(this.asyncStackTracesStateChanged,this),e.Settings.Settings.instance().moduleSetting("breakpoints-active").addChangeListener(this.breakpointsActiveChanged,this),t.suspended()||this.enableDebugger(),this.#Lr.setEnabled(e.Settings.Settings.instance().moduleSetting("js-source-maps-enabled").get()),e.Settings.Settings.instance().moduleSetting("js-source-maps-enabled").addChangeListener(e=>this.#Lr.setEnabled(e.data));const s=t.model(ii);s&&s.addEventListener(ri.FrameNavigated,this.onFrameNavigated,this)}static selectSymbolSource(t){if(!t||0===t.length)return null;if("type"in t)return"None"===t.type?null:t;let s=null;const r=new Map(t.map(e=>[e.type,e]));for(const e of ps)if(r.has(e)){s=r.get(e)||null;break}return console.assert(null!==s,"Unknown symbol types. Front-end and back-end should be kept in sync regarding Protocol.Debugger.DebugSymbolTypes"),s&&t.length>1&&e.Console.Console.instance().warn(`Multiple debug symbols for script were found. Using ${s.type}`),s}sourceMapManager(){return this.#Lr}runtimeModel(){return this.runtimeModelInternal}debuggerEnabled(){return Boolean(this.#_r)}debuggerId(){return this.#Ur}async enableDebugger(){if(this.#_r)return;this.#_r=!0;const t=o.Runtime.Runtime.queryParam("remoteFrontend")||o.Runtime.Runtime.queryParam("ws")?1e7:1e8,s=this.agent.invoke_enable({maxScriptsCacheSize:t});let r;o.Runtime.experiments.isEnabled("instrumentation-breakpoints")&&(r=this.agent.invoke_setInstrumentationBreakpoint({instrumentation:"beforeScriptExecution"})),this.pauseOnExceptionStateChanged(),this.asyncStackTracesStateChanged(),e.Settings.Settings.instance().moduleSetting("breakpoints-active").get()||this.breakpointsActiveChanged(),this.dispatchEventToListeners(ys.DebuggerWasEnabled,this);const[i]=await Promise.all([s,r]);this.registerDebugger(i)}async syncDebuggerId(){const e=o.Runtime.Runtime.queryParam("remoteFrontend")||o.Runtime.Runtime.queryParam("ws")?1e7:1e8,t=this.agent.invoke_enable({maxScriptsCacheSize:e});return t.then(this.registerDebugger.bind(this)),await t}onFrameNavigated(){ms.shouldResyncDebuggerId||(ms.shouldResyncDebuggerId=!0)}registerDebugger(e){if(e.getError())return void(this.#_r=!1);const{debuggerId:t}=e;fs.set(t,this),this.#Ur=t,this.dispatchEventToListeners(ys.DebuggerIsReadyToPause,this)}isReadyToPause(){return Boolean(this.#Ur)}static async modelForDebuggerId(e){return ms.shouldResyncDebuggerId&&(await ms.resyncDebuggerIdForModels(),ms.shouldResyncDebuggerId=!1),fs.get(e)||null}static async resyncDebuggerIdForModels(){const e=fs.values();for(const t of e)t.debuggerEnabled()&&await t.syncDebuggerId()}async disableDebugger(){this.#_r&&(this.#_r=!1,await this.asyncStackTracesStateChanged(),await this.agent.invoke_disable(),this.#Gr=!1,this.globalObjectCleared(),this.dispatchEventToListeners(ys.DebuggerWasDisabled,this),"string"==typeof this.#Ur&&fs.delete(this.#Ur),this.#Ur=null)}skipAllPauses(e){this.#Br&&(clearTimeout(this.#Br),this.#Br=0),this.agent.invoke_setSkipAllPauses({skip:e})}skipAllPausesUntilReloadOrTimeout(e){this.#Br&&clearTimeout(this.#Br),this.agent.invoke_setSkipAllPauses({skip:!0}),this.#Br=window.setTimeout(this.skipAllPauses.bind(this,!1),e)}pauseOnExceptionStateChanged(){const t=e.Settings.Settings.instance().moduleSetting("pause-on-caught-exception").get();let s;const r=e.Settings.Settings.instance().moduleSetting("pause-on-uncaught-exception").get();s=t&&r?"all":t?"caught":r?"uncaught":"none",this.agent.invoke_setPauseOnExceptions({state:s})}asyncStackTracesStateChanged(){const t=!e.Settings.Settings.instance().moduleSetting("disable-async-stack-traces").get()&&this.#_r?32:0;return this.agent.invoke_setAsyncCallStackDepth({maxDepth:t})}breakpointsActiveChanged(){this.agent.invoke_setBreakpointsActive({active:e.Settings.Settings.instance().moduleSetting("breakpoints-active").get()})}setComputeAutoStepRangesCallback(e){this.#qr=e}async computeAutoStepSkipList(e){let t=[];if(this.#qr&&this.#Ar&&this.#Ar.callFrames.length>0){const[s]=this.#Ar.callFrames;t=await this.#qr.call(null,e,s)}return gs(t.map(({start:e,end:t})=>({scriptId:e.scriptId,start:{lineNumber:e.lineNumber,columnNumber:e.columnNumber},end:{lineNumber:t.lineNumber,columnNumber:t.columnNumber}})))}async stepInto(){const e=await this.computeAutoStepSkipList("StepInto");this.agent.invoke_stepInto({breakOnAsyncCall:!1,skipList:e})}async stepOver(){this.#Vr=this.#Ar?.callFrames[0]?.functionLocation()??null;const e=await this.computeAutoStepSkipList("StepOver");this.agent.invoke_stepOver({skipList:e})}async stepOut(){const e=await this.computeAutoStepSkipList("StepOut");0!==e.length?this.agent.invoke_stepOver({skipList:e}):this.agent.invoke_stepOut()}scheduleStepIntoAsync(){this.computeAutoStepSkipList("StepInto").then(e=>{this.agent.invoke_stepInto({breakOnAsyncCall:!0,skipList:e})})}resume(){this.agent.invoke_resume({terminateOnResume:!1}),this.#Gr=!1}pause(){this.#Gr=!0,this.skipAllPauses(!1),this.agent.invoke_pause()}async setBreakpointByURL(t,s,i,n){let o;if(this.target().type()===U.NODE&&e.ParsedURL.schemeIs(t,"file:")){const s=e.ParsedURL.ParsedURL.urlToRawPathString(t,a.Platform.isWin());o=`${r.StringUtilities.escapeForRegExp(s)}|${r.StringUtilities.escapeForRegExp(t)}`,a.Platform.isWin()&&s.match(/^.:\\/)&&(o=`[${s[0].toUpperCase()}${s[0].toLowerCase()}]`+o.substr(1))}let l=0;const c=this.#Dr.get(t)||[];for(let e=0,t=c.length;e<t;++e){const t=c[e];s===t.lineOffset&&(l=l?Math.min(l,t.columnOffset):t.columnOffset)}i=Math.max(i||0,l);const d=await this.agent.invoke_setBreakpointByUrl({lineNumber:s,url:o?void 0:t,urlRegex:o,columnNumber:i,condition:n});if(d.getError())return{locations:[],breakpointId:null};let h=[];return d.locations&&(h=d.locations.map(e=>Is.fromPayload(this,e))),{locations:h,breakpointId:d.breakpointId}}async setBreakpointInAnonymousScript(e,t,s,r){const i=await this.agent.invoke_setBreakpointByUrl({lineNumber:t,scriptHash:e,columnNumber:s,condition:r});if(i.getError())return{locations:[],breakpointId:null};let n=[];return i.locations&&(n=i.locations.map(e=>Is.fromPayload(this,e))),{locations:n,breakpointId:i.breakpointId}}async removeBreakpoint(e){await this.agent.invoke_removeBreakpoint({breakpointId:e})}async getPossibleBreakpoints(e,t,s){const r=await this.agent.invoke_getPossibleBreakpoints({start:e.payload(),end:t?t.payload():void 0,restrictToFunction:s});return r.getError()||!r.locations?[]:r.locations.map(e=>ws.fromPayload(this,e))}async fetchAsyncStackTrace(e){const t=await this.agent.invoke_getStackTrace({stackTraceId:e});return t.getError()?null:t.stackTrace}breakpointResolved(e,t){this.#Wr.dispatchEventToListeners(e,Is.fromPayload(this,t))}globalObjectCleared(){this.resetDebuggerPausedDetails(),this.reset(),this.dispatchEventToListeners(ys.GlobalObjectCleared,this)}reset(){for(const e of this.#Or.values())this.#Lr.detachSourceMap(e);this.#Or.clear(),this.#Dr.clear(),this.#Nr=[],this.#Vr=null}scripts(){return Array.from(this.#Or.values())}scriptForId(e){return this.#Or.get(e)||null}scriptsForSourceURL(e){return this.#Dr.get(e)||[]}scriptsForExecutionContext(e){const t=[];for(const s of this.#Or.values())s.executionContextId===e.id&&t.push(s);return t}get callFrames(){return this.#Ar?this.#Ar.callFrames:null}debuggerPausedDetails(){return this.#Ar}async setDebuggerPausedDetails(e){return this.#Gr=!1,this.#Ar=e,!(this.#Hr&&!await this.#Hr.call(null,e,this.#Vr)||(this.#Vr=null,this.dispatchEventToListeners(ys.DebuggerPaused,this),this.setSelectedCallFrame(e.callFrames[0]),0))}resetDebuggerPausedDetails(){this.#Gr=!1,this.#Ar=null,this.setSelectedCallFrame(null)}setBeforePausedCallback(e){this.#Hr=e}setExpandCallFramesCallback(e){this.#zr=e}setEvaluateOnCallFrameCallback(e){this.evaluateOnCallFrameCallback=e}setSynchronizeBreakpointsCallback(e){this.#jr=e}async pausedScript(t,s,r,i,n,o){if("instrumentation"===s){const e=this.scriptForId(r.scriptId);return this.#jr&&e&&await this.#jr(e),void this.resume()}const a=new Cs(this,t,s,r,i,n,o);if(await this.#Kr(a),this.continueToLocationCallback){const e=this.continueToLocationCallback;if(this.continueToLocationCallback=null,e(a))return}await this.setDebuggerPausedDetails(a)?e.EventTarget.fireEvent("DevTools.DebuggerPaused"):this.#Vr?this.stepOver():this.stepInto()}async#Kr(e){if(this.#zr&&(e.callFrames=await this.#zr.call(null,e.callFrames)),!o.Runtime.experiments.isEnabled("use-source-map-scopes"))return;const t=[];for(const s of e.callFrames){const e=await this.sourceMapManager().sourceMapForClientPromise(s.script);e?.hasScopeInfo()?t.push(...e.expandCallFrame(s)):t.push(s)}e.callFrames=t}resumedScript(){this.resetDebuggerPausedDetails(),this.dispatchEventToListeners(ys.DebuggerResumed,this)}parsedScriptSource(e,t,s,r,i,n,o,a,l,c,d,h,u,g,m,p,f,b,y,w){const v=this.#Or.get(e);if(v)return v;let k=!1;l&&"isDefault"in l&&(k=!l.isDefault);const S=ms.selectSymbolSource(y),x=new is(this,e,t,s,r,i,n,o,a,k,c,d,h,g,m,p,f,b,S,w);return this.registerScript(x),this.dispatchEventToListeners(ys.ParsedScriptSource,x),x.sourceMapURL&&!u&&this.#Lr.attachSourceMap(x,x.sourceURL,x.sourceMapURL),u&&x.isAnonymousScript()&&(this.#Nr.push(x),this.collectDiscardedScripts()),x}setSourceMapURL(e,t){this.#Lr.detachSourceMap(e),e.sourceMapURL=t,this.#Lr.attachSourceMap(e,e.sourceURL,e.sourceMapURL)}async setDebugInfoURL(e,t){this.#zr&&this.#Ar&&(this.#Ar.callFrames=await this.#zr.call(null,this.#Ar.callFrames)),this.dispatchEventToListeners(ys.DebugInfoAttached,e)}executionContextDestroyed(e){for(const t of this.#Or.values())t.executionContextId===e.id&&this.#Lr.detachSourceMap(t)}registerScript(e){if(this.#Or.set(e.scriptId,e),e.isAnonymousScript())return;let t=this.#Dr.get(e.sourceURL);t||(t=[],this.#Dr.set(e.sourceURL,t)),t.unshift(e)}unregisterScript(e){console.assert(e.isAnonymousScript()),this.#Or.delete(e.scriptId)}collectDiscardedScripts(){if(this.#Nr.length<1e3)return;const e=this.#Nr.splice(0,100);for(const t of e)this.unregisterScript(t),this.dispatchEventToListeners(ys.DiscardedAnonymousScriptSource,t)}createRawLocation(e,t,s,r){return this.createRawLocationByScriptId(e.scriptId,t,s,r)}createRawLocationByURL(e,t,s,r,i){for(const n of this.#Dr.get(e)||[]){if(!i){if(n.lineOffset>t||n.lineOffset===t&&void 0!==s&&n.columnOffset>s)continue;if(n.endLine<t||n.endLine===t&&void 0!==s&&n.endColumn<=s)continue}return new Is(this,n.scriptId,t,s,r)}return null}createRawLocationByScriptId(e,t,s,r){return new Is(this,e,t,s,r)}createRawLocationsByStackTrace(e){const t=[];for(let s=e;s;s=s.parent)for(const{scriptId:e,lineNumber:r,columnNumber:i}of s.callFrames)t.push(this.createRawLocationByScriptId(e,r,i));return t}isPaused(){return Boolean(this.debuggerPausedDetails())}isPausing(){return this.#Gr}setSelectedCallFrame(e){this.#Fr!==e&&(this.#Fr=e,this.dispatchEventToListeners(ys.CallFrameSelected,this))}selectedCallFrame(){return this.#Fr}async evaluateOnSelectedCallFrame(e){const t=this.selectedCallFrame();if(!t)throw new Error("No call frame selected");return await t.evaluate(e)}functionDetailsPromise(e){return e.getAllProperties(!1,!1).then(function(e){if(!e)return null;let t=null;if(e.internalProperties)for(const s of e.internalProperties)"[[FunctionLocation]]"===s.name&&(t=s.value);let s=null;if(e.properties)for(const t of e.properties)"name"===t.name&&t.value&&"string"===t.value.type&&(s=t.value);let r=null;return t&&(r=this.createRawLocationByScriptId(t.value.scriptId,t.value.lineNumber,t.value.columnNumber)),{location:r,functionName:s?s.value:""}}.bind(this))}async setVariableValue(e,t,s,r){return(await this.agent.invoke_setVariableValue({scopeNumber:e,variableName:t,newValue:s,callFrameId:r})).getError()}addBreakpointListener(e,t,s){this.#Wr.addEventListener(e,t,s)}removeBreakpointListener(e,t,s){this.#Wr.removeEventListener(e,t,s)}async setBlackboxPatterns(e,t){return!(await this.agent.invoke_setBlackboxPatterns({patterns:e,skipAnonymous:t})).getError()}async setBlackboxExecutionContexts(e){return!(await this.agent.invoke_setBlackboxExecutionContexts({uniqueIds:e})).getError()}dispose(){this.#Ur&&fs.delete(this.#Ur),e.Settings.Settings.instance().moduleSetting("pause-on-exception-enabled").removeChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("pause-on-caught-exception").removeChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("disable-async-stack-traces").removeChangeListener(this.asyncStackTracesStateChanged,this)}async suspendModel(){await this.disableDebugger()}async resumeModel(){await this.enableDebugger()}static shouldResyncDebuggerId=!1;getEvaluateOnCallFrameCallback(){return this.evaluateOnCallFrameCallback}}const fs=new Map;var bs,ys;!function(e){e.DontPauseOnExceptions="none",e.PauseOnAllExceptions="all",e.PauseOnCaughtExceptions="caught",e.PauseOnUncaughtExceptions="uncaught"}(bs||(bs={})),function(e){e.DebuggerWasEnabled="DebuggerWasEnabled",e.DebuggerWasDisabled="DebuggerWasDisabled",e.DebuggerPaused="DebuggerPaused",e.DebuggerResumed="DebuggerResumed",e.DebugInfoAttached="DebugInfoAttached",e.ParsedScriptSource="ParsedScriptSource",e.DiscardedAnonymousScriptSource="DiscardedAnonymousScriptSource",e.GlobalObjectCleared="GlobalObjectCleared",e.CallFrameSelected="CallFrameSelected",e.DebuggerIsReadyToPause="DebuggerIsReadyToPause",e.ScriptSourceWasEdited="ScriptSourceWasEdited"}(ys||(ys={}));class vs{#$r;constructor(e){this.#$r=e}paused({callFrames:e,reason:t,data:s,hitBreakpoints:r,asyncStackTrace:i,asyncStackTraceId:n}){this.#$r.debuggerEnabled()&&this.#$r.pausedScript(e,t,s,r||[],i,n)}resumed(){this.#$r.debuggerEnabled()&&this.#$r.resumedScript()}scriptParsed({scriptId:e,url:t,startLine:s,startColumn:r,endLine:i,endColumn:n,executionContextId:o,hash:a,executionContextAuxData:l,isLiveEdit:c,sourceMapURL:d,hasSourceURL:h,length:u,isModule:g,stackTrace:m,codeOffset:p,scriptLanguage:f,debugSymbols:b,embedderName:y}){this.#$r.debuggerEnabled()&&this.#$r.parsedScriptSource(e,t,s,r,i,n,o,a,l,Boolean(c),d,Boolean(h),!1,u||0,g||null,m||null,p||null,f||null,b||null,y||null)}scriptFailedToParse({scriptId:e,url:t,startLine:s,startColumn:r,endLine:i,endColumn:n,executionContextId:o,hash:a,executionContextAuxData:l,sourceMapURL:c,hasSourceURL:d,length:h,isModule:u,stackTrace:g,codeOffset:m,scriptLanguage:p,embedderName:f}){this.#$r.debuggerEnabled()&&this.#$r.parsedScriptSource(e,t,s,r,i,n,o,a,l,!1,c,Boolean(d),!0,h||0,u||null,g||null,m||null,p||null,null,f||null)}breakpointResolved({breakpointId:e,location:t}){this.#$r.debuggerEnabled()&&this.#$r.breakpointResolved(e,t)}}let Is=class e{debuggerModel;scriptId;lineNumber;columnNumber;inlineFrameIndex;constructor(e,t,s,r,i){this.debuggerModel=e,this.scriptId=t,this.lineNumber=s,this.columnNumber=r||0,this.inlineFrameIndex=i||0}static fromPayload(t,s,r){return new e(t,s.scriptId,s.lineNumber,s.columnNumber,r)}payload(){return{scriptId:this.scriptId,lineNumber:this.lineNumber,columnNumber:this.columnNumber}}script(){return this.debuggerModel.scriptForId(this.scriptId)}continueToLocation(e){e&&(this.debuggerModel.continueToLocationCallback=this.paused.bind(this,e)),this.debuggerModel.agent.invoke_continueToLocation({location:this.payload(),targetCallFrames:"current"})}paused(e,t){const s=t.callFrames[0].location();return s.scriptId===this.scriptId&&s.lineNumber===this.lineNumber&&s.columnNumber===this.columnNumber&&(e(),!0)}id(){return this.debuggerModel.target().id()+":"+this.scriptId+":"+this.lineNumber+":"+this.columnNumber}};class ws extends Is{type;constructor(e,t,s,r,i){super(e,t,s,r),i&&(this.type=i)}static fromPayload(e,t){return new ws(e,t.scriptId,t.lineNumber,t.columnNumber,t.type)}}class Ss{debuggerModel;script;payload;#Qr;#Yr;#Jr;inlineFrameIndex;functionName;#Xr;#Zr;missingDebugInfoDetails;exception;canBeRestarted;constructor(e,t,s,r,i,n=null){this.debuggerModel=e,this.script=t,this.payload=s,this.#Qr=Is.fromPayload(e,s.location,r),this.#Yr=[],this.#Jr=null,this.inlineFrameIndex=r||0,this.functionName=i??s.functionName,this.missingDebugInfoDetails=null,this.canBeRestarted=Boolean(s.canBeRestarted),this.exception=n;for(let e=0;e<s.scopeChain.length;++e){const t=new ks(this,e);this.#Yr.push(t),"local"===t.type()&&(this.#Jr=t)}s.functionLocation&&(this.#Xr=Is.fromPayload(e,s.functionLocation)),this.#Zr=s.returnValue?this.debuggerModel.runtimeModel().createRemoteObject(s.returnValue):null}static fromPayloadArray(e,t,s){const r=[];for(let i=0;i<t.length;++i){const n=t[i],o=e.scriptForId(n.location.scriptId);if(o){const t=0===i?s:null;r.push(new Ss(e,o,n,void 0,void 0,t))}}return r}createVirtualCallFrame(e,t){return new Ss(this.debuggerModel,this.script,this.payload,e,t,this.exception)}get id(){return this.payload.callFrameId}scopeChain(){return this.#Yr}localScope(){return this.#Jr}thisObject(){return this.payload.this?this.debuggerModel.runtimeModel().createRemoteObject(this.payload.this):null}returnValue(){return this.#Zr}async setReturnValue(e){if(!this.#Zr)return null;const t=await this.debuggerModel.agent.invoke_evaluateOnCallFrame({callFrameId:this.id,expression:e,silent:!0,objectGroup:"backtrace"});return t.getError()||t.exceptionDetails||(await this.debuggerModel.agent.invoke_setReturnValue({newValue:t.result})).getError()?null:(this.#Zr=this.debuggerModel.runtimeModel().createRemoteObject(t.result),this.#Zr)}location(){return this.#Qr}functionLocation(){return this.#Xr||null}async evaluate(e){const t=this.debuggerModel,s=t.runtimeModel(),r=t.getEvaluateOnCallFrameCallback();if(r){const t=await r(this,e);if(t)return t}const i=await this.debuggerModel.agent.invoke_evaluateOnCallFrame({callFrameId:this.id,expression:e.expression,objectGroup:e.objectGroup,includeCommandLineAPI:e.includeCommandLineAPI,silent:e.silent,returnByValue:e.returnByValue,generatePreview:e.generatePreview,throwOnSideEffect:e.throwOnSideEffect,timeout:e.timeout}),n=i.getError();return n?{error:n}:{object:s.createRemoteObject(i.result),exceptionDetails:i.exceptionDetails}}async restart(){console.assert(this.canBeRestarted,"This frame can not be restarted."),await this.debuggerModel.agent.invoke_restartFrame({callFrameId:this.id,mode:"StepInto"})}getPayload(){return this.payload}}class ks{#ei;#ti;#g;#h;#si;#ri;#ls;constructor(e,t){this.#ei=e,this.#ti=e.getPayload().scopeChain[t],this.#g=this.#ti.type,this.#h=this.#ti.name,this.#si=t,this.#ls=null;const s=this.#ti.startLocation?Is.fromPayload(e.debuggerModel,this.#ti.startLocation):null,r=this.#ti.endLocation?Is.fromPayload(e.debuggerModel,this.#ti.endLocation):null;s&&r&&s.scriptId===r.scriptId?this.#ri={start:s,end:r}:this.#ri=null}callFrame(){return this.#ei}type(){return this.#g}typeName(){switch(this.#g){case"local":return us(cs.local);case"closure":return us(cs.closure);case"catch":return us(cs.catchBlock);case"eval":return n.i18n.lockedString("Eval");case"block":return us(cs.block);case"script":return us(cs.script);case"with":return us(cs.withBlock);case"global":return us(cs.global);case"module":return us(cs.module);case"wasm-expression-stack":return us(cs.expression)}return""}name(){return this.#h}range(){return this.#ri}object(){if(this.#ls)return this.#ls;const e=this.#ei.debuggerModel.runtimeModel(),t="with"!==this.#g&&"global"!==this.#g;return this.#ls=t?e.createScopeRemoteObject(this.#ti.object,new Un(this.#si,this.#ei.id)):e.createRemoteObject(this.#ti.object),this.#ls}description(){return"with"!==this.#g&&"global"!==this.#g?"":this.#ti.object.description||""}icon(){}extraProperties(){if(0!==this.#si||"local"!==this.#g||this.#ei.script.isWasm())return[];const e=[],t=this.#ei.exception;t&&e.push(new qn(us(cs.exception),t,void 0,void 0,void 0,void 0,void 0,!0));const s=this.#ei.returnValue();return s&&e.push(new qn(us(cs.returnValue),s,void 0,void 0,void 0,void 0,void 0,!0,this.#ei.setReturnValue.bind(this.#ei))),e}}class Cs{debuggerModel;callFrames;reason;auxData;breakpointIds;asyncStackTrace;asyncStackTraceId;constructor(e,t,s,r,i,n,o){this.debuggerModel=e,this.reason=s,this.auxData=r,this.breakpointIds=i,n&&(this.asyncStackTrace=this.cleanRedundantFrames(n)),this.asyncStackTraceId=o,this.callFrames=Ss.fromPayloadArray(e,t,this.exception())}exception(){return"exception"!==this.reason&&"promiseRejection"!==this.reason?null:this.debuggerModel.runtimeModel().createRemoteObject(this.auxData)}cleanRedundantFrames(e){let t=e,s=null;for(;t;)s&&!t.callFrames.length?s.parent=t.parent:s=t,t=t.parent;return e}}h.register(ms,{capabilities:4,autostart:!0});const xs="debugger://logpoint",Rs="debugger://breakpoint";var Ts=Object.freeze({__proto__:null,BreakLocation:ws,COND_BREAKPOINT_SOURCE_URL:Rs,CallFrame:Ss,DebuggerModel:ms,DebuggerPausedDetails:Cs,get Events(){return ys},LOGPOINT_SOURCE_URL:xs,Location:Is,get PauseOnExceptionsState(){return bs},Scope:ks,WASM_SYMBOLS_PRIORITY:ps,sortAndMergeRanges:gs});class Ms{#ii;#ni;constructor(){const t="rgba";this.#ii=[new e.Color.Legacy([.9607843137254902,.592156862745098,.5803921568627451,1],t),new e.Color.Legacy([.9411764705882353,.7490196078431373,.2980392156862745,1],t),new e.Color.Legacy([.8313725490196079,.9294117647058824,.19215686274509805,1],t),new e.Color.Legacy([.6196078431372549,.9215686274509803,.2784313725490196,1],t),new e.Color.Legacy([.3568627450980392,.8196078431372549,.8431372549019608,1],t),new e.Color.Legacy([.7372549019607844,.807843137254902,.984313725490196,1],t),new e.Color.Legacy([.7764705882352941,.7450980392156863,.9333333333333333,1],t),new e.Color.Legacy([.8156862745098039,.5803921568627451,.9176470588235294,1],t),new e.Color.Legacy([.9215686274509803,.5803921568627451,.8117647058823529,1],t)],this.#ni=0}next(){const e=this.#ii[this.#ni];return this.#ni++,this.#ni>=this.#ii.length&&(this.#ni=0),e}}var Ps=Object.freeze({__proto__:null,OverlayColorGenerator:Ms});class Es{#oi;#ii=new Map;#ai=e.Settings.Settings.instance().createLocalSetting("persistent-highlight-setting",[]);#li=new Map;#ci=new Map;#di=new Map;#hi=new Map;#ui=new Map;#gi=new Ms;#mi=new Ms;#pi=e.Settings.Settings.instance().moduleSetting("show-grid-line-labels");#fi=e.Settings.Settings.instance().moduleSetting("extend-grid-lines");#bi=e.Settings.Settings.instance().moduleSetting("show-grid-areas");#yi=e.Settings.Settings.instance().moduleSetting("show-grid-track-sizes");#wi;constructor(e,t){this.#oi=e,this.#wi=t,this.#pi.addChangeListener(this.onSettingChange,this),this.#fi.addChangeListener(this.onSettingChange,this),this.#bi.addChangeListener(this.onSettingChange,this),this.#yi.addChangeListener(this.onSettingChange,this)}onSettingChange(){this.resetOverlay()}buildGridHighlightConfig(e){const t=this.colorOfGrid(e).asLegacyColor(),s=t.setAlpha(.1).asLegacyColor(),r=t.setAlpha(.3).asLegacyColor(),i=t.setAlpha(.8).asLegacyColor(),n=this.#fi.get(),o="lineNumbers"===this.#pi.get(),a=o,l="lineNames"===this.#pi.get();return{rowGapColor:r.toProtocolRGBA(),rowHatchColor:i.toProtocolRGBA(),columnGapColor:r.toProtocolRGBA(),columnHatchColor:i.toProtocolRGBA(),gridBorderColor:t.toProtocolRGBA(),gridBorderDash:!1,rowLineColor:t.toProtocolRGBA(),columnLineColor:t.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0,showGridExtensionLines:n,showPositiveLineNumbers:o,showNegativeLineNumbers:a,showLineNames:l,showAreaNames:this.#bi.get(),showTrackSizes:this.#yi.get(),areaBorderColor:t.toProtocolRGBA(),gridBackgroundColor:s.toProtocolRGBA()}}buildFlexContainerHighlightConfig(e){const t=this.colorOfFlex(e).asLegacyColor();return{containerBorder:{color:t.toProtocolRGBA(),pattern:"dashed"},itemSeparator:{color:t.toProtocolRGBA(),pattern:"dotted"},lineSeparator:{color:t.toProtocolRGBA(),pattern:"dashed"},mainDistributedSpace:{hatchColor:t.toProtocolRGBA()},crossDistributedSpace:{hatchColor:t.toProtocolRGBA()}}}buildScrollSnapContainerHighlightConfig(t){return{snapAreaBorder:{color:e.Color.PageHighlight.GridBorder.toProtocolRGBA(),pattern:"dashed"},snapportBorder:{color:e.Color.PageHighlight.GridBorder.toProtocolRGBA()},scrollMarginColor:e.Color.PageHighlight.Margin.toProtocolRGBA(),scrollPaddingColor:e.Color.PageHighlight.Padding.toProtocolRGBA()}}highlightGridInOverlay(e){this.#li.set(e,this.buildGridHighlightConfig(e)),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#wi.onGridOverlayStateChanged({nodeId:e,enabled:!0})}isGridHighlighted(e){return this.#li.has(e)}colorOfGrid(e){let t=this.#ii.get(e);return t||(t=this.#gi.next(),this.#ii.set(e,t)),t}setColorOfGrid(e,t){this.#ii.set(e,t)}hideGridInOverlay(e){this.#li.has(e)&&(this.#li.delete(e),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#wi.onGridOverlayStateChanged({nodeId:e,enabled:!1}))}highlightScrollSnapInOverlay(e){this.#ci.set(e,this.buildScrollSnapContainerHighlightConfig(e)),this.updateHighlightsInOverlay(),this.#wi.onScrollSnapOverlayStateChanged({nodeId:e,enabled:!0}),this.savePersistentHighlightSetting()}isScrollSnapHighlighted(e){return this.#ci.has(e)}hideScrollSnapInOverlay(e){this.#ci.has(e)&&(this.#ci.delete(e),this.updateHighlightsInOverlay(),this.#wi.onScrollSnapOverlayStateChanged({nodeId:e,enabled:!1}),this.savePersistentHighlightSetting())}highlightFlexInOverlay(e){this.#di.set(e,this.buildFlexContainerHighlightConfig(e)),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#wi.onFlexOverlayStateChanged({nodeId:e,enabled:!0})}isFlexHighlighted(e){return this.#di.has(e)}colorOfFlex(e){let t=this.#ii.get(e);return t||(t=this.#mi.next(),this.#ii.set(e,t)),t}setColorOfFlex(e,t){this.#ii.set(e,t)}hideFlexInOverlay(e){this.#di.has(e)&&(this.#di.delete(e),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#wi.onFlexOverlayStateChanged({nodeId:e,enabled:!1}))}highlightContainerQueryInOverlay(e){this.#hi.set(e,this.buildContainerQueryContainerHighlightConfig()),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#wi.onContainerQueryOverlayStateChanged({nodeId:e,enabled:!0})}hideContainerQueryInOverlay(e){this.#hi.has(e)&&(this.#hi.delete(e),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#wi.onContainerQueryOverlayStateChanged({nodeId:e,enabled:!1}))}isContainerQueryHighlighted(e){return this.#hi.has(e)}buildContainerQueryContainerHighlightConfig(){return{containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},descendantBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"}}}highlightIsolatedElementInOverlay(e){this.#ui.set(e,this.buildIsolationModeHighlightConfig()),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting()}hideIsolatedElementInOverlay(e){this.#ui.has(e)&&(this.#ui.delete(e),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting())}isIsolatedElementHighlighted(e){return this.#ui.has(e)}buildIsolationModeHighlightConfig(){return{resizerColor:e.Color.IsolationModeHighlight.Resizer.toProtocolRGBA(),resizerHandleColor:e.Color.IsolationModeHighlight.ResizerHandle.toProtocolRGBA(),maskColor:e.Color.IsolationModeHighlight.Mask.toProtocolRGBA()}}hideAllInOverlayWithoutSave(){this.#di.clear(),this.#li.clear(),this.#ci.clear(),this.#hi.clear(),this.#ui.clear(),this.updateHighlightsInOverlay()}refreshHighlights(){const e=this.updateHighlightsForDeletedNodes(this.#li),t=this.updateHighlightsForDeletedNodes(this.#di),s=this.updateHighlightsForDeletedNodes(this.#ci),r=this.updateHighlightsForDeletedNodes(this.#hi),i=this.updateHighlightsForDeletedNodes(this.#ui);(t||e||s||r||i)&&(this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting())}updateHighlightsForDeletedNodes(e){let t=!1;for(const s of e.keys())null===this.#oi.getDOMModel().nodeForId(s)&&(e.delete(s),t=!0);return t}resetOverlay(){for(const e of this.#li.keys())this.#li.set(e,this.buildGridHighlightConfig(e));for(const e of this.#di.keys())this.#di.set(e,this.buildFlexContainerHighlightConfig(e));for(const e of this.#ci.keys())this.#ci.set(e,this.buildScrollSnapContainerHighlightConfig(e));for(const e of this.#hi.keys())this.#hi.set(e,this.buildContainerQueryContainerHighlightConfig());for(const e of this.#ui.keys())this.#ui.set(e,this.buildIsolationModeHighlightConfig());this.updateHighlightsInOverlay()}updateHighlightsInOverlay(){const e=this.#li.size>0||this.#di.size>0||this.#hi.size>0||this.#ui.size>0;this.#oi.setShowViewportSizeOnResize(!e),this.updateGridHighlightsInOverlay(),this.updateFlexHighlightsInOverlay(),this.updateScrollSnapHighlightsInOverlay(),this.updateContainerQueryHighlightsInOverlay(),this.updateIsolatedElementHighlightsInOverlay()}updateGridHighlightsInOverlay(){const e=this.#oi,t=[];for(const[e,s]of this.#li.entries())t.push({nodeId:e,gridHighlightConfig:s});e.target().overlayAgent().invoke_setShowGridOverlays({gridNodeHighlightConfigs:t})}updateFlexHighlightsInOverlay(){const e=this.#oi,t=[];for(const[e,s]of this.#di.entries())t.push({nodeId:e,flexContainerHighlightConfig:s});e.target().overlayAgent().invoke_setShowFlexOverlays({flexNodeHighlightConfigs:t})}updateScrollSnapHighlightsInOverlay(){const e=this.#oi,t=[];for(const[e,s]of this.#ci.entries())t.push({nodeId:e,scrollSnapContainerHighlightConfig:s});e.target().overlayAgent().invoke_setShowScrollSnapOverlays({scrollSnapHighlightConfigs:t})}updateContainerQueryHighlightsInOverlay(){const e=this.#oi,t=[];for(const[e,s]of this.#hi.entries())t.push({nodeId:e,containerQueryContainerHighlightConfig:s});e.target().overlayAgent().invoke_setShowContainerQueryOverlays({containerQueryHighlightConfigs:t})}updateIsolatedElementHighlightsInOverlay(){const e=this.#oi,t=[];for(const[e,s]of this.#ui.entries())t.push({nodeId:e,isolationModeHighlightConfig:s});e.target().overlayAgent().invoke_setShowIsolatedElements({isolatedElementHighlightConfigs:t})}async restoreHighlightsForDocument(){this.#di=new Map,this.#li=new Map,this.#ci=new Map,this.#hi=new Map,this.#ui=new Map;const e=await this.#oi.getDOMModel().requestDocument(),t=e?e.documentURL:r.DevToolsPath.EmptyUrlString;await Promise.all(this.#ai.get().map(async e=>{if(e.url===t)return await this.#oi.getDOMModel().pushNodeByPathToFrontend(e.path).then(t=>{const s=this.#oi.getDOMModel().nodeForId(t);if(s)switch(e.type){case"GRID":this.#li.set(s.id,this.buildGridHighlightConfig(s.id)),this.#wi.onGridOverlayStateChanged({nodeId:s.id,enabled:!0});break;case"FLEX":this.#di.set(s.id,this.buildFlexContainerHighlightConfig(s.id)),this.#wi.onFlexOverlayStateChanged({nodeId:s.id,enabled:!0});break;case"CONTAINER_QUERY":this.#hi.set(s.id,this.buildContainerQueryContainerHighlightConfig()),this.#wi.onContainerQueryOverlayStateChanged({nodeId:s.id,enabled:!0});break;case"SCROLL_SNAP":this.#ci.set(s.id,this.buildScrollSnapContainerHighlightConfig(s.id)),this.#wi.onScrollSnapOverlayStateChanged({nodeId:s.id,enabled:!0});break;case"ISOLATED_ELEMENT":this.#ui.set(s.id,this.buildIsolationModeHighlightConfig())}})})),this.updateHighlightsInOverlay()}currentUrl(){const e=this.#oi.getDOMModel().existingDocument();return e?e.documentURL:r.DevToolsPath.EmptyUrlString}getPersistentHighlightSettingForOneType(e,t){const s=[];for(const r of e.keys()){const e=this.#oi.getDOMModel().nodeForId(r);e&&s.push({url:this.currentUrl(),path:e.path(),type:t})}return s}savePersistentHighlightSetting(){const e=this.currentUrl(),t=[...this.#ai.get().filter(t=>t.url!==e),...this.getPersistentHighlightSettingForOneType(this.#li,"GRID"),...this.getPersistentHighlightSettingForOneType(this.#di,"FLEX"),...this.getPersistentHighlightSettingForOneType(this.#hi,"CONTAINER_QUERY"),...this.getPersistentHighlightSettingForOneType(this.#ci,"SCROLL_SNAP"),...this.getPersistentHighlightSettingForOneType(this.#ui,"ISOLATED_ELEMENT")];this.#ai.set(t)}}var Ls=Object.freeze({__proto__:null,OverlayPersistentHighlighter:Es});const As={pausedInDebugger:"Paused in debugger"},Os=n.i18n.registerUIStrings("core/sdk/OverlayModel.ts",As),Ds=n.i18n.getLocalizedString.bind(void 0,Os),Ns={mac:{x:85,y:0,width:185,height:40},linux:{x:0,y:0,width:196,height:34},windows:{x:0,y:0,width:238,height:33}};class Fs extends h{#Xs;overlayAgent;#$r;#vi=!1;#ki=null;#Si;#xi;#Ci;#Ii;#Ri;#Ti;#Pi;#Ei;#Mi=[];#Li=!0;#Ai;#Oi;#Di=!1;#Ni;constructor(t){super(t),this.#Xs=t.model(Gs),t.registerOverlayDispatcher(this),this.overlayAgent=t.overlayAgent(),this.#$r=t.model(ms),this.#$r&&(e.Settings.Settings.instance().moduleSetting("disable-paused-state-overlay").addChangeListener(this.updatePausedInDebuggerMessage,this),this.#$r.addEventListener(ys.DebuggerPaused,this.updatePausedInDebuggerMessage,this),this.#$r.addEventListener(ys.DebuggerResumed,this.updatePausedInDebuggerMessage,this),this.#$r.addEventListener(ys.GlobalObjectCleared,this.updatePausedInDebuggerMessage,this)),this.#Si=new _s(this),this.#xi=this.#Si,this.#Ci=e.Settings.Settings.instance().moduleSetting("show-paint-rects"),this.#Ii=e.Settings.Settings.instance().moduleSetting("show-layout-shift-regions"),this.#Ri=e.Settings.Settings.instance().moduleSetting("show-ad-highlights"),this.#Ti=e.Settings.Settings.instance().moduleSetting("show-debug-borders"),this.#Pi=e.Settings.Settings.instance().moduleSetting("show-fps-counter"),this.#Ei=e.Settings.Settings.instance().moduleSetting("show-scroll-bottleneck-rects"),t.suspended()||(this.overlayAgent.invoke_enable(),this.wireAgentToSettings()),this.#Ai=new Es(this,{onGridOverlayStateChanged:({nodeId:e,enabled:t})=>this.dispatchEventToListeners("PersistentGridOverlayStateChanged",{nodeId:e,enabled:t}),onFlexOverlayStateChanged:({nodeId:e,enabled:t})=>this.dispatchEventToListeners("PersistentFlexContainerOverlayStateChanged",{nodeId:e,enabled:t}),onContainerQueryOverlayStateChanged:({nodeId:e,enabled:t})=>this.dispatchEventToListeners("PersistentContainerQueryOverlayStateChanged",{nodeId:e,enabled:t}),onScrollSnapOverlayStateChanged:({nodeId:e,enabled:t})=>this.dispatchEventToListeners("PersistentScrollSnapOverlayStateChanged",{nodeId:e,enabled:t})}),this.#Xs.addEventListener(Us.NodeRemoved,()=>{this.#Ai&&this.#Ai.refreshHighlights()}),this.#Xs.addEventListener(Us.DocumentUpdated,()=>{this.#Ai&&(this.#Ai.hideAllInOverlayWithoutSave(),t.suspended()||this.#Ai.restoreHighlightsForDocument())}),this.#Oi=new Hs(this),this.#Ni=new Bs(this.#Xs.cssModel())}static highlightObjectAsDOMNode(e){const t=e.runtimeModel().target().model(Gs);t&&t.overlayModel().highlightInOverlay({object:e,selectorList:void 0})}static hideDOMNodeHighlight(){for(const e of W.instance().models(Fs))e.delayedHideHighlight(0)}static async muteHighlight(){return await Promise.all(W.instance().models(Fs).map(e=>e.suspendModel()))}static async unmuteHighlight(){return await Promise.all(W.instance().models(Fs).map(e=>e.resumeModel()))}static highlightRect(e){for(const t of W.instance().models(Fs))t.highlightRect(e)}static clearHighlight(){for(const e of W.instance().models(Fs))e.clearHighlight()}getDOMModel(){return this.#Xs}highlightRect({x:e,y:t,width:s,height:r,color:i,outlineColor:n}){const o=i||{r:255,g:0,b:255,a:.3},a=n||{r:255,g:0,b:255,a:.5};return this.overlayAgent.invoke_highlightRect({x:e,y:t,width:s,height:r,color:o,outlineColor:a})}clearHighlight(){return this.overlayAgent.invoke_hideHighlight()}async wireAgentToSettings(){this.#Mi=[this.#Ci.addChangeListener(()=>this.overlayAgent.invoke_setShowPaintRects({result:this.#Ci.get()})),this.#Ii.addChangeListener(()=>this.overlayAgent.invoke_setShowLayoutShiftRegions({result:this.#Ii.get()})),this.#Ri.addChangeListener(()=>this.overlayAgent.invoke_setShowAdHighlights({show:this.#Ri.get()})),this.#Ti.addChangeListener(()=>this.overlayAgent.invoke_setShowDebugBorders({show:this.#Ti.get()})),this.#Pi.addChangeListener(()=>this.overlayAgent.invoke_setShowFPSCounter({show:this.#Pi.get()})),this.#Ei.addChangeListener(()=>this.overlayAgent.invoke_setShowScrollBottleneckRects({show:this.#Ei.get()}))],this.#Ci.get()&&this.overlayAgent.invoke_setShowPaintRects({result:!0}),this.#Ii.get()&&this.overlayAgent.invoke_setShowLayoutShiftRegions({result:!0}),this.#Ri.get()&&this.overlayAgent.invoke_setShowAdHighlights({show:!0}),this.#Ti.get()&&this.overlayAgent.invoke_setShowDebugBorders({show:!0}),this.#Pi.get()&&this.overlayAgent.invoke_setShowFPSCounter({show:!0}),this.#Ei.get()&&this.overlayAgent.invoke_setShowScrollBottleneckRects({show:!0}),this.#$r&&this.#$r.isPaused()&&this.updatePausedInDebuggerMessage(),await this.overlayAgent.invoke_setShowViewportSizeOnResize({show:this.#Li}),this.#Ai?.resetOverlay()}async suspendModel(){e.EventTarget.removeEventListeners(this.#Mi),await this.overlayAgent.invoke_disable()}async resumeModel(){await Promise.all([this.overlayAgent.invoke_enable(),this.wireAgentToSettings()])}setShowViewportSizeOnResize(e){this.#Li!==e&&(this.#Li=e,this.target().suspended()||this.overlayAgent.invoke_setShowViewportSizeOnResize({show:e}))}updatePausedInDebuggerMessage(){if(this.target().suspended())return;const t=this.#$r&&this.#$r.isPaused()&&!e.Settings.Settings.instance().moduleSetting("disable-paused-state-overlay").get()?Ds(As.pausedInDebugger):void 0;this.overlayAgent.invoke_setPausedInDebuggerMessage({message:t})}setHighlighter(e){this.#xi=e||this.#Si}async setInspectMode(e,t=!0){await this.#Xs.requestDocument(),this.#vi="none"!==e,this.dispatchEventToListeners("InspectModeWillBeToggled",this),this.#xi.setInspectMode(e,this.buildHighlightConfig("all",t))}inspectModeEnabled(){return this.#vi}highlightInOverlay(e,t,s){if(this.#Di)return;this.#ki&&(clearTimeout(this.#ki),this.#ki=null);const r=this.buildHighlightConfig(t);void 0!==s&&(r.showInfo=s),this.#xi.highlightInOverlay(e,r)}highlightInOverlayForTwoSeconds(e){this.highlightInOverlay(e),this.delayedHideHighlight(2e3)}highlightGridInPersistentOverlay(e){this.#Ai&&this.#Ai.highlightGridInOverlay(e)}isHighlightedGridInPersistentOverlay(e){return!!this.#Ai&&this.#Ai.isGridHighlighted(e)}hideGridInPersistentOverlay(e){this.#Ai&&this.#Ai.hideGridInOverlay(e)}highlightScrollSnapInPersistentOverlay(e){this.#Ai&&this.#Ai.highlightScrollSnapInOverlay(e)}isHighlightedScrollSnapInPersistentOverlay(e){return!!this.#Ai&&this.#Ai.isScrollSnapHighlighted(e)}hideScrollSnapInPersistentOverlay(e){this.#Ai&&this.#Ai.hideScrollSnapInOverlay(e)}highlightFlexContainerInPersistentOverlay(e){this.#Ai&&this.#Ai.highlightFlexInOverlay(e)}isHighlightedFlexContainerInPersistentOverlay(e){return!!this.#Ai&&this.#Ai.isFlexHighlighted(e)}hideFlexContainerInPersistentOverlay(e){this.#Ai&&this.#Ai.hideFlexInOverlay(e)}highlightContainerQueryInPersistentOverlay(e){this.#Ai&&this.#Ai.highlightContainerQueryInOverlay(e)}isHighlightedContainerQueryInPersistentOverlay(e){return!!this.#Ai&&this.#Ai.isContainerQueryHighlighted(e)}hideContainerQueryInPersistentOverlay(e){this.#Ai&&this.#Ai.hideContainerQueryInOverlay(e)}highlightSourceOrderInOverlay(t){const s={parentOutlineColor:e.Color.SourceOrderHighlight.ParentOutline.toProtocolRGBA(),childOutlineColor:e.Color.SourceOrderHighlight.ChildOutline.toProtocolRGBA()};this.#Oi.highlightSourceOrderInOverlay(t,s)}colorOfGridInPersistentOverlay(e){return this.#Ai?this.#Ai.colorOfGrid(e).asString("hex"):null}setColorOfGridInPersistentOverlay(t,s){if(!this.#Ai)return;const r=e.Color.parse(s);r&&(this.#Ai.setColorOfGrid(t,r),this.#Ai.resetOverlay())}colorOfFlexInPersistentOverlay(e){return this.#Ai?this.#Ai.colorOfFlex(e).asString("hex"):null}setColorOfFlexInPersistentOverlay(t,s){if(!this.#Ai)return;const r=e.Color.parse(s);r&&(this.#Ai.setColorOfFlex(t,r),this.#Ai.resetOverlay())}hideSourceOrderInOverlay(){this.#Oi.hideSourceOrderHighlight()}setSourceOrderActive(e){this.#Di=e}sourceOrderModeActive(){return this.#Di}delayedHideHighlight(e){null===this.#ki&&(this.#ki=window.setTimeout(()=>this.highlightInOverlay({clear:!0}),e))}highlightFrame(e){this.#ki&&(clearTimeout(this.#ki),this.#ki=null),this.#xi.highlightFrame(e)}showHingeForDualScreen(e){if(e){const{x:t,y:s,width:r,height:i,contentColor:n,outlineColor:o}=e;this.overlayAgent.invoke_setShowHinge({hingeConfig:{rect:{x:t,y:s,width:r,height:i},contentColor:n,outlineColor:o}})}else this.overlayAgent.invoke_setShowHinge({})}setWindowControlsPlatform(e){this.#Ni.selectedPlatform=e}setWindowControlsThemeColor(e){this.#Ni.themeColor=e}getWindowControlsConfig(){return this.#Ni.config}async toggleWindowControlsToolbar(e){const t=e?{windowControlsOverlayConfig:this.#Ni.config}:{},s=this.overlayAgent.invoke_setShowWindowControlsOverlay(t),r=this.#Ni.toggleEmulatedOverlay(e);await Promise.all([s,r]),this.setShowViewportSizeOnResize(!e)}buildHighlightConfig(t="all",s=!1){const r=e.Settings.Settings.instance().moduleSetting("show-metrics-rulers").get(),i={showInfo:"all"===t||"container-outline"===t,showRulers:r,showStyles:s,showAccessibilityInfo:s,showExtensionLines:r,gridHighlightConfig:{},flexContainerHighlightConfig:{},flexItemHighlightConfig:{},contrastAlgorithm:o.Runtime.experiments.isEnabled("apca")?"apca":"aa"};return"all"!==t&&"content"!==t||(i.contentColor=e.Color.PageHighlight.Content.toProtocolRGBA()),"all"!==t&&"padding"!==t||(i.paddingColor=e.Color.PageHighlight.Padding.toProtocolRGBA()),"all"!==t&&"border"!==t||(i.borderColor=e.Color.PageHighlight.Border.toProtocolRGBA()),"all"!==t&&"margin"!==t||(i.marginColor=e.Color.PageHighlight.Margin.toProtocolRGBA()),"all"===t&&(i.eventTargetColor=e.Color.PageHighlight.EventTarget.toProtocolRGBA(),i.shapeColor=e.Color.PageHighlight.Shape.toProtocolRGBA(),i.shapeMarginColor=e.Color.PageHighlight.ShapeMargin.toProtocolRGBA(),i.gridHighlightConfig={rowGapColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA(),rowHatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),columnGapColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA(),columnHatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),rowLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0},i.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},itemSeparator:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dotted"},lineSeparator:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},mainDistributedSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()},crossDistributedSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()},rowGapSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()},columnGapSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()}},i.flexItemHighlightConfig={baseSizeBox:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA()},baseSizeBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dotted"},flexibilityArrow:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA()}}),t.endsWith("gap")&&(i.gridHighlightConfig={gridBorderColor:e.Color.PageHighlight.GridBorder.toProtocolRGBA(),gridBorderDash:!0},"gap"!==t&&"row-gap"!==t||(i.gridHighlightConfig.rowGapColor=e.Color.PageHighlight.GapBackground.toProtocolRGBA(),i.gridHighlightConfig.rowHatchColor=e.Color.PageHighlight.GapHatch.toProtocolRGBA()),"gap"!==t&&"column-gap"!==t||(i.gridHighlightConfig.columnGapColor=e.Color.PageHighlight.GapBackground.toProtocolRGBA(),i.gridHighlightConfig.columnHatchColor=e.Color.PageHighlight.GapHatch.toProtocolRGBA())),t.endsWith("gap")&&(i.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"}},"gap"!==t&&"row-gap"!==t||(i.flexContainerHighlightConfig.rowGapSpace={hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()}),"gap"!==t&&"column-gap"!==t||(i.flexContainerHighlightConfig.columnGapSpace={hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()})),"grid-areas"===t&&(i.gridHighlightConfig={rowLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0,showAreaNames:!0,areaBorderColor:e.Color.PageHighlight.GridAreaBorder.toProtocolRGBA()}),"grid-template-columns"===t&&(i.contentColor=e.Color.PageHighlight.Content.toProtocolRGBA(),i.gridHighlightConfig={columnLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineDash:!0}),"grid-template-rows"===t&&(i.contentColor=e.Color.PageHighlight.Content.toProtocolRGBA(),i.gridHighlightConfig={rowLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0}),"justify-content"===t&&(i.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},mainDistributedSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()}}),"align-content"===t&&(i.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},crossDistributedSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()}}),"align-items"===t&&(i.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},lineSeparator:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},crossAlignment:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA()}}),"flexibility"===t&&(i.flexItemHighlightConfig={baseSizeBox:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA()},baseSizeBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dotted"},flexibilityArrow:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA()}}),"container-outline"===t&&(i.containerQueryContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"}}),i}nodeHighlightRequested({nodeId:e}){const t=this.#Xs.nodeForId(e);t&&this.dispatchEventToListeners("HighlightNodeRequested",t)}static setInspectNodeHandler(e){Fs.inspectNodeHandler=e}inspectNodeRequested({backendNodeId:t}){const s=new js(this.target(),t);Fs.inspectNodeHandler?s.resolvePromise().then(e=>{e&&Fs.inspectNodeHandler&&Fs.inspectNodeHandler(e)}):e.Revealer.reveal(s),this.dispatchEventToListeners("InspectModeExited")}screenshotRequested({viewport:e}){this.dispatchEventToListeners("ScreenshotRequested",e),this.dispatchEventToListeners("InspectModeExited")}inspectModeCanceled(){this.dispatchEventToListeners("InspectModeExited")}static inspectNodeHandler=null;getOverlayAgent(){return this.overlayAgent}async hasStyleSheetText(e){return await this.#Ni.initializeStyleSheetText(e)}}class Bs{#lt;#Fi;#_i;#Ui;#Bi={showCSS:!1,selectedPlatform:"Windows",themeColor:"#ffffff"};constructor(e){this.#lt=e}get selectedPlatform(){return this.#Bi.selectedPlatform}set selectedPlatform(e){this.#Bi.selectedPlatform=e}get themeColor(){return this.#Bi.themeColor}set themeColor(e){this.#Bi.themeColor=e}get config(){return this.#Bi}async initializeStyleSheetText(e){if(this.#Fi&&e===this.#Ui)return!0;const t=this.#Hi(e);if(!t)return!1;if(this.#_i=this.#qi(t),!this.#_i)return!1;const s=await this.#lt.getStyleSheetText(this.#_i);return!!s&&(this.#Fi=s,this.#Ui=e,!0)}async toggleEmulatedOverlay(e){if(this.#_i&&this.#Fi)if(e){const e=Bs.#zi(this.#Bi.selectedPlatform.toLowerCase(),this.#Fi);e&&await this.#lt.setStyleSheetText(this.#_i,e,!1)}else await this.#lt.setStyleSheetText(this.#_i,this.#Fi,!1)}static#zi(e,t){const s=Ns[e];return Bs.#ji(s.x,s.y,s.width,s.height,t)}#Hi(t){const s=e.ParsedURL.ParsedURL.extractOrigin(t),r=this.#lt.styleSheetHeaders().find(e=>e.sourceURL&&e.sourceURL.includes(s));return r?.sourceURL}#qi(e){const t=this.#lt.getStyleSheetIdsForURL(e);return t.length>0?t[0]:void 0}static#ji(e,t,s,r,i){if(i)return i.replace(/: env\(titlebar-area-x(?:,[^)]*)?\);/g,`: env(titlebar-area-x, ${e}px);`).replace(/: env\(titlebar-area-y(?:,[^)]*)?\);/g,`: env(titlebar-area-y, ${t}px);`).replace(/: env\(titlebar-area-width(?:,[^)]*)?\);/g,`: env(titlebar-area-width, calc(100% - ${s}px));`).replace(/: env\(titlebar-area-height(?:,[^)]*)?\);/g,`: env(titlebar-area-height, ${r}px);`)}transformStyleSheetforTesting(e,t,s,r,i){return Bs.#ji(e,t,s,r,i)}}class _s{#oi;constructor(e){this.#oi=e}highlightInOverlay(e,t){const{node:s,deferredNode:r,object:i,selectorList:n}={node:void 0,deferredNode:void 0,object:void 0,selectorList:void 0,...e},o=s?s.id:void 0,a=r?r.backendNodeId():void 0,l=i?i.objectId:void 0;o||a||l?this.#oi.target().overlayAgent().invoke_highlightNode({highlightConfig:t,nodeId:o,backendNodeId:a,objectId:l,selector:n}):this.#oi.target().overlayAgent().invoke_hideHighlight()}async setInspectMode(e,t){await this.#oi.target().overlayAgent().invoke_setInspectMode({mode:e,highlightConfig:t})}highlightFrame(t){this.#oi.target().overlayAgent().invoke_highlightFrame({frameId:t,contentColor:e.Color.PageHighlight.Content.toProtocolRGBA(),contentOutlineColor:e.Color.PageHighlight.ContentOutline.toProtocolRGBA()})}}class Hs{#oi;constructor(e){this.#oi=e}highlightSourceOrderInOverlay(e,t){this.#oi.setSourceOrderActive(!0),this.#oi.setShowViewportSizeOnResize(!1),this.#oi.getOverlayAgent().invoke_highlightSourceOrder({sourceOrderConfig:t,nodeId:e.id})}hideSourceOrderHighlight(){this.#oi.setSourceOrderActive(!1),this.#oi.setShowViewportSizeOnResize(!0),this.#oi.clearHighlight()}}h.register(Fs,{capabilities:2,autostart:!0});var Us,qs=Object.freeze({__proto__:null,OverlayModel:Fs,SourceOrderHighlighter:Hs,WindowControls:Bs});class zs{#Wi;#Vi;ownerDocument;#Gi;id;index=void 0;#Ki;#$i;#Qi;#Yi;nodeValueInternal;#Ji;#Xi;#Zi;#en;#tn;#sn;#rn;#in=null;#nn=new Map;#on=[];assignedSlot=null;shadowRootsInternal=[];#an=new Map;#ln=new Map;#cn=0;childNodeCountInternal;childrenInternal=null;nextSibling=null;previousSibling=null;firstChild=null;lastChild=null;parentNode=null;templateContentInternal;contentDocumentInternal;childDocumentPromiseForTesting;#dn;publicId;systemId;internalSubset;name;value;constructor(e){this.#Wi=e,this.#Vi=this.#Wi.getAgent()}static create(e,t,s,r){const i=new zs(e);return i.init(t,s,r),i}init(e,t,s){if(this.#Vi=this.#Wi.getAgent(),this.ownerDocument=e,this.#Gi=t,this.id=s.nodeId,this.#Ki=s.backendNodeId,this.#Wi.registerNode(this),this.#$i=s.nodeType,this.#Qi=s.nodeName,this.#Yi=s.localName,this.nodeValueInternal=s.nodeValue,this.#Ji=s.pseudoType,this.#Xi=s.pseudoIdentifier,this.#Zi=s.shadowRootType,this.#en=s.frameId||null,this.#tn=s.xmlVersion,this.#sn=Boolean(s.isSVG),this.#rn=Boolean(s.isScrollable),s.attributes&&this.setAttributesPayload(s.attributes),this.childNodeCountInternal=s.childNodeCount||0,s.shadowRoots)for(let e=0;e<s.shadowRoots.length;++e){const t=s.shadowRoots[e],r=zs.create(this.#Wi,this.ownerDocument,!0,t);this.shadowRootsInternal.push(r),r.parentNode=this}s.templateContent&&(this.templateContentInternal=zs.create(this.#Wi,this.ownerDocument,!0,s.templateContent),this.templateContentInternal.parentNode=this,this.childrenInternal=[]);const r=new Set(["EMBED","IFRAME","OBJECT","FENCEDFRAME"]);s.contentDocument?(this.contentDocumentInternal=new Ws(this.#Wi,s.contentDocument),this.contentDocumentInternal.parentNode=this,this.childrenInternal=[]):s.frameId&&r.has(s.nodeName)&&(this.childDocumentPromiseForTesting=this.requestChildDocument(s.frameId,this.#Wi.target()),this.childrenInternal=[]),s.importedDocument&&(this.#dn=zs.create(this.#Wi,this.ownerDocument,!0,s.importedDocument),this.#dn.parentNode=this,this.childrenInternal=[]),s.distributedNodes&&this.setDistributedNodePayloads(s.distributedNodes),s.assignedSlot&&this.setAssignedSlot(s.assignedSlot),s.children&&this.setChildrenPayload(s.children),this.setPseudoElements(s.pseudoElements),this.#$i===Node.ELEMENT_NODE?(this.ownerDocument&&!this.ownerDocument.documentElement&&"HTML"===this.#Qi&&(this.ownerDocument.documentElement=this),this.ownerDocument&&!this.ownerDocument.body&&"BODY"===this.#Qi&&(this.ownerDocument.body=this)):this.#$i===Node.DOCUMENT_TYPE_NODE?(this.publicId=s.publicId,this.systemId=s.systemId,this.internalSubset=s.internalSubset):this.#$i===Node.ATTRIBUTE_NODE&&(this.name=s.name,this.value=s.value)}async requestChildDocument(e,t){const s=await Nn.instance().getOrWaitForFrame(e,t),r=s.resourceTreeModel()?.target().model(Gs);return await(r?.requestDocument()||null)}isAdFrameNode(){if(this.isIframe()&&this.#en){const e=Nn.instance().getFrame(this.#en);return!!e&&"none"!==e.adFrameType()}return!1}isSVGNode(){return this.#sn}isScrollable(){return this.#rn}isMediaNode(){return"AUDIO"===this.#Qi||"VIDEO"===this.#Qi}isViewTransitionPseudoNode(){return!!this.#Ji&&["view-transition","view-transition-group","view-transition-image-pair","view-transition-old","view-transition-new"].includes(this.#Ji)}creationStackTrace(){if(this.#in)return this.#in;const e=this.#Vi.invoke_getNodeStackTraces({nodeId:this.id});return this.#in=e.then(e=>e.creation||null),this.#in}get subtreeMarkerCount(){return this.#cn}domModel(){return this.#Wi}backendNodeId(){return this.#Ki}children(){return this.childrenInternal?this.childrenInternal.slice():null}setChildren(e){this.childrenInternal=e}setIsScrollable(e){this.#rn=e}hasAttributes(){return this.#an.size>0}childNodeCount(){return this.childNodeCountInternal}setChildNodeCount(e){this.childNodeCountInternal=e}shadowRoots(){return this.shadowRootsInternal.slice()}templateContent(){return this.templateContentInternal||null}contentDocument(){return this.contentDocumentInternal||null}setContentDocument(e){this.contentDocumentInternal=e}isIframe(){return"IFRAME"===this.#Qi}importedDocument(){return this.#dn||null}nodeType(){return this.#$i}nodeName(){return this.#Qi}pseudoType(){return this.#Ji}pseudoIdentifier(){return this.#Xi}hasPseudoElements(){return this.#nn.size>0}pseudoElements(){return this.#nn}checkmarkPseudoElement(){return this.#nn.get("checkmark")?.at(-1)}beforePseudoElement(){return this.#nn.get("before")?.at(-1)}afterPseudoElement(){return this.#nn.get("after")?.at(-1)}pickerIconPseudoElement(){return this.#nn.get("picker-icon")?.at(-1)}markerPseudoElement(){return this.#nn.get("marker")?.at(-1)}backdropPseudoElement(){return this.#nn.get("backdrop")?.at(-1)}viewTransitionPseudoElements(){return[...this.#nn.get("view-transition")||[],...this.#nn.get("view-transition-group")||[],...this.#nn.get("view-transition-image-pair")||[],...this.#nn.get("view-transition-old")||[],...this.#nn.get("view-transition-new")||[]]}carouselPseudoElements(){return[...this.#nn.get("scroll-button")||[],...this.#nn.get("column")||[],...this.#nn.get("scroll-marker")||[],...this.#nn.get("scroll-marker-group")||[]]}hasAssignedSlot(){return null!==this.assignedSlot}isInsertionPoint(){return!this.isXMLNode()&&("SHADOW"===this.#Qi||"CONTENT"===this.#Qi||"SLOT"===this.#Qi)}distributedNodes(){return this.#on}isInShadowTree(){return this.#Gi}ancestorShadowHost(){const e=this.ancestorShadowRoot();return e?e.parentNode:null}ancestorShadowRoot(){if(!this.#Gi)return null;let e=this;for(;e&&!e.isShadowRoot();)e=e.parentNode;return e}ancestorUserAgentShadowRoot(){const e=this.ancestorShadowRoot();return e&&e.shadowRootType()===zs.ShadowRootTypes.UserAgent?e:null}isShadowRoot(){return Boolean(this.#Zi)}shadowRootType(){return this.#Zi||null}nodeNameInCorrectCase(){const e=this.shadowRootType();return e?"#shadow-root ("+e+")":this.localName()?this.localName().length!==this.nodeName().length?this.nodeName():this.localName():this.nodeName()}setNodeName(e,t){this.#Vi.invoke_setNodeName({nodeId:this.id,name:e}).then(e=>{e.getError()||this.#Wi.markUndoableState(),t&&t(e.getError()||null,this.#Wi.nodeForId(e.nodeId))})}localName(){return this.#Yi}nodeValue(){return this.nodeValueInternal}setNodeValueInternal(e){this.nodeValueInternal=e}setNodeValue(e,t){this.#Vi.invoke_setNodeValue({nodeId:this.id,value:e}).then(e=>{e.getError()||this.#Wi.markUndoableState(),t&&t(e.getError()||null)})}getAttribute(e){const t=this.#an.get(e);return t?t.value:void 0}setAttribute(e,t,s){this.#Vi.invoke_setAttributesAsText({nodeId:this.id,text:t,name:e}).then(e=>{e.getError()||this.#Wi.markUndoableState(),s&&s(e.getError()||null)})}setAttributeValue(e,t,s){this.#Vi.invoke_setAttributeValue({nodeId:this.id,name:e,value:t}).then(e=>{e.getError()||this.#Wi.markUndoableState(),s&&s(e.getError()||null)})}setAttributeValuePromise(e,t){return new Promise(s=>this.setAttributeValue(e,t,s))}attributes(){return[...this.#an.values()]}async removeAttribute(e){(await this.#Vi.invoke_removeAttribute({nodeId:this.id,name:e})).getError()||(this.#an.delete(e),this.#Wi.markUndoableState())}getChildNodesPromise(){return new Promise(e=>this.getChildNodes(t=>e(t)))}getChildNodes(e){this.childrenInternal?e(this.children()):this.#Vi.invoke_requestChildNodes({nodeId:this.id}).then(t=>{e(t.getError()?null:this.children())})}async getSubtree(e,t){return(await this.#Vi.invoke_requestChildNodes({nodeId:this.id,depth:e,pierce:t})).getError()?null:this.childrenInternal}async getOuterHTML(){const{outerHTML:e}=await this.#Vi.invoke_getOuterHTML({nodeId:this.id});return e}setOuterHTML(e,t){this.#Vi.invoke_setOuterHTML({nodeId:this.id,outerHTML:e}).then(e=>{e.getError()||this.#Wi.markUndoableState(),t&&t(e.getError()||null)})}removeNode(e){return this.#Vi.invoke_removeNode({nodeId:this.id}).then(t=>{t.getError()||this.#Wi.markUndoableState(),e&&e(t.getError()||null)})}async copyNode(){const{outerHTML:e}=await this.#Vi.invoke_getOuterHTML({nodeId:this.id});return null!==e&&a.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(e),e}path(){function e(e){return e.#Qi.length?void 0!==e.index?e.index:e.parentNode?e.isShadowRoot()?e.shadowRootType()===zs.ShadowRootTypes.UserAgent?"u":"a":e.nodeType()===Node.DOCUMENT_NODE?"d":null:null:null}const t=[];let s=this;for(;s;){const r=e(s);if(null===r)break;t.push([r,s.#Qi]),s=s.parentNode}return t.reverse(),t.join(",")}isAncestor(e){if(!e)return!1;let t=e.parentNode;for(;t;){if(this===t)return!0;t=t.parentNode}return!1}isDescendant(e){return e.isAncestor(this)}frameOwnerFrameId(){return this.#en}frameId(){let e=this.parentNode||this;for(;!e.#en&&e.parentNode;)e=e.parentNode;return e.#en}setAttributesPayload(e){let t=!this.#an||e.length!==2*this.#an.size;const s=this.#an||new Map;this.#an=new Map;for(let r=0;r<e.length;r+=2){const i=e[r],n=e[r+1];if(this.addAttribute(i,n),t)continue;const o=s.get(i);o&&o.value===n||(t=!0)}return t}insertChild(e,t){if(!this.childrenInternal)throw new Error("DOMNode._children is expected to not be null.");const s=zs.create(this.#Wi,this.ownerDocument,this.#Gi,t);return this.childrenInternal.splice(e?this.childrenInternal.indexOf(e)+1:0,0,s),this.renumber(),s}removeChild(e){const t=e.pseudoType();if(t){const s=this.#nn.get(t)?.filter(t=>t!==e);s&&s.length>0?this.#nn.set(t,s):this.#nn.delete(t)}else{const t=this.shadowRootsInternal.indexOf(e);if(-1!==t)this.shadowRootsInternal.splice(t,1);else{if(!this.childrenInternal)throw new Error("DOMNode._children is expected to not be null.");if(-1===this.childrenInternal.indexOf(e))throw new Error("DOMNode._children is expected to contain the node to be removed.");this.childrenInternal.splice(this.childrenInternal.indexOf(e),1)}}e.parentNode=null,this.#cn-=e.#cn,e.#cn&&this.#Wi.dispatchEventToListeners(Us.MarkersChanged,this),this.renumber()}setChildrenPayload(e){this.childrenInternal=[];for(let t=0;t<e.length;++t){const s=e[t],r=zs.create(this.#Wi,this.ownerDocument,this.#Gi,s);this.childrenInternal.push(r)}this.renumber()}setPseudoElements(e){if(e)for(let t=0;t<e.length;++t){const s=zs.create(this.#Wi,this.ownerDocument,this.#Gi,e[t]);s.parentNode=this;const r=s.pseudoType();if(!r)throw new Error("DOMNode.pseudoType() is expected to be defined.");const i=this.#nn.get(r);i?i.push(s):this.#nn.set(r,[s])}}setDistributedNodePayloads(e){this.#on=[];for(const t of e)this.#on.push(new Vs(this.#Wi.target(),t.backendNodeId,t.nodeType,t.nodeName))}setAssignedSlot(e){this.assignedSlot=new Vs(this.#Wi.target(),e.backendNodeId,e.nodeType,e.nodeName)}renumber(){if(!this.childrenInternal)throw new Error("DOMNode._children is expected to not be null.");if(this.childNodeCountInternal=this.childrenInternal.length,0===this.childNodeCountInternal)return this.firstChild=null,void(this.lastChild=null);this.firstChild=this.childrenInternal[0],this.lastChild=this.childrenInternal[this.childNodeCountInternal-1];for(let e=0;e<this.childNodeCountInternal;++e){const t=this.childrenInternal[e];t.index=e,t.nextSibling=e+1<this.childNodeCountInternal?this.childrenInternal[e+1]:null,t.previousSibling=e-1>=0?this.childrenInternal[e-1]:null,t.parentNode=this}}addAttribute(e,t){const s={name:e,value:t,_node:this};this.#an.set(e,s)}setAttributeInternal(e,t){const s=this.#an.get(e);s?s.value=t:this.addAttribute(e,t)}removeAttributeInternal(e){this.#an.delete(e)}copyTo(e,t,s){this.#Vi.invoke_copyTo({nodeId:this.id,targetNodeId:e.id,insertBeforeNodeId:t?t.id:void 0}).then(e=>{e.getError()||this.#Wi.markUndoableState(),s&&s(e.getError()||null,this.#Wi.nodeForId(e.nodeId))})}moveTo(e,t,s){this.#Vi.invoke_moveTo({nodeId:this.id,targetNodeId:e.id,insertBeforeNodeId:t?t.id:void 0}).then(e=>{e.getError()||this.#Wi.markUndoableState(),s&&s(e.getError()||null,this.#Wi.nodeForId(e.nodeId))})}isXMLNode(){return Boolean(this.#tn)}setMarker(e,t){if(null!==t){if(this.parentNode&&!this.#ln.has(e))for(let e=this;e;e=e.parentNode)++e.#cn;this.#ln.set(e,t);for(let e=this;e;e=e.parentNode)this.#Wi.dispatchEventToListeners(Us.MarkersChanged,e)}else{if(!this.#ln.has(e))return;this.#ln.delete(e);for(let e=this;e;e=e.parentNode)--e.#cn;for(let e=this;e;e=e.parentNode)this.#Wi.dispatchEventToListeners(Us.MarkersChanged,e)}}marker(e){return this.#ln.get(e)||null}getMarkerKeysForTest(){return[...this.#ln.keys()]}traverseMarkers(e){!function t(s){if(s.#cn){for(const t of s.#ln.keys())e(s,t);if(s.childrenInternal)for(const e of s.childrenInternal)t(e)}}(this)}resolveURL(t){if(!t)return t;for(let s=this;s;s=s.parentNode)if(s instanceof Ws&&s.baseURL)return e.ParsedURL.ParsedURL.completeURL(s.baseURL,t);return null}highlight(e){this.#Wi.overlayModel().highlightInOverlay({node:this,selectorList:void 0},e)}highlightForTwoSeconds(){this.#Wi.overlayModel().highlightInOverlayForTwoSeconds({node:this,selectorList:void 0})}async resolveToObject(e,t){const{object:s}=await this.#Vi.invoke_resolveNode({nodeId:this.id,backendNodeId:void 0,executionContextId:t,objectGroup:e});return s&&this.#Wi.runtimeModelInternal.createRemoteObject(s)||null}async boxModel(){const{model:e}=await this.#Vi.invoke_getBoxModel({nodeId:this.id});return e}async setAsInspectedNode(){let e=this;for(e?.pseudoType()&&(e=e.parentNode);e;){let t=e.ancestorUserAgentShadowRoot();if(!t)break;if(t=e.ancestorShadowHost(),!t)break;e=t}if(!e)throw new Error("In DOMNode.setAsInspectedNode: node is expected to not be null.");await this.#Vi.invoke_setInspectedNode({nodeId:e.id})}enclosingElementOrSelf(){let e=this;return e&&e.nodeType()===Node.TEXT_NODE&&e.parentNode&&(e=e.parentNode),e&&e.nodeType()!==Node.ELEMENT_NODE&&(e=null),e}async callFunction(e,t=[]){const s=await this.resolveToObject();if(!s)return null;const r=await s.callFunction(e,t.map(e=>Bn.toCallArgument(e)));return s.release(),r.wasThrown||!r.object?null:{value:r.object.value}}async scrollIntoView(){const e=this.enclosingElementOrSelf();e&&await e.callFunction(function(){this.scrollIntoViewIfNeeded(!0)})&&e.highlightForTwoSeconds()}async focus(){const e=this.enclosingElementOrSelf();if(!e)throw new Error("DOMNode.focus expects node to not be null.");await e.callFunction(function(){this.focus()})&&(e.highlightForTwoSeconds(),await this.#Wi.target().pageAgent().invoke_bringToFront())}simpleSelector(){const e=this.localName()||this.nodeName().toLowerCase();if(this.nodeType()!==Node.ELEMENT_NODE)return e;const t=this.getAttribute("type"),s=this.getAttribute("id"),r=this.getAttribute("class");return"input"!==e||!t||s||r?s?e+"#"+CSS.escape(s):r?("div"===e?"":e)+"."+r.trim().split(/\s+/g).map(e=>CSS.escape(e)).join("."):this.pseudoIdentifier()?`${e}(${this.pseudoIdentifier()})`:e:e+'[type="'+CSS.escape(t)+'"]'}async getAnchorBySpecifier(e){const t=await this.#Vi.invoke_getAnchorElement({nodeId:this.id,anchorSpecifier:e});return t.getError()?null:this.domModel().nodeForId(t.nodeId)}classNames(){const e=this.getAttribute("class");return e?e.split(/\s+/):[]}}!function(e){let t;!function(e){e.UserAgent="user-agent",e.Open="open",e.Closed="closed"}(t=e.ShadowRootTypes||(e.ShadowRootTypes={}))}(zs||(zs={}));class js{#Wi;#Ki;constructor(e,t){this.#Wi=e.model(Gs),this.#Ki=t}resolve(e){this.resolvePromise().then(e)}async resolvePromise(){const e=await this.#Wi.pushNodesByBackendIdsToFrontend(new Set([this.#Ki]));return e?.get(this.#Ki)||null}backendNodeId(){return this.#Ki}domModel(){return this.#Wi}highlight(){this.#Wi.overlayModel().highlightInOverlay({deferredNode:this,selectorList:void 0})}}class Vs{nodeType;nodeName;deferredNode;constructor(e,t,s,r){this.nodeType=s,this.nodeName=r,this.deferredNode=new js(e,t)}}class Ws extends zs{body;documentElement;documentURL;baseURL;constructor(e,t){super(e),this.body=null,this.documentElement=null,this.init(this,!1,t),this.documentURL=t.documentURL||"",this.baseURL=t.baseURL||""}}class Gs extends h{agent;idToDOMNode=new Map;#hn=null;#un=new Set;runtimeModelInternal;#gn;#mn=null;#pn;#fn;#bn;constructor(e){super(e),this.agent=e.domAgent(),e.registerDOMDispatcher(new Ks(this)),this.runtimeModelInternal=e.model(Jr),e.suspended()||this.agent.invoke_enable({}),o.Runtime.experiments.isEnabled("capture-node-creation-stacks")&&this.agent.invoke_setNodeStackTracesEnabled({enable:!0})}runtimeModel(){return this.runtimeModelInternal}cssModel(){return this.target().model(Br)}overlayModel(){return this.target().model(Fs)}static cancelSearch(){for(const e of W.instance().models(Gs))e.cancelSearch()}scheduleMutationEvent(e){this.hasEventListeners(Us.DOMMutated)&&(this.#gn=(this.#gn||0)+1,Promise.resolve().then(function(e,t){this.hasEventListeners(Us.DOMMutated)&&this.#gn===t&&this.dispatchEventToListeners(Us.DOMMutated,e)}.bind(this,e,this.#gn)))}requestDocument(){return this.#hn?Promise.resolve(this.#hn):(this.#mn||(this.#mn=this.requestDocumentInternal()),this.#mn)}async getOwnerNodeForFrame(e){const t=await this.agent.invoke_getFrameOwner({frameId:e});return t.getError()?null:new js(this.target(),t.backendNodeId)}async requestDocumentInternal(){const e=await this.agent.invoke_getDocument({});if(e.getError())return null;const{root:t}=e;if(this.#mn=null,t&&this.setDocument(t),!this.#hn)return console.error("No document"),null;const s=this.parentModel();if(s&&!this.#pn){await s.requestDocument();const e=this.target().model(ii)?.mainFrame;if(e){const t=await s.agent.invoke_getFrameOwner({frameId:e.id});!t.getError()&&t.nodeId&&(this.#pn=s.nodeForId(t.nodeId))}}if(this.#pn){const e=this.#pn.contentDocument();this.#pn.setContentDocument(this.#hn),this.#pn.setChildren([]),this.#hn?(this.#hn.parentNode=this.#pn,this.dispatchEventToListeners(Us.NodeInserted,this.#hn)):e&&this.dispatchEventToListeners(Us.NodeRemoved,{node:e,parent:this.#pn})}return this.#hn}existingDocument(){return this.#hn}async pushNodeToFrontend(e){await this.requestDocument();const{nodeId:t}=await this.agent.invoke_requestNode({objectId:e});return this.nodeForId(t)}pushNodeByPathToFrontend(e){return this.requestDocument().then(()=>this.agent.invoke_pushNodeByPathToFrontend({path:e})).then(({nodeId:e})=>e)}async pushNodesByBackendIdsToFrontend(e){await this.requestDocument();const t=[...e],{nodeIds:s}=await this.agent.invoke_pushNodesByBackendIdsToFrontend({backendNodeIds:t});if(!s)return null;const r=new Map;for(let e=0;e<s.length;++e)s[e]&&r.set(t[e],this.nodeForId(s[e]));return r}attributeModified(e,t,s){const r=this.idToDOMNode.get(e);r&&(r.setAttributeInternal(t,s),this.dispatchEventToListeners(Us.AttrModified,{node:r,name:t}),this.scheduleMutationEvent(r))}attributeRemoved(e,t){const s=this.idToDOMNode.get(e);s&&(s.removeAttributeInternal(t),this.dispatchEventToListeners(Us.AttrRemoved,{node:s,name:t}),this.scheduleMutationEvent(s))}inlineStyleInvalidated(e){e.forEach(e=>this.#un.add(e)),this.#fn||(this.#fn=window.setTimeout(this.loadNodeAttributes.bind(this),20))}loadNodeAttributes(){this.#fn=void 0;for(const e of this.#un)this.agent.invoke_getAttributes({nodeId:e}).then(({attributes:t})=>{if(!t)return;const s=this.idToDOMNode.get(e);s&&s.setAttributesPayload(t)&&(this.dispatchEventToListeners(Us.AttrModified,{node:s,name:"style"}),this.scheduleMutationEvent(s))});this.#un.clear()}characterDataModified(e,t){const s=this.idToDOMNode.get(e);s?(s.setNodeValueInternal(t),this.dispatchEventToListeners(Us.CharacterDataModified,s),this.scheduleMutationEvent(s)):console.error("nodeId could not be resolved to a node")}nodeForId(e){return e&&this.idToDOMNode.get(e)||null}documentUpdated(){const e=Boolean(this.#hn);this.setDocument(null),this.parentModel()&&e&&!this.#mn&&this.requestDocument()}setDocument(e){this.idToDOMNode=new Map,this.#hn=e&&"nodeId"in e?new Ws(this,e):null,$s.instance().dispose(this),this.parentModel()||this.dispatchEventToListeners(Us.DocumentUpdated,this)}setDocumentForTest(e){this.setDocument(e)}setDetachedRoot(e){"#document"===e.nodeName?new Ws(this,e):zs.create(this,null,!1,e)}setChildNodes(e,t){if(!e&&t.length)return void this.setDetachedRoot(t[0]);const s=this.idToDOMNode.get(e);s?.setChildrenPayload(t)}childNodeCountUpdated(e,t){const s=this.idToDOMNode.get(e);s?(s.setChildNodeCount(t),this.dispatchEventToListeners(Us.ChildNodeCountUpdated,s),this.scheduleMutationEvent(s)):console.error("nodeId could not be resolved to a node")}childNodeInserted(e,t,s){const r=this.idToDOMNode.get(e),i=this.idToDOMNode.get(t);if(!r)return void console.error("parentId could not be resolved to a node");const n=r.insertChild(i,s);this.idToDOMNode.set(n.id,n),this.dispatchEventToListeners(Us.NodeInserted,n),this.scheduleMutationEvent(n)}childNodeRemoved(e,t){const s=this.idToDOMNode.get(e),r=this.idToDOMNode.get(t);s&&r?(s.removeChild(r),this.unbind(r),this.dispatchEventToListeners(Us.NodeRemoved,{node:r,parent:s}),this.scheduleMutationEvent(r)):console.error("parentId or nodeId could not be resolved to a node")}shadowRootPushed(e,t){const s=this.idToDOMNode.get(e);if(!s)return;const r=zs.create(this,s.ownerDocument,!0,t);r.parentNode=s,this.idToDOMNode.set(r.id,r),s.shadowRootsInternal.unshift(r),this.dispatchEventToListeners(Us.NodeInserted,r),this.scheduleMutationEvent(r)}shadowRootPopped(e,t){const s=this.idToDOMNode.get(e);if(!s)return;const r=this.idToDOMNode.get(t);r&&(s.removeChild(r),this.unbind(r),this.dispatchEventToListeners(Us.NodeRemoved,{node:r,parent:s}),this.scheduleMutationEvent(r))}pseudoElementAdded(e,t){const s=this.idToDOMNode.get(e);if(!s)return;const r=zs.create(this,s.ownerDocument,!1,t);r.parentNode=s,this.idToDOMNode.set(r.id,r);const i=r.pseudoType();if(!i)throw new Error("DOMModel._pseudoElementAdded expects pseudoType to be defined.");const n=s.pseudoElements().get(i);if(n&&n.length>0){if(!i.startsWith("view-transition")&&!i.startsWith("scroll-")&&"column"!==i)throw new Error(`DOMModel.pseudoElementAdded expects parent to not already have this pseudo type added; only view-transition* and scrolling pseudo elements can coexist under the same parent. ${n.length} elements of type ${i} already exist on parent.`);n.push(r)}else s.pseudoElements().set(i,[r]);this.dispatchEventToListeners(Us.NodeInserted,r),this.scheduleMutationEvent(r)}scrollableFlagUpdated(e,t){const s=this.nodeForId(e);s&&s.isScrollable()!==t&&(s.setIsScrollable(t),this.dispatchEventToListeners(Us.ScrollableFlagUpdated,{node:s}))}topLayerElementsUpdated(){this.dispatchEventToListeners(Us.TopLayerElementsChanged)}pseudoElementRemoved(e,t){const s=this.idToDOMNode.get(e);if(!s)return;const r=this.idToDOMNode.get(t);r&&(s.removeChild(r),this.unbind(r),this.dispatchEventToListeners(Us.NodeRemoved,{node:r,parent:s}),this.scheduleMutationEvent(r))}distributedNodesUpdated(e,t){const s=this.idToDOMNode.get(e);s&&(s.setDistributedNodePayloads(t),this.dispatchEventToListeners(Us.DistributedNodesChanged,s),this.scheduleMutationEvent(s))}unbind(e){this.idToDOMNode.delete(e.id);const t=e.children();for(let e=0;t&&e<t.length;++e)this.unbind(t[e]);for(let t=0;t<e.shadowRootsInternal.length;++t)this.unbind(e.shadowRootsInternal[t]);const s=e.pseudoElements();for(const e of s.values())for(const t of e)this.unbind(t);const r=e.templateContent();r&&this.unbind(r)}async getNodesByStyle(e,t=!1){if(await this.requestDocument(),!this.#hn)throw new Error("DOMModel.getNodesByStyle expects to have a document.");const s=await this.agent.invoke_getNodesForSubtreeByStyle({nodeId:this.#hn.id,computedStyles:e,pierce:t});if(s.getError())throw new Error(s.getError());return s.nodeIds}async performSearch(e,t){const s=await this.agent.invoke_performSearch({query:e,includeUserAgentShadowDOM:t});return s.getError()||(this.#bn=s.searchId),s.getError()?0:s.resultCount}async searchResult(e){if(!this.#bn)return null;const{nodeIds:t}=await this.agent.invoke_getSearchResults({searchId:this.#bn,fromIndex:e,toIndex:e+1});return t&&1===t.length?this.nodeForId(t[0]):null}cancelSearch(){this.#bn&&(this.agent.invoke_discardSearchResults({searchId:this.#bn}),this.#bn=void 0)}classNamesPromise(e){return this.agent.invoke_collectClassNamesFromSubtree({nodeId:e}).then(({classNames:e})=>e||[])}querySelector(e,t){return this.agent.invoke_querySelector({nodeId:e,selector:t}).then(({nodeId:e})=>e)}querySelectorAll(e,t){return this.agent.invoke_querySelectorAll({nodeId:e,selector:t}).then(({nodeIds:e})=>e)}getTopLayerElements(){return this.agent.invoke_getTopLayerElements().then(({nodeIds:e})=>e)}getDetachedDOMNodes(){return this.agent.invoke_getDetachedDomNodes().then(({detachedNodes:e})=>e)}getElementByRelation(e,t){return this.agent.invoke_getElementByRelation({nodeId:e,relation:t}).then(({nodeId:e})=>e)}markUndoableState(e){$s.instance().markUndoableState(this,e||!1)}async nodeForLocation(e,t,s){const r=await this.agent.invoke_getNodeForLocation({x:e,y:t,includeUserAgentShadowDOM:s});return r.getError()||!r.nodeId?null:this.nodeForId(r.nodeId)}async getContainerForNode(e,t,s,r,i){const{nodeId:n}=await this.agent.invoke_getContainerForNode({nodeId:e,containerName:t,physicalAxes:s,logicalAxes:r,queriesScrollState:i});return n?this.nodeForId(n):null}pushObjectAsNodeToFrontend(e){return e.isNode()&&e.objectId?this.pushNodeToFrontend(e.objectId):Promise.resolve(null)}suspendModel(){return this.agent.invoke_disable().then(()=>this.setDocument(null))}async resumeModel(){await this.agent.invoke_enable({})}dispose(){$s.instance().dispose(this)}parentModel(){const e=this.target().parentTarget();return e?e.model(Gs):null}getAgent(){return this.agent}registerNode(e){this.idToDOMNode.set(e.id,e)}}!function(e){e.AttrModified="AttrModified",e.AttrRemoved="AttrRemoved",e.CharacterDataModified="CharacterDataModified",e.DOMMutated="DOMMutated",e.NodeInserted="NodeInserted",e.NodeRemoved="NodeRemoved",e.DocumentUpdated="DocumentUpdated",e.ChildNodeCountUpdated="ChildNodeCountUpdated",e.DistributedNodesChanged="DistributedNodesChanged",e.MarkersChanged="MarkersChanged",e.TopLayerElementsChanged="TopLayerElementsChanged",e.ScrollableFlagUpdated="ScrollableFlagUpdated"}(Us||(Us={}));class Ks{#Xs;constructor(e){this.#Xs=e}documentUpdated(){this.#Xs.documentUpdated()}attributeModified({nodeId:e,name:t,value:s}){this.#Xs.attributeModified(e,t,s)}attributeRemoved({nodeId:e,name:t}){this.#Xs.attributeRemoved(e,t)}inlineStyleInvalidated({nodeIds:e}){this.#Xs.inlineStyleInvalidated(e)}characterDataModified({nodeId:e,characterData:t}){this.#Xs.characterDataModified(e,t)}setChildNodes({parentId:e,nodes:t}){this.#Xs.setChildNodes(e,t)}childNodeCountUpdated({nodeId:e,childNodeCount:t}){this.#Xs.childNodeCountUpdated(e,t)}childNodeInserted({parentNodeId:e,previousNodeId:t,node:s}){this.#Xs.childNodeInserted(e,t,s)}childNodeRemoved({parentNodeId:e,nodeId:t}){this.#Xs.childNodeRemoved(e,t)}shadowRootPushed({hostId:e,root:t}){this.#Xs.shadowRootPushed(e,t)}shadowRootPopped({hostId:e,rootId:t}){this.#Xs.shadowRootPopped(e,t)}pseudoElementAdded({parentId:e,pseudoElement:t}){this.#Xs.pseudoElementAdded(e,t)}pseudoElementRemoved({parentId:e,pseudoElementId:t}){this.#Xs.pseudoElementRemoved(e,t)}distributedNodesUpdated({insertionPointId:e,distributedNodes:t}){this.#Xs.distributedNodesUpdated(e,t)}topLayerElementsUpdated(){this.#Xs.topLayerElementsUpdated()}scrollableFlagUpdated({nodeId:e,isScrollable:t}){this.#Xs.scrollableFlagUpdated(e,t)}}let Qs=null;class $s{#Lt;#ni;#yn;constructor(){this.#Lt=[],this.#ni=0,this.#yn=null}static instance(e={forceNew:null}){const{forceNew:t}=e;return Qs&&!t||(Qs=new $s),Qs}async markUndoableState(e,t){this.#yn&&e!==this.#yn&&(this.#yn.markUndoableState(),this.#yn=null),t&&this.#yn===e||(this.#Lt=this.#Lt.slice(0,this.#ni),this.#Lt.push(e),this.#ni=this.#Lt.length,t?this.#yn=e:(await e.getAgent().invoke_markUndoableState(),this.#yn=null))}async undo(){if(0===this.#ni)return await Promise.resolve();--this.#ni,this.#yn=null,await this.#Lt[this.#ni].getAgent().invoke_undo()}async redo(){if(this.#ni>=this.#Lt.length)return await Promise.resolve();++this.#ni,this.#yn=null,await this.#Lt[this.#ni-1].getAgent().invoke_redo()}dispose(e){let t=0;for(let s=0;s<this.#ni;++s)this.#Lt[s]===e&&++t;r.ArrayUtilities.removeElement(this.#Lt,e),this.#ni-=t,this.#yn===e&&(this.#yn=null)}}h.register(Gs,{capabilities:2,autostart:!0});var Xs=Object.freeze({__proto__:null,DOMDocument:Ws,DOMModel:Gs,DOMModelUndoStack:$s,get DOMNode(){return zs},DOMNodeShortcut:Vs,DeferredDOMNode:js,get Events(){return Us}});class Js{#tr;#wn;#vn;#kn;#Sn;#xn;#Cn;#In;#Rn;#Tn;#Pn;#En;#Mn=null;#Ln=null;constructor(t,s,i,n,o,a,l,c,d,h){this.#tr=t,this.#wn=s,this.url=i,this.#kn=n,this.#Sn=o,this.#xn=a,this.#Cn=l||e.ResourceType.resourceTypes.Other,this.#In=c,this.#Rn=!1,this.#Tn=d&&r.DateUtilities.isValid(d)?d:null,this.#Pn=h}lastModified(){if(this.#Tn||!this.#wn)return this.#Tn;const e=this.#wn.responseLastModified(),t=e?new Date(e):null;return this.#Tn=t&&r.DateUtilities.isValid(t)?t:null,this.#Tn}contentSize(){return"number"!=typeof this.#Pn&&this.#wn?this.#wn.resourceSize:this.#Pn}get request(){return this.#wn}get url(){return this.#vn}set url(t){this.#vn=t,this.#En=new e.ParsedURL.ParsedURL(t)}get parsedURL(){return this.#En}get documentURL(){return this.#kn}get frameId(){return this.#Sn}get loaderId(){return this.#xn}get displayName(){return this.#En?this.#En.displayName:""}resourceType(){return this.#wn?this.#wn.resourceType():this.#Cn}get mimeType(){return this.#wn?this.#wn.mimeType:this.#In}get content(){return this.#Mn?.isTextContent?this.#Mn.text:this.#Mn?.base64??null}get isGenerated(){return this.#Rn}set isGenerated(e){this.#Rn=e}contentURL(){return this.#vn}contentType(){return this.resourceType()===e.ResourceType.resourceTypes.Document&&-1!==this.mimeType.indexOf("javascript")?e.ResourceType.resourceTypes.Script:this.resourceType()}async requestContent(){const e=await this.requestContentData();return t.ContentData.ContentData.asDeferredContent(e)}async requestContentData(){return this.#Mn?this.#Mn:(this.#Ln||(this.#Ln=this.innerRequestContent().then(e=>(t.ContentData.ContentData.isError(e)||(this.#Mn=e),this.#Ln=null,e))),await this.#Ln)}canonicalMimeType(){return this.contentType().canonicalMimeType()||this.mimeType}async searchInContent(e,s,r){if(!this.frameId)return[];if(this.request)return await this.request.searchInContent(e,s,r);const i=await this.#tr.target().pageAgent().invoke_searchInResource({frameId:this.frameId,url:this.url,query:e,caseSensitive:s,isRegex:r});return t.TextUtils.performSearchInSearchMatches(i.result||[],e,s,r)}async populateImageSource(e){const s=await this.requestContentData();t.ContentData.ContentData.isError(s)||(e.src=s.asDataUrl()??this.#vn)}async innerRequestContent(){if(this.request)return await this.request.requestContentData();const e=await this.#tr.target().pageAgent().invoke_getResourceContent({frameId:this.frameId,url:this.url}),s=e.getError();return s?{error:s}:new t.ContentData.ContentData(e.content,e.base64Encoded,this.mimeType)}frame(){return this.#Sn?this.#tr.frameForId(this.#Sn):null}statusCode(){return this.#wn?this.#wn.statusCode:0}}var Ys,Zs=Object.freeze({__proto__:null,Resource:Js});class ei extends h{#An="";#On="";#Dn=new Set;constructor(e){super(e)}updateSecurityOrigins(e){const t=this.#Dn;this.#Dn=e;for(const e of t)this.#Dn.has(e)||this.dispatchEventToListeners(Ys.SecurityOriginRemoved,e);for(const e of this.#Dn)t.has(e)||this.dispatchEventToListeners(Ys.SecurityOriginAdded,e)}securityOrigins(){return[...this.#Dn]}mainSecurityOrigin(){return this.#An}unreachableMainSecurityOrigin(){return this.#On}setMainSecurityOrigin(e,t){this.#An=e,this.#On=t||null,this.dispatchEventToListeners(Ys.MainSecurityOriginChanged,{mainSecurityOrigin:this.#An,unreachableMainSecurityOrigin:this.#On})}}!function(e){e.SecurityOriginAdded="SecurityOriginAdded",e.SecurityOriginRemoved="SecurityOriginRemoved",e.MainSecurityOriginChanged="MainSecurityOriginChanged"}(Ys||(Ys={})),h.register(ei,{capabilities:0,autostart:!1});var ti=Object.freeze({__proto__:null,get Events(){return Ys},SecurityOriginManager:ei});class ni extends h{#Nn;#Fn;constructor(e){super(e),this.#Nn="",this.#Fn=new Set}updateStorageKeys(e){const t=this.#Fn;this.#Fn=e;for(const e of t)this.#Fn.has(e)||this.dispatchEventToListeners("StorageKeyRemoved",e);for(const e of this.#Fn)t.has(e)||this.dispatchEventToListeners("StorageKeyAdded",e)}storageKeys(){return[...this.#Fn]}mainStorageKey(){return this.#Nn}setMainStorageKey(e){this.#Nn=e,this.dispatchEventToListeners("MainStorageKeyChanged",{mainStorageKey:this.#Nn})}}h.register(ni,{capabilities:0,autostart:!1});var ri,si=Object.freeze({__proto__:null,StorageKeyManager:ni,parseStorageKey:function(t){const s=t.split("^"),r={origin:e.ParsedURL.ParsedURL.extractOrigin(s[0]),components:new Map};for(let e=1;e<s.length;++e)r.components.set(s[e].charAt(0),s[e].substring(1));return r}});class ii extends h{agent;storageAgent;#_n;#Un;framesInternal=new Map;#Bn=!1;#Hn=null;#qn=0;isInterstitialShowing=!1;mainFrame=null;#zn=new Set;constructor(e){super(e);const t=e.model(Z);t&&(t.addEventListener(ee.RequestFinished,this.onRequestFinished,this),t.addEventListener(ee.RequestUpdateDropped,this.onRequestUpdateDropped,this)),this.agent=e.pageAgent(),this.storageAgent=e.storageAgent(),this.agent.invoke_enable({}),this.#_n=e.model(ei),this.#Un=e.model(ni),e.registerPageDispatcher(new ai(this)),this.#jn()}async#jn(){return await this.agent.invoke_getResourceTree().then(e=>{this.processCachedResources(e.getError()?null:e.frameTree),this.mainFrame&&this.processPendingEvents(this.mainFrame)})}static frameForRequest(e){const t=Z.forRequest(e),s=t?t.target().model(ii):null;return s&&e.frameId?s.frameForId(e.frameId):null}static frames(){const e=[];for(const t of W.instance().models(ii))e.push(...t.frames());return e}static resourceForURL(e){for(const t of W.instance().models(ii)){const s=t.mainFrame,r=s?s.resourceForURL(e):null;if(r)return r}return null}static reloadAllPages(e,t){for(const s of W.instance().models(ii))s.target().parentTarget()?.type()!==U.FRAME&&s.reloadPage(e,t)}async storageKeyForFrame(e){if(!this.framesInternal.has(e))return null;const t=await this.storageAgent.invoke_getStorageKeyForFrame({frameId:e});return"Frame tree node for given frame not found"===t.getError()?null:t.storageKey}domModel(){return this.target().model(Gs)}processCachedResources(e){e&&":"!==e.frame.url&&(this.dispatchEventToListeners(ri.WillLoadCachedResources),this.addFramesRecursively(null,e),this.target().setInspectedURL(e.frame.url)),this.#Bn=!0;const t=this.target().model(Jr);t&&(t.setExecutionContextComparator(this.executionContextComparator.bind(this)),t.fireExecutionContextOrderChanged()),this.dispatchEventToListeners(ri.CachedResourcesLoaded,this)}cachedResourcesLoaded(){return this.#Bn}addFrame(e,t){this.framesInternal.set(e.id,e),e.isMainFrame()&&(this.mainFrame=e),this.dispatchEventToListeners(ri.FrameAdded,e),this.updateSecurityOrigins(),this.updateStorageKeys()}frameAttached(e,t,s){const r=t&&this.framesInternal.get(t)||null;if(!this.#Bn&&r)return null;if(this.framesInternal.has(e))return null;const i=new oi(this,r,e,null,s||null);return t&&!r&&(i.crossTargetParentFrameId=t),i.isMainFrame()&&this.mainFrame&&this.frameDetached(this.mainFrame.id,!1),this.addFrame(i,!0),i}frameNavigated(e,t){const s=e.parentId&&this.framesInternal.get(e.parentId)||null;if(!this.#Bn&&s)return;let r=this.framesInternal.get(e.id)||null;if(!r&&(r=this.frameAttached(e.id,e.parentId||null),console.assert(Boolean(r)),!r))return;this.dispatchEventToListeners(ri.FrameWillNavigate,r),r.navigate(e),t&&(r.backForwardCacheDetails.restoredFromCache="BackForwardCacheRestore"===t),r.isMainFrame()&&this.target().setInspectedURL(r.url),this.dispatchEventToListeners(ri.FrameNavigated,r),r.isPrimaryFrame()&&this.primaryPageChanged(r,"Navigation");const i=r.resources();for(let e=0;e<i.length;++e)this.dispatchEventToListeners(ri.ResourceAdded,i[e]);this.updateSecurityOrigins(),this.updateStorageKeys(),r.backForwardCacheDetails.restoredFromCache&&(Nn.instance().modelRemoved(this),Nn.instance().modelAdded(this),this.#jn())}primaryPageChanged(e,t){this.processPendingEvents(e),this.dispatchEventToListeners(ri.PrimaryPageChanged,{frame:e,type:t});const s=this.target().model(Z);s&&e.isOutermostFrame()&&s.clearRequests()}documentOpened(t){this.frameNavigated(t,void 0);const s=this.framesInternal.get(t.id);if(s&&!s.getResourcesMap().get(t.url)){const r=this.createResourceFromFramePayload(t,t.url,e.ResourceType.resourceTypes.Document,t.mimeType,null,null);r.isGenerated=!0,s.addResource(r)}}frameDetached(e,t){if(!this.#Bn)return;const s=this.framesInternal.get(e);if(!s)return;const r=s.sameTargetParentFrame();r?r.removeChildFrame(s,t):s.remove(t),this.updateSecurityOrigins(),this.updateStorageKeys()}onRequestFinished(e){if(!this.#Bn)return;const t=e.data;if(t.failed)return;const s=t.frameId?this.framesInternal.get(t.frameId):null;s&&s.addRequest(t)}onRequestUpdateDropped(t){if(!this.#Bn)return;const s=t.data,r=s.frameId;if(!r)return;const i=this.framesInternal.get(r);if(!i)return;const n=s.url;if(i.getResourcesMap().get(n))return;const o=new Js(this,null,n,i.url,r,s.loaderId,e.ResourceType.resourceTypes[s.resourceType],s.mimeType,s.lastModified,null);i.addResource(o)}frameForId(e){return this.framesInternal.get(e)||null}forAllResources(e){return!!this.mainFrame&&this.mainFrame.callForFrameResources(e)}frames(){return[...this.framesInternal.values()]}addFramesRecursively(t,s){const r=s.frame;let i=this.framesInternal.get(r.id);i||(i=new oi(this,t,r.id,r,null)),!t&&r.parentId&&(i.crossTargetParentFrameId=r.parentId),this.addFrame(i);for(const e of s.childFrames||[])this.addFramesRecursively(i,e);for(let t=0;t<s.resources.length;++t){const n=s.resources[t],o=this.createResourceFromFramePayload(r,n.url,e.ResourceType.resourceTypes[n.type],n.mimeType,n.lastModified||null,n.contentSize||null);i.addResource(o)}if(!i.getResourcesMap().get(r.url)){const t=this.createResourceFromFramePayload(r,r.url,e.ResourceType.resourceTypes.Document,r.mimeType,null,null);i.addResource(t)}}createResourceFromFramePayload(e,t,s,r,i,n){const o="number"==typeof i?new Date(1e3*i):null;return new Js(this,null,t,e.url,e.id,e.loaderId,s,r,o,n)}suspendReload(){this.#qn++}resumeReload(){if(this.#qn--,console.assert(this.#qn>=0,"Unbalanced call to ResourceTreeModel.resumeReload()"),!this.#qn&&this.#Hn){const{ignoreCache:e,scriptToEvaluateOnLoad:t}=this.#Hn;this.reloadPage(e,t)}}reloadPage(e,t){const s=this.mainFrame?.loaderId;if(!s)return;if(this.#Hn||this.dispatchEventToListeners(ri.PageReloadRequested,this),this.#qn)return void(this.#Hn={ignoreCache:e,scriptToEvaluateOnLoad:t});this.#Hn=null;const r=this.target().model(Z);r&&r.clearRequests(),this.dispatchEventToListeners(ri.WillReloadPage),this.agent.invoke_reload({ignoreCache:e,scriptToEvaluateOnLoad:t,loaderId:s})}navigate(e){return this.agent.invoke_navigate({url:e})}async navigationHistory(){const e=await this.agent.invoke_getNavigationHistory();return e.getError()?null:{currentIndex:e.currentIndex,entries:e.entries}}navigateToHistoryEntry(e){this.agent.invoke_navigateToHistoryEntry({entryId:e.id})}setLifecycleEventsEnabled(e){return this.agent.invoke_setLifecycleEventsEnabled({enabled:e})}async fetchAppManifest(){const e=await this.agent.invoke_getAppManifest({});return e.getError()?{url:e.url,data:null,errors:[]}:{url:e.url,data:e.data||null,errors:e.errors}}async getInstallabilityErrors(){return(await this.agent.invoke_getInstallabilityErrors()).installabilityErrors||[]}async getAppId(){return await this.agent.invoke_getAppId()}executionContextComparator(e,t){function s(e){let t=e;const s=[];for(;t;)s.push(t),t=t.sameTargetParentFrame();return s.reverse()}if(e.target()!==t.target())return Zr.comparator(e,t);const r=e.frameId?s(this.frameForId(e.frameId)):[],i=t.frameId?s(this.frameForId(t.frameId)):[];let n,o;for(let e=0;;e++)if(!r[e]||!i[e]||r[e]!==i[e]){n=r[e],o=i[e];break}return!n&&o?-1:!o&&n?1:n&&o?n.id.localeCompare(o.id):Zr.comparator(e,t)}getSecurityOriginData(){const t=new Set;let s=null,r=null;for(const i of this.framesInternal.values()){const n=i.securityOrigin;n&&(t.add(n),i.isMainFrame()&&(s=n,i.unreachableUrl()))&&(r=new e.ParsedURL.ParsedURL(i.unreachableUrl()).securityOrigin())}return{securityOrigins:t,mainSecurityOrigin:s,unreachableMainSecurityOrigin:r}}async getStorageKeyData(){const e=new Set;let t=null;for(const{isMainFrame:s,storageKey:r}of await Promise.all([...this.framesInternal.values()].map(e=>e.getStorageKey(!1).then(t=>({isMainFrame:e.isMainFrame(),storageKey:t})))))s&&(t=r),r&&e.add(r);return{storageKeys:e,mainStorageKey:t}}updateSecurityOrigins(){const e=this.getSecurityOriginData();this.#_n.setMainSecurityOrigin(e.mainSecurityOrigin||"",e.unreachableMainSecurityOrigin||""),this.#_n.updateSecurityOrigins(e.securityOrigins)}async updateStorageKeys(){const e=await this.getStorageKeyData();this.#Un.setMainStorageKey(e.mainStorageKey||""),this.#Un.updateStorageKeys(e.storageKeys)}async getMainStorageKey(){return this.mainFrame?await this.mainFrame.getStorageKey(!1):null}getMainSecurityOrigin(){const e=this.getSecurityOriginData();return e.mainSecurityOrigin||e.unreachableMainSecurityOrigin}onBackForwardCacheNotUsed(e){this.mainFrame&&this.mainFrame.id===e.frameId&&this.mainFrame.loaderId===e.loaderId?(this.mainFrame.setBackForwardCacheDetails(e),this.dispatchEventToListeners(ri.BackForwardCacheDetailsUpdated,this.mainFrame)):this.#zn.add(e)}processPendingEvents(e){if(e.isMainFrame())for(const t of this.#zn)if(e.id===t.frameId&&e.loaderId===t.loaderId){e.setBackForwardCacheDetails(t),this.#zn.delete(t);break}}}!function(e){e.FrameAdded="FrameAdded",e.FrameNavigated="FrameNavigated",e.FrameDetached="FrameDetached",e.FrameResized="FrameResized",e.FrameWillNavigate="FrameWillNavigate",e.PrimaryPageChanged="PrimaryPageChanged",e.ResourceAdded="ResourceAdded",e.WillLoadCachedResources="WillLoadCachedResources",e.CachedResourcesLoaded="CachedResourcesLoaded",e.DOMContentLoaded="DOMContentLoaded",e.LifecycleEvent="LifecycleEvent",e.Load="Load",e.PageReloadRequested="PageReloadRequested",e.WillReloadPage="WillReloadPage",e.InterstitialShown="InterstitialShown",e.InterstitialHidden="InterstitialHidden",e.BackForwardCacheDetailsUpdated="BackForwardCacheDetailsUpdated",e.JavaScriptDialogOpening="JavaScriptDialogOpening"}(ri||(ri={}));class oi{#oi;#Wn;#C;crossTargetParentFrameId=null;#xn;#h;#vn;#Vn;#Gn;#Kn;#$n;#Qn;#Yn;#Jn;#Xn;#Zn;#eo;#to=null;#so=new Set;resourcesMap=new Map;backForwardCacheDetails={restoredFromCache:void 0,explanations:[],explanationsTree:void 0};constructor(e,t,s,i,n){this.#oi=e,this.#Wn=t,this.#C=s,this.#xn=i?.loaderId??"",this.#h=i?.name,this.#vn=i&&i.url||r.DevToolsPath.EmptyUrlString,this.#Vn=i?.domainAndRegistry||"",this.#Gn=i?.securityOrigin??null,this.#Kn=i?.securityOriginDetails,this.#Qn=i&&i.unreachableUrl||r.DevToolsPath.EmptyUrlString,this.#Yn=i?.adFrameStatus,this.#Jn=i?.secureContextType??null,this.#Xn=i?.crossOriginIsolatedContextType??null,this.#Zn=i?.gatedAPIFeatures??null,this.#eo=n,this.#Wn&&this.#Wn.#so.add(this)}isSecureContext(){return null!==this.#Jn&&this.#Jn.startsWith("Secure")}getSecureContextType(){return this.#Jn}isCrossOriginIsolated(){return null!==this.#Xn&&this.#Xn.startsWith("Isolated")}getCrossOriginIsolatedContextType(){return this.#Xn}getGatedAPIFeatures(){return this.#Zn}getCreationStackTraceData(){return{creationStackTrace:this.#eo,creationStackTraceTarget:this.#to||this.resourceTreeModel().target()}}navigate(e){this.#xn=e.loaderId,this.#h=e.name,this.#vn=e.url,this.#Vn=e.domainAndRegistry,this.#Gn=e.securityOrigin,this.#Kn=e.securityOriginDetails,this.getStorageKey(!0),this.#Qn=e.unreachableUrl||r.DevToolsPath.EmptyUrlString,this.#Yn=e?.adFrameStatus,this.#Jn=e.secureContextType,this.#Xn=e.crossOriginIsolatedContextType,this.#Zn=e.gatedAPIFeatures,this.backForwardCacheDetails={restoredFromCache:void 0,explanations:[],explanationsTree:void 0};const t=this.resourcesMap.get(this.#vn);this.resourcesMap.clear(),this.removeChildFrames(),t&&t.loaderId===this.#xn&&this.addResource(t)}resourceTreeModel(){return this.#oi}get id(){return this.#C}get name(){return this.#h||""}get url(){return this.#vn}domainAndRegistry(){return this.#Vn}async getAdScriptId(e){return(await this.#oi.agent.invoke_getAdScriptId({frameId:e})).adScriptId||null}get securityOrigin(){return this.#Gn}get securityOriginDetails(){return this.#Kn??null}getStorageKey(e){return this.#$n&&!e||(this.#$n=this.#oi.storageKeyForFrame(this.#C)),this.#$n}unreachableUrl(){return this.#Qn}get loaderId(){return this.#xn}adFrameType(){return this.#Yn?.adFrameType||"none"}adFrameStatus(){return this.#Yn}get childFrames(){return[...this.#so]}sameTargetParentFrame(){return this.#Wn}crossTargetParentFrame(){if(!this.crossTargetParentFrameId)return null;const e=this.#oi.target().parentTarget();if(e?.type()!==U.FRAME)return null;const t=e.model(ii);return t&&t.framesInternal.get(this.crossTargetParentFrameId)||null}parentFrame(){return this.sameTargetParentFrame()||this.crossTargetParentFrame()}isMainFrame(){return!this.#Wn}isOutermostFrame(){return this.#oi.target().parentTarget()?.type()!==U.FRAME&&!this.#Wn&&!this.crossTargetParentFrameId}isPrimaryFrame(){return!this.#Wn&&this.#oi.target()===W.instance().primaryPageTarget()}removeChildFrame(e,t){this.#so.delete(e),e.remove(t)}removeChildFrames(){const e=this.#so;this.#so=new Set;for(const t of e)t.remove(!1)}remove(e){this.removeChildFrames(),this.#oi.framesInternal.delete(this.id),this.#oi.dispatchEventToListeners(ri.FrameDetached,{frame:this,isSwap:e})}addResource(e){this.resourcesMap.get(e.url)!==e&&(this.resourcesMap.set(e.url,e),this.#oi.dispatchEventToListeners(ri.ResourceAdded,e))}addRequest(e){let t=this.resourcesMap.get(e.url());t&&t.request===e||(t=new Js(this.#oi,e,e.url(),e.documentURL,e.frameId,e.loaderId,e.resourceType(),e.mimeType,null,null),this.resourcesMap.set(t.url,t),this.#oi.dispatchEventToListeners(ri.ResourceAdded,t))}resources(){return Array.from(this.resourcesMap.values())}resourceForURL(e){const t=this.resourcesMap.get(e);if(t)return t;for(const t of this.#so){const s=t.resourceForURL(e);if(s)return s}return null}callForFrameResources(e){for(const t of this.resourcesMap.values())if(e(t))return!0;for(const t of this.#so)if(t.callForFrameResources(e))return!0;return!1}displayName(){if(this.isOutermostFrame())return n.i18n.lockedString("top");const t=new e.ParsedURL.ParsedURL(this.#vn).displayName;return t?this.#h?this.#h+" ("+t+")":t:n.i18n.lockedString("iframe")}async getOwnerDeferredDOMNode(){const e=this.parentFrame();return e?await e.resourceTreeModel().domModel().getOwnerNodeForFrame(this.#C):null}async getOwnerDOMNodeOrDocument(){const e=await this.getOwnerDeferredDOMNode();return e?await e.resolvePromise():this.isOutermostFrame()?await this.resourceTreeModel().domModel().requestDocument():null}async highlight(){const e=this.parentFrame(),t=this.resourceTreeModel().target().parentTarget(),s=async e=>{const t=await e.getOwnerNodeForFrame(this.#C);t&&e.overlayModel().highlightInOverlay({deferredNode:t,selectorList:""},"all",!0)};if(e)return await s(e.resourceTreeModel().domModel());if(t?.type()===U.FRAME){const e=t.model(Gs);if(e)return await s(e)}const r=await this.resourceTreeModel().domModel().requestDocument();r&&this.resourceTreeModel().domModel().overlayModel().highlightInOverlay({node:r,selectorList:""},"all",!0)}async getPermissionsPolicyState(){const e=await this.resourceTreeModel().target().pageAgent().invoke_getPermissionsPolicyState({frameId:this.#C});return e.getError()?null:e.states}async getOriginTrials(){const e=await this.resourceTreeModel().target().pageAgent().invoke_getOriginTrials({frameId:this.#C});return e.getError()?[]:e.originTrials}setCreationStackTrace(e){this.#eo=e.creationStackTrace,this.#to=e.creationStackTraceTarget}setBackForwardCacheDetails(e){this.backForwardCacheDetails.restoredFromCache=!1,this.backForwardCacheDetails.explanations=e.notRestoredExplanations,this.backForwardCacheDetails.explanationsTree=e.notRestoredExplanationsTree}getResourcesMap(){return this.resourcesMap}}class ai{#tr;constructor(e){this.#tr=e}backForwardCacheNotUsed(e){this.#tr.onBackForwardCacheNotUsed(e)}domContentEventFired({timestamp:e}){this.#tr.dispatchEventToListeners(ri.DOMContentLoaded,e)}loadEventFired({timestamp:e}){this.#tr.dispatchEventToListeners(ri.Load,{resourceTreeModel:this.#tr,loadTime:e})}lifecycleEvent({frameId:e,name:t}){this.#tr.dispatchEventToListeners(ri.LifecycleEvent,{frameId:e,name:t})}frameAttached({frameId:e,parentFrameId:t,stack:s}){this.#tr.frameAttached(e,t,s)}frameNavigated({frame:e,type:t}){this.#tr.frameNavigated(e,t)}documentOpened({frame:e}){this.#tr.documentOpened(e)}frameDetached({frameId:e,reason:t}){this.#tr.frameDetached(e,"swap"===t)}frameSubtreeWillBeDetached(e){}frameStartedLoading({}){}frameStoppedLoading({}){}frameRequestedNavigation({}){}frameScheduledNavigation({}){}frameClearedScheduledNavigation({}){}frameStartedNavigating({}){}navigatedWithinDocument({}){}frameResized(){this.#tr.dispatchEventToListeners(ri.FrameResized)}javascriptDialogOpening(e){this.#tr.dispatchEventToListeners(ri.JavaScriptDialogOpening,e),e.hasBrowserHandler||this.#tr.agent.invoke_handleJavaScriptDialog({accept:!1})}javascriptDialogClosed({}){}screencastFrame({}){}screencastVisibilityChanged({}){}interstitialShown(){this.#tr.isInterstitialShowing=!0,this.#tr.dispatchEventToListeners(ri.InterstitialShown)}interstitialHidden(){this.#tr.isInterstitialShowing=!1,this.#tr.dispatchEventToListeners(ri.InterstitialHidden)}windowOpen({}){}compilationCacheProduced({}){}fileChooserOpened({}){}downloadWillBegin({}){}downloadProgress(){}}h.register(ii,{capabilities:2,autostart:!0,early:!0});var li=Object.freeze({__proto__:null,get Events(){return ri},PageDispatcher:ai,ResourceTreeFrame:oi,ResourceTreeModel:ii});class di extends h{#ro=new Map;#io=new Map;#no=new e.Throttler.Throttler(300);#oo=new Map;constructor(e){super(e),e.model(ii)?.addEventListener(ri.PrimaryPageChanged,this.#ao,this),e.model(Z)?.addEventListener(ee.ResponseReceived,this.#lo,this),e.model(Z)?.addEventListener(ee.LoadingFinished,this.#co,this)}addBlockedCookie(e,t){const s=e.key(),r=this.#ro.get(s);this.#ro.set(s,e),t?this.#io.set(e,t):this.#io.delete(e),r&&this.#io.delete(r)}removeBlockedCookie(e){this.#ro.delete(e.key())}async#ao(){this.#ro.clear(),this.#io.clear(),await this.#do()}getCookieToBlockedReasonsMap(){return this.#io}async#ho(e){const t=this.target().networkAgent(),s=new Map(await Promise.all(e.keysArray().map(s=>t.invoke_getCookies({urls:[...e.get(s).values()]}).then(({cookies:e})=>[s,e.map(H.fromProtocolCookie)])))),r=this.#uo(s);this.#oo=s,r&&this.dispatchEventToListeners("CookieListUpdated")}async deleteCookie(e){await this.deleteCookies([e])}async clear(e,t){this.#go()||await this.#mo();const s=e?this.#oo.get(e)||[]:[...this.#oo.values()].flat();if(s.push(...this.#ro.values()),t){const e=s.filter(e=>e.matchesSecurityOrigin(t));await this.deleteCookies(e)}else await this.deleteCookies(s)}async saveCookie(e){let t,s=e.domain();s.startsWith(".")||(s=""),e.expires()&&(t=Math.floor(Date.parse(`${e.expires()}`)/1e3));const r=o.Runtime.experiments.isEnabled("experimental-cookie-features"),i={name:e.name(),value:e.value(),url:e.url()||void 0,domain:s,path:e.path(),secure:e.secure(),httpOnly:e.httpOnly(),sameSite:e.sameSite(),expires:t,priority:e.priority(),partitionKey:e.partitionKey(),sourceScheme:r?e.sourceScheme():(n=e.sourceScheme(),"Unset"===n?n:void 0),sourcePort:r?e.sourcePort():void 0};var n;const a=await this.target().networkAgent().invoke_setCookie(i);return!(a.getError()||!a.success)&&(await this.#mo(),a.success)}async getCookiesForDomain(e,t){return this.#go()&&!t||await this.#mo(),(this.#oo.get(e)||[]).concat(Array.from(this.#ro.values()))}async deleteCookies(e){const t=this.target().networkAgent();this.#ro.clear(),this.#io.clear(),await Promise.all(e.map(e=>t.invoke_deleteCookies({name:e.name(),url:void 0,domain:e.domain(),path:e.path(),partitionKey:e.partitionKey()}))),await this.#mo()}#go(){return Boolean(this.listeners?.size)}#uo(e){if(e.size!==this.#oo.size)return!0;for(const[t,s]of e){if(!this.#oo.has(t))return!0;const e=this.#oo.get(t)||[];if(s.length!==e.length)return!0;const r=e=>e.key()+" "+e.value(),i=new Set(e.map(r));for(const e of s)if(!i.has(r(e)))return!0}return!1}#mo(){return this.#no.schedule(()=>this.#do())}#do(){const t=new r.MapUtilities.Multimap,s=this.target().model(ii);if(s){const r=s.mainFrame?.unreachableUrl();if(r){const s=e.ParsedURL.ParsedURL.fromString(r);s&&t.set(s.securityOrigin(),r)}s.forAllResources(function(s){const r=e.ParsedURL.ParsedURL.fromString(s.documentURL);return r&&t.set(r.securityOrigin(),s.url),!1})}return this.#ho(t)}#lo(){this.#go()&&this.#mo()}#co(){this.#go()&&this.#mo()}}h.register(di,{capabilities:16,autostart:!1});var ci=Object.freeze({__proto__:null,CookieModel:di});class hi{#po;#fo;#bo;#yo;#wo;#vo;#ko;constructor(e){e&&(this.#po=e.toLowerCase().replace(/^\./,"")),this.#fo=[],this.#yo=0}static parseSetCookie(e,t){return new hi(t).parseSetCookie(e)}getCookieAttribute(e){if(!e)return null;switch(e.toLowerCase()){case"domain":return"domain";case"expires":return"expires";case"max-age":return"max-age";case"httponly":return"http-only";case"name":return"name";case"path":return"path";case"samesite":return"same-site";case"secure":return"secure";case"value":return"value";case"priority":return"priority";case"sourceport":return"source-port";case"sourcescheme":return"source-scheme";case"partitioned":return"partitioned";default:return console.error("Failed getting cookie attribute: "+e),null}}cookies(){return this.#fo}parseSetCookie(e){if(!this.initialize(e))return null;for(let e=this.extractKeyValue();e;e=this.extractKeyValue())this.#wo?this.#wo.addAttribute(this.getCookieAttribute(e.key),e.value):this.addCookie(e,1),this.advanceAndCheckCookieDelimiter()&&this.flushCookie();return this.flushCookie(),this.#fo}initialize(e){return this.#bo=e,"string"==typeof e&&(this.#fo=[],this.#wo=null,this.#vo="",this.#yo=this.#bo.length,!0)}flushCookie(){this.#wo&&(this.#wo.setSize(this.#yo-this.#bo.length-this.#ko),this.#wo.setCookieLine(this.#vo.replace("\n",""))),this.#wo=null,this.#vo=""}extractKeyValue(){if(!this.#bo||!this.#bo.length)return null;const e=/^[ \t]*([^=;\n]+)[ \t]*(?:=[ \t]*([^;\n]*))?/.exec(this.#bo);if(!e)return console.error("Failed parsing cookie header before: "+this.#bo),null;const t=new ui(e[1]?.trim(),e[2]?.trim(),this.#yo-this.#bo.length);return this.#vo+=e[0],this.#bo=this.#bo.slice(e[0].length),t}advanceAndCheckCookieDelimiter(){if(!this.#bo)return!1;const e=/^\s*[\n;]\s*/.exec(this.#bo);return!!e&&(this.#vo+=e[0],this.#bo=this.#bo.slice(e[0].length),null!==e[0].match("\n"))}addCookie(e,t){this.#wo&&this.#wo.setSize(e.position-this.#ko),this.#wo="string"==typeof e.value?new H(e.key,e.value,t):new H("",e.key,t),this.#po&&this.#wo.addAttribute("domain",this.#po),this.#ko=e.position,this.#fo.push(this.#wo)}}class ui{key;value;position;constructor(e,t,s){this.key=e,this.value=t,this.position=s}}var gi=Object.freeze({__proto__:null,CookieParser:hi});class pi{#So;#xo;#Co=!1;#Io="";#Ro="";#To="";#Po="";constructor(e,t){this.#So=e,this.#xo=new mi(this.#Eo.bind(this),t)}async addBase64Chunk(e){await this.#xo.addBase64Chunk(e)}#Eo(e){let t=0;for(let s=0;s<e.length;++s)this.#Co&&"\n"===e[s]?(this.#Co=!1,++t):(this.#Co=!1,"\r"!==e[s]&&"\n"!==e[s]||(this.#Io+=e.substring(t,s),this.#Mo(),this.#Io="",t=s+1,this.#Co="\r"===e[s]));this.#Io+=e.substring(t)}#Mo(){if(0===this.#Io.length){if(this.#To.length>0){const e=this.#To.slice(0,-1);this.#So(this.#Po||"message",e,this.#Ro),this.#To=""}return void(this.#Po="")}let e,t=this.#Io.indexOf(":");t<0?(t=this.#Io.length,e=t):(e=t+1,e<this.#Io.length&&" "===this.#Io[e]&&++e);const s=this.#Io.substring(0,t);"event"!==s?("data"===s&&(this.#To+=this.#Io.substring(e),this.#To+="\n"),"id"===s&&(this.#Ro=this.#Io.substring(e))):this.#Po=this.#Io.substring(e)}}class mi{#xo;#Lo;constructor(e,t){this.#xo=new TextDecoderStream(t),this.#Lo=this.#xo.writable.getWriter(),this.#xo.readable.pipeTo(new WritableStream({write:e}))}async addBase64Chunk(e){const t=window.atob(e),s=Uint8Array.from(t,e=>e.codePointAt(0));await this.#Lo.ready,await this.#Lo.write(s)}}var fi=Object.freeze({__proto__:null,ServerSentEventsParser:pi});class bi{#Ao;#Oo;#Do=0;#No=[];constructor(e,s){this.#Ao=e,s&&(this.#Do=e.pseudoWallTime(e.startTime),this.#Oo=new pi(this.#Fo.bind(this),e.charset()??void 0),this.#Ao.requestStreamingContent().then(s=>{t.StreamingContentData.isError(s)||(this.#Oo?.addBase64Chunk(s.content().base64),s.addEventListener("ChunkAdded",({data:{chunk:t}})=>{this.#Do=e.pseudoWallTime(e.endTime),this.#Oo?.addBase64Chunk(t)}))}))}get eventSourceMessages(){return this.#No}onProtocolEventSourceMessageReceived(e,t,s,r){this.#_o({eventName:e,eventId:s,data:t,time:r})}#Fo(e,t,s){this.#_o({eventName:e,eventId:s,data:t,time:this.#Do})}#_o(e){this.#No.push(e),this.#Ao.dispatchEventToListeners(Ti.EVENT_SOURCE_MESSAGE_ADDED,e)}}const yi={deprecatedSyntaxFoundPleaseUse:"Deprecated syntax found. Please use: <name>;dur=<duration>;desc=<description>",duplicateParameterSIgnored:'Duplicate parameter "{PH1}" ignored.',noValueFoundForParameterS:'No value found for parameter "{PH1}".',unrecognizedParameterS:'Unrecognized parameter "{PH1}".',extraneousTrailingCharacters:"Extraneous trailing characters.",unableToParseSValueS:'Unable to parse "{PH1}" value "{PH2}".'},vi=n.i18n.registerUIStrings("core/sdk/ServerTiming.ts",yi),Ii=n.i18n.getLocalizedString.bind(void 0,vi);class wi{metric;value;description;constructor(e,t,s){this.metric=e,this.value=t,this.description=s}static parseHeaders(e){const t=e.filter(e=>"server-timing"===e.name.toLowerCase());if(!t.length)return null;const s=t.reduce((e,t)=>{const s=this.createFromHeaderValue(t.value);return e.push(...s.map(function(e){return new wi(e.name,e.hasOwnProperty("dur")?e.dur:null,e.hasOwnProperty("desc")?e.desc:"")})),e},[]);return s.sort((e,t)=>r.StringUtilities.compare(e.metric.toLowerCase(),t.metric.toLowerCase())),s}static createFromHeaderValue(e){function t(){e=e.replace(/^\s*/,"")}function s(s){return console.assert(1===s.length),t(),e.charAt(0)===s&&(e=e.substring(1),!0)}function r(){const t=/^(?:\s*)([\w!#$%&'*+\-.^`|~]+)(?:\s*)(.*)/.exec(e);return t?(e=t[2],t[1]):null}function i(){return t(),'"'===e.charAt(0)?function(){console.assert('"'===e.charAt(0)),e=e.substring(1);let t="";for(;e.length;){const s=/^([^"\\]*)(.*)/.exec(e);if(!s)return null;if(t+=s[1],'"'===s[2].charAt(0))return e=s[2].substring(1),t;console.assert("\\"===s[2].charAt(0)),t+=s[2].charAt(1),e=s[2].substring(2)}return null}():r()}function n(){const t=/([,;].*)/.exec(e);t&&(e=t[1])}const o=[];let a;for(;null!==(a=r());){const t={name:a};for("="===e.charAt(0)&&this.showWarning(Ii(yi.deprecatedSyntaxFoundPleaseUse));s(";");){let e;if(null===(e=r()))continue;e=e.toLowerCase();const o=this.getParserForParameter(e);let a=null;if(s("=")&&(a=i(),n()),o){if(t.hasOwnProperty(e)){this.showWarning(Ii(yi.duplicateParameterSIgnored,{PH1:e}));continue}null===a&&this.showWarning(Ii(yi.noValueFoundForParameterS,{PH1:e})),o.call(this,t,a)}else this.showWarning(Ii(yi.unrecognizedParameterS,{PH1:e}))}if(o.push(t),!s(","))break}return e.length&&this.showWarning(Ii(yi.extraneousTrailingCharacters)),o}static getParserForParameter(e){switch(e){case"dur":{function t(t,s){if(t.dur=0,null!==s){const r=parseFloat(s);if(isNaN(r))return void wi.showWarning(Ii(yi.unableToParseSValueS,{PH1:e,PH2:s}));t.dur=r}}return t}case"desc":{function s(e,t){e.desc=t||""}return s}default:return null}}static showWarning(t){e.Console.Console.instance().warn(`ServerTiming: ${t}`)}}var Si=Object.freeze({__proto__:null,ServerTiming:wi});const ki={binary:"(binary)",secureOnly:'This cookie was blocked because it had the "`Secure`" attribute and the connection was not secure.',notOnPath:"This cookie was blocked because its path was not an exact match for or a superdirectory of the request url's path.",domainMismatch:"This cookie was blocked because neither did the request URL's domain exactly match the cookie's domain, nor was the request URL's domain a subdomain of the cookie's Domain attribute value.",sameSiteStrict:'This cookie was blocked because it had the "`SameSite=Strict`" attribute and the request was made from a different site. This includes top-level navigation requests initiated by other sites.',sameSiteLax:'This cookie was blocked because it had the "`SameSite=Lax`" attribute and the request was made from a different site and was not initiated by a top-level navigation.',sameSiteUnspecifiedTreatedAsLax:'This cookie didn\'t specify a "`SameSite`" attribute when it was stored and was defaulted to "SameSite=Lax," and was blocked because the request was made from a different site and was not initiated by a top-level navigation. The cookie had to have been set with "`SameSite=None`" to enable cross-site usage.',sameSiteNoneInsecure:'This cookie was blocked because it had the "`SameSite=None`" attribute but was not marked "Secure". Cookies without SameSite restrictions must be marked "Secure" and sent over a secure connection.',userPreferences:"This cookie was blocked due to user preferences.",thirdPartyPhaseout:"This cookie was blocked either because of Chrome flags or browser configuration. Learn more in the Issues panel.",unknownError:"An unknown error was encountered when trying to send this cookie.",schemefulSameSiteStrict:'This cookie was blocked because it had the "`SameSite=Strict`" attribute but the request was cross-site. This includes top-level navigation requests initiated by other sites. This request is considered cross-site because the URL has a different scheme than the current site.',schemefulSameSiteLax:'This cookie was blocked because it had the "`SameSite=Lax`" attribute but the request was cross-site and was not initiated by a top-level navigation. This request is considered cross-site because the URL has a different scheme than the current site.',schemefulSameSiteUnspecifiedTreatedAsLax:'This cookie didn\'t specify a "`SameSite`" attribute when it was stored, was defaulted to "`SameSite=Lax"`, and was blocked because the request was cross-site and was not initiated by a top-level navigation. This request is considered cross-site because the URL has a different scheme than the current site.',samePartyFromCrossPartyContext:"This cookie was blocked because it had the \"`SameParty`\" attribute but the request was cross-party. The request was considered cross-party because the domain of the resource's URL and the domains of the resource's enclosing frames/documents are neither owners nor members in the same First-Party Set.",nameValuePairExceedsMaxSize:"This cookie was blocked because it was too large. The combined size of the name and value must be less than or equal to 4096 characters.",thisSetcookieWasBlockedDueToUser:"This attempt to set a cookie via a `Set-Cookie` header was blocked due to user preferences.",thisSetcookieWasBlockedDueThirdPartyPhaseout:"Setting this cookie was blocked either because of Chrome flags or browser configuration. Learn more in the Issues panel.",thisSetcookieHadInvalidSyntax:"This `Set-Cookie` header had invalid syntax.",thisSetcookieHadADisallowedCharacter:"This `Set-Cookie` header contained a disallowed character (a forbidden ASCII control character, or the tab character if it appears in the middle of the cookie name, value, an attribute name, or an attribute value).",theSchemeOfThisConnectionIsNot:"The scheme of this connection is not allowed to store cookies.",anUnknownErrorWasEncounteredWhenTrying:"An unknown error was encountered when trying to store this cookie.",thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "{PH1}" attribute but came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.',thisSetcookieDidntSpecifyASamesite:'This `Set-Cookie` header didn\'t specify a "`SameSite`" attribute, was defaulted to "`SameSite=Lax"`, and was blocked because it came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.',thisSetcookieWasBlockedBecauseItHadTheSameparty:"This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the \"`SameParty`\" attribute but the request was cross-party. The request was considered cross-party because the domain of the resource's URL and the domains of the resource's enclosing frames/documents are neither owners nor members in the same First-Party Set.",thisSetcookieWasBlockedBecauseItHadTheSamepartyAttribute:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "`SameParty`" attribute but also had other conflicting attributes. Chrome requires cookies that use the "`SameParty`" attribute to also have the "Secure" attribute, and to not be restricted to "`SameSite=Strict`".',blockedReasonSecureOnly:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "Secure" attribute but was not received over a secure connection.',blockedReasonSameSiteStrictLax:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "{PH1}" attribute but came from a cross-site response which was not the response to a top-level navigation.',blockedReasonSameSiteUnspecifiedTreatedAsLax:'This `Set-Cookie` header didn\'t specify a "`SameSite`" attribute and was defaulted to "`SameSite=Lax,`" and was blocked because it came from a cross-site response which was not the response to a top-level navigation. The `Set-Cookie` had to have been set with "`SameSite=None`" to enable cross-site usage.',blockedReasonSameSiteNoneInsecure:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "`SameSite=None`" attribute but did not have the "Secure" attribute, which is required in order to use "`SameSite=None`".',blockedReasonOverwriteSecure:"This attempt to set a cookie via a `Set-Cookie` header was blocked because it was not sent over a secure connection and would have overwritten a cookie with the Secure attribute.",blockedReasonInvalidDomain:"This attempt to set a cookie via a `Set-Cookie` header was blocked because its Domain attribute was invalid with regards to the current host url.",blockedReasonInvalidPrefix:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it used the "`__Secure-`" or "`__Host-`" prefix in its name and broke the additional rules applied to cookies with these prefixes as defined in `https://tools.ietf.org/html/draft-west-cookie-prefixes-05`.',thisSetcookieWasBlockedBecauseTheNameValuePairExceedsMaxSize:"This attempt to set a cookie via a `Set-Cookie` header was blocked because the cookie was too large. The combined size of the name and value must be less than or equal to 4096 characters.",setcookieHeaderIsIgnoredIn:"Set-Cookie header is ignored in response from url: {PH1}. The combined size of the name and value must be less than or equal to 4096 characters.",exemptionReasonUserSetting:"This cookie is allowed by user preference.",exemptionReasonTPCDMetadata:"This cookie is allowed by a third-party cookie deprecation trial grace period. Learn more: goo.gle/dt-grace.",exemptionReasonTPCDDeprecationTrial:"This cookie is allowed by third-party cookie deprecation trial. Learn more: goo.gle/ps-dt.",exemptionReasonTopLevelTPCDDeprecationTrial:"This cookie is allowed by top-level third-party cookie deprecation trial. Learn more: goo.gle/ps-dt.",exemptionReasonTPCDHeuristics:"This cookie is allowed by third-party cookie heuristics. Learn more: goo.gle/hbe",exemptionReasonEnterprisePolicy:"This cookie is allowed by Chrome Enterprise policy. Learn more: goo.gle/ce-3pc",exemptionReasonStorageAccessAPI:"This cookie is allowed by the Storage Access API. Learn more: goo.gle/saa",exemptionReasonTopLevelStorageAccessAPI:"This cookie is allowed by the top-level Storage Access API. Learn more: goo.gle/saa-top",exemptionReasonScheme:"This cookie is allowed by the top-level url scheme"},Ci=n.i18n.registerUIStrings("core/sdk/NetworkRequest.ts",ki),xi=n.i18n.getLocalizedString.bind(void 0,Ci);class Ri extends e.ObjectWrapper.ObjectWrapper{#Uo;#Bo;#kn;#Sn;#xn;#Ho;#qo;#zo;#jo;#Wo;#Vo;#Go;#Ko;#$o;#Qo;#Yo;#Jo;statusCode;statusText;requestMethod;requestTime;protocol;alternateProtocolUsage;mixedContentType;#Xo;#Zo;#ea;#ta;#sa;#ra;#ia;#na;#oa;#aa;#la;#ca;#da;#ha;#ua;#ga;#ma;#pa;#fa;#ba;#ya;connectionId;connectionReused;hasNetworkData;#wa;#va;#ka;#Sa;#xa;#Ca;#Ia;#Ra;#Ta;#Pa;#Ea;localizedFailDescription;#vn;#Ma;#La;#ge;#Aa;#Oa;#Da;#In;#Na;#En;#h;#Fa;#_a;#Ua;#Ba;#Ha;#qa;#za;#ja;#Wa;#Va;#Ga;#Ka;#$a;#Qa;#Ya;#Ja;#Xa;#Za;#el;#tl;#sl;#rl;#il;#nl;#ol;#al;#ll;#cl=new Map;#dl;#hl;#ul;responseReceivedPromise;responseReceivedPromiseResolve;directSocketInfo;constructor(t,s,r,i,n,o,a,l){super(),this.#Uo=t,this.#Bo=s,this.setUrl(r),this.#kn=i,this.#Sn=n,this.#xn=o,this.#qo=a,this.#Ho=l,this.#zo=null,this.#jo=null,this.#Wo=null,this.#Vo=!1,this.#Go=null,this.#Ko=-1,this.#$o=-1,this.#Qo=-1,this.#Yo=void 0,this.#Jo=void 0,this.statusCode=0,this.statusText="",this.requestMethod="",this.requestTime=0,this.protocol="",this.alternateProtocolUsage=void 0,this.mixedContentType="none",this.#Xo=null,this.#Zo=null,this.#ea=null,this.#ta=null,this.#sa=null,this.#ra=e.ResourceType.resourceTypes.Other,this.#ia=null,this.#na=null,this.#oa=[],this.#aa={},this.#la="",this.#ca=[],this.#ha=[],this.#ua=[],this.#ga={},this.#ma="",this.#pa="Unknown",this.#fa=null,this.#ba="unknown",this.#ya=null,this.connectionId="0",this.connectionReused=!1,this.hasNetworkData=!1,this.#wa=null,this.#va=Promise.resolve(null),this.#ka=!1,this.#Sa=!1,this.#xa=[],this.#Ca=[],this.#Ia=[],this.#Ra=[],this.#Ea=!1,this.#Ta=null,this.#Pa=null,this.localizedFailDescription=null,this.#al=null,this.#ll=!1,this.#dl=!1,this.#hl=!1}static create(e,t,s,r,i,n,o){return new Ri(e,e,t,s,r,i,n,o)}static createForWebSocket(e,t,s){return new Ri(e,e,t,r.DevToolsPath.EmptyUrlString,null,null,s||null)}static createWithoutBackendRequest(e,t,s,r){return new Ri(e,void 0,t,s,null,null,r)}identityCompare(e){const t=this.requestId(),s=e.requestId();return t>s?1:t<s?-1:0}requestId(){return this.#Uo}backendRequestId(){return this.#Bo}url(){return this.#vn}isBlobRequest(){return e.ParsedURL.schemeIs(this.#vn,"blob:")}setUrl(t){this.#vn!==t&&(this.#vn=t,this.#En=new e.ParsedURL.ParsedURL(t),this.#il=void 0,this.#nl=void 0,this.#h=void 0,this.#Fa=void 0)}get documentURL(){return this.#kn}get parsedURL(){return this.#En}get frameId(){return this.#Sn}get loaderId(){return this.#xn}setRemoteAddress(e,t){this.#ma=e+":"+t,this.dispatchEventToListeners(Ti.REMOTE_ADDRESS_CHANGED,this)}remoteAddress(){return this.#ma}remoteAddressSpace(){return this.#pa}getResponseCacheStorageCacheName(){return this.#Ha}setResponseCacheStorageCacheName(e){this.#Ha=e}serviceWorkerResponseSource(){return this.#qa}setServiceWorkerResponseSource(e){this.#qa=e}setReferrerPolicy(e){this.#fa=e}referrerPolicy(){return this.#fa}securityState(){return this.#ba}setSecurityState(e){this.#ba=e}securityDetails(){return this.#ya}securityOrigin(){return this.#En.securityOrigin()}setSecurityDetails(e){this.#ya=e}get startTime(){return this.#$o||-1}setIssueTime(e,t){this.#Ko=e,this.#za=t,this.#$o=e}issueTime(){return this.#Ko}pseudoWallTime(e){return this.#za?this.#za-this.#Ko+e:e}get responseReceivedTime(){return this.#Ma||-1}set responseReceivedTime(e){this.#Ma=e}getResponseRetrievalTime(){return this.#ja}setResponseRetrievalTime(e){this.#ja=e}get endTime(){return this.#Qo||-1}set endTime(e){this.timing?.requestTime?this.#Qo=Math.max(e,this.responseReceivedTime):(this.#Qo=e,this.#Ma>e&&(this.#Ma=e)),this.dispatchEventToListeners(Ti.TIMING_CHANGED,this)}get duration(){return-1===this.#Qo||-1===this.#$o?-1:this.#Qo-this.#$o}get latency(){return-1===this.#Ma||-1===this.#$o?-1:this.#Ma-this.#$o}get resourceSize(){return this.#Wa||0}set resourceSize(e){this.#Wa=e}get transferSize(){return this.#La||0}increaseTransferSize(e){this.#La=(this.#La||0)+e}setTransferSize(e){this.#La=e}get finished(){return this.#ge}set finished(e){this.#ge!==e&&(this.#ge=e,e&&this.dispatchEventToListeners(Ti.FINISHED_LOADING,this))}get failed(){return this.#Aa}set failed(e){this.#Aa=e}get canceled(){return this.#Oa}set canceled(e){this.#Oa=e}get preserved(){return this.#Da}set preserved(e){this.#Da=e}blockedReason(){return this.#Yo}setBlockedReason(e){this.#Yo=e}corsErrorStatus(){return this.#Jo}setCorsErrorStatus(e){this.#Jo=e}wasBlocked(){return Boolean(this.#Yo)}cached(){return(Boolean(this.#Va)||Boolean(this.#Ga))&&!this.#La}cachedInMemory(){return Boolean(this.#Va)&&!this.#La}fromPrefetchCache(){return Boolean(this.#Ka)}setFromMemoryCache(){this.#Va=!0,this.#Ja=void 0}get fromDiskCache(){return this.#Ga}setFromDiskCache(){this.#Ga=!0}setFromPrefetchCache(){this.#Ka=!0}fromEarlyHints(){return Boolean(this.#$a)}setFromEarlyHints(){this.#$a=!0}get fetchedViaServiceWorker(){return Boolean(this.#Qa)}set fetchedViaServiceWorker(e){this.#Qa=e}get serviceWorkerRouterInfo(){return this.#Ya}set serviceWorkerRouterInfo(e){this.#Ya=e}initiatedByServiceWorker(){const e=Z.forRequest(this);return!!e&&e.target().type()===U.ServiceWorker}get timing(){return this.#Ja}set timing(e){if(!e||this.#Va)return;this.#$o=e.requestTime;const t=e.requestTime+e.receiveHeadersEnd/1e3;((this.#Ma||-1)<0||this.#Ma>t)&&(this.#Ma=t),this.#$o>this.#Ma&&(this.#Ma=this.#$o),this.#Ja=e,this.dispatchEventToListeners(Ti.TIMING_CHANGED,this)}setConnectTimingFromExtraInfo(e){this.#$o=e.requestTime,this.dispatchEventToListeners(Ti.TIMING_CHANGED,this)}get mimeType(){return this.#In}set mimeType(t){if(this.#In=t,"text/event-stream"===t&&!this.#ul){const t=this.resourceType()!==e.ResourceType.resourceTypes.EventSource;this.#ul=new bi(this,t)}}get displayName(){return this.#En.displayName}name(){return this.#h||this.parseNameAndPathFromURL(),this.#h}path(){return this.#Fa||this.parseNameAndPathFromURL(),this.#Fa}parseNameAndPathFromURL(){if(this.#En.isDataURL())this.#h=this.#En.dataURLDisplayName(),this.#Fa="";else if(this.#En.isBlobURL())this.#h=this.#En.url,this.#Fa="";else if(this.#En.isAboutBlank())this.#h=this.#En.url,this.#Fa="";else{this.#Fa=this.#En.host+this.#En.folderPathComponents;const t=Z.forRequest(this),s=t?e.ParsedURL.ParsedURL.fromString(t.target().inspectedURL()):null;this.#Fa=r.StringUtilities.trimURL(this.#Fa,s?s.host:""),this.#En.lastPathComponent||this.#En.queryParams?this.#h=this.#En.lastPathComponent+(this.#En.queryParams?"?"+this.#En.queryParams:""):this.#En.folderPathComponents?(this.#h=this.#En.folderPathComponents.substring(this.#En.folderPathComponents.lastIndexOf("/")+1)+"/",this.#Fa=this.#Fa.substring(0,this.#Fa.lastIndexOf("/"))):(this.#h=this.#En.host,this.#Fa="")}}get folder(){let e=this.#En.path;const t=e.indexOf("?");-1!==t&&(e=e.substring(0,t));const s=e.lastIndexOf("/");return-1!==s?e.substring(0,s):""}get pathname(){return this.#En.path}resourceType(){return this.#ra}setResourceType(e){this.#ra=e}get domain(){return this.#En.host}get scheme(){return this.#En.scheme}getInferredStatusText(){return this.statusText||(e=this.statusCode,n.i18n.lockedString({100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Content Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"}[e]??""));var e}redirectSource(){return this.#zo}setRedirectSource(e){this.#zo=e}preflightRequest(){return this.#jo}setPreflightRequest(e){this.#jo=e}preflightInitiatorRequest(){return this.#Wo}setPreflightInitiatorRequest(e){this.#Wo=e}isPreflightRequest(){return null!==this.#qo&&void 0!==this.#qo&&"preflight"===this.#qo.type}redirectDestination(){return this.#Go}setRedirectDestination(e){this.#Go=e}requestHeaders(){return this.#ua}setRequestHeaders(e){this.#ua=e,this.dispatchEventToListeners(Ti.REQUEST_HEADERS_CHANGED)}requestHeadersText(){return this.#Xa}setRequestHeadersText(e){this.#Xa=e,this.dispatchEventToListeners(Ti.REQUEST_HEADERS_CHANGED)}requestHeaderValue(e){return this.#ga[e]||(this.#ga[e]=this.computeHeaderValue(this.requestHeaders(),e)),this.#ga[e]}requestFormData(){return this.#va||(this.#va=Z.requestPostData(this)),this.#va}setRequestFormData(e,t){this.#va=e&&null===t?null:Promise.resolve(t),this.#wa=null}filteredProtocolName(){const e=this.protocol.toLowerCase();return"h2"===e?"http/2.0":e.replace(/^http\/2(\.0)?\+/,"http/2.0+")}requestHttpVersion(){const e=this.requestHeadersText();if(!e){return this.requestHeaderValue("version")||this.requestHeaderValue(":version")||this.filteredProtocolName()}const t=e.split(/\r\n/)[0].match(/(HTTP\/\d+\.\d+)$/);return t?t[1]:"HTTP/0.9"}get responseHeaders(){return this.#Za||[]}set responseHeaders(e){this.#Za=e,this.#tl=void 0,this.#rl=void 0,this.#sl=void 0,this.#aa={},this.dispatchEventToListeners(Ti.RESPONSE_HEADERS_CHANGED)}get earlyHintsHeaders(){return this.#el||[]}set earlyHintsHeaders(e){this.#el=e}get originalResponseHeaders(){return this.#ca}set originalResponseHeaders(e){this.#ca=e,this.#da=void 0}get setCookieHeaders(){return this.#ha}set setCookieHeaders(e){this.#ha=e}get responseHeadersText(){return this.#la}set responseHeadersText(e){this.#la=e,this.dispatchEventToListeners(Ti.RESPONSE_HEADERS_CHANGED)}get sortedResponseHeaders(){return void 0!==this.#tl?this.#tl:(this.#tl=this.responseHeaders.slice(),this.#tl.sort(function(e,t){return r.StringUtilities.compare(e.name.toLowerCase(),t.name.toLowerCase())}))}get sortedOriginalResponseHeaders(){return void 0!==this.#da?this.#da:(this.#da=this.originalResponseHeaders.slice(),this.#da.sort(function(e,t){return r.StringUtilities.compare(e.name.toLowerCase(),t.name.toLowerCase())}))}get overrideTypes(){const e=[];return this.hasOverriddenContent&&e.push("content"),this.hasOverriddenHeaders()&&e.push("headers"),e}get hasOverriddenContent(){return this.#dl}set hasOverriddenContent(e){this.#dl=e}#gl(e){const t=[];for(const s of e)t.length&&t[t.length-1].name===s.name?t[t.length-1].value+=`, ${s.value}`:t.push({name:s.name,value:s.value});return t}hasOverriddenHeaders(){if(!this.#ca.length)return!1;const e=this.#gl(this.sortedResponseHeaders),t=this.#gl(this.sortedOriginalResponseHeaders);if(e.length!==t.length)return!0;for(let s=0;s<e.length;s++){if(e[s].name.toLowerCase()!==t[s].name.toLowerCase())return!0;if(e[s].value!==t[s].value)return!0}return!1}responseHeaderValue(e){return e in this.#aa||(this.#aa[e]=this.computeHeaderValue(this.responseHeaders,e)),this.#aa[e]}wasIntercepted(){return this.#ll}setWasIntercepted(e){this.#ll=e}setEarlyHintsHeaders(e){this.earlyHintsHeaders=e}get responseCookies(){if(!this.#sl)if(this.#sl=hi.parseSetCookie(this.responseHeaderValue("Set-Cookie"),this.domain)||[],this.#Ta)for(const e of this.#sl)e.partitioned()&&e.setPartitionKey(this.#Ta.topLevelSite,this.#Ta.hasCrossSiteAncestor);else if(this.#Pa)for(const e of this.#sl)e.setPartitionKeyOpaque();return this.#sl}responseLastModified(){return this.responseHeaderValue("last-modified")}allCookiesIncludingBlockedOnes(){return[...this.includedRequestCookies().map(e=>e.cookie),...this.responseCookies,...this.blockedRequestCookies().map(e=>e.cookie),...this.blockedResponseCookies().map(e=>e.cookie)].filter(e=>!!e)}get serverTimings(){return void 0===this.#rl&&(this.#rl=wi.parseHeaders(this.responseHeaders)),this.#rl}queryString(){if(void 0!==this.#il)return this.#il;let e=null;const t=this.url(),s=t.indexOf("?");if(-1!==s){e=t.substring(s+1);const r=e.indexOf("#");-1!==r&&(e=e.substring(0,r))}return this.#il=e,this.#il}get queryParameters(){if(this.#nl)return this.#nl;const e=this.queryString();return e?(this.#nl=this.parseParameters(e),this.#nl):null}async parseFormParameters(){const e=this.requestContentType();if(!e)return null;if(e.match(/^application\/x-www-form-urlencoded\s*(;.*)?$/i)){const e=await this.requestFormData();return e?this.parseParameters(e):null}const t=e.match(/^multipart\/form-data\s*;\s*boundary\s*=\s*(\S+)\s*$/);if(!t)return null;const s=t[1];if(!s)return null;const r=await this.requestFormData();return r?this.parseMultipartFormDataParameters(r,s):null}formParameters(){return this.#wa||(this.#wa=this.parseFormParameters()),this.#wa}responseHttpVersion(){const e=this.#la;if(!e){return this.responseHeaderValue("version")||this.responseHeaderValue(":version")||this.filteredProtocolName()}const t=e.split(/\r\n/)[0].match(/^(HTTP\/\d+\.\d+)/);return t?t[1]:"HTTP/0.9"}parseParameters(e){return e.split("&").map(function(e){const t=e.indexOf("=");return-1===t?{name:e,value:""}:{name:e.substring(0,t),value:e.substring(t+1)}})}parseMultipartFormDataParameters(e,t){const s=r.StringUtilities.escapeForRegExp(t),i=new RegExp('^\\r\\ncontent-disposition\\s*:\\s*form-data\\s*;\\s*name="([^"]*)"(?:\\s*;\\s*filename="([^"]*)")?(?:\\r\\ncontent-type\\s*:\\s*([^\\r\\n]*))?\\r\\n\\r\\n(.*)\\r\\n$',"is");return e.split(new RegExp(`--${s}(?:--s*$)?`,"g")).reduce(function(e,t){const[s,r,n,o,a]=t.match(i)||[];if(!s)return e;const l=n||o?xi(ki.binary):a;return e.push({name:r,value:l}),e},[])}computeHeaderValue(e,t){t=t.toLowerCase();const s=[];for(let r=0;r<e.length;++r)e[r].name.toLowerCase()===t&&s.push(e[r].value);if(s.length)return"set-cookie"===t?s.join("\n"):s.join(", ")}requestContentData(){return this.#ia||(this.#ol?this.#ia=this.#ol():this.#ia=Z.requestContentData(this)),this.#ia}setContentDataProvider(e){console.assert(!this.#ia,"contentData can only be set once."),this.#ol=e}requestStreamingContent(){if(this.#na)return this.#na;const e=this.finished?this.requestContentData():Z.streamResponseBody(this);return this.#na=e.then(e=>t.ContentData.ContentData.isError(e)?e:t.StreamingContentData.StreamingContentData.from(e)),this.#na}contentURL(){return this.#vn}contentType(){return this.#ra}async requestContent(){return t.ContentData.ContentData.asDeferredContent(await this.requestContentData())}async searchInContent(e,s,r){if(!this.#ol)return await Z.searchInRequest(this,e,s,r);const i=await this.requestContentData();return t.ContentData.ContentData.isError(i)||!i.isTextContent?[]:t.TextUtils.performSearchInContentData(i,e,s,r)}requestContentType(){return this.requestHeaderValue("Content-Type")}hasErrorStatusCode(){return this.statusCode>=400}setInitialPriority(e){this.#Xo=e}initialPriority(){return this.#Xo}setPriority(e){this.#Zo=e}priority(){return this.#Zo||this.#Xo||null}setSignedExchangeInfo(e){this.#ea=e}signedExchangeInfo(){return this.#ea}setWebBundleInfo(e){this.#ta=e}webBundleInfo(){return this.#ta}setWebBundleInnerRequestInfo(e){this.#sa=e}webBundleInnerRequestInfo(){return this.#sa}async populateImageSource(e){const s=await this.requestContentData();if(t.ContentData.ContentData.isError(s))return;let r=s.asDataUrl();null!==r||this.#Aa||(this.responseHeaderValue("cache-control")||"").includes("no-cache")||(r=this.#vn),null!==r&&(e.src=r)}initiator(){return this.#qo||null}hasUserGesture(){return this.#Ho??null}frames(){return this.#oa}addProtocolFrameError(e,t){this.addFrame({type:Mi.Error,text:e,time:this.pseudoWallTime(t),opCode:-1,mask:!1})}addProtocolFrame(e,t,s){const r=s?Mi.Send:Mi.Receive;this.addFrame({type:r,text:e.payloadData,time:this.pseudoWallTime(t),opCode:e.opcode,mask:e.mask})}addFrame(e){this.#oa.push(e),this.dispatchEventToListeners(Ti.WEBSOCKET_FRAME_ADDED,e)}eventSourceMessages(){return this.#ul?.eventSourceMessages??[]}addEventSourceMessage(e,t,s,r){this.#ul?.onProtocolEventSourceMessageReceived(t,r,s,this.pseudoWallTime(e))}markAsRedirect(e){this.#Vo=!0,this.#Uo=`${this.#Bo}:redirected.${e}`}isRedirect(){return this.#Vo}setRequestIdForTest(e){this.#Bo=e,this.#Uo=e}charset(){return this.#Na??null}setCharset(e){this.#Na=e}addExtraRequestInfo(e){this.#xa=e.blockedRequestCookies,this.#Ca=e.includedRequestCookies,this.setRequestHeaders(e.requestHeaders),this.#ka=!0,this.setRequestHeadersText(""),this.#_a=e.clientSecurityState,this.setConnectTimingFromExtraInfo(e.connectTiming),this.#Ea=e.siteHasCookieInOtherPartition??!1,this.#hl=this.#xa.some(e=>e.blockedReasons.includes("ThirdPartyPhaseout"))}hasExtraRequestInfo(){return this.#ka}blockedRequestCookies(){return this.#xa}includedRequestCookies(){return this.#Ca}hasRequestCookies(){return this.#Ca.length>0||this.#xa.length>0}siteHasCookieInOtherPartition(){return this.#Ea}static parseStatusTextFromResponseHeadersText(e){return e.split("\r")[0].split(" ").slice(2).join(" ")}addExtraResponseInfo(e){if(this.#Ia=e.blockedResponseCookies,e.exemptedResponseCookies&&(this.#Ra=e.exemptedResponseCookies),this.#Ta=e.cookiePartitionKey?e.cookiePartitionKey:null,this.#Pa=e.cookiePartitionKeyOpaque||null,this.responseHeaders=e.responseHeaders,this.originalResponseHeaders=e.responseHeaders.map(e=>({...e})),e.responseHeadersText){if(this.responseHeadersText=e.responseHeadersText,!this.requestHeadersText()){let e=`${this.requestMethod} ${this.parsedURL.path}`;this.parsedURL.queryParams&&(e+=`?${this.parsedURL.queryParams}`),e+=" HTTP/1.1\r\n";for(const{name:t,value:s}of this.requestHeaders())e+=`${t}: ${s}\r\n`;this.setRequestHeadersText(e)}this.statusText=Ri.parseStatusTextFromResponseHeadersText(e.responseHeadersText)}this.#pa=e.resourceIPAddressSpace,e.statusCode&&(this.statusCode=e.statusCode),this.#Sa=!0;const t=Z.forRequest(this);if(!t)return;for(const e of this.#Ia)if(e.blockedReasons.includes("NameValuePairExceedsMaxSize")){const e=xi(ki.setcookieHeaderIsIgnoredIn,{PH1:this.url()});t.dispatchEventToListeners(ee.MessageGenerated,{message:e,requestId:this.#Uo,warning:!0})}const s=t.target().model(di);if(s){for(const e of this.#Ra)s.removeBlockedCookie(e.cookie);for(const e of this.#Ia){const t=e.cookie;t&&(e.blockedReasons.includes("ThirdPartyPhaseout")&&(this.#hl=!0),s.addBlockedCookie(t,e.blockedReasons.map(e=>({attribute:Ei(e),uiString:Pi(e)}))))}}}hasExtraResponseInfo(){return this.#Sa}blockedResponseCookies(){return this.#Ia}exemptedResponseCookies(){return this.#Ra}nonBlockedResponseCookies(){const e=this.blockedResponseCookies().map(e=>e.cookieLine);return this.responseCookies.filter(t=>{const s=e.indexOf(t.getCookieLine());return-1===s||(e[s]=null,!1)})}responseCookiesPartitionKey(){return this.#Ta}responseCookiesPartitionKeyOpaque(){return this.#Pa}redirectSourceSignedExchangeInfoHasNoErrors(){return null!==this.#zo&&null!==this.#zo.#ea&&!this.#zo.#ea.errors}clientSecurityState(){return this.#_a}setTrustTokenParams(e){this.#Ua=e}trustTokenParams(){return this.#Ua}setTrustTokenOperationDoneEvent(e){this.#Ba=e,this.dispatchEventToListeners(Ti.TRUST_TOKEN_RESULT_ADDED)}trustTokenOperationDoneEvent(){return this.#Ba}setIsSameSite(e){this.#al=e}isSameSite(){return this.#al}getAssociatedData(e){return this.#cl.get(e)||null}setAssociatedData(e,t){this.#cl.set(e,t)}deleteAssociatedData(e){this.#cl.delete(e)}hasThirdPartyCookiePhaseoutIssue(){return this.#hl}addDataReceivedEvent({timestamp:e,dataLength:s,encodedDataLength:r,data:i}){this.resourceSize+=s,-1!==r&&this.increaseTransferSize(r),this.endTime=e,i&&this.#na?.then(e=>{t.StreamingContentData.isError(e)||e.addChunk(i)})}waitForResponseReceived(){if(this.responseReceivedPromise)return this.responseReceivedPromise;const{promise:e,resolve:t}=Promise.withResolvers();return this.responseReceivedPromise=e,this.responseReceivedPromiseResolve=t,this.responseReceivedPromise}}var Ti,Mi;!function(e){e.FINISHED_LOADING="FinishedLoading",e.TIMING_CHANGED="TimingChanged",e.REMOTE_ADDRESS_CHANGED="RemoteAddressChanged",e.REQUEST_HEADERS_CHANGED="RequestHeadersChanged",e.RESPONSE_HEADERS_CHANGED="ResponseHeadersChanged",e.WEBSOCKET_FRAME_ADDED="WebsocketFrameAdded",e.EVENT_SOURCE_MESSAGE_ADDED="EventSourceMessageAdded",e.TRUST_TOKEN_RESULT_ADDED="TrustTokenResultAdded"}(Ti||(Ti={})),function(e){e.Send="send",e.Receive="receive",e.Error="error"}(Mi||(Mi={}));const Pi=function(e){switch(e){case"SecureOnly":return xi(ki.blockedReasonSecureOnly);case"SameSiteStrict":return xi(ki.blockedReasonSameSiteStrictLax,{PH1:"SameSite=Strict"});case"SameSiteLax":return xi(ki.blockedReasonSameSiteStrictLax,{PH1:"SameSite=Lax"});case"SameSiteUnspecifiedTreatedAsLax":return xi(ki.blockedReasonSameSiteUnspecifiedTreatedAsLax);case"SameSiteNoneInsecure":return xi(ki.blockedReasonSameSiteNoneInsecure);case"UserPreferences":return xi(ki.thisSetcookieWasBlockedDueToUser);case"SyntaxError":return xi(ki.thisSetcookieHadInvalidSyntax);case"SchemeNotSupported":return xi(ki.theSchemeOfThisConnectionIsNot);case"OverwriteSecure":return xi(ki.blockedReasonOverwriteSecure);case"InvalidDomain":return xi(ki.blockedReasonInvalidDomain);case"InvalidPrefix":return xi(ki.blockedReasonInvalidPrefix);case"UnknownError":return xi(ki.anUnknownErrorWasEncounteredWhenTrying);case"SchemefulSameSiteStrict":return xi(ki.thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax,{PH1:"SameSite=Strict"});case"SchemefulSameSiteLax":return xi(ki.thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax,{PH1:"SameSite=Lax"});case"SchemefulSameSiteUnspecifiedTreatedAsLax":return xi(ki.thisSetcookieDidntSpecifyASamesite);case"SamePartyFromCrossPartyContext":return xi(ki.thisSetcookieWasBlockedBecauseItHadTheSameparty);case"SamePartyConflictsWithOtherAttributes":return xi(ki.thisSetcookieWasBlockedBecauseItHadTheSamepartyAttribute);case"NameValuePairExceedsMaxSize":return xi(ki.thisSetcookieWasBlockedBecauseTheNameValuePairExceedsMaxSize);case"DisallowedCharacter":return xi(ki.thisSetcookieHadADisallowedCharacter);case"ThirdPartyPhaseout":return xi(ki.thisSetcookieWasBlockedDueThirdPartyPhaseout)}return""},Ei=function(e){switch(e){case"SecureOnly":case"OverwriteSecure":return"secure";case"SameSiteStrict":case"SameSiteLax":case"SameSiteUnspecifiedTreatedAsLax":case"SameSiteNoneInsecure":case"SchemefulSameSiteStrict":case"SchemefulSameSiteLax":case"SchemefulSameSiteUnspecifiedTreatedAsLax":return"same-site";case"InvalidDomain":return"domain";case"InvalidPrefix":return"name";case"SamePartyConflictsWithOtherAttributes":case"SamePartyFromCrossPartyContext":case"NameValuePairExceedsMaxSize":case"UserPreferences":case"ThirdPartyPhaseout":case"SyntaxError":case"SchemeNotSupported":case"UnknownError":case"DisallowedCharacter":return null}return null};var Li,Ai;!function(e){e[e.TCP=1]="TCP",e[e.UDP_BOUND=2]="UDP_BOUND",e[e.UDP_CONNECTED=3]="UDP_CONNECTED"}(Li||(Li={})),function(e){e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSED=3]="CLOSED",e[e.ABORTED=4]="ABORTED"}(Ai||(Ai={}));var Oi=Object.freeze({__proto__:null,get DirectSocketStatus(){return Ai},get DirectSocketType(){return Li},get Events(){return Ti},NetworkRequest:Ri,get WebSocketFrameType(){return Mi},cookieBlockedReasonToAttribute:function(e){switch(e){case"SecureOnly":return"secure";case"NotOnPath":return"path";case"DomainMismatch":return"domain";case"SameSiteStrict":case"SameSiteLax":case"SameSiteUnspecifiedTreatedAsLax":case"SameSiteNoneInsecure":case"SchemefulSameSiteStrict":case"SchemefulSameSiteLax":case"SchemefulSameSiteUnspecifiedTreatedAsLax":return"same-site";case"SamePartyFromCrossPartyContext":case"NameValuePairExceedsMaxSize":case"UserPreferences":case"ThirdPartyPhaseout":case"UnknownError":return null}return null},cookieBlockedReasonToUiString:function(e){switch(e){case"SecureOnly":return xi(ki.secureOnly);case"NotOnPath":return xi(ki.notOnPath);case"DomainMismatch":return xi(ki.domainMismatch);case"SameSiteStrict":return xi(ki.sameSiteStrict);case"SameSiteLax":return xi(ki.sameSiteLax);case"SameSiteUnspecifiedTreatedAsLax":return xi(ki.sameSiteUnspecifiedTreatedAsLax);case"SameSiteNoneInsecure":return xi(ki.sameSiteNoneInsecure);case"UserPreferences":return xi(ki.userPreferences);case"UnknownError":return xi(ki.unknownError);case"SchemefulSameSiteStrict":return xi(ki.schemefulSameSiteStrict);case"SchemefulSameSiteLax":return xi(ki.schemefulSameSiteLax);case"SchemefulSameSiteUnspecifiedTreatedAsLax":return xi(ki.schemefulSameSiteUnspecifiedTreatedAsLax);case"SamePartyFromCrossPartyContext":return xi(ki.samePartyFromCrossPartyContext);case"NameValuePairExceedsMaxSize":return xi(ki.nameValuePairExceedsMaxSize);case"ThirdPartyPhaseout":return xi(ki.thirdPartyPhaseout)}return""},cookieExemptionReasonToUiString:function(e){switch(e){case"UserSetting":return xi(ki.exemptionReasonUserSetting);case"TPCDMetadata":return xi(ki.exemptionReasonTPCDMetadata);case"TopLevelTPCDDeprecationTrial":return xi(ki.exemptionReasonTopLevelTPCDDeprecationTrial);case"TPCDDeprecationTrial":return xi(ki.exemptionReasonTPCDDeprecationTrial);case"TPCDHeuristics":return xi(ki.exemptionReasonTPCDHeuristics);case"EnterprisePolicy":return xi(ki.exemptionReasonEnterprisePolicy);case"StorageAccess":return xi(ki.exemptionReasonStorageAccessAPI);case"TopLevelStorageAccess":return xi(ki.exemptionReasonTopLevelStorageAccessAPI);case"Scheme":return xi(ki.exemptionReasonScheme)}return""},setCookieBlockedReasonToAttribute:Ei,setCookieBlockedReasonToUiString:Pi});class Di{#ml;#C;#pl;#fl;#bl;#yl;#wl;#h;#Zt;#u;#vl;#kl;#Sl;#xl;constructor(e,t){this.#ml=e,this.#C=t.nodeId,e.setAXNodeForAXId(this.#C,this),t.backendDOMNodeId?(e.setAXNodeForBackendDOMNodeId(t.backendDOMNodeId,this),this.#pl=t.backendDOMNodeId,this.#fl=new js(e.target(),t.backendDOMNodeId)):(this.#pl=null,this.#fl=null),this.#bl=t.ignored,this.#bl&&"ignoredReasons"in t&&(this.#yl=t.ignoredReasons),this.#wl=t.role||null,this.#h=t.name||null,this.#Zt=t.description||null,this.#u=t.value||null,this.#vl=t.properties||null,this.#xl=[...new Set(t.childIds)],this.#kl=t.parentId||null,t.frameId&&!t.parentId?(this.#Sl=t.frameId,e.setRootAXNodeForFrameId(t.frameId,this)):this.#Sl=null}id(){return this.#C}accessibilityModel(){return this.#ml}ignored(){return this.#bl}ignoredReasons(){return this.#yl||null}role(){return this.#wl||null}coreProperties(){const e=[];return this.#h&&e.push({name:"name",value:this.#h}),this.#Zt&&e.push({name:"description",value:this.#Zt}),this.#u&&e.push({name:"value",value:this.#u}),e}name(){return this.#h||null}description(){return this.#Zt||null}value(){return this.#u||null}properties(){return this.#vl||null}parentNode(){return this.#kl?this.#ml.axNodeForId(this.#kl):null}isDOMNode(){return Boolean(this.#pl)}backendDOMNodeId(){return this.#pl}deferredDOMNode(){return this.#fl}highlightDOMNode(){const e=this.deferredDOMNode();e&&e.highlight()}children(){if(!this.#xl)return[];const e=[];for(const t of this.#xl){const s=this.#ml.axNodeForId(t);s&&e.push(s)}return e}numChildren(){return this.#xl?this.#xl.length:0}hasOnlyUnloadedChildren(){return!(!this.#xl||!this.#xl.length)&&this.#xl.every(e=>null===this.#ml.axNodeForId(e))}hasUnloadedChildren(){return!(!this.#xl||!this.#xl.length)&&this.#xl.some(e=>null===this.#ml.axNodeForId(e))}getFrameId(){return this.#Sl||this.parentNode()?.getFrameId()||null}}class Ni extends h{agent;#Cl=new Map;#Il=new Map;#Rl=new Map;#Tl=new Map;#Pl=null;constructor(e){super(e),e.registerAccessibilityDispatcher(this),this.agent=e.accessibilityAgent(),this.resumeModel()}clear(){this.#Pl=null,this.#Cl.clear(),this.#Il.clear(),this.#Rl.clear()}async resumeModel(){await this.agent.invoke_enable()}async suspendModel(){await this.agent.invoke_disable()}async requestPartialAXTree(e){const{nodes:t}=await this.agent.invoke_getPartialAXTree({nodeId:e.id,fetchRelatives:!0});if(!t)return;const s=[];for(const e of t)s.push(new Di(this,e))}loadComplete({root:e}){this.clear(),this.#Pl=new Di(this,e),this.dispatchEventToListeners("TreeUpdated",{root:this.#Pl})}nodesUpdated({nodes:e}){this.createNodesFromPayload(e),this.dispatchEventToListeners("TreeUpdated",{})}createNodesFromPayload(e){return e.map(e=>new Di(this,e))}async requestRootNode(e){if(e&&this.#Rl.has(e))return this.#Rl.get(e);if(!e&&this.#Pl)return this.#Pl;const{node:t}=await this.agent.invoke_getRootAXNode({frameId:e});return t?this.createNodesFromPayload([t])[0]:void 0}async requestAXChildren(e,t){const s=this.#Cl.get(e);if(!s)throw new Error("Cannot request children before parent");if(!s.hasUnloadedChildren())return s.children();const r=this.#Tl.get(e);if(r)await r;else{const s=this.agent.invoke_getChildAXNodes({id:e,frameId:t});this.#Tl.set(e,s);const r=await s;r.getError()||(this.createNodesFromPayload(r.nodes),this.#Tl.delete(e))}return s.children()}async requestAndLoadSubTreeToNode(e){const t=[];let s=this.axNodeForDOMNode(e);for(;s;){t.push(s);const e=s.parentNode();if(!e)return t;s=e}const{nodes:r}=await this.agent.invoke_getAXNodeAndAncestors({backendNodeId:e.backendNodeId()});return r?this.createNodesFromPayload(r):null}axNodeForId(e){return this.#Cl.get(e)||null}setRootAXNodeForFrameId(e,t){this.#Rl.set(e,t)}setAXNodeForAXId(e,t){this.#Cl.set(e,t)}axNodeForDOMNode(e){return e?this.#Il.get(e.backendNodeId())??null:null}setAXNodeForBackendDOMNodeId(e,t){this.#Il.set(e,t)}getAgent(){return this.agent}}h.register(Ni,{capabilities:2,autostart:!1});var Fi=Object.freeze({__proto__:null,AccessibilityModel:Ni,AccessibilityNode:Di});class Bi extends h{#Vi;#El=1;#Ml=[];constructor(e){super(e),this.#Vi=e.pageAgent(),e.registerPageDispatcher(this)}async startScreencast(e,t,s,r,i,n,o){this.#Ml.at(-1)&&await this.#Vi.invoke_stopScreencast();const a={id:this.#El++,request:{format:e,quality:t,maxWidth:s,maxHeight:r,everyNthFrame:i},callbacks:{onScreencastFrame:n,onScreencastVisibilityChanged:o}};return this.#Ml.push(a),this.#Vi.invoke_startScreencast({format:e,quality:t,maxWidth:s,maxHeight:r,everyNthFrame:i}),a.id}stopScreencast(e){const t=this.#Ml.pop();if(!t)throw new Error("There is no screencast operation to stop.");if(t.id!==e)throw new Error("Trying to stop a screencast operation that is not being served right now.");this.#Vi.invoke_stopScreencast();const s=this.#Ml.at(-1);s&&this.#Vi.invoke_startScreencast({format:s.request.format,quality:s.request.quality,maxWidth:s.request.maxWidth,maxHeight:s.request.maxHeight,everyNthFrame:s.request.everyNthFrame})}async captureScreenshot(e,t,s,r){const i={format:e,quality:t,fromSurface:!0};switch(s){case"fromClip":i.captureBeyondViewport=!0,i.clip=r;break;case"fullpage":i.captureBeyondViewport=!0;break;case"fromViewport":i.captureBeyondViewport=!1;break;default:throw new Error("Unexpected or unspecified screnshotMode")}await Fs.muteHighlight();const n=await this.#Vi.invoke_captureScreenshot(i);return await Fs.unmuteHighlight(),n.data}screencastFrame({data:e,metadata:t,sessionId:s}){this.#Vi.invoke_screencastFrameAck({sessionId:s});const r=this.#Ml.at(-1);r&&r.callbacks.onScreencastFrame.call(null,e,t)}screencastVisibilityChanged({visible:e}){const t=this.#Ml.at(-1);t&&t.callbacks.onScreencastVisibilityChanged.call(null,e)}backForwardCacheNotUsed(e){}domContentEventFired(e){}loadEventFired(e){}lifecycleEvent(e){}navigatedWithinDocument(e){}frameAttached(e){}frameNavigated(e){}documentOpened(e){}frameDetached(e){}frameStartedLoading(e){}frameStoppedLoading(e){}frameRequestedNavigation(e){}frameStartedNavigating(e){}frameSubtreeWillBeDetached(e){}frameScheduledNavigation(e){}frameClearedScheduledNavigation(e){}frameResized(){}javascriptDialogOpening(e){}javascriptDialogClosed(e){}interstitialShown(){}interstitialHidden(){}windowOpen(e){}fileChooserOpened(e){}compilationCacheProduced(e){}downloadWillBegin(e){}downloadProgress(){}prefetchStatusUpdated(e){}prerenderStatusUpdated(e){}}h.register(Bi,{capabilities:64,autostart:!1});var _i=Object.freeze({__proto__:null,ScreenCaptureModel:Bi});const Hi="devtools_animations",Ui="__devtools_report_scroll_position__",qi=e=>`__devtools_scroll_listener_${e}__`;async function zi(e,t){const s=e.domModel().target().model(ii),r=e.domModel().target().pageAgent();for(const i of s.frames()){const{executionContextId:s}=await r.invoke_createIsolatedWorld({frameId:i.id,worldName:t}),n=await e.resolveToObject(void 0,s);if(n)return n}return null}class ji{#Ll;#Al=new Map;#Ol;static lastAddedListenerId=0;constructor(e){this.#Ll=e}async#Dl(){if(this.#Ol)return;this.#Ol=e=>{const{name:t,payload:s}=e.data;if(t!==Ui)return;const{scrollTop:r,scrollLeft:i,id:n}=JSON.parse(s),o=this.#Al.get(n);o&&o({scrollTop:r,scrollLeft:i})};const e=this.#Ll.domModel().target().model(Jr);await e.addBinding({name:Ui,executionContextName:Hi}),e.addEventListener($r.BindingCalled,this.#Ol)}async#Nl(){if(!this.#Ol)return;const e=this.#Ll.domModel().target().model(Jr);await e.removeBinding({name:Ui}),e.removeEventListener($r.BindingCalled,this.#Ol),this.#Ol=void 0}async addScrollEventListener(e){ji.lastAddedListenerId++;const t=ji.lastAddedListenerId;this.#Al.set(t,e),this.#Ol||await this.#Dl();const s=await zi(this.#Ll,Hi);return s?(await s.callFunction(function(e,t,s){if("scrollingElement"in this&&!this.scrollingElement)return;const r="scrollingElement"in this?this.scrollingElement:this;this[s]=()=>{globalThis[t](JSON.stringify({scrollTop:r.scrollTop,scrollLeft:r.scrollLeft,id:e}))},this.addEventListener("scroll",this[s],!0)},[t,Ui,qi(t)].map(e=>Bn.toCallArgument(e))),s.release(),t):null}async removeScrollEventListener(e){const t=await zi(this.#Ll,Hi);t&&(await t.callFunction(function(e){this.removeEventListener("scroll",this[e]),delete this[e]},[qi(e)].map(e=>Bn.toCallArgument(e))),t.release(),this.#Al.delete(e),0===this.#Al.size&&await this.#Nl())}async scrollTop(){return await this.#Ll.callFunction(function(){return"scrollingElement"in this?this.scrollingElement?this.scrollingElement.scrollTop:0:this.scrollTop}).then(e=>e?.value??null)}async scrollLeft(){return await this.#Ll.callFunction(function(){return"scrollingElement"in this?this.scrollingElement?this.scrollingElement.scrollLeft:0:this.scrollLeft}).then(e=>e?.value??null)}async setScrollTop(e){await this.#Ll.callFunction(function(e){if("scrollingElement"in this){if(!this.scrollingElement)return;this.scrollingElement.scrollTop=e}else this.scrollTop=e},[e])}async setScrollLeft(e){await this.#Ll.callFunction(function(e){if("scrollingElement"in this){if(!this.scrollingElement)return;this.scrollingElement.scrollLeft=e}else this.scrollLeft=e},[e])}async verticalScrollRange(){return await this.#Ll.callFunction(function(){return"scrollingElement"in this?this.scrollingElement?this.scrollingElement.scrollHeight-this.scrollingElement.clientHeight:0:this.scrollHeight-this.clientHeight}).then(e=>e?.value??null)}async horizontalScrollRange(){return await this.#Ll.callFunction(function(){return"scrollingElement"in this?this.scrollingElement?this.scrollingElement.scrollWidth-this.scrollingElement.clientWidth:0:this.scrollWidth-this.clientWidth}).then(e=>e?.value??null)}}function Vi(e,t){const s=e.viewOrScrollTimeline(),r=t.viewOrScrollTimeline();return s?Boolean(r&&s.sourceNodeId===r.sourceNodeId&&s.axis===r.axis):!r&&e.startTime()===t.startTime()}class Wi extends h{runtimeModel;agent;#Fl=new Map;animationGroups=new Map;#_l=new Set;playbackRate=1;#Ul;#Bl;constructor(t){super(t),this.runtimeModel=t.model(Jr),this.agent=t.animationAgent(),t.registerAnimationDispatcher(new Yi(this)),t.suspended()||this.agent.invoke_enable(),t.model(ii).addEventListener(ri.PrimaryPageChanged,this.reset,this);const s=t.model(Bi);s&&(this.#Ul=new Zi(this,s)),this.#Bl=e.Debouncer.debounce(()=>{for(;this.#_l.size;)this.matchExistingGroups(this.createGroupFromPendingAnimations())},100)}reset(){this.#Fl.clear(),this.animationGroups.clear(),this.#_l.clear(),this.dispatchEventToListeners(Gi.ModelReset)}async devicePixelRatio(){const e=await this.target().runtimeAgent().invoke_evaluate({expression:"window.devicePixelRatio"});return"number"===e?.result.type?e?.result.value??1:1}async getAnimationGroupForAnimation(e,t){for(const s of this.animationGroups.values())for(const r of s.animations())if(r.name()===e){const e=await r.source().node();if(e?.id===t)return s}return null}animationCanceled(e){this.#_l.delete(e)}async animationUpdated(e){let t,s;for(const r of this.animationGroups.values())if(s=r.animations().find(t=>t.id()===e.id),s){t=r;break}s&&t&&(await s.setPayload(e),this.dispatchEventToListeners(Gi.AnimationGroupUpdated,t))}async animationStarted(e){if(!e.source||!e.source.backendNodeId)return;const t=await Ki.parsePayload(this,e),s=t.source().keyframesRule();"WebAnimation"===t.type()&&s&&0===s.keyframes().length?this.#_l.delete(t.id()):(this.#Fl.set(t.id(),t),this.#_l.add(t.id())),this.#Bl()}matchExistingGroups(e){let t=null;for(const s of this.animationGroups.values()){if(s.matches(e)){t=s,s.rebaseTo(e);break}if(s.shouldInclude(e)){t=s,s.appendAnimations(e.animations());break}}return t?this.dispatchEventToListeners(Gi.AnimationGroupUpdated,t):(this.animationGroups.set(e.id(),e),this.#Ul&&this.#Ul.captureScreenshots(e.finiteDuration(),e.screenshotsInternal),this.dispatchEventToListeners(Gi.AnimationGroupStarted,e)),Boolean(t)}createGroupFromPendingAnimations(){console.assert(this.#_l.size>0);const e=this.#_l.values().next().value;this.#_l.delete(e);const t=this.#Fl.get(e);if(!t)throw new Error("Unable to locate first animation");const s=[t],r=new Set;for(const e of this.#_l){const i=this.#Fl.get(e);Vi(t,i)?s.push(i):r.add(e)}return this.#_l=r,s.sort((e,t)=>e.startTime()-t.startTime()),new Ji(this,e,s)}setPlaybackRate(e){this.playbackRate=e,this.agent.invoke_setPlaybackRate({playbackRate:e})}async releaseAllAnimations(){const e=[...this.animationGroups.values()].flatMap(e=>e.animations().map(e=>e.id()));await this.agent.invoke_releaseAnimations({animations:e})}releaseAnimations(e){this.agent.invoke_releaseAnimations({animations:e})}async suspendModel(){await this.agent.invoke_disable().then(()=>this.reset())}async resumeModel(){await this.agent.invoke_enable()}}var Gi;!function(e){e.AnimationGroupStarted="AnimationGroupStarted",e.AnimationGroupUpdated="AnimationGroupUpdated",e.ModelReset="ModelReset"}(Gi||(Gi={}));class Ki{#Hl;#ql;#zl;#jl;constructor(e){this.#Hl=e}static async parsePayload(e,t){const s=new Ki(e);return await s.setPayload(t),s}async setPayload(e){if(e.viewOrScrollTimeline){const t=await this.#Hl.devicePixelRatio();e.viewOrScrollTimeline.startOffset&&(e.viewOrScrollTimeline.startOffset/=t),e.viewOrScrollTimeline.endOffset&&(e.viewOrScrollTimeline.endOffset/=t)}this.#ql=e,this.#zl&&e.source?this.#zl.setPayload(e.source):!this.#zl&&e.source&&(this.#zl=new Qi(this.#Hl,e.source))}percentageToPixels(e,t){const{startOffset:s,endOffset:r}=t;if(void 0===s||void 0===r)throw new Error("startOffset or endOffset does not exist in viewOrScrollTimeline");return e/100*(r-s)}viewOrScrollTimeline(){return this.#ql.viewOrScrollTimeline}id(){return this.#ql.id}name(){return this.#ql.name}paused(){return this.#ql.pausedState}playState(){return this.#jl||this.#ql.playState}playbackRate(){return this.#ql.playbackRate}startTime(){const e=this.viewOrScrollTimeline();return e?this.percentageToPixels(this.playbackRate()>0?this.#ql.startTime:100-this.#ql.startTime,e)+(this.viewOrScrollTimeline()?.startOffset??0):this.#ql.startTime}iterationDuration(){const e=this.viewOrScrollTimeline();return e?this.percentageToPixels(this.source().duration(),e):this.source().duration()}endTime(){return this.source().iterations?this.viewOrScrollTimeline()?this.startTime()+this.iterationDuration()*this.source().iterations():this.startTime()+this.source().delay()+this.source().duration()*this.source().iterations()+this.source().endDelay():1/0}finiteDuration(){const e=Math.min(this.source().iterations(),3);return this.viewOrScrollTimeline()?this.iterationDuration()*e:this.source().delay()+this.source().duration()*e}currentTime(){const e=this.viewOrScrollTimeline();return e?this.percentageToPixels(this.#ql.currentTime,e):this.#ql.currentTime}source(){return this.#zl}type(){return this.#ql.type}overlaps(e){if(!this.source().iterations()||!e.source().iterations())return!0;const t=this.startTime()<e.startTime()?this:e,s=t===this?e:this;return t.endTime()>=s.startTime()}delayOrStartTime(){return this.viewOrScrollTimeline()?this.startTime():this.source().delay()}setTiming(e,t){this.#zl.node().then(s=>{if(!s)throw new Error("Unable to find node");this.updateNodeStyle(e,t,s)}),this.#zl.durationInternal=e,this.#zl.delayInternal=t,this.#Hl.agent.invoke_setTiming({animationId:this.id(),duration:e,delay:t})}updateNodeStyle(e,t,s){let r;if("CSSTransition"===this.type())r="transition-";else{if("CSSAnimation"!==this.type())return;r="animation-"}if(!s.id)throw new Error("Node has no id");const i=s.domModel().cssModel();i.setEffectivePropertyValueForNode(s.id,r+"duration",e+"ms"),i.setEffectivePropertyValueForNode(s.id,r+"delay",t+"ms")}async remoteObjectPromise(){const e=await this.#Hl.agent.invoke_resolveAnimation({animationId:this.id()});return e?this.#Hl.runtimeModel.createRemoteObject(e.remoteObject):null}cssId(){return this.#ql.cssId||""}}class Qi{#Hl;#ti;delayInternal;durationInternal;#Wl;#Vl;constructor(e,t){this.#Hl=e,this.setPayload(t)}setPayload(e){this.#ti=e,!this.#Wl&&e.keyframesRule?this.#Wl=new $i(e.keyframesRule):this.#Wl&&e.keyframesRule&&this.#Wl.setPayload(e.keyframesRule),this.delayInternal=e.delay,this.durationInternal=e.duration}delay(){return this.delayInternal}endDelay(){return this.#ti.endDelay}iterations(){return this.delay()||this.endDelay()||this.duration()?this.#ti.iterations||1/0:0}duration(){return this.durationInternal}direction(){return this.#ti.direction}fill(){return this.#ti.fill}node(){return this.#Vl||(this.#Vl=new js(this.#Hl.target(),this.backendNodeId())),this.#Vl.resolvePromise()}deferredNode(){return new js(this.#Hl.target(),this.backendNodeId())}backendNodeId(){return this.#ti.backendNodeId}keyframesRule(){return this.#Wl||null}easing(){return this.#ti.easing}}class $i{#ti;#rt;constructor(e){this.setPayload(e)}setPayload(e){this.#ti=e,this.#rt?this.#ti.keyframes.forEach((e,t)=>{this.#rt[t]?.setPayload(e)}):this.#rt=this.#ti.keyframes.map(e=>new Xi(e))}name(){return this.#ti.name}keyframes(){return this.#rt}}class Xi{#ti;#Gl;constructor(e){this.setPayload(e)}setPayload(e){this.#ti=e,this.#Gl=e.offset}offset(){return this.#Gl}setOffset(e){this.#Gl=100*e+"%"}offsetAsNumber(){return parseFloat(this.#Gl)/100}easing(){return this.#ti.easing}}class Ji{#Hl;#C;#Kl;#$l;#Ql;screenshotsInternal;#Yl;constructor(e,t,s){this.#Hl=e,this.#C=t,this.#$l=s,this.#Ql=!1,this.screenshotsInternal=[],this.#Yl=[]}isScrollDriven(){return Boolean(this.#$l[0]?.viewOrScrollTimeline())}id(){return this.#C}animations(){return this.#$l}release(){this.#Hl.animationGroups.delete(this.id()),this.#Hl.releaseAnimations(this.animationIds())}animationIds(){return this.#$l.map(function(e){return e.id()})}startTime(){return this.#$l[0].startTime()}groupDuration(){let e=0;for(const t of this.#$l)e=Math.max(e,t.delayOrStartTime()+t.iterationDuration());return e}finiteDuration(){let e=0;for(let t=0;t<this.#$l.length;++t)e=Math.max(e,this.#$l[t].finiteDuration());return e}scrollOrientation(){const e=this.#$l[0]?.viewOrScrollTimeline();return e?e.axis:null}async scrollNode(){if(this.#Kl)return this.#Kl;if(!this.isScrollDriven())return null;const e=this.#$l[0]?.viewOrScrollTimeline()?.sourceNodeId;if(!e)return null;const t=new js(this.#Hl.target(),e),s=await t.resolvePromise();return s?(this.#Kl=new ji(s),this.#Kl):null}seekTo(e){this.#Hl.agent.invoke_seekAnimations({animations:this.animationIds(),currentTime:e})}paused(){return this.#Ql}togglePause(e){e!==this.#Ql&&(this.#Ql=e,this.#Hl.agent.invoke_setPaused({animations:this.animationIds(),paused:e}))}currentTimePromise(){let e=null;for(const t of this.#$l)(!e||t.endTime()>e.endTime())&&(e=t);if(!e)throw new Error("No longest animation found");return this.#Hl.agent.invoke_getCurrentTime({id:e.id()}).then(({currentTime:e})=>e||0)}matches(e){function t(e){const t=(e.viewOrScrollTimeline()?.sourceNodeId??"")+(e.viewOrScrollTimeline()?.axis??"");return("WebAnimation"===e.type()?e.type()+e.id():e.cssId())+t}if(this.#$l.length!==e.#$l.length)return!1;const s=this.#$l.map(t).sort(),r=e.#$l.map(t).sort();for(let e=0;e<s.length;e++)if(s[e]!==r[e])return!1;return!0}shouldInclude(e){const[t]=e.#$l,[s]=this.#$l;return Vi(s,t)}appendAnimations(e){this.#$l.push(...e)}rebaseTo(e){this.#Hl.releaseAnimations(this.animationIds()),this.#$l=e.#$l,this.#Kl=void 0}screenshots(){for(let e=0;e<this.screenshotsInternal.length;++e){const t=new Image;t.src="data:image/jpeg;base64,"+this.screenshotsInternal[e],this.#Yl.push(t)}return this.screenshotsInternal=[],this.#Yl}}class Yi{#Hl;constructor(e){this.#Hl=e}animationCreated(e){}animationCanceled({id:e}){this.#Hl.animationCanceled(e)}animationStarted({animation:e}){this.#Hl.animationStarted(e)}animationUpdated({animation:e}){this.#Hl.animationUpdated(e)}}class Zi{#ce;#Jl;#Hl;#Xl=!1;#Zl;#ec;#tc;constructor(e,t){this.#ce=[],this.#Jl=t,this.#Hl=e,this.#Hl.addEventListener(Gi.ModelReset,this.stopScreencast,this)}async captureScreenshots(e,t){const s=Math.min(e/this.#Hl.playbackRate,3e3),r=s+window.performance.now();this.#ce.push({endTime:r,screenshots:t}),(!this.#tc||r>this.#tc)&&(clearTimeout(this.#ec),this.#ec=window.setTimeout(this.stopScreencast.bind(this),s),this.#tc=r),this.#Xl||(this.#Xl=!0,this.#Zl=await this.#Jl.startScreencast("jpeg",80,void 0,300,2,this.screencastFrame.bind(this),e=>{}))}screencastFrame(e,t){if(!this.#Xl)return;const s=window.performance.now();this.#ce=this.#ce.filter(function(e){return e.endTime>=s});for(const t of this.#ce)t.screenshots.push(e)}stopScreencast(){this.#Zl&&(this.#Jl.stopScreencast(this.#Zl),this.#ec=void 0,this.#tc=void 0,this.#ce=[],this.#Xl=!1,this.#Zl=void 0)}}h.register(Wi,{capabilities:2,autostart:!0});var eo=Object.freeze({__proto__:null,AnimationDOMNode:ji,AnimationDispatcher:Yi,AnimationEffect:Qi,AnimationGroup:Ji,AnimationImpl:Ki,AnimationModel:Wi,get Events(){return Gi},KeyframeStyle:Xi,KeyframesRule:$i,ScreenshotCapture:Zi});class to extends h{agent;#fr;#sc;constructor(t){super(t),this.agent=t.autofillAgent(),this.#sc=e.Settings.Settings.instance().createSetting("show-test-addresses-in-autofill-menu-on-event",!1),t.registerAutofillDispatcher(this),this.enable()}setTestAddresses(){this.agent.invoke_setAddresses({addresses:this.#sc.get()?[{fields:[{name:"ADDRESS_HOME_COUNTRY",value:"US"},{name:"NAME_FULL",value:"Jon Stewart Doe"},{name:"NAME_FIRST",value:"Jon"},{name:"NAME_MIDDLE",value:"Stewart"},{name:"NAME_LAST",value:"Doe"},{name:"COMPANY_NAME",value:"Fake Company"},{name:"ADDRESS_HOME_LINE1",value:"1600 Fake Street"},{name:"ADDRESS_HOME_LINE2",value:"Apartment 1"},{name:"ADDRESS_HOME_ZIP",value:"94043"},{name:"ADDRESS_HOME_CITY",value:"Mountain View"},{name:"ADDRESS_HOME_STATE",value:"CA"},{name:"EMAIL_ADDRESS",value:"test@example.us"},{name:"PHONE_HOME_WHOLE_NUMBER",value:"+16019521325"}]},{fields:[{name:"ADDRESS_HOME_COUNTRY",value:"BR"},{name:"NAME_FULL",value:"Joo Souza Silva"},{name:"NAME_FIRST",value:"Joo"},{name:"NAME_LAST",value:"Souza Silva"},{name:"NAME_LAST_FIRST",value:"Souza"},{name:"NAME_LAST_SECOND",value:"Silva"},{name:"COMPANY_NAME",value:"Empresa Falsa"},{name:"ADDRESS_HOME_STREET_ADDRESS",value:"Rua Inexistente, 2000\nAndar 2, Apartamento 1"},{name:"ADDRESS_HOME_STREET_LOCATION",value:"Rua Inexistente, 2000"},{name:"ADDRESS_HOME_STREET_NAME",value:"Rua Inexistente"},{name:"ADDRESS_HOME_HOUSE_NUMBER",value:"2000"},{name:"ADDRESS_HOME_SUBPREMISE",value:"Andar 2, Apartamento 1"},{name:"ADDRESS_HOME_APT_NUM",value:"1"},{name:"ADDRESS_HOME_FLOOR",value:"2"},{name:"ADDRESS_HOME_APT",value:"Apartamento 1"},{name:"ADDRESS_HOME_APT_TYPE",value:"Apartamento"},{name:"ADDRESS_HOME_APT_NUM",value:"1"},{name:"ADDRESS_HOME_DEPENDENT_LOCALITY",value:"Santa Efignia"},{name:"ADDRESS_HOME_LANDMARK",value:"Prximo  estao Santa Efignia"},{name:"ADDRESS_HOME_OVERFLOW",value:"Andar 2, Apartamento 1"},{name:"ADDRESS_HOME_ZIP",value:"30260-080"},{name:"ADDRESS_HOME_CITY",value:"Belo Horizonte"},{name:"ADDRESS_HOME_STATE",value:"MG"},{name:"EMAIL_ADDRESS",value:"teste@exemplo.us"},{name:"PHONE_HOME_WHOLE_NUMBER",value:"+553121286800"}]},{fields:[{name:"ADDRESS_HOME_COUNTRY",value:"MX"},{name:"NAME_FULL",value:"Juan Francisco Garca Flores"},{name:"NAME_FIRST",value:"Juan Francisco"},{name:"NAME_LAST",value:"Garca Flores"},{name:"NAME_LAST_FIRST",value:"Garca"},{name:"NAME_LAST_SECOND",value:"Flores"},{name:"COMPANY_NAME",value:"Empresa Falsa"},{name:"ADDRESS_HOME_STREET_ADDRESS",value:"C. Falsa 445\nPiso 2, Apartamento 1\nEntre calle Volcn y calle Montes Blancos, cerca de la estacin de metro"},{name:"ADDRESS_HOME_STREET_LOCATION",value:"C. Falsa 445"},{name:"ADDRESS_HOME_STREET_NAME",value:"C. Falsa"},{name:"ADDRESS_HOME_HOUSE_NUMBER",value:"445"},{name:"ADDRESS_HOME_SUBPREMISE",value:"Piso 2, Apartamento 1"},{name:"ADDRESS_HOME_FLOOR",value:"2"},{name:"ADDRESS_HOME_APT",value:"Apartamento 1"},{name:"ADDRESS_HOME_APT_TYPE",value:"Apartamento"},{name:"ADDRESS_HOME_APT_NUM",value:"1"},{name:"ADDRESS_HOME_DEPENDENT_LOCALITY",value:"Lomas de Chapultepec"},{name:"ADDRESS_HOME_OVERFLOW",value:"Entre calle Volcn y calle Montes Celestes, cerca de la estacin de metro"},{name:"ADDRESS_HOME_BETWEEN_STREETS_OR_LANDMARK",value:"Entre calle Volcn y calle Montes Blancos, cerca de la estacin de metro"},{name:"ADDRESS_HOME_LANDMARK",value:"Cerca de la estacin de metro"},{name:"ADDRESS_HOME_BETWEEN_STREETS",value:"Entre calle Volcn y calle Montes Blancos"},{name:"ADDRESS_HOME_BETWEEN_STREETS_1",value:"calle Volcn"},{name:"ADDRESS_HOME_BETWEEN_STREETS_2",value:"calle Montes Blancos"},{name:"ADDRESS_HOME_ADMIN_LEVEL2",value:"Miguel Hidalgo"},{name:"ADDRESS_HOME_ZIP",value:"11001"},{name:"ADDRESS_HOME_CITY",value:"Ciudad de Mxico"},{name:"ADDRESS_HOME_STATE",value:"Distrito Federal"},{name:"EMAIL_ADDRESS",value:"ejemplo@ejemplo.mx"},{name:"PHONE_HOME_WHOLE_NUMBER",value:"+525553428400"}]},{fields:[{name:"ADDRESS_HOME_COUNTRY",value:"DE"},{name:"NAME_FULL",value:"Gottfried Wilhelm Leibniz"},{name:"NAME_FIRST",value:"Gottfried"},{name:"NAME_MIDDLE",value:"Wilhelm"},{name:"NAME_LAST",value:"Leibniz"},{name:"COMPANY_NAME",value:"Erfundenes Unternehmen"},{name:"ADDRESS_HOME_LINE1",value:"Erfundene Strae 33"},{name:"ADDRESS_HOME_LINE2",value:"Wohnung 1"},{name:"ADDRESS_HOME_ZIP",value:"80732"},{name:"ADDRESS_HOME_CITY",value:"Mnchen"},{name:"EMAIL_ADDRESS",value:"test@beispiel.de"},{name:"PHONE_HOME_WHOLE_NUMBER",value:"+4930303986300"}]}]:[]})}enable(){this.#fr||a.InspectorFrontendHost.isUnderTest()||(this.agent.invoke_enable(),this.setTestAddresses(),this.#fr=!0)}disable(){this.#fr&&!a.InspectorFrontendHost.isUnderTest()&&(this.#fr=!1,this.agent.invoke_disable())}addressFormFilled(e){this.dispatchEventToListeners("AddressFormFilled",{autofillModel:this,event:e})}}h.register(to,{capabilities:2,autostart:!0});var no=Object.freeze({__proto__:null,AutofillModel:to});class ro{name;#rc;enabledInternal;constructor(e,t){this.#rc=e,this.name=t,this.enabledInternal=!1}category(){return this.#rc}enabled(){return this.enabledInternal}setEnabled(e){this.enabledInternal=e}}var so=Object.freeze({__proto__:null,CategorizedBreakpoint:ro});class io{#ic;#nc=[];#oc=new Map;#ac=new Map;#lc=new Map;#cc=new Map;#dc=new Map;#hc=[];#uc=[];#gc=[];static enhancedTraceVersion=1;constructor(e){this.#ic=e;try{this.parseEnhancedTrace()}catch(e){throw new i.UserVisibleError(e)}}parseEnhancedTrace(){for(const e of this.#ic.traceEvents)if(this.isTargetRundownEvent(e)){const t=e.args?.data;this.#oc.set(this.getScriptIsolateId(t.isolate,t.scriptId),t.v8context),this.#ac.set(this.getScriptIsolateId(t.isolate,t.scriptId),t.frame),this.#hc.find(e=>e.targetId===t.frame)||this.#hc.push({targetId:t.frame,type:t.frameType,isolate:t.isolate,pid:e.pid,url:t.url}),this.#uc.find(e=>e.v8Context===t.v8context)||this.#uc.push({id:-1,origin:t.origin,v8Context:t.v8context,auxData:{frameId:t.frame,isDefault:t.isDefault,type:t.contextType},isolate:t.isolate})}else if(this.isScriptRundownEvent(e)){this.#nc.push(e);const t=e.args.data;this.#gc.find(e=>e.scriptId===t.scriptId&&e.isolate===t.isolate)||this.#gc.push({scriptId:t.scriptId,isolate:t.isolate,executionContextId:t.executionContextId,startLine:t.startLine,startColumn:t.startColumn,endLine:t.endLine,endColumn:t.endColumn,hash:t.hash,isModule:t.isModule,url:t.url,hasSourceURL:t.hasSourceUrl,sourceURL:t.sourceUrl,sourceMapURL:t.sourceMapUrl})}else if(this.isScriptRundownSourceEvent(e)){const t=e.args.data,s=this.getScriptIsolateId(t.isolate,t.scriptId);if("splitIndex"in t&&"splitCount"in t){this.#cc.has(s)||this.#cc.set(s,new Array(t.splitCount).fill(""));const e=this.#cc.get(s);e&&t.sourceText&&(e[t.splitIndex]=t.sourceText)}else t.sourceText&&this.#lc.set(s,t.sourceText),t.length&&this.#dc.set(s,t.length)}}data(){const e=new Map;this.#nc.forEach(t=>{const s=t.args.data,r=this.#oc.get(this.getScriptIsolateId(s.isolate,s.scriptId));r&&e.set(r,s.executionContextId)}),this.#uc.forEach(t=>{if(t.v8Context){const s=e.get(t.v8Context);s&&(t.id=s)}}),this.#gc.forEach(e=>{const t=this.getScriptIsolateId(e.isolate,e.scriptId);if(this.#lc.has(t))e.sourceText=this.#lc.get(t),e.length=this.#dc.get(t);else if(this.#cc.has(t)){const s=this.#cc.get(t);s&&(e.sourceText=s.join(""),e.length=e.sourceText.length)}e.auxData=this.#uc.find(t=>t.id===e.executionContextId&&t.isolate===e.isolate)?.auxData});for(const e of this.#gc)e.sourceMapURL=this.getEncodedSourceMapUrl(e);const t=new Map;for(const e of this.#hc)t.set(e,this.groupContextsAndScriptsUnderTarget(e,this.#uc,this.#gc));return t}getEncodedSourceMapUrl(e){if(e.sourceMapURL?.startsWith("data:"))return e.sourceMapURL;const t=this.getSourceMapFromMetadata(e);if(t)try{return`data:text/plain;base64,${btoa(JSON.stringify(t))}`}catch{return}}getSourceMapFromMetadata(t){const{hasSourceURL:s,sourceURL:r,url:i,sourceMapURL:n,isolate:o,scriptId:a}=t;if(!n||!this.#ic.metadata.sourceMaps)return;const l=this.#ac.get(this.getScriptIsolateId(o,a));if(!l)return;const c=this.#hc.find(e=>e.targetId===l);if(!c)return;let d=i;if(s&&r){const t=c.url;d=e.ParsedURL.ParsedURL.completeURL(t,r)??r}const h=e.ParsedURL.ParsedURL.completeURL(d,n);if(!h)return;const{sourceMap:u}=this.#ic.metadata.sourceMaps.find(e=>e.sourceMapUrl===h)??{};return u}getScriptIsolateId(e,t){return t+"@"+e}isTraceEvent(e){return"cat"in e&&"pid"in e&&"args"in e&&"data"in e.args}isTargetRundownEvent(e){return this.isTraceEvent(e)&&"disabled-by-default-devtools.target-rundown"===e.cat}isScriptRundownEvent(e){return this.isTraceEvent(e)&&"disabled-by-default-devtools.v8-source-rundown"===e.cat}isScriptRundownSourceEvent(e){return this.isTraceEvent(e)&&"disabled-by-default-devtools.v8-source-rundown-sources"===e.cat}groupContextsAndScriptsUnderTarget(e,t,s){const r=[],i=[];for(const s of t)s.auxData?.frameId===e.targetId&&r.push(s);for(const t of s)null===t.auxData&&console.error(t+" missing aux data"),t.auxData?.frameId===e.targetId&&i.push(t);return[r,i]}}var oo=Object.freeze({__proto__:null,EnhancedTracesParser:io});class ao{traceEvents;metadata;constructor(e,t={}){this.traceEvents=e,this.metadata=t}}class lo{networkRequest;constructor(e){this.networkRequest=e}static create(t){const s=t.args.data.url,r=e.ParsedURL.ParsedURL.urlWithoutHash(s),i=ii.resourceForURL(s)??ii.resourceForURL(r),n=i?.request;return n?new lo(n):null}}var co=Object.freeze({__proto__:null,RevealableEvent:class{event;constructor(e){this.event=e}},RevealableNetworkRequest:lo,TraceObject:ao});const ho={noSourceText:"No source text available",noHostWindow:"Can not find host window",errorLoadingLog:"Error loading log"},uo=n.i18n.registerUIStrings("core/sdk/RehydratingConnection.ts",ho),go=n.i18n.getLocalizedString.bind(void 0,uo);class po{rehydratingConnectionState=1;onDisconnect=null;onMessage=null;trace=null;sessions=new Map;#mc;#pc;#fc=this.#bc.bind(this);constructor(e){this.#mc=e,this.#pc=window,this.#yc()}#yc(){this.#pc.addEventListener("message",this.#fc),this.#pc.opener||this.#mc({reason:go(ho.noHostWindow)}),this.#pc.opener.postMessage({type:"REHYDRATING_WINDOW_READY"})}#bc(e){if("REHYDRATING_TRACE_FILE"===e.data.type){const{traceFile:t}=e.data,s=new FileReader;s.onload=async()=>{await this.startHydration(s.result)},s.onerror=()=>{this.#mc({reason:go(ho.errorLoadingLog)})},s.readAsText(t)}this.#pc.removeEventListener("message",this.#fc)}async startHydration(e){if(!this.onMessage||2!==this.rehydratingConnectionState)return!1;const t=JSON.parse(e);if(!("traceEvents"in t))return console.error("RehydratingConnection failed to initialize due to missing trace events in payload"),!1;this.trace=t;const s=new io(t).data();let r=0;this.sessions.set(r,new mo(this));for(const[e,[t,i]]of s.entries())this.postToFrontend({method:"Target.targetCreated",params:{targetInfo:{targetId:e.targetId,type:e.type,title:e.url,url:e.url,attached:!1,canAccessOpener:!1}}}),r+=1,this.sessions.set(r,new fo(r,e,t,i,this));return await this.#wc(),!0}async#wc(){if(!this.trace)return;this.rehydratingConnectionState=3;const t=new ao(this.trace.traceEvents,this.trace.metadata);await e.Revealer.reveal(t)}setOnMessage(e){this.onMessage=e,this.rehydratingConnectionState=2}setOnDisconnect(e){this.onDisconnect=e}sendRawMessage(e){"string"==typeof e&&(e=JSON.parse(e));const t=e;if(void 0!==t.sessionId){const e=this.sessions.get(t.sessionId);e?e.handleFrontendMessageAsFakeCDPAgent(t):console.error("Invalid SessionId: "+t.sessionId)}else this.sessions.get(0)?.handleFrontendMessageAsFakeCDPAgent(t)}postToFrontend(e){this.onMessage?this.onMessage(e):console.error("onMessage was not initialized")}disconnect(){return Promise.reject()}}class mo{connection=null;constructor(e){this.connection=e}sendMessageToFrontend(e){requestAnimationFrame(()=>{this.connection&&this.connection.postToFrontend(e)})}handleFrontendMessageAsFakeCDPAgent(e){this.sendMessageToFrontend({id:e.id,result:{}})}}class fo extends mo{sessionId;target;executionContexts=[];scripts=[];constructor(e,t,s,r,i){super(i),this.sessionId=e,this.target=t,this.executionContexts=s,this.scripts=r,this.sessionAttachToTarget()}sendMessageToFrontend(e,t=!0){0!==this.sessionId&&t&&(e.sessionId=this.sessionId),super.sendMessageToFrontend(e)}handleFrontendMessageAsFakeCDPAgent(e){switch(e.method){case"Runtime.enable":this.handleRuntimeEnabled(e.id);break;case"Debugger.enable":this.handleDebuggerEnable(e.id);break;case"Debugger.getScriptSource":if(e.params){const t=e.params;this.handleDebuggerGetScriptSource(e.id,t.scriptId)}break;default:this.sendMessageToFrontend({id:e.id,result:{}})}}sessionAttachToTarget(){this.sendMessageToFrontend({method:"Target.attachedToTarget",params:{sessionId:this.sessionId,waitingForDebugger:!1,targetInfo:{targetId:this.target.targetId,type:this.target.type,title:this.target.url,url:this.target.url,attached:!0,canAccessOpener:!1}}},!1)}handleRuntimeEnabled(e){for(const e of this.executionContexts)e.name=e.origin,this.sendMessageToFrontend({method:"Runtime.executionContextCreated",params:{context:e}});this.sendMessageToFrontend({id:e,result:{}})}handleDebuggerGetScriptSource(e,t){const s=this.scripts.find(e=>e.scriptId===t);s?this.sendMessageToFrontend({id:e,result:{scriptSource:void 0===s.sourceText?go(ho.noSourceText):s.sourceText}}):console.error("No script for id: "+t)}handleDebuggerEnable(e){for(const e of this.scripts)this.sendMessageToFrontend({method:"Debugger.scriptParsed",params:e});this.sendMessageToFrontend({id:e,result:{debuggerId:"7777777777777777777.8888888888888888888"}})}}const bo={websocketDisconnected:"WebSocket disconnected"},yo=n.i18n.registerUIStrings("core/sdk/Connections.ts",bo),vo=n.i18n.getLocalizedString.bind(void 0,yo);class Io{onMessage;#vc;#kc;#Sc;#Wt;constructor(){this.onMessage=null,this.#vc=null,this.#kc="",this.#Sc=0,this.#Wt=[a.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(a.InspectorFrontendHostAPI.Events.DispatchMessage,this.dispatchMessage,this),a.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(a.InspectorFrontendHostAPI.Events.DispatchMessageChunk,this.dispatchMessageChunk,this)]}setOnMessage(e){this.onMessage=e}setOnDisconnect(e){this.#vc=e}sendRawMessage(e){this.onMessage&&a.InspectorFrontendHost.InspectorFrontendHostInstance.sendMessageToBackend(e)}dispatchMessage(e){this.onMessage&&this.onMessage.call(null,e.data)}dispatchMessageChunk(e){const{messageChunk:t,messageSize:s}=e.data;s&&(this.#kc="",this.#Sc=s),this.#kc+=t,this.#kc.length===this.#Sc&&this.onMessage&&(this.onMessage.call(null,this.#kc),this.#kc="",this.#Sc=0)}async disconnect(){const t=this.#vc;e.EventTarget.removeEventListeners(this.#Wt),this.#vc=null,this.onMessage=null,t&&t.call(null,"force disconnect")}}class wo{#xc;onMessage;#vc;#Cc;#Ic;#Rc;constructor(e,t){this.#xc=new WebSocket(e),this.#xc.onerror=this.onError.bind(this),this.#xc.onopen=this.onOpen.bind(this),this.#xc.onmessage=e=>{this.onMessage&&this.onMessage.call(null,e.data)},this.#xc.onclose=this.onClose.bind(this),this.onMessage=null,this.#vc=null,this.#Cc=t,this.#Ic=!1,this.#Rc=[]}setOnMessage(e){this.onMessage=e}setOnDisconnect(e){this.#vc=e}onError(e){this.#Cc&&this.#Cc.call(null,{reason:vo(bo.websocketDisconnected),errorType:e.type}),this.#vc&&this.#vc.call(null,"connection failed"),this.close()}onOpen(){if(this.#Ic=!0,this.#xc){this.#xc.onerror=console.error;for(const e of this.#Rc)this.#xc.send(e)}this.#Rc=[]}onClose(e){this.#Cc&&this.#Cc.call(null,{reason:e.reason,code:String(e.code||0)}),this.#vc&&this.#vc.call(null,"websocket closed"),this.close()}close(e){this.#xc&&(this.#xc.onerror=null,this.#xc.onopen=null,this.#xc.onclose=e||null,this.#xc.onmessage=null,this.#xc.close(),this.#xc=null),this.#Cc=null}sendRawMessage(e){this.#Ic&&this.#xc?this.#xc.send(e):this.#Rc.push(e)}disconnect(){return new Promise(e=>{this.close(()=>{this.#vc&&this.#vc.call(null,"force disconnect"),e()})})}}class So{onMessage;#vc;constructor(){this.onMessage=null,this.#vc=null}setOnMessage(e){this.onMessage=e}setOnDisconnect(e){this.#vc=e}sendRawMessage(e){window.setTimeout(this.respondWithError.bind(this,e),0)}respondWithError(e){const t=JSON.parse(e),s={message:"This is a stub connection, can't dispatch message.",code:l.InspectorBackend.DevToolsStubErrorCode,data:t};this.onMessage&&this.onMessage.call(null,{id:t.id,error:s})}async disconnect(){this.#vc&&this.#vc.call(null,"force disconnect"),this.#vc=null,this.onMessage=null}}class ko{#Tc;#Pc;onMessage;#vc;constructor(e,t){this.#Tc=e,this.#Pc=t,this.onMessage=null,this.#vc=null}setOnMessage(e){this.onMessage=e}setOnDisconnect(e){this.#vc=e}getOnDisconnect(){return this.#vc}sendRawMessage(e){const t=JSON.parse(e);t.sessionId||(t.sessionId=this.#Pc),this.#Tc.sendRawMessage(JSON.stringify(t))}getSessionId(){return this.#Pc}async disconnect(){this.#vc&&this.#vc.call(null,"force disconnect"),this.#vc=null,this.onMessage=null}}function Co(e){if(o.Runtime.getPathName().includes("rehydrated_devtools_app"))return new po(e);const t=o.Runtime.Runtime.queryParam("ws"),s=o.Runtime.Runtime.queryParam("wss");if(t||s){const r=t?"ws":"wss";let i=t||s;return a.InspectorFrontendHost.InspectorFrontendHostInstance.isHostedMode()&&i.startsWith("/")&&(i=`${window.location.host}${i}`),new wo(`${r}://${i}`,e)}return a.InspectorFrontendHost.InspectorFrontendHostInstance.isHostedMode()?new So:new Io}var xo=Object.freeze({__proto__:null,MainConnection:Io,ParallelConnection:ko,StubConnection:So,WebSocketConnection:wo,initMainConnection:async function(e,t){l.InspectorBackend.Connection.setFactory(Co.bind(null,t)),await e(),a.InspectorFrontendHost.InspectorFrontendHostInstance.connectionReady()}});const Ro={main:"Main"},To=n.i18n.registerUIStrings("core/sdk/ChildTargetManager.ts",Ro),Mo=n.i18n.getLocalizedString.bind(void 0,To);class Po extends h{#Ec;#Mc;#Lc;#Ac=new Map;#Oc=new Map;#Dc=new Map;#Nc=new Map;#Fc=null;constructor(e){super(e),this.#Ec=e.targetManager(),this.#Mc=e,this.#Lc=e.targetAgent(),e.registerTargetDispatcher(this);const t=this.#Ec.browserTarget();t?t!==e&&t.targetAgent().invoke_autoAttachRelated({targetId:e.id(),waitForDebuggerOnStart:!0}):this.#Lc.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),e.parentTarget()?.type()===U.FRAME||a.InspectorFrontendHost.isUnderTest()||(this.#Lc.invoke_setDiscoverTargets({discover:!0}),this.#Lc.invoke_setRemoteLocations({locations:[{host:"localhost",port:9229}]}))}static install(e){Po.attachCallback=e,h.register(Po,{capabilities:32,autostart:!0})}childTargets(){return Array.from(this.#Oc.values())}async suspendModel(){await this.#Lc.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!1,flatten:!0})}async resumeModel(){await this.#Lc.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0})}dispose(){for(const e of this.#Oc.keys())this.detachedFromTarget({sessionId:e,targetId:void 0})}targetCreated({targetInfo:e}){this.#Ac.set(e.targetId,e),this.fireAvailableTargetsChanged(),this.dispatchEventToListeners("TargetCreated",e)}targetInfoChanged({targetInfo:e}){this.#Ac.set(e.targetId,e);const t=this.#Dc.get(e.targetId);if(t)if(t.setHasCrashed(!1),"prerender"!==t.targetInfo()?.subtype||e.subtype)t.updateTargetInfo(e);else{const s=t.model(ii);t.updateTargetInfo(e),s?.mainFrame&&s.primaryPageChanged(s.mainFrame,"Activation"),t.setName(Mo(Ro.main))}this.fireAvailableTargetsChanged(),this.dispatchEventToListeners("TargetInfoChanged",e)}targetDestroyed({targetId:e}){this.#Ac.delete(e),this.fireAvailableTargetsChanged(),this.dispatchEventToListeners("TargetDestroyed",e)}targetCrashed({targetId:e}){const t=this.#Dc.get(e);t&&t.setHasCrashed(!0)}fireAvailableTargetsChanged(){W.instance().dispatchEventToListeners("AvailableTargetsChanged",[...this.#Ac.values()])}async getParentTargetId(){return this.#Fc||(this.#Fc=(await this.#Mc.targetAgent().invoke_getTargetInfo({})).targetInfo.targetId),this.#Fc}async getTargetInfo(){return(await this.#Mc.targetAgent().invoke_getTargetInfo({})).targetInfo}async attachedToTarget({sessionId:t,targetInfo:s,waitingForDebugger:r}){if(this.#Fc===s.targetId)return;let i=U.BROWSER,n="";if("worker"===s.type&&s.title&&s.title!==s.url)n=s.title;else if(!["page","iframe","webview"].includes(s.type))if(["^chrome://print/$","^chrome://file-manager/","^chrome://feedback/","^chrome://.*\\.top-chrome/$","^chrome://view-cert/$","^devtools://"].some(e=>s.url.match(e)))i=U.FRAME;else{const t=e.ParsedURL.ParsedURL.fromString(s.url);n=t?t.lastPathComponentWithFragment():"#"+ ++Po.lastAnonymousTargetId}"iframe"===s.type||"webview"===s.type||"background_page"===s.type||"app"===s.type||"popup_page"===s.type||"page"===s.type?i=U.FRAME:"worker"===s.type?i=U.Worker:"worklet"===s.type?i=U.WORKLET:"shared_worker"===s.type?i=U.SHARED_WORKER:"shared_storage_worklet"===s.type?i=U.SHARED_STORAGE_WORKLET:"service_worker"===s.type?i=U.ServiceWorker:"auction_worklet"===s.type&&(i=U.AUCTION_WORKLET);const o=this.#Ec.createTarget(s.targetId,n,i,this.#Mc,t,void 0,void 0,s);this.#Oc.set(t,o),this.#Dc.set(o.id(),o),Po.attachCallback&&await Po.attachCallback({target:o,waitingForDebugger:r}),r&&o.runtimeAgent().invoke_runIfWaitingForDebugger()}detachedFromTarget({sessionId:e}){if(this.#Nc.has(e))this.#Nc.delete(e);else{const t=this.#Oc.get(e);t&&(t.dispose("target terminated"),this.#Oc.delete(e),this.#Dc.delete(t.id()))}}receivedMessageFromTarget({}){}async createParallelConnection(e){const t=await this.getParentTargetId(),{connection:s,sessionId:r}=await this.createParallelConnectionAndSessionForTarget(this.#Mc,t);return s.setOnMessage(e),this.#Nc.set(r,s),{connection:s,sessionId:r}}async createParallelConnectionAndSessionForTarget(e,t){const s=e.targetAgent(),r=e.router(),i=(await s.invoke_attachToTarget({targetId:t,flatten:!0})).sessionId,n=new ko(r.connection(),i);return r.registerSession(e,i,n),n.setOnDisconnect(()=>{r.unregisterSession(i),s.invoke_detachFromTarget({sessionId:i})}),{connection:n,sessionId:i}}targetInfos(){return Array.from(this.#Ac.values())}static lastAnonymousTargetId=0;static attachCallback}var Eo=Object.freeze({__proto__:null,ChildTargetManager:Po});const Lo={couldNotLoadContentForSS:"Could not load content for {PH1} ({PH2})"},Ao=n.i18n.registerUIStrings("core/sdk/CompilerSourceMappingContentProvider.ts",Lo),Oo=n.i18n.getLocalizedString.bind(void 0,Ao);var Do,No=Object.freeze({__proto__:null,CompilerSourceMappingContentProvider:class{#_c;#Uc;#Bc;constructor(e,t,s){this.#_c=e,this.#Uc=t,this.#Bc=s}contentURL(){return this.#_c}contentType(){return this.#Uc}async requestContent(){const e=await this.requestContentData();return t.ContentData.ContentData.asDeferredContent(e)}async requestContentData(){try{const{content:e}=await nr.instance().loadResource(this.#_c,this.#Bc);return new t.ContentData.ContentData(e,!1,this.#Uc.canonicalMimeType())}catch(e){const t=Oo(Lo.couldNotLoadContentForSS,{PH1:this.#_c,PH2:e.message});return console.error(t),{error:t}}}async searchInContent(e,s,r){const i=await this.requestContentData();return t.TextUtils.performSearchInContentData(i,e,s,r)}}});!function(e){e.Result="result",e.Command="command",e.System="system",e.QueryObjectResult="queryObjectResult"}(Do||(Do={}));const Fo={profileD:"Profile {PH1}"},Bo=n.i18n.registerUIStrings("core/sdk/CPUProfilerModel.ts",Fo),_o=n.i18n.getLocalizedString.bind(void 0,Bo);class Ho extends h{#Hc;#qc;#zc;#jc;#Wc;registeredConsoleProfileMessages=[];constructor(e){super(e),this.#Hc=1,this.#qc=new Map,this.#zc=e.profilerAgent(),this.#jc=null,e.registerProfilerDispatcher(this),this.#zc.invoke_enable(),this.#Wc=e.model(ms)}runtimeModel(){return this.#Wc.runtimeModel()}debuggerModel(){return this.#Wc}consoleProfileStarted({id:e,location:t,title:s}){s||(s=_o(Fo.profileD,{PH1:this.#Hc++}),this.#qc.set(e,s));const r=this.createEventDataFrom(e,t,s);this.dispatchEventToListeners("ConsoleProfileStarted",r)}consoleProfileFinished({id:e,location:t,profile:s,title:r}){r||(r=this.#qc.get(e),this.#qc.delete(e));const i={...this.createEventDataFrom(e,t,r),cpuProfile:s};this.registeredConsoleProfileMessages.push(i),this.dispatchEventToListeners("ConsoleProfileFinished",i)}createEventDataFrom(e,t,s){const r=Is.fromPayload(this.#Wc,t);return{id:this.target().id()+"."+e,scriptLocation:r,title:s||"",cpuProfilerModel:this}}startRecording(){return this.#zc.invoke_setSamplingInterval({interval:100}),this.#zc.invoke_start()}stopRecording(){return this.#zc.invoke_stop().then(e=>e.profile||null)}startPreciseCoverage(e,t){return this.#jc=t,this.#zc.invoke_startPreciseCoverage({callCount:!1,detailed:e,allowTriggeredUpdates:!0})}async takePreciseCoverage(){const e=await this.#zc.invoke_takePreciseCoverage();return{timestamp:e?.timestamp||0,coverage:e?.result||[]}}stopPreciseCoverage(){return this.#jc=null,this.#zc.invoke_stopPreciseCoverage()}preciseCoverageDeltaUpdate({timestamp:e,occasion:t,result:s}){this.#jc&&this.#jc(e,t,s)}}h.register(Ho,{capabilities:4,autostart:!0});var Uo=Object.freeze({__proto__:null,CPUProfilerModel:Ho});class qo extends h{#Vc;constructor(e){super(e),e.registerLogDispatcher(this),this.#Vc=e.logAgent(),this.#Vc.invoke_enable(),a.InspectorFrontendHost.isUnderTest()||this.#Vc.invoke_startViolationsReport({config:[{name:"longTask",threshold:200},{name:"longLayout",threshold:30},{name:"blockedEvent",threshold:100},{name:"blockedParser",threshold:-1},{name:"handler",threshold:150},{name:"recurringHandler",threshold:50},{name:"discouragedAPIUse",threshold:-1}]})}entryAdded({entry:e}){this.dispatchEventToListeners("EntryAdded",{logModel:this,entry:e})}requestClear(){this.#Vc.invoke_clear()}}h.register(qo,{capabilities:8,autostart:!0});var zo=Object.freeze({__proto__:null,LogModel:qo});const jo={navigatedToS:"Navigated to {PH1}",bfcacheNavigation:"Navigation to {PH1} was restored from back/forward cache (see https://web.dev/bfcache/)",profileSStarted:"Profile ''{PH1}'' started.",profileSFinished:"Profile ''{PH1}'' finished.",failedToSaveToTempVariable:"Failed to save to temp variable."},Vo=n.i18n.registerUIStrings("core/sdk/ConsoleModel.ts",jo),Wo=n.i18n.getLocalizedString.bind(void 0,Vo);class Go extends h{#Gc=[];#Kc=new r.MapUtilities.Multimap;#$c=new Map;#Qc=0;#Yc=0;#Jc=0;#Xc=0;#Zc=new WeakMap;constructor(t){super(t);const s=t.model(ii);if(!s||s.cachedResourcesLoaded())return void this.initTarget(t);const r=s.addEventListener(ri.CachedResourcesLoaded,()=>{e.EventTarget.removeEventListeners([r]),this.initTarget(t)})}initTarget(e){const t=[],s=e.model(Ho);s&&(t.push(s.addEventListener("ConsoleProfileStarted",this.consoleProfileStarted.bind(this,s))),t.push(s.addEventListener("ConsoleProfileFinished",this.consoleProfileFinished.bind(this,s))));const r=e.model(ii);r&&e.parentTarget()?.type()!==U.FRAME&&t.push(r.addEventListener(ri.PrimaryPageChanged,this.primaryPageChanged,this));const i=e.model(Jr);i&&(t.push(i.addEventListener($r.ExceptionThrown,this.exceptionThrown.bind(this,i))),t.push(i.addEventListener($r.ExceptionRevoked,this.exceptionRevoked.bind(this,i))),t.push(i.addEventListener($r.ConsoleAPICalled,this.consoleAPICalled.bind(this,i))),e.parentTarget()?.type()!==U.FRAME&&t.push(i.debuggerModel().addEventListener(ys.GlobalObjectCleared,this.clearIfNecessary,this)),t.push(i.addEventListener($r.QueryObjectRequested,this.queryObjectRequested.bind(this,i)))),this.#Zc.set(e,t)}targetRemoved(t){const s=t.model(Jr);s&&this.#$c.delete(s),e.EventTarget.removeEventListeners(this.#Zc.get(t)||[])}async evaluateCommandInConsole(t,s,r,i){const n=await t.evaluate({expression:r,objectGroup:"console",includeCommandLineAPI:i,silent:!1,returnByValue:!1,generatePreview:!0,replMode:!0,allowUnsafeEvalBlockedByCSP:!1},e.Settings.Settings.instance().moduleSetting("console-user-activation-eval").get(),!1);a.userMetrics.actionTaken(a.UserMetrics.Action.ConsoleEvaluated),"error"in n||(await e.Console.Console.instance().showPromise(),this.dispatchEventToListeners(Ko.CommandEvaluated,{result:n.object,commandMessage:s,exceptionDetails:n.exceptionDetails}))}addCommandMessage(e,t){const s=new $o(e.runtimeModel,"javascript",null,t,{type:Do.Command});return s.setExecutionContextId(e.id),this.addMessage(s),s}addMessage(t){t.setPageLoadSequenceNumber(this.#Xc),t.source===e.Console.FrontendMessageSource.ConsoleAPI&&"clear"===t.type&&this.clearIfNecessary(),this.#Gc.push(t),this.#Kc.set(t.timestamp,t);const s=t.runtimeModel(),r=t.getExceptionId();if(r&&s){let e=this.#$c.get(s);e||(e=new Map,this.#$c.set(s,e)),e.set(r,t)}this.incrementErrorWarningCount(t),this.dispatchEventToListeners(Ko.MessageAdded,t)}exceptionThrown(e,t){const s=t.data,r=function(e){if(e)return{requestId:e.requestId||void 0,issueId:e.issueId||void 0}}(s.details.exceptionMetaData),i=$o.fromException(e,s.details,void 0,s.timestamp,void 0,r);i.setExceptionId(s.details.exceptionId),this.addMessage(i)}exceptionRevoked(e,t){const s=t.data,r=this.#$c.get(e),i=r?r.get(s):null;i&&(this.#Yc--,i.level="verbose",this.dispatchEventToListeners(Ko.MessageUpdated,i))}consoleAPICalled(t,s){const r=s.data;let i="info";"debug"===r.type?i="verbose":"error"===r.type||"assert"===r.type?i="error":"warning"===r.type?i="warning":"info"!==r.type&&"log"!==r.type||(i="info");let n="";r.args.length&&r.args[0].unserializableValue?n=r.args[0].unserializableValue:r.args.length&&("object"!=typeof r.args[0].value&&void 0!==r.args[0].value||null===r.args[0].value)?n=String(r.args[0].value):r.args.length&&r.args[0].description&&(n=r.args[0].description);const o=r.stackTrace?.callFrames.length?r.stackTrace.callFrames[0]:null,a={type:r.type,url:o?.url,line:o?.lineNumber,column:o?.columnNumber,parameters:r.args,stackTrace:r.stackTrace,timestamp:r.timestamp,executionContextId:r.executionContextId,context:r.context},l=new $o(t,e.Console.FrontendMessageSource.ConsoleAPI,i,n,a);for(const e of this.#Kc.get(l.timestamp).values())if(l.isEqual(e))return;this.addMessage(l)}queryObjectRequested(t,s){const{objects:r,executionContextId:i}=s.data,n={type:Do.QueryObjectResult,parameters:[r],executionContextId:i},o=new $o(t,e.Console.FrontendMessageSource.ConsoleAPI,"info","",n);this.addMessage(o)}clearIfNecessary(){e.Settings.Settings.instance().moduleSetting("preserve-console-log").get()||this.clear(),++this.#Xc}primaryPageChanged(t){if(e.Settings.Settings.instance().moduleSetting("preserve-console-log").get()){const{frame:s}=t.data;s.backForwardCacheDetails.restoredFromCache?e.Console.Console.instance().log(Wo(jo.bfcacheNavigation,{PH1:s.url})):e.Console.Console.instance().log(Wo(jo.navigatedToS,{PH1:s.url}))}}consoleProfileStarted(e,t){const{data:s}=t;this.addConsoleProfileMessage(e,"profile",s.scriptLocation,Wo(jo.profileSStarted,{PH1:s.title}))}consoleProfileFinished(e,t){const{data:s}=t;this.addConsoleProfileMessage(e,"profileEnd",s.scriptLocation,Wo(jo.profileSFinished,{PH1:s.title}))}addConsoleProfileMessage(t,s,r,i){const n=r.script(),o=[{functionName:"",scriptId:r.scriptId,url:n?n.contentURL():"",lineNumber:r.lineNumber,columnNumber:r.columnNumber||0}];this.addMessage(new $o(t.runtimeModel(),e.Console.FrontendMessageSource.ConsoleAPI,"info",i,{type:s,stackTrace:{callFrames:o}}))}incrementErrorWarningCount(e){if("violation"!==e.source)switch(e.level){case"warning":this.#Qc++;break;case"error":this.#Yc++}else this.#Jc++}messages(){return this.#Gc}static allMessagesUnordered(){const e=[];for(const t of W.instance().targets()){const s=t.model(Go)?.messages()||[];e.push(...s)}return e}static requestClearMessages(){for(const e of W.instance().models(qo))e.requestClear();for(const e of W.instance().models(Jr))e.discardConsoleEntries(),e.releaseObjectGroup("live-expression");for(const e of W.instance().targets())e.model(Go)?.clear()}clear(){this.#Gc=[],this.#Kc.clear(),this.#$c.clear(),this.#Yc=0,this.#Qc=0,this.#Jc=0,this.dispatchEventToListeners(Ko.ConsoleCleared)}errors(){return this.#Yc}static allErrors(){let e=0;for(const t of W.instance().targets())e+=t.model(Go)?.errors()||0;return e}warnings(){return this.#Qc}static allWarnings(){let e=0;for(const t of W.instance().targets())e+=t.model(Go)?.warnings()||0;return e}violations(){return this.#Jc}async saveToTempVariable(t,s){if(!s||!t)return void a(null);const r=t,i=await r.globalObject("",!1);if("error"in i||Boolean(i.exceptionDetails)||!i.object)return void a("object"in i&&i.object||null);const n=i.object,o=await n.callFunction(function(e){const t="temp";let s=1;for(;t+s in this;)++s;const r=t+s;return this[r]=e,r},[Bn.toCallArgument(s)]);if(n.release(),o.wasThrown||!o.object||"string"!==o.object.type)a(o.object||null);else{const e=o.object.value,t=this.addCommandMessage(r,e);this.evaluateCommandInConsole(r,t,e,!1)}function a(t){let s=Wo(jo.failedToSaveToTempVariable);t&&(s=s+" "+t.description),e.Console.Console.instance().error(s)}o.object&&o.object.release()}}var Ko;function Qo(e,t){if(!e!=!t)return!1;if(!e||!t)return!0;const s=e.callFrames,r=t.callFrames;if(s.length!==r.length)return!1;for(let e=0,t=s.length;e<t;++e)if(s[e].scriptId!==r[e].scriptId||s[e].functionName!==r[e].functionName||s[e].lineNumber!==r[e].lineNumber||s[e].columnNumber!==r[e].columnNumber)return!1;return Qo(e.parent,t.parent)}!function(e){e.ConsoleCleared="ConsoleCleared",e.MessageAdded="MessageAdded",e.MessageUpdated="MessageUpdated",e.CommandEvaluated="CommandEvaluated"}(Ko||(Ko={}));class $o{#yr;source;level;messageText;type;url;line;column;parameters;stackTrace;timestamp;#ed;scriptId;workerId;context;#td=null;#Xc=void 0;#sd=void 0;#rd;category;isCookieReportIssue=!1;stackFrameWithBreakpoint=null;#id=null;constructor(e,t,s,r,i){if(this.#yr=e,this.source=t,this.level=s,this.messageText=r,this.type=i?.type||"log",this.url=i?.url,this.line=i?.line||0,this.column=i?.column||0,this.parameters=i?.parameters,this.stackTrace=i?.stackTrace,this.timestamp=i?.timestamp||Date.now(),this.#ed=i?.executionContextId||0,this.scriptId=i?.scriptId,this.workerId=i?.workerId,this.#rd=i?.affectedResources,this.category=i?.category,this.isCookieReportIssue=Boolean(i?.isCookieReportIssue),!this.#ed&&this.#yr&&(this.scriptId?this.#ed=this.#yr.executionContextIdForScriptId(this.scriptId):this.stackTrace&&(this.#ed=this.#yr.executionContextForStackTrace(this.stackTrace))),i?.context){const e=i?.context.match(/[^#]*/);this.context=e?.[0]}if(this.stackTrace){const{callFrame:e,type:t}=$o.#nd(this.stackTrace);this.stackFrameWithBreakpoint=e,this.#id=t}}getAffectedResources(){return this.#rd}setPageLoadSequenceNumber(e){this.#Xc=e}static fromException(e,t,s,r,i,n){const o={type:s,url:i||t.url,line:t.lineNumber,column:t.columnNumber,parameters:t.exception?[Bn.fromLocalObject(t.text),t.exception]:void 0,stackTrace:t.stackTrace,timestamp:r,executionContextId:t.executionContextId,scriptId:t.scriptId,affectedResources:n};return new $o(e,"javascript","error",Jr.simpleTextFromException(t),o)}runtimeModel(){return this.#yr}target(){return this.#yr?this.#yr.target():null}setOriginatingMessage(e){this.#td=e,this.#ed=e.#ed}originatingMessage(){return this.#td}setExecutionContextId(e){this.#ed=e}getExecutionContextId(){return this.#ed}getExceptionId(){return this.#sd}setExceptionId(e){this.#sd=e}isGroupMessage(){return"startGroup"===this.type||"startGroupCollapsed"===this.type||"endGroup"===this.type}isGroupStartMessage(){return"startGroup"===this.type||"startGroupCollapsed"===this.type}isErrorOrWarning(){return"warning"===this.level||"error"===this.level}isGroupable(){const t="error"===this.level&&("javascript"===this.source||"network"===this.source);return this.source!==e.Console.FrontendMessageSource.ConsoleAPI&&this.type!==Do.Command&&this.type!==Do.Result&&this.type!==Do.System&&!t}groupCategoryKey(){return[this.source,this.level,this.type,this.#Xc].join(":")}isEqual(e){if(!e)return!1;if(this.parameters){if(!e.parameters||this.parameters.length!==e.parameters.length)return!1;for(let t=0;t<e.parameters.length;++t){const s=e.parameters[t],r=this.parameters[t];if("string"==typeof s||"string"==typeof r)return!1;if("object"===s.type&&"error"!==s.subtype&&(!s.objectId||s.objectId!==r.objectId||e.timestamp!==this.timestamp))return!1;if(r.type!==s.type||r.value!==s.value||r.description!==s.description)return!1}}return this.runtimeModel()===e.runtimeModel()&&this.source===e.source&&this.type===e.type&&this.level===e.level&&this.line===e.line&&this.url===e.url&&this.scriptId===e.scriptId&&this.messageText===e.messageText&&this.#ed===e.#ed&&(t=this.#rd,s=e.#rd,t?.requestId===s?.requestId)&&Qo(this.stackTrace,e.stackTrace);var t,s}get originatesFromLogpoint(){return"LOGPOINT"===this.#id}get originatesFromConditionalBreakpoint(){return"CONDITIONAL_BREAKPOINT"===this.#id}static#nd({callFrames:e}){const t=[Rs,xs],s=e.findLastIndex(({url:e})=>t.includes(e));if(-1===s||s===e.length-1)return{callFrame:null,type:null};const r=e[s].url===xs?"LOGPOINT":"CONDITIONAL_BREAKPOINT";return{callFrame:e[s+1],type:r}}}h.register(Go,{capabilities:4,autostart:!0});const Xo=new Map([["xml","xml"],["javascript","javascript"],["network","network"],[e.Console.FrontendMessageSource.ConsoleAPI,"console-api"],["storage","storage"],["appcache","appcache"],["rendering","rendering"],[e.Console.FrontendMessageSource.CSS,"css"],["security","security"],["deprecation","deprecation"],["worker","worker"],["violation","violation"],["intervention","intervention"],["recommendation","recommendation"],["other","other"],[e.Console.FrontendMessageSource.ISSUE_PANEL,"issue-panel"]]);var Jo=Object.freeze({__proto__:null,ConsoleMessage:$o,ConsoleModel:Go,get Events(){return Ko},get FrontendMessageType(){return Do},MessageSourceDisplayName:Xo});class Yo extends h{#od;#ad;#lt;#ld;#cd;#dd;#hd;#ud;#gd;#md;#pd;constructor(t){super(t),this.#od=t.emulationAgent(),this.#ad=t.deviceOrientationAgent(),this.#lt=t.model(Br),this.#ld=t.model(Fs),this.#ld&&this.#ld.addEventListener("InspectModeWillBeToggled",()=>{this.updateTouch()},this);const s=e.Settings.Settings.instance().moduleSetting("java-script-disabled");s.addChangeListener(async()=>await this.#od.invoke_setScriptExecutionDisabled({value:s.get()})),s.get()&&this.#od.invoke_setScriptExecutionDisabled({value:!0});const r=e.Settings.Settings.instance().moduleSetting("emulation.touch");r.addChangeListener(()=>{const e=r.get();this.overrideEmulateTouch("force"===e)});const i=e.Settings.Settings.instance().moduleSetting("emulation.idle-detection");i.addChangeListener(async()=>{const e=i.get();if("none"===e)return void await this.clearIdleOverride();const t=JSON.parse(e);await this.setIdleOverride(t)});const n=e.Settings.Settings.instance().moduleSetting("emulation.cpu-pressure");n.addChangeListener(async()=>{const e=n.get();if("none"===e)return await this.setPressureSourceOverrideEnabled(!1),void(this.#dd=!1);this.#dd||(this.#dd=!0,await this.setPressureSourceOverrideEnabled(!0)),await this.setPressureStateOverride(e)});const o=e.Settings.Settings.instance().moduleSetting("emulated-css-media"),a=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-color-gamut"),l=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-color-scheme"),c=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-forced-colors"),d=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-contrast"),h=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-reduced-data"),u=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-reduced-transparency"),g=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-reduced-motion");this.#cd=new Map([["type",o.get()],["color-gamut",a.get()],["prefers-color-scheme",l.get()],["forced-colors",c.get()],["prefers-contrast",d.get()],["prefers-reduced-data",h.get()],["prefers-reduced-motion",g.get()],["prefers-reduced-transparency",u.get()]]),o.addChangeListener(()=>{this.#cd.set("type",o.get()),this.updateCssMedia()}),a.addChangeListener(()=>{this.#cd.set("color-gamut",a.get()),this.updateCssMedia()}),l.addChangeListener(()=>{this.#cd.set("prefers-color-scheme",l.get()),this.updateCssMedia()}),c.addChangeListener(()=>{this.#cd.set("forced-colors",c.get()),this.updateCssMedia()}),d.addChangeListener(()=>{this.#cd.set("prefers-contrast",d.get()),this.updateCssMedia()}),h.addChangeListener(()=>{this.#cd.set("prefers-reduced-data",h.get()),this.updateCssMedia()}),g.addChangeListener(()=>{this.#cd.set("prefers-reduced-motion",g.get()),this.updateCssMedia()}),u.addChangeListener(()=>{this.#cd.set("prefers-reduced-transparency",u.get()),this.updateCssMedia()}),this.updateCssMedia();const m=e.Settings.Settings.instance().moduleSetting("emulate-auto-dark-mode");m.addChangeListener(()=>{const e=m.get();l.setDisabled(e),l.set(e?"dark":""),this.emulateAutoDarkMode(e)}),m.get()&&(l.setDisabled(!0),l.set("dark"),this.emulateAutoDarkMode(!0));const p=e.Settings.Settings.instance().moduleSetting("emulated-vision-deficiency");p.addChangeListener(()=>this.emulateVisionDeficiency(p.get())),p.get()&&this.emulateVisionDeficiency(p.get());const f=e.Settings.Settings.instance().moduleSetting("local-fonts-disabled");f.addChangeListener(()=>this.setLocalFontsDisabled(f.get())),f.get()&&this.setLocalFontsDisabled(f.get());const b=e.Settings.Settings.instance().moduleSetting("avif-format-disabled"),y=e.Settings.Settings.instance().moduleSetting("webp-format-disabled"),w=()=>{const e=[];b.get()&&e.push("avif"),y.get()&&e.push("webp"),this.setDisabledImageTypes(e)};b.addChangeListener(w),y.addChangeListener(w),(b.get()||y.get())&&w(),this.#dd=!1,this.#gd=!0,this.#hd=!1,this.#ud=!1,this.#md=!1,this.#pd={enabled:!1,configuration:"mobile"}}setTouchEmulationAllowed(e){this.#gd=e}supportsDeviceEmulation(){return this.target().hasAllCapabilities(4096)}async resetPageScaleFactor(){await this.#od.invoke_resetPageScaleFactor()}async emulateDevice(e){e?await this.#od.invoke_setDeviceMetricsOverride(e):await this.#od.invoke_clearDeviceMetricsOverride()}overlayModel(){return this.#ld}async setPressureSourceOverrideEnabled(e){await this.#od.invoke_setPressureSourceOverrideEnabled({source:"cpu",enabled:e})}async setPressureStateOverride(e){await this.#od.invoke_setPressureStateOverride({source:"cpu",state:e})}async emulateLocation(e){if(e)if(e.unavailable)await Promise.all([this.#od.invoke_setGeolocationOverride({}),this.#od.invoke_setTimezoneOverride({timezoneId:""}),this.#od.invoke_setLocaleOverride({locale:""}),this.#od.invoke_setUserAgentOverride({userAgent:ce.instance().currentUserAgent()})]);else{function t(e,t){const s=t.getError();return s?Promise.reject({type:e,message:s}):Promise.resolve()}await Promise.all([this.#od.invoke_setGeolocationOverride({latitude:e.latitude,longitude:e.longitude,accuracy:Zo.defaultGeoMockAccuracy}).then(e=>t("emulation-set-location",e)),this.#od.invoke_setTimezoneOverride({timezoneId:e.timezoneId}).then(e=>t("emulation-set-timezone",e)),this.#od.invoke_setLocaleOverride({locale:e.locale}).then(e=>t("emulation-set-locale",e)),this.#od.invoke_setUserAgentOverride({userAgent:ce.instance().currentUserAgent(),acceptLanguage:e.locale}).then(e=>t("emulation-set-user-agent",e))])}else await Promise.all([this.#od.invoke_clearGeolocationOverride(),this.#od.invoke_setTimezoneOverride({timezoneId:""}),this.#od.invoke_setLocaleOverride({locale:""}),this.#od.invoke_setUserAgentOverride({userAgent:ce.instance().currentUserAgent()})])}async emulateDeviceOrientation(e){e?await this.#ad.invoke_setDeviceOrientationOverride({alpha:e.alpha,beta:e.beta,gamma:e.gamma}):await this.#ad.invoke_clearDeviceOrientationOverride()}async setIdleOverride(e){await this.#od.invoke_setIdleOverride(e)}async clearIdleOverride(){await this.#od.invoke_clearIdleOverride()}async emulateCSSMedia(e,t){await this.#od.invoke_setEmulatedMedia({media:e,features:t}),this.#lt&&this.#lt.mediaQueryResultChanged()}async emulateAutoDarkMode(e){e&&(this.#cd.set("prefers-color-scheme","dark"),await this.updateCssMedia()),await this.#od.invoke_setAutoDarkModeOverride({enabled:e||void 0})}async emulateVisionDeficiency(e){await this.#od.invoke_setEmulatedVisionDeficiency({type:e})}setLocalFontsDisabled(e){this.#lt&&this.#lt.setLocalFontsEnabled(!e)}setDisabledImageTypes(e){this.#od.invoke_setDisabledImageTypes({imageTypes:e})}async setCPUThrottlingRate(e){await this.#od.invoke_setCPUThrottlingRate({rate:e})}async setHardwareConcurrency(e){if(e<1)throw new Error("hardwareConcurrency must be a positive value");await this.#od.invoke_setHardwareConcurrencyOverride({hardwareConcurrency:e})}async emulateTouch(e,t){this.#hd=e&&this.#gd,this.#ud=t&&this.#gd,await this.updateTouch()}async overrideEmulateTouch(e){this.#md=e&&this.#gd,await this.updateTouch()}async updateTouch(){let e={enabled:this.#hd,configuration:this.#ud?"mobile":"desktop"};this.#md&&(e={enabled:!0,configuration:"mobile"}),this.#ld&&this.#ld.inspectModeEnabled()&&(e={enabled:!1,configuration:"mobile"}),(this.#pd.enabled||e.enabled)&&(this.#pd.enabled&&e.enabled&&this.#pd.configuration===e.configuration||(this.#pd=e,await this.#od.invoke_setTouchEmulationEnabled({enabled:e.enabled,maxTouchPoints:1}),await this.#od.invoke_setEmitTouchEventsForMouse({enabled:e.enabled,configuration:e.configuration})))}async updateCssMedia(){const e=this.#cd.get("type")??"",t=[{name:"color-gamut",value:this.#cd.get("color-gamut")??""},{name:"prefers-color-scheme",value:this.#cd.get("prefers-color-scheme")??""},{name:"forced-colors",value:this.#cd.get("forced-colors")??""},{name:"prefers-contrast",value:this.#cd.get("prefers-contrast")??""},{name:"prefers-reduced-data",value:this.#cd.get("prefers-reduced-data")??""},{name:"prefers-reduced-motion",value:this.#cd.get("prefers-reduced-motion")??""},{name:"prefers-reduced-transparency",value:this.#cd.get("prefers-reduced-transparency")??""}];return await this.emulateCSSMedia(e,t)}}class Zo{latitude;longitude;timezoneId;locale;unavailable;constructor(e,t,s,r,i){this.latitude=e,this.longitude=t,this.timezoneId=s,this.locale=r,this.unavailable=i}static parseSetting(e){if(e){const[t,s,r,i]=e.split(":"),[n,o]=t.split("@");return new Zo(parseFloat(n),parseFloat(o),s,r,Boolean(i))}return new Zo(0,0,"","",!1)}static parseUserInput(e,t,s,r){if(!e&&!t)return null;const{valid:i}=Zo.latitudeValidator(e),{valid:n}=Zo.longitudeValidator(t);if(!i&&!n)return null;const o=i?parseFloat(e):-1,a=n?parseFloat(t):-1;return new Zo(o,a,s,r,!1)}static latitudeValidator(e){const t=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&t>=-90&&t<=90,errorMessage:void 0}}static longitudeValidator(e){const t=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&t>=-180&&t<=180,errorMessage:void 0}}static timezoneIdValidator(e){return{valid:""===e||/[a-zA-Z]/.test(e),errorMessage:void 0}}static localeValidator(e){return{valid:""===e||/[a-zA-Z]{2}/.test(e),errorMessage:void 0}}toSetting(){return`${this.latitude}@${this.longitude}:${this.timezoneId}:${this.locale}:${this.unavailable||""}`}static defaultGeoMockAccuracy=150}class ea{alpha;beta;gamma;constructor(e,t,s){this.alpha=e,this.beta=t,this.gamma=s}static parseSetting(e){if(e){const t=JSON.parse(e);return new ea(t.alpha,t.beta,t.gamma)}return new ea(0,0,0)}static parseUserInput(e,t,s){if(!e&&!t&&!s)return null;const{valid:r}=ea.alphaAngleValidator(e),{valid:i}=ea.betaAngleValidator(t),{valid:n}=ea.gammaAngleValidator(s);if(!r&&!i&&!n)return null;const o=r?parseFloat(e):-1,a=i?parseFloat(t):-1,l=n?parseFloat(s):-1;return new ea(o,a,l)}static angleRangeValidator(e,t){const s=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&s>=t.minimum&&s<t.maximum,errorMessage:void 0}}static alphaAngleValidator(e){return ea.angleRangeValidator(e,{minimum:0,maximum:360})}static betaAngleValidator(e){return ea.angleRangeValidator(e,{minimum:-180,maximum:180})}static gammaAngleValidator(e){return ea.angleRangeValidator(e,{minimum:-90,maximum:90})}toSetting(){return JSON.stringify(this)}}h.register(Yo,{capabilities:256,autostart:!0});var ta=Object.freeze({__proto__:null,DeviceOrientation:ea,EmulationModel:Yo,Location:Zo});const na={noThrottling:"No throttling",dSlowdown:"{PH1} slowdown",calibratedMidTierMobile:"Mid-tier mobile",calibratedLowTierMobile:"Low-tier mobile",calibrationErrorDeviceTooWeak:"Device is not powerful enough"},ra=n.i18n.registerUIStrings("core/sdk/CPUThrottlingManager.ts",na),sa=n.i18n.getLocalizedString.bind(void 0,ra),ia=n.i18n.getLazilyComputedLocalizedString.bind(void 0,ra);let oa;class aa extends e.ObjectWrapper.ObjectWrapper{#fd;#bd;#yd;#wd;constructor(){super(),this.#fd=ca,this.#bd=e.Settings.Settings.instance().createSetting("calibrated-cpu-throttling",{},"Global"),this.#bd.addChangeListener(this.#vd,this),W.instance().observeModels(Yo,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return oa&&!t||(oa=new aa),oa}cpuThrottlingRate(){return this.#fd.rate()}cpuThrottlingOption(){return this.#fd}#vd(){if(!this.#fd.calibratedDeviceType)return;const e=this.#fd.rate();if(0!==e){for(const t of W.instance().models(Yo))t.setCPUThrottlingRate(e);this.dispatchEventToListeners("RateChanged",e)}else this.setCPUThrottlingOption(ca)}setCPUThrottlingOption(e){if(e!==this.#fd){this.#fd=e;for(const e of W.instance().models(Yo))e.setCPUThrottlingRate(this.#fd.rate());this.dispatchEventToListeners("RateChanged",this.#fd.rate())}}setHardwareConcurrency(e){this.#yd=e;for(const t of W.instance().models(Yo))t.setHardwareConcurrency(e);this.dispatchEventToListeners("HardwareConcurrencyChanged",this.#yd)}hasPrimaryPageTargetSet(){try{return null!==W.instance().primaryPageTarget()}catch{return!1}}async getHardwareConcurrency(){const e=W.instance().primaryPageTarget(),t=this.#wd;if(!e)return t?await new Promise(e=>{this.#wd=s=>{e(s),t(s)}}):await new Promise(e=>{this.#wd=e});const s=await e.runtimeAgent().invoke_evaluate({expression:"navigator.hardwareConcurrency",returnByValue:!0,silent:!0,throwOnSideEffect:!0}),r=s.getError();if(r)throw new Error(r);const{result:i,exceptionDetails:n}=s;if(n)throw new Error(n.text);return i.value}modelAdded(e){if(this.#fd!==ca&&e.setCPUThrottlingRate(this.#fd.rate()),void 0!==this.#yd&&e.setHardwareConcurrency(this.#yd),this.#wd){const e=this.#wd;this.#wd=void 0,this.getHardwareConcurrency().then(e)}}modelRemoved(e){}}var la;function da(e){return{title:1===e?ia(na.noThrottling):ia(na.dSlowdown,{PH1:e}),rate:()=>e,jslogContext:1===e?"cpu-no-throttling":`cpu-throttled-${e}`}}!function(e){e[e.NO_THROTTLING=1]="NO_THROTTLING",e[e.MID_TIER_MOBILE=4]="MID_TIER_MOBILE",e[e.LOW_TIER_MOBILE=6]="LOW_TIER_MOBILE",e[e.EXTRA_SLOW=20]="EXTRA_SLOW",e[e.MidTierMobile=4]="MidTierMobile",e[e.LowEndMobile=6]="LowEndMobile"}(la||(la={}));const ca=da(la.NO_THROTTLING),ha=da(la.MID_TIER_MOBILE),ua=da(la.LOW_TIER_MOBILE),ga=da(la.EXTRA_SLOW);function pa(t){const s=()=>{const s=e.Settings.Settings.instance().createSetting("calibrated-cpu-throttling",{},"Global").get();return"low-tier-mobile"===t?s.low??null:"mid-tier-mobile"===t?s.mid??null:null};return{title(){const e=sa("low-tier-mobile"===t?na.calibratedLowTierMobile:na.calibratedMidTierMobile),r=s();return"number"==typeof r?`${e}  ${r.toFixed(1)}`:e},rate(){const e=s();return"number"==typeof e?e:0},calibratedDeviceType:t,jslogContext:`cpu-throttled-calibrated-${t}`}}const ma=pa("low-tier-mobile"),fa=pa("mid-tier-mobile");var ba;(ba||(ba={})).DEVICE_TOO_WEAK="DEVICE_TOO_WEAK";var ya=Object.freeze({__proto__:null,CPUThrottlingManager:aa,get CPUThrottlingRates(){return la},CalibratedLowTierMobileThrottlingOption:ma,CalibratedMidTierMobileThrottlingOption:fa,get CalibrationError(){return ba},ExtraSlowThrottlingOption:ga,LowTierThrottlingOption:ua,MidTierThrottlingOption:ha,NoThrottlingOption:ca,calibrationErrorToString:function(e){return e===ba.DEVICE_TOO_WEAK?sa(na.calibrationErrorDeviceTooWeak):e},throttlingManager:function(){return aa.instance()}});class va extends h{agent;#yr;#Xs;#kd;#Sd;suspended=!1;constructor(t){super(t),this.agent=t.domdebuggerAgent(),this.#yr=t.model(Jr),this.#Xs=t.model(Gs),this.#Xs.addEventListener(Us.DocumentUpdated,this.documentUpdated,this),this.#Xs.addEventListener(Us.NodeRemoved,this.nodeRemoved,this),this.#kd=[],this.#Sd=e.Settings.Settings.instance().createLocalSetting("dom-breakpoints",[]),this.#Xs.existingDocument()&&this.documentUpdated()}runtimeModel(){return this.#yr}async suspendModel(){this.suspended=!0}async resumeModel(){this.suspended=!1}async eventListeners(e){if(console.assert(e.runtimeModel()===this.#yr),!e.objectId)return[];const t=await this.agent.invoke_getEventListeners({objectId:e.objectId}),s=[];for(const r of t.listeners||[]){const t=this.#yr.debuggerModel().createRawLocationByScriptId(r.scriptId,r.lineNumber,r.columnNumber);t&&s.push(new Sa(this,e,r.type,r.useCapture,r.passive,r.once,r.handler?this.#yr.createRemoteObject(r.handler):null,r.originalHandler?this.#yr.createRemoteObject(r.originalHandler):null,t,null))}return s}retrieveDOMBreakpoints(){this.#Xs.requestDocument()}domBreakpoints(){return this.#kd.slice()}hasDOMBreakpoint(e,t){return this.#kd.some(s=>s.node===e&&s.type===t)}setDOMBreakpoint(e,t){for(const s of this.#kd)if(s.node===e&&s.type===t)return this.toggleDOMBreakpoint(s,!0),s;const s=new wa(this,e,t,!0);return this.#kd.push(s),this.saveDOMBreakpoints(),this.enableDOMBreakpoint(s),this.dispatchEventToListeners("DOMBreakpointAdded",s),s}removeDOMBreakpoint(e,t){this.removeDOMBreakpoints(s=>s.node===e&&s.type===t)}removeAllDOMBreakpoints(){this.removeDOMBreakpoints(e=>!0)}toggleDOMBreakpoint(e,t){t!==e.enabled&&(e.enabled=t,t?this.enableDOMBreakpoint(e):this.disableDOMBreakpoint(e),this.dispatchEventToListeners("DOMBreakpointToggled",e))}enableDOMBreakpoint(e){e.node.id&&(this.agent.invoke_setDOMBreakpoint({nodeId:e.node.id,type:e.type}),e.node.setMarker(Ia,!0))}disableDOMBreakpoint(e){e.node.id&&(this.agent.invoke_removeDOMBreakpoint({nodeId:e.node.id,type:e.type}),e.node.setMarker(Ia,!!this.nodeHasBreakpoints(e.node)||null))}nodeHasBreakpoints(e){for(const t of this.#kd)if(t.node===e&&t.enabled)return!0;return!1}resolveDOMBreakpointData(e){const t=e.type,s=this.#Xs.nodeForId(e.nodeId);if(!t||!s)return null;let r=null,i=!1;return"subtree-modified"===t&&(i=e.insertion||!1,r=this.#Xs.nodeForId(e.targetNodeId)),{type:t,node:s,targetNode:r,insertion:i}}currentURL(){const e=this.#Xs.existingDocument();return e?e.documentURL:r.DevToolsPath.EmptyUrlString}async documentUpdated(){if(this.suspended)return;const e=this.#kd;this.#kd=[],this.dispatchEventToListeners("DOMBreakpointsRemoved",e);const t=await this.#Xs.requestDocument(),s=t?t.documentURL:r.DevToolsPath.EmptyUrlString;for(const e of this.#Sd.get())e.url===s&&this.#Xs.pushNodeByPathToFrontend(e.path).then(i.bind(this,e));function i(e,t){const s=t?this.#Xs.nodeForId(t):null;if(!s)return;const r=new wa(this,s,e.type,e.enabled);this.#kd.push(r),e.enabled&&this.enableDOMBreakpoint(r),this.dispatchEventToListeners("DOMBreakpointAdded",r)}}removeDOMBreakpoints(e){const t=[],s=[];for(const r of this.#kd)e(r)?(t.push(r),r.enabled&&(r.enabled=!1,this.disableDOMBreakpoint(r))):s.push(r);t.length&&(this.#kd=s,this.saveDOMBreakpoints(),this.dispatchEventToListeners("DOMBreakpointsRemoved",t))}nodeRemoved(e){if(this.suspended)return;const{node:t}=e.data,s=t.children()||[];this.removeDOMBreakpoints(e=>e.node===t||-1!==s.indexOf(e.node))}saveDOMBreakpoints(){const e=this.currentURL(),t=this.#Sd.get().filter(t=>t.url!==e);for(const s of this.#kd)t.push({url:e,path:s.node.path(),type:s.type,enabled:s.enabled});this.#Sd.set(t)}}const Ia="breakpoint-marker";class wa{domDebuggerModel;node;type;enabled;constructor(e,t,s,r){this.domDebuggerModel=e,this.node=t,this.type=s,this.enabled=r}}class Sa{#xd;#Cd;#g;#Id;#Rd;#Td;#Pd;#Ed;#Qr;#Md;#Ld;#Ad;constructor(e,t,s,i,n,o,a,l,c,d,h){this.#xd=e,this.#Cd=t,this.#g=s,this.#Id=i,this.#Rd=n,this.#Td=o,this.#Pd=a,this.#Ed=l||a,this.#Qr=c;const u=c.script();this.#Md=u?u.contentURL():r.DevToolsPath.EmptyUrlString,this.#Ld=d,this.#Ad=h||"Raw"}domDebuggerModel(){return this.#xd}type(){return this.#g}useCapture(){return this.#Id}passive(){return this.#Rd}once(){return this.#Td}handler(){return this.#Pd}location(){return this.#Qr}sourceURL(){return this.#Md}originalHandler(){return this.#Ed}canRemove(){return Boolean(this.#Ld)||"FrameworkUser"!==this.#Ad}remove(){if(!this.canRemove())return Promise.resolve(void 0);if("FrameworkUser"!==this.#Ad){function e(e,t,s){this.removeEventListener(e,t,s),this["on"+e]&&(this["on"+e]=void 0)}return this.#Cd.callFunction(e,[Bn.toCallArgument(this.#g),Bn.toCallArgument(this.#Ed),Bn.toCallArgument(this.#Id)]).then(()=>{})}if(this.#Ld){function t(e,t,s,r){this.call(null,e,t,s,r)}return this.#Ld.callFunction(t,[Bn.toCallArgument(this.#g),Bn.toCallArgument(this.#Ed),Bn.toCallArgument(this.#Id),Bn.toCallArgument(this.#Rd)]).then(()=>{})}return Promise.resolve(void 0)}canTogglePassive(){return"FrameworkUser"!==this.#Ad}togglePassive(){return this.#Cd.callFunction(function(e,t,s,r){this.removeEventListener(e,t,{capture:s}),this.addEventListener(e,t,{capture:s,passive:!r})},[Bn.toCallArgument(this.#g),Bn.toCallArgument(this.#Ed),Bn.toCallArgument(this.#Id),Bn.toCallArgument(this.#Rd)]).then(()=>{})}origin(){return this.#Ad}markAsFramework(){this.#Ad="Framework"}isScrollBlockingType(){return"touchstart"===this.#g||"touchmove"===this.#g||"mousewheel"===this.#g||"wheel"===this.#g}}class ka extends ro{#g;constructor(e,t){super(e,t),this.#g=t}type(){return this.#g}}class Ca extends ro{eventTargetNames;constructor(e,t,s){super(s,e),this.eventTargetNames=t}setEnabled(e){if(this.enabled()!==e){super.setEnabled(e);for(const e of W.instance().models(va))this.updateOnModel(e)}}updateOnModel(e){for(const t of this.eventTargetNames)this.enabled()?e.agent.invoke_setEventListenerBreakpoint({eventName:this.name,targetName:t}):e.agent.invoke_removeEventListenerBreakpoint({eventName:this.name,targetName:t})}static listener="listener:"}let xa;class Ra{#Od;#Dd=new Map;#Nd=[];#Fd=[];constructor(){this.#Od=e.Settings.Settings.instance().createLocalSetting("xhr-breakpoints",[]);for(const e of this.#Od.get())this.#Dd.set(e.url,e.enabled);this.#Nd.push(new ka("trusted-type-violation","trustedtype-sink-violation")),this.#Nd.push(new ka("trusted-type-violation","trustedtype-policy-violation")),this.createEventListenerBreakpoints("media",["play","pause","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange","loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","waiting"],["audio","video"]),this.createEventListenerBreakpoints("picture-in-picture",["enterpictureinpicture","leavepictureinpicture"],["video"]),this.createEventListenerBreakpoints("picture-in-picture",["resize"],["PictureInPictureWindow"]),this.createEventListenerBreakpoints("picture-in-picture",["enter"],["documentPictureInPicture"]),this.createEventListenerBreakpoints("clipboard",["copy","cut","paste","beforecopy","beforecut","beforepaste"],["*"]),this.createEventListenerBreakpoints("control",["resize","scroll","scrollend","scrollsnapchange","scrollsnapchanging","zoom","focus","blur","select","change","submit","reset"],["*"]),this.createEventListenerBreakpoints("device",["deviceorientation","devicemotion"],["*"]),this.createEventListenerBreakpoints("dom-mutation",["DOMActivate","DOMFocusIn","DOMFocusOut","DOMAttrModified","DOMCharacterDataModified","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMSubtreeModified","DOMContentLoaded"],["*"]),this.createEventListenerBreakpoints("drag-drop",["drag","dragstart","dragend","dragenter","dragover","dragleave","drop"],["*"]),this.createEventListenerBreakpoints("keyboard",["keydown","keyup","keypress","input"],["*"]),this.createEventListenerBreakpoints("load",["load","beforeunload","unload","abort","error","hashchange","popstate","navigate","navigatesuccess","navigateerror","currentchange","navigateto","navigatefrom","finish","dispose"],["*"]),this.createEventListenerBreakpoints("mouse",["auxclick","click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout","mouseenter","mouseleave","mousewheel","wheel","contextmenu"],["*"]),this.createEventListenerBreakpoints("pointer",["pointerover","pointerout","pointerenter","pointerleave","pointerdown","pointerup","pointermove","pointercancel","gotpointercapture","lostpointercapture","pointerrawupdate"],["*"]),this.createEventListenerBreakpoints("touch",["touchstart","touchmove","touchend","touchcancel"],["*"]),this.createEventListenerBreakpoints("worker",["message","messageerror"],["*"]),this.createEventListenerBreakpoints("xhr",["readystatechange","load","loadstart","loadend","abort","error","progress","timeout"],["xmlhttprequest","xmlhttprequestupload"]),W.instance().observeModels(va,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return xa&&!t||(xa=new Ra),xa}cspViolationBreakpoints(){return this.#Nd.slice()}createEventListenerBreakpoints(e,t,s){for(const r of t)this.#Fd.push(new Ca(r,s,e))}resolveEventListenerBreakpoint({eventName:e,targetName:t}){if(!e.startsWith("listener:"))return null;e=e.substring(9),t=(t||"*").toLowerCase();let s=null;for(const r of this.#Fd)e&&r.name===e&&-1!==r.eventTargetNames.indexOf(t)&&(s=r),!s&&e&&r.name===e&&-1!==r.eventTargetNames.indexOf("*")&&(s=r);return s}eventListenerBreakpoints(){return this.#Fd.slice()}updateCSPViolationBreakpoints(){const e=this.#Nd.filter(e=>e.enabled()).map(e=>e.type());for(const t of W.instance().models(va))this.updateCSPViolationBreakpointsForModel(t,e)}updateCSPViolationBreakpointsForModel(e,t){e.agent.invoke_setBreakOnCSPViolation({violationTypes:t})}xhrBreakpoints(){return this.#Dd}saveXHRBreakpoints(){const e=[];for(const t of this.#Dd.keys())e.push({url:t,enabled:this.#Dd.get(t)||!1});this.#Od.set(e)}addXHRBreakpoint(e,t){if(this.#Dd.set(e,t),t)for(const t of W.instance().models(va))t.agent.invoke_setXHRBreakpoint({url:e});this.saveXHRBreakpoints()}removeXHRBreakpoint(e){const t=this.#Dd.get(e);if(this.#Dd.delete(e),t)for(const t of W.instance().models(va))t.agent.invoke_removeXHRBreakpoint({url:e});this.saveXHRBreakpoints()}toggleXHRBreakpoint(e,t){this.#Dd.set(e,t);for(const s of W.instance().models(va))t?s.agent.invoke_setXHRBreakpoint({url:e}):s.agent.invoke_removeXHRBreakpoint({url:e});this.saveXHRBreakpoints()}modelAdded(e){for(const t of this.#Dd.keys())this.#Dd.get(t)&&e.agent.invoke_setXHRBreakpoint({url:t});for(const t of this.#Fd)t.enabled()&&t.updateOnModel(e);const t=this.#Nd.filter(e=>e.enabled()).map(e=>e.type());this.updateCSPViolationBreakpointsForModel(e,t)}modelRemoved(e){}}h.register(va,{capabilities:2,autostart:!1});var Ta=Object.freeze({__proto__:null,CSPViolationBreakpoint:ka,DOMBreakpoint:wa,DOMDebuggerManager:Ra,DOMDebuggerModel:va,DOMEventListenerBreakpoint:Ca,EventListener:Sa});class Ma extends h{agent;constructor(e){super(e),this.agent=e.eventBreakpointsAgent()}}class Pa extends ro{setEnabled(e){if(this.enabled()!==e){super.setEnabled(e);for(const e of W.instance().models(Ma))this.updateOnModel(e)}}updateOnModel(e){this.enabled()?e.agent.invoke_setInstrumentationBreakpoint({eventName:this.name}):e.agent.invoke_removeInstrumentationBreakpoint({eventName:this.name})}static instrumentationPrefix="instrumentation:"}let Ea;class La{#Fd=[];constructor(){this.createInstrumentationBreakpoints("auction-worklet",["beforeBidderWorkletBiddingStart","beforeBidderWorkletReportingStart","beforeSellerWorkletScoringStart","beforeSellerWorkletReportingStart"]),this.createInstrumentationBreakpoints("animation",["requestAnimationFrame","cancelAnimationFrame","requestAnimationFrame.callback"]),this.createInstrumentationBreakpoints("canvas",["canvasContextCreated","webglErrorFired","webglWarningFired"]),this.createInstrumentationBreakpoints("geolocation",["Geolocation.getCurrentPosition","Geolocation.watchPosition"]),this.createInstrumentationBreakpoints("notification",["Notification.requestPermission"]),this.createInstrumentationBreakpoints("parse",["Element.setInnerHTML","Document.write"]),this.createInstrumentationBreakpoints("script",["scriptFirstStatement","scriptBlockedByCSP"]),this.createInstrumentationBreakpoints("shared-storage-worklet",["sharedStorageWorkletScriptFirstStatement"]),this.createInstrumentationBreakpoints("timer",["setTimeout","clearTimeout","setTimeout.callback","setInterval","clearInterval","setInterval.callback"]),this.createInstrumentationBreakpoints("window",["DOMWindow.close"]),this.createInstrumentationBreakpoints("web-audio",["audioContextCreated","audioContextClosed","audioContextResumed","audioContextSuspended"]),W.instance().observeModels(Ma,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return Ea&&!t||(Ea=new La),Ea}createInstrumentationBreakpoints(e,t){for(const s of t)this.#Fd.push(new Pa(e,s))}eventListenerBreakpoints(){return this.#Fd.slice()}resolveEventListenerBreakpoint({eventName:e}){if(!e.startsWith(Pa.instrumentationPrefix))return null;const t=e.substring(Pa.instrumentationPrefix.length);return this.#Fd.find(e=>e.name===t)||null}modelAdded(e){for(const t of this.#Fd)t.enabled()&&t.updateOnModel(e)}modelRemoved(e){}}h.register(Ma,{capabilities:524288,autostart:!1});var Aa=Object.freeze({__proto__:null,EventBreakpointsManager:La,EventBreakpointsModel:Ma}),Oa=Object.freeze({__proto__:null});let Da;class Na extends e.ObjectWrapper.ObjectWrapper{#_d=new Map;#Ud=new Map;#L=new Set;#Bd=0;constructor(){super(),W.instance().observeModels(Jr,this)}static instance({forceNew:e}={forceNew:!1}){return Da&&!e||(Da=new Na),Da}observeIsolates(e){if(this.#L.has(e))throw new Error("Observer can only be registered once");this.#L.size||this.poll(),this.#L.add(e);for(const t of this.#_d.values())e.isolateAdded(t)}modelAdded(e){this.modelAddedInternal(e)}async modelAddedInternal(e){this.#Ud.set(e,null);const t=await e.isolateId();if(!this.#Ud.has(e))return;if(!t)return void this.#Ud.delete(e);this.#Ud.set(e,t);let s=this.#_d.get(t);if(s||(s=new _a(t),this.#_d.set(t,s)),s.modelsInternal.add(e),1===s.modelsInternal.size)for(const e of this.#L)e.isolateAdded(s);else for(const e of this.#L)e.isolateChanged(s)}modelRemoved(e){const t=this.#Ud.get(e);if(this.#Ud.delete(e),!t)return;const s=this.#_d.get(t);if(s)if(s.modelsInternal.delete(e),s.modelsInternal.size)for(const e of this.#L)e.isolateChanged(s);else{for(const e of this.#L)e.isolateRemoved(s);this.#_d.delete(t)}}isolateByModel(e){return this.#_d.get(this.#Ud.get(e)||"")||null}isolates(){return this.#_d.values()}async poll(){const e=this.#Bd;for(;e===this.#Bd;)await Promise.all(Array.from(this.isolates(),e=>e.update())),await new Promise(e=>window.setTimeout(e,Ba))}}const Fa=12e4,Ba=2e3;class _a{#C;modelsInternal;#Hd;#qd;constructor(e){this.#C=e,this.modelsInternal=new Set,this.#Hd=0;const t=Fa/Ba;this.#qd=new Ha(t)}id(){return this.#C}models(){return this.modelsInternal}runtimeModel(){return this.modelsInternal.values().next().value||null}heapProfilerModel(){const e=this.runtimeModel();return e?.heapProfilerModel()??null}async update(){const e=this.runtimeModel(),t=e&&await e.heapUsage();t&&(this.#Hd=t.usedSize+(t.embedderHeapUsedSize??0)+(t.backingStorageSize??0),this.#qd.add(this.#Hd),Na.instance().dispatchEventToListeners("MemoryChanged",this))}samplesCount(){return this.#qd.count()}usedHeapSize(){return this.#Hd}usedHeapSizeGrowRate(){return this.#qd.fitSlope()}}class Ha{#zd;#jd;#ni;#Wd;#Vd;#Gd;#Kd;#$d;#Qd;constructor(e){this.#zd=0|e,this.reset()}reset(){this.#jd=Date.now(),this.#ni=0,this.#Wd=[],this.#Vd=[],this.#Gd=0,this.#Kd=0,this.#$d=0,this.#Qd=0}count(){return this.#Wd.length}add(e,t){const s="number"==typeof t?t:Date.now()-this.#jd,r=e;if(this.#Wd.length===this.#zd){const e=this.#Wd[this.#ni],t=this.#Vd[this.#ni];this.#Gd-=e,this.#Kd-=t,this.#$d-=e*e,this.#Qd-=e*t}this.#Gd+=s,this.#Kd+=r,this.#$d+=s*s,this.#Qd+=s*r,this.#Wd[this.#ni]=s,this.#Vd[this.#ni]=r,this.#ni=(this.#ni+1)%this.#zd}fitSlope(){const e=this.count();return e<2?0:(this.#Qd-this.#Gd*this.#Kd/e)/(this.#$d-this.#Gd*this.#Gd/e)}}var Ua=Object.freeze({__proto__:null,Isolate:_a,IsolateManager:Na,MemoryTrend:Ha,MemoryTrendWindowMs:Fa});class qa extends h{#Yd=!1;#fr=!1;constructor(e){super(e),this.ensureEnabled()}async ensureEnabled(){if(this.#fr)return;this.#fr=!0,this.target().registerAuditsDispatcher(this);const e=this.target().auditsAgent();await e.invoke_enable()}issueAdded(e){this.dispatchEventToListeners("IssueAdded",{issuesModel:this,inspectorIssue:e.issue})}dispose(){super.dispose(),this.#Yd=!0}getTargetIfNotDisposed(){return this.#Yd?null:this.target()}}h.register(qa,{capabilities:32768,autostart:!0});var za=Object.freeze({__proto__:null,IssuesModel:qa}),ja=Object.freeze({__proto__:null,LayerTreeBase:class{#e;#Xs;layersById=new Map;#Jd=null;#Xd=null;#Zd=new Map;#eh;constructor(e){this.#e=e,this.#Xs=e?e.model(Gs):null}target(){return this.#e}root(){return this.#Jd}setRoot(e){this.#Jd=e}contentRoot(){return this.#Xd}setContentRoot(e){this.#Xd=e}forEachLayer(e,t){return!(!t&&!(t=this.root()))&&(e(t)||t.children().some(this.forEachLayer.bind(this,e)))}layerById(e){return this.layersById.get(e)||null}async resolveBackendNodeIds(e){if(!e.size||!this.#Xs)return;const t=await this.#Xs.pushNodesByBackendIdsToFrontend(e);if(t)for(const e of t.keys())this.#Zd.set(e,t.get(e)||null)}backendNodeIdToNode(){return this.#Zd}setViewportSize(e){this.#eh=e}viewportSize(){return this.#eh}nodeForId(e){return this.#Xs?this.#Xs.nodeForId(e):null}},StickyPositionConstraint:class{#th;#sh;#rh;#ih;constructor(e,t){this.#th=t.stickyBoxRect,this.#sh=t.containingBlockRect,this.#rh=null,e&&t.nearestLayerShiftingStickyBox&&(this.#rh=e.layerById(t.nearestLayerShiftingStickyBox)),this.#ih=null,e&&t.nearestLayerShiftingContainingBlock&&(this.#ih=e.layerById(t.nearestLayerShiftingContainingBlock))}stickyBoxRect(){return this.#th}containingBlockRect(){return this.#sh}nearestLayerShiftingStickyBox(){return this.#rh}nearestLayerShiftingContainingBlock(){return this.#ih}}});class Va{id;url;startTime;loadTime;contentLoadTime;mainRequest;constructor(e){this.id=++Va.lastIdentifier,this.url=e.url(),this.startTime=e.startTime,this.mainRequest=e}static forRequest(e){return Wa.get(e)||null}bindRequest(e){Wa.set(e,this)}static lastIdentifier=0}const Wa=new WeakMap;var Ga=Object.freeze({__proto__:null,PageLoad:Va});class Ka extends h{layerTreeAgent;constructor(e){super(e),this.layerTreeAgent=e.layerTreeAgent()}async loadSnapshotFromFragments(e){const{snapshotId:t}=await this.layerTreeAgent.invoke_loadSnapshot({tiles:e});return t?new Qa(this,t):null}loadSnapshot(e){const t={x:0,y:0,picture:e};return this.loadSnapshotFromFragments([t])}async makeSnapshot(e){const{snapshotId:t}=await this.layerTreeAgent.invoke_makeSnapshot({layerId:e});return t?new Qa(this,t):null}}class Qa{#nh;#Ro;#oh;constructor(e,t){this.#nh=e,this.#Ro=t,this.#oh=1}release(){console.assert(this.#oh>0,"release is already called on the object"),--this.#oh||this.#nh.layerTreeAgent.invoke_releaseSnapshot({snapshotId:this.#Ro})}addReference(){++this.#oh,console.assert(this.#oh>0,"Referencing a dead object")}async replay(e,t,s){return(await this.#nh.layerTreeAgent.invoke_replaySnapshot({snapshotId:this.#Ro,fromStep:t,toStep:s,scale:e||1})).dataURL}async profile(e){return(await this.#nh.layerTreeAgent.invoke_profileSnapshot({snapshotId:this.#Ro,minRepeatCount:5,minDuration:1,clipRect:e||void 0})).timings}async commandLog(){const e=await this.#nh.layerTreeAgent.invoke_snapshotCommandLog({snapshotId:this.#Ro});return e.commandLog?e.commandLog.map((e,t)=>new $a(e,t)):null}}class $a{method;params;commandIndex;constructor(e,t){this.method=e.method,this.params=e.params,this.commandIndex=t}}h.register(Ka,{capabilities:2,autostart:!1});var Xa=Object.freeze({__proto__:null,PaintProfilerLogItem:$a,PaintProfilerModel:Ka,PaintProfilerSnapshot:Qa});class Ja extends h{#Vi;#ah=new Map([["TaskDuration","CumulativeTime"],["ScriptDuration","CumulativeTime"],["LayoutDuration","CumulativeTime"],["RecalcStyleDuration","CumulativeTime"],["LayoutCount","CumulativeCount"],["RecalcStyleCount","CumulativeCount"]]);#lh=new Map;constructor(e){super(e),this.#Vi=e.performanceAgent()}enable(){return this.#Vi.invoke_enable({})}disable(){return this.#Vi.invoke_disable()}async requestMetrics(){const e=await this.#Vi.invoke_getMetrics()||[],t=new Map,s=performance.now();for(const i of e.metrics){let e,n=this.#lh.get(i.name);switch(n||(n={lastValue:void 0,lastTimestamp:void 0},this.#lh.set(i.name,n)),this.#ah.get(i.name)){case"CumulativeTime":e=n.lastTimestamp&&n.lastValue?r.NumberUtilities.clamp(1e3*(i.value-n.lastValue)/(s-n.lastTimestamp),0,1):0,n.lastValue=i.value,n.lastTimestamp=s;break;case"CumulativeCount":e=n.lastTimestamp&&n.lastValue?Math.max(0,1e3*(i.value-n.lastValue)/(s-n.lastTimestamp)):0,n.lastValue=i.value,n.lastTimestamp=s;break;default:e=i.value}t.set(i.name,e)}return{metrics:t,timestamp:s}}}h.register(Ja,{capabilities:2,autostart:!1});var Ya=Object.freeze({__proto__:null,PerformanceMetricsModel:Ja});class Za extends Map{getOrInsert(e,t){return this.has(e)||this.set(e,t),this.get(e)}getOrInsertComputed(e,t){return this.has(e)||this.set(e,t(e)),this.get(e)}}class el extends h{agent;loaderIds=[];targetJustAttached=!0;lastPrimaryPageModel=null;documents=new Map;constructor(e){super(e),e.registerPreloadDispatcher(new tl(this)),this.agent=e.preloadAgent(),this.agent.invoke_enable();const t=e.targetInfo();void 0!==t&&"prerender"===t.subtype&&(this.lastPrimaryPageModel=W.instance().primaryPageTarget()?.model(el)||null),W.instance().addModelListener(ii,ri.PrimaryPageChanged,this.onPrimaryPageChanged,this)}dispose(){super.dispose(),W.instance().removeModelListener(ii,ri.PrimaryPageChanged,this.onPrimaryPageChanged,this),this.agent.invoke_disable()}ensureDocumentPreloadingData(e){void 0===this.documents.get(e)&&this.documents.set(e,new nl)}currentLoaderId(){if(this.targetJustAttached)return null;if(0===this.loaderIds.length)throw new Error("unreachable");return this.loaderIds[this.loaderIds.length-1]}currentDocument(){const e=this.currentLoaderId();return null===e?null:this.documents.get(e)||null}getRuleSetById(e){return this.currentDocument()?.ruleSets.getById(e)||null}getAllRuleSets(){return this.currentDocument()?.ruleSets.getAll()||[]}getPreloadCountsByRuleSetId(){const e=new Map;for(const{value:t}of this.getRepresentativePreloadingAttempts(null))for(const r of[null,...t.ruleSetIds]){void 0===e.get(r)&&e.set(r,new Map);const i=e.get(r);s(i);const n=i.get(t.status)||0;i.set(t.status,n+1)}return e}getPreloadingAttemptById(e){const t=this.currentDocument();return null===t?null:t.preloadingAttempts.getById(e,t.sources)||null}getRepresentativePreloadingAttempts(e){const t=this.currentDocument();return null===t?[]:t.preloadingAttempts.getAllRepresentative(e,t.sources)}getRepresentativePreloadingAttemptsOfPreviousPage(){if(this.loaderIds.length<=1)return[];const e=this.documents.get(this.loaderIds[this.loaderIds.length-2]);return void 0===e?[]:e.preloadingAttempts.getAllRepresentative(null,e.sources)}getPipelineById(e){const t=this.currentDocument();return null===t?null:t.preloadingAttempts.getPipeline(e,t.sources)}getPipeline(e){let t=null;if(null!==e.pipelineId&&(t=this.getPipelineById(e.pipelineId)),null===t){const t=new Map;return t.set(e.action,e),new ol(t)}return new ol(t)}onPrimaryPageChanged(e){const{frame:t,type:s}=e.data;if(null===this.lastPrimaryPageModel&&"Activation"===s)return;if(null!==this.lastPrimaryPageModel&&"Activation"!==s)return;if(null!==this.lastPrimaryPageModel&&"Activation"===s){this.loaderIds=this.lastPrimaryPageModel.loaderIds;for(const[e,t]of this.lastPrimaryPageModel.documents.entries())this.ensureDocumentPreloadingData(e),this.documents.get(e)?.mergePrevious(t)}this.lastPrimaryPageModel=null;const r=t.loaderId;this.loaderIds.push(r),this.loaderIds=this.loaderIds.slice(-2),this.ensureDocumentPreloadingData(r);for(const e of this.documents.keys())this.loaderIds.includes(e)||this.documents.delete(e);this.dispatchEventToListeners("ModelUpdated")}onRuleSetUpdated(e){const t=e.ruleSet,s=t.loaderId;null===this.currentLoaderId()&&(this.loaderIds=[s],this.targetJustAttached=!1),this.ensureDocumentPreloadingData(s),this.documents.get(s)?.ruleSets.upsert(t),this.dispatchEventToListeners("ModelUpdated")}onRuleSetRemoved(e){const t=e.id;for(const e of this.documents.values())e.ruleSets.delete(t);this.dispatchEventToListeners("ModelUpdated")}onPreloadingAttemptSourcesUpdated(e){const t=e.loaderId;this.ensureDocumentPreloadingData(t);const s=this.documents.get(t);void 0!==s&&(s.sources.update(e.preloadingAttemptSources),s.preloadingAttempts.maybeRegisterNotTriggered(s.sources),s.preloadingAttempts.cleanUpRemovedAttempts(s.sources),this.dispatchEventToListeners("ModelUpdated"))}onPrefetchStatusUpdated(e){if("PrefetchEvictedAfterCandidateRemoved"===e.prefetchStatus)return;const t=e.key.loaderId;this.ensureDocumentPreloadingData(t);const s={action:"Prefetch",key:e.key,pipelineId:e.pipelineId,status:sl(e.status),prefetchStatus:e.prefetchStatus||null,requestId:e.requestId};this.documents.get(t)?.preloadingAttempts.upsert(s),this.dispatchEventToListeners("ModelUpdated")}onPrerenderStatusUpdated(e){const t=e.key.loaderId;this.ensureDocumentPreloadingData(t);const s={action:"Prerender",key:e.key,pipelineId:e.pipelineId,status:sl(e.status),prerenderStatus:e.prerenderStatus||null,disallowedMojoInterface:e.disallowedMojoInterface||null,mismatchedHeaders:e.mismatchedHeaders||null};this.documents.get(t)?.preloadingAttempts.upsert(s),this.dispatchEventToListeners("ModelUpdated")}onPreloadEnabledStateUpdated(e){this.dispatchEventToListeners("WarningsUpdated",e)}}h.register(el,{capabilities:2,autostart:!1});class tl{model;constructor(e){this.model=e}ruleSetUpdated(e){this.model.onRuleSetUpdated(e)}ruleSetRemoved(e){this.model.onRuleSetRemoved(e)}preloadingAttemptSourcesUpdated(e){this.model.onPreloadingAttemptSourcesUpdated(e)}prefetchStatusUpdated(e){this.model.onPrefetchStatusUpdated(e)}prerenderStatusUpdated(e){this.model.onPrerenderStatusUpdated(e)}preloadEnabledStateUpdated(e){this.model.onPreloadEnabledStateUpdated(e)}}class nl{ruleSets=new rl;preloadingAttempts=new al;sources=new ll;mergePrevious(e){if(!this.ruleSets.isEmpty()||!this.sources.isEmpty())throw new Error("unreachable");this.ruleSets=e.ruleSets,this.preloadingAttempts.mergePrevious(e.preloadingAttempts),this.sources=e.sources}}class rl{map=new Map;isEmpty(){return 0===this.map.size}getById(e){return this.map.get(e)||null}getAll(){return Array.from(this.map.entries()).map(([e,t])=>({id:e,value:t}))}upsert(e){this.map.set(e.id,e)}delete(e){this.map.delete(e)}}function sl(e){switch(e){case"Pending":return"Pending";case"Running":return"Running";case"Ready":return"Ready";case"Success":return"Success";case"Failure":return"Failure";case"NotSupported":return"NotSupported"}throw new Error("unreachable")}function il(e){let t,s;switch(e.action){case"Prefetch":t="Prefetch";break;case"Prerender":t="Prerender"}switch(e.targetHint){case void 0:s="undefined";break;case"Blank":s="Blank";break;case"Self":s="Self"}return`${e.loaderId}:${t}:${e.url}:${s}`}class ol{inner;constructor(e){if(0===e.size)throw new Error("unreachable");this.inner=e}static newFromAttemptsForTesting(e){const t=new Map;for(const s of e)t.set(s.action,s);return new ol(t)}getOriginallyTriggered(){const e=this.getPrerender()||this.getPrefetch();return s(e),e}getPrefetch(){return this.inner.get("Prefetch")||null}getPrerender(){return this.inner.get("Prerender")||null}getAttempts(){const e=[],t=this.getPrefetch();null!==t&&e.push(t);const s=this.getPrerender();if(null!==s&&e.push(s),0===e.length)throw new Error("unreachable");return e}}class al{map=new Map;pipelines=new Za;enrich(e,t){let s=[],r=[];return null!==t&&(s=t.ruleSetIds,r=t.nodeIds),{...e,ruleSetIds:s,nodeIds:r}}isAttemptRepresentative(e){function t(e){switch(e){case"Prefetch":return 0;case"Prerender":return 1}}if(null===e.pipelineId)return!0;const r=this.pipelines.get(e.pipelineId);if(s(r),0===r.size)throw new Error("unreachable");return[...r.keys()].every(s=>t(s)<=t(e.action))}getById(e,t){const s=this.map.get(e)||null;return null===s?null:this.enrich(s,t.getById(e))}getAllRepresentative(e,t){return[...this.map.entries()].map(([e,s])=>({id:e,value:this.enrich(s,t.getById(e))})).filter(({value:t})=>!e||t.ruleSetIds.includes(e)).filter(({value:e})=>this.isAttemptRepresentative(e))}getPipeline(e,t){const r=this.pipelines.get(e);if(void 0===r||0===r.size)return null;const i={};for(const[e,t]of this.map.entries())i[e]=t;return new Map(r.entries().map(([e,r])=>{const i=this.getById(r,t);return s(i),[e,i]}))}upsert(e){const t=il(e.key);this.map.set(t,e),null!==e.pipelineId&&this.pipelines.getOrInsertComputed(e.pipelineId,()=>new Map).set(e.action,t)}reconstructPipelines(){this.pipelines.clear();for(const[e,t]of this.map.entries())null!==t.pipelineId&&this.pipelines.getOrInsertComputed(t.pipelineId,()=>new Map).set(t.action,e)}maybeRegisterNotTriggered(e){for(const[t,{key:s}]of e.entries()){if(void 0!==this.map.get(t))continue;let e;switch(s.action){case"Prefetch":e={action:"Prefetch",key:s,pipelineId:null,status:"NotTriggered",prefetchStatus:null,requestId:""};break;case"Prerender":e={action:"Prerender",key:s,pipelineId:null,status:"NotTriggered",prerenderStatus:null,disallowedMojoInterface:null,mismatchedHeaders:null}}this.map.set(t,e)}}cleanUpRemovedAttempts(e){const t=Array.from(this.map.keys()).filter(t=>!e.getById(t));for(const e of t)this.map.delete(e);this.reconstructPipelines()}mergePrevious(e){for(const[t,s]of this.map.entries())e.map.set(t,s);this.map=e.map,this.reconstructPipelines()}}class ll{map=new Map;entries(){return this.map.entries()}isEmpty(){return 0===this.map.size}getById(e){return this.map.get(e)||null}update(e){this.map=new Map(e.map(e=>[il(e.key),e]))}}var dl=Object.freeze({__proto__:null,PreloadPipeline:ol,PreloadingModel:el}),cl=Object.freeze({__proto__:null,ReactNativeApplicationModel:class extends h{#fr;#Vi;metadataCached=null;constructor(e){super(e),a.rnPerfMetrics.fuseboxSetClientMetadataStarted(),this.#fr=!1,this.#Vi=e.reactNativeApplicationAgent(),e.registerReactNativeApplicationDispatcher(this),this.ensureEnabled()}ensureEnabled(){this.#fr||(this.#Vi.invoke_enable().then(e=>{const t=e.getError(),s=!t;a.rnPerfMetrics.fuseboxSetClientMetadataFinished(s,t)}).catch(e=>{a.rnPerfMetrics.fuseboxSetClientMetadataFinished(!1,e)}),this.#fr=!0)}metadataUpdated(e){this.metadataCached=e,this.dispatchEventToListeners("MetadataUpdated",e)}}});class hl extends h{enabled=!1;storageAgent;storageKeyManager;bucketsById=new Map;trackedStorageKeys=new Set;constructor(e){super(e),e.registerStorageDispatcher(this),this.storageAgent=e.storageAgent(),this.storageKeyManager=e.model(ni)}getBuckets(){return new Set(this.bucketsById.values())}getBucketsForStorageKey(e){const t=[...this.bucketsById.values()];return new Set(t.filter(({bucket:t})=>t.storageKey===e))}getDefaultBucketForStorageKey(e){return[...this.bucketsById.values()].find(({bucket:t})=>t.storageKey===e&&void 0===t.name)??null}getBucketById(e){return this.bucketsById.get(e)??null}getBucketByName(e,t){return t?[...this.bucketsById.values()].find(({bucket:s})=>s.storageKey===e&&s.name===t)??null:this.getDefaultBucketForStorageKey(e)}deleteBucket(e){this.storageAgent.invoke_deleteStorageBucket({bucket:e})}enable(){if(!this.enabled){if(this.storageKeyManager){this.storageKeyManager.addEventListener("StorageKeyAdded",this.storageKeyAdded,this),this.storageKeyManager.addEventListener("StorageKeyRemoved",this.storageKeyRemoved,this);for(const e of this.storageKeyManager.storageKeys())this.addStorageKey(e)}this.enabled=!0}}storageKeyAdded(e){this.addStorageKey(e.data)}storageKeyRemoved(e){this.removeStorageKey(e.data)}addStorageKey(e){if(this.trackedStorageKeys.has(e))throw new Error("Can't call addStorageKey for a storage key if it has already been added.");this.trackedStorageKeys.add(e),this.storageAgent.invoke_setStorageBucketTracking({storageKey:e,enable:!0})}removeStorageKey(e){if(!this.trackedStorageKeys.has(e))throw new Error("Can't call removeStorageKey for a storage key if it hasn't already been added.");const t=this.getBucketsForStorageKey(e);for(const e of t)this.bucketRemoved(e);this.trackedStorageKeys.delete(e),this.storageAgent.invoke_setStorageBucketTracking({storageKey:e,enable:!1})}bucketAdded(e){this.bucketsById.set(e.id,e),this.dispatchEventToListeners("BucketAdded",{model:this,bucketInfo:e})}bucketRemoved(e){this.bucketsById.delete(e.id),this.dispatchEventToListeners("BucketRemoved",{model:this,bucketInfo:e})}bucketChanged(e){this.dispatchEventToListeners("BucketChanged",{model:this,bucketInfo:e})}bucketInfosAreEqual(e,t){return e.bucket.storageKey===t.bucket.storageKey&&e.id===t.id&&e.bucket.name===t.bucket.name&&e.expiration===t.expiration&&e.quota===t.quota&&e.persistent===t.persistent&&e.durability===t.durability}storageBucketCreatedOrUpdated({bucketInfo:e}){const t=this.getBucketById(e.id);t?this.bucketInfosAreEqual(t,e)||this.bucketChanged(e):this.bucketAdded(e)}storageBucketDeleted({bucketId:e}){const t=this.getBucketById(e);if(!t)throw new Error(`Received an event that Storage Bucket '${e}' was deleted, but it wasn't in the StorageBucketsModel.`);this.bucketRemoved(t)}attributionReportingTriggerRegistered(e){}interestGroupAccessed(e){}interestGroupAuctionEventOccurred(e){}interestGroupAuctionNetworkRequestCreated(e){}indexedDBListUpdated(e){}indexedDBContentUpdated(e){}cacheStorageListUpdated(e){}cacheStorageContentUpdated(e){}sharedStorageAccessed(e){}attributionReportingSourceRegistered(e){}}h.register(hl,{capabilities:8192,autostart:!1});var ul=Object.freeze({__proto__:null,StorageBucketsModel:hl});const gl={serviceworkercacheagentError:"`ServiceWorkerCacheAgent` error deleting cache entry {PH1} in cache: {PH2}"},pl=n.i18n.registerUIStrings("core/sdk/ServiceWorkerCacheModel.ts",gl),ml=n.i18n.getLocalizedString.bind(void 0,pl);class fl extends h{cacheAgent;#ch;#dh;#hh=new Map;#uh=new Set;#gh=new Set;#mh=new e.Throttler.Throttler(2e3);#fr=!1;#ph=!1;constructor(e){super(e),e.registerStorageDispatcher(this),this.cacheAgent=e.cacheStorageAgent(),this.#ch=e.storageAgent(),this.#dh=e.model(hl)}enable(){if(!this.#fr){this.#dh.addEventListener("BucketAdded",this.storageBucketAdded,this),this.#dh.addEventListener("BucketRemoved",this.storageBucketRemoved,this);for(const e of this.#dh.getBuckets())this.addStorageBucket(e.bucket);this.#fr=!0}}clearForStorageKey(e){for(const[t,s]of this.#hh.entries())s.storageKey===e&&(this.#hh.delete(t),this.cacheRemoved(s));for(const t of this.#dh.getBucketsForStorageKey(e))this.loadCacheNames(t.bucket)}refreshCacheNames(){for(const e of this.#hh.values())this.cacheRemoved(e);this.#hh.clear();const e=this.#dh.getBuckets();for(const t of e)this.loadCacheNames(t.bucket)}async deleteCache(e){const t=await this.cacheAgent.invoke_deleteCache({cacheId:e.cacheId});t.getError()?console.error(`ServiceWorkerCacheAgent error deleting cache ${e.toString()}: ${t.getError()}`):(this.#hh.delete(e.cacheId),this.cacheRemoved(e))}async deleteCacheEntry(t,s){const r=await this.cacheAgent.invoke_deleteEntry({cacheId:t.cacheId,request:s});r.getError()&&e.Console.Console.instance().error(ml(gl.serviceworkercacheagentError,{PH1:t.toString(),PH2:String(r.getError())}))}loadCacheData(e,t,s,r,i){this.requestEntries(e,t,s,r,i)}loadAllCacheData(e,t,s){this.requestAllEntries(e,t,s)}caches(){return[...this.#hh.values()]}dispose(){for(const e of this.#hh.values())this.cacheRemoved(e);this.#hh.clear(),this.#fr&&(this.#dh.removeEventListener("BucketAdded",this.storageBucketAdded,this),this.#dh.removeEventListener("BucketRemoved",this.storageBucketRemoved,this))}addStorageBucket(e){this.loadCacheNames(e),this.#uh.has(e.storageKey)||(this.#uh.add(e.storageKey),this.#ch.invoke_trackCacheStorageForStorageKey({storageKey:e.storageKey}))}removeStorageBucket(e){let t=0;for(const[s,r]of this.#hh.entries())e.storageKey===r.storageKey&&t++,r.inBucket(e)&&(t--,this.#hh.delete(s),this.cacheRemoved(r));0===t&&(this.#uh.delete(e.storageKey),this.#ch.invoke_untrackCacheStorageForStorageKey({storageKey:e.storageKey}))}async loadCacheNames(e){const t=await this.cacheAgent.invoke_requestCacheNames({storageBucket:e});t.getError()||this.updateCacheNames(e,t.caches)}updateCacheNames(e,t){const s=new Set,r=new Map,i=new Map;for(const e of t){const t=e.storageBucket??this.#dh.getDefaultBucketForStorageKey(e.storageKey)?.bucket;if(!t)continue;const i=new bl(this,t,e.cacheName,e.cacheId);s.add(i.cacheId),this.#hh.has(i.cacheId)||(r.set(i.cacheId,i),this.#hh.set(i.cacheId,i))}this.#hh.forEach(function(t){t.inBucket(e)&&!s.has(t.cacheId)&&(i.set(t.cacheId,t),this.#hh.delete(t.cacheId))},this),r.forEach(this.cacheAdded,this),i.forEach(this.cacheRemoved,this)}storageBucketAdded({data:{bucketInfo:{bucket:e}}}){this.addStorageBucket(e)}storageBucketRemoved({data:{bucketInfo:{bucket:e}}}){this.removeStorageBucket(e)}cacheAdded(e){this.dispatchEventToListeners("CacheAdded",{model:this,cache:e})}cacheRemoved(e){this.dispatchEventToListeners("CacheRemoved",{model:this,cache:e})}async requestEntries(e,t,s,r,i){const n=await this.cacheAgent.invoke_requestEntries({cacheId:e.cacheId,skipCount:t,pageSize:s,pathFilter:r});n.getError()?console.error("ServiceWorkerCacheAgent error while requesting entries: ",n.getError()):i(n.cacheDataEntries,n.returnCount)}async requestAllEntries(e,t,s){const r=await this.cacheAgent.invoke_requestEntries({cacheId:e.cacheId,pathFilter:t});r.getError()?console.error("ServiceWorkerCacheAgent error while requesting entries: ",r.getError()):s(r.cacheDataEntries,r.returnCount)}cacheStorageListUpdated({bucketId:e}){const t=this.#dh.getBucketById(e)?.bucket;t&&(this.#gh.add(t),this.#mh.schedule(()=>{const e=Array.from(this.#gh,e=>this.loadCacheNames(e));return this.#gh.clear(),Promise.all(e)},this.#ph?"AsSoonAsPossible":"Default"))}cacheStorageContentUpdated({bucketId:e,cacheName:t}){const s=this.#dh.getBucketById(e)?.bucket;s&&this.dispatchEventToListeners("CacheStorageContentUpdated",{storageBucket:s,cacheName:t})}attributionReportingTriggerRegistered(e){}indexedDBListUpdated(e){}indexedDBContentUpdated(e){}interestGroupAuctionEventOccurred(e){}interestGroupAccessed(e){}interestGroupAuctionNetworkRequestCreated(e){}sharedStorageAccessed(e){}storageBucketCreatedOrUpdated(e){}storageBucketDeleted(e){}setThrottlerSchedulesAsSoonAsPossibleForTest(){this.#ph=!0}attributionReportingSourceRegistered(e){}}class bl{#oi;storageKey;storageBucket;cacheName;cacheId;constructor(e,t,s,r){this.#oi=e,this.storageBucket=t,this.storageKey=t.storageKey,this.cacheName=s,this.cacheId=r}inBucket(e){return this.storageKey===e.storageKey&&this.storageBucket.name===e.name}equals(e){return this.cacheId===e.cacheId}toString(){return this.storageKey+this.cacheName}async requestCachedResponse(e,t){const s=await this.#oi.cacheAgent.invoke_requestCachedResponse({cacheId:this.cacheId,requestURL:e,requestHeaders:t});return s.getError()?null:s.response}}h.register(fl,{capabilities:8192,autostart:!1});var yl=Object.freeze({__proto__:null,Cache:bl,ServiceWorkerCacheModel:fl});const vl={running:"running",starting:"starting",stopped:"stopped",stopping:"stopping",activated:"activated",activating:"activating",installed:"installed",installing:"installing",new:"new",redundant:"redundant",sSS:"{PH1} #{PH2} ({PH3})"},Il=n.i18n.registerUIStrings("core/sdk/ServiceWorkerManager.ts",vl),wl=n.i18n.getLocalizedString.bind(void 0,Il),Sl=n.i18n.getLazilyComputedLocalizedString.bind(void 0,Il);class kl extends h{#Vi;#fh=new Map;#fr=!1;#bh;serviceWorkerNetworkRequestsPanelStatus={isOpen:!1,openedAt:0};constructor(t){super(t),t.registerServiceWorkerDispatcher(new Cl(this)),this.#Vi=t.serviceWorkerAgent(),this.enable(),this.#bh=e.Settings.Settings.instance().createSetting("service-worker-update-on-reload",!1),this.#bh.get()&&this.forceUpdateSettingChanged(),this.#bh.addChangeListener(this.forceUpdateSettingChanged,this),new Pl(t,this)}async enable(){this.#fr||(this.#fr=!0,await this.#Vi.invoke_enable())}async disable(){this.#fr&&(this.#fr=!1,this.#fh.clear(),await this.#Vi.invoke_enable())}registrations(){return this.#fh}findVersion(e){for(const t of this.registrations().values()){const s=t.versions.get(e);if(s)return s}return null}deleteRegistration(e){const t=this.#fh.get(e);if(t){if(t.isRedundant())return this.#fh.delete(e),void this.dispatchEventToListeners("RegistrationDeleted",t);t.deleting=!0;for(const e of t.versions.values())this.stopWorker(e.id);this.unregister(t.scopeURL)}}async updateRegistration(e){const t=this.#fh.get(e);t&&await this.#Vi.invoke_updateRegistration({scopeURL:t.scopeURL})}async deliverPushMessage(t,s){const r=this.#fh.get(t);if(!r)return;const i=e.ParsedURL.ParsedURL.extractOrigin(r.scopeURL);await this.#Vi.invoke_deliverPushMessage({origin:i,registrationId:t,data:s})}async dispatchSyncEvent(t,s,r){const i=this.#fh.get(t);if(!i)return;const n=e.ParsedURL.ParsedURL.extractOrigin(i.scopeURL);await this.#Vi.invoke_dispatchSyncEvent({origin:n,registrationId:t,tag:s,lastChance:r})}async dispatchPeriodicSyncEvent(t,s){const r=this.#fh.get(t);if(!r)return;const i=e.ParsedURL.ParsedURL.extractOrigin(r.scopeURL);await this.#Vi.invoke_dispatchPeriodicSyncEvent({origin:i,registrationId:t,tag:s})}async unregister(e){await this.#Vi.invoke_unregister({scopeURL:e})}async startWorker(e){await this.#Vi.invoke_startWorker({scopeURL:e})}async skipWaiting(e){await this.#Vi.invoke_skipWaiting({scopeURL:e})}async stopWorker(e){await this.#Vi.invoke_stopWorker({versionId:e})}async inspectWorker(e){await this.#Vi.invoke_inspectWorker({versionId:e})}workerRegistrationUpdated(e){for(const t of e){let e=this.#fh.get(t.registrationId);e?(e.update(t),e.shouldBeRemoved()?(this.#fh.delete(e.id),this.dispatchEventToListeners("RegistrationDeleted",e)):this.dispatchEventToListeners("RegistrationUpdated",e)):(e=new Ml(t),this.#fh.set(t.registrationId,e),this.dispatchEventToListeners("RegistrationUpdated",e))}}workerVersionUpdated(e){const t=new Set;for(const s of e){const e=this.#fh.get(s.registrationId);e&&(e.updateVersion(s),t.add(e))}for(const e of t)e.shouldBeRemoved()?(this.#fh.delete(e.id),this.dispatchEventToListeners("RegistrationDeleted",e)):this.dispatchEventToListeners("RegistrationUpdated",e)}workerErrorReported(e){const t=this.#fh.get(e.registrationId);t&&(t.errors.push(e),this.dispatchEventToListeners("RegistrationErrorAdded",{registration:t,error:e}))}forceUpdateSettingChanged(){const e=this.#bh.get();this.#Vi.invoke_setForceUpdateOnPageLoad({forceUpdateOnPageLoad:e})}}class Cl{#z;constructor(e){this.#z=e}workerRegistrationUpdated({registrations:e}){this.#z.workerRegistrationUpdated(e)}workerVersionUpdated({versions:e}){this.#z.workerVersionUpdated(e)}workerErrorReported({errorMessage:e}){this.#z.workerErrorReported(e)}}class xl{runningStatus;status;lastUpdatedTimestamp;previousState;constructor(e,t,s,r){this.runningStatus=e,this.status=t,this.lastUpdatedTimestamp=r,this.previousState=s}}class Rl{condition;source;id;constructor(e,t,s){this.condition=e,this.source=t,this.id=s}}class Tl{id;scriptURL;parsedURL;securityOrigin;scriptLastModified;scriptResponseTime;controlledClients;targetId;routerRules;currentState;registration;constructor(e,t){this.registration=e,this.update(t)}update(t){this.id=t.versionId,this.scriptURL=t.scriptURL;const s=new e.ParsedURL.ParsedURL(t.scriptURL);this.securityOrigin=s.securityOrigin(),this.currentState=new xl(t.runningStatus,t.status,this.currentState,Date.now()),this.scriptLastModified=t.scriptLastModified,this.scriptResponseTime=t.scriptResponseTime,t.controlledClients?this.controlledClients=t.controlledClients.slice():this.controlledClients=[],this.targetId=t.targetId||null,this.routerRules=null,t.routerRules&&(this.routerRules=this.parseJSONRules(t.routerRules))}isStartable(){return!this.registration.isDeleted&&this.isActivated()&&this.isStopped()}isStoppedAndRedundant(){return"stopped"===this.runningStatus&&"redundant"===this.status}isStopped(){return"stopped"===this.runningStatus}isStarting(){return"starting"===this.runningStatus}isRunning(){return"running"===this.runningStatus}isStopping(){return"stopping"===this.runningStatus}isNew(){return"new"===this.status}isInstalling(){return"installing"===this.status}isInstalled(){return"installed"===this.status}isActivating(){return"activating"===this.status}isActivated(){return"activated"===this.status}isRedundant(){return"redundant"===this.status}get status(){return this.currentState.status}get runningStatus(){return this.currentState.runningStatus}mode(){return this.isNew()||this.isInstalling()?"installing":this.isInstalled()?"waiting":this.isActivating()||this.isActivated()?"active":"redundant"}parseJSONRules(e){try{const t=JSON.parse(e);if(!Array.isArray(t))return console.error("Parse error: `routerRules` in ServiceWorkerVersion should be an array"),null;const s=[];for(const e of t){const{condition:t,source:r,id:i}=e;if(void 0===t||void 0===r||void 0===i)return console.error("Parse error: Missing some fields of `routerRules` in ServiceWorkerVersion"),null;s.push(new Rl(JSON.stringify(t),JSON.stringify(r),i))}return s}catch{return console.error("Parse error: Invalid `routerRules` in ServiceWorkerVersion"),null}}}!function(e){e.RunningStatus={running:Sl(vl.running),starting:Sl(vl.starting),stopped:Sl(vl.stopped),stopping:Sl(vl.stopping)},e.Status={activated:Sl(vl.activated),activating:Sl(vl.activating),installed:Sl(vl.installed),installing:Sl(vl.installing),new:Sl(vl.new),redundant:Sl(vl.redundant)}}(Tl||(Tl={}));class Ml{#yh;id;scopeURL;securityOrigin;isDeleted;versions=new Map;deleting=!1;errors=[];constructor(e){this.update(e)}update(t){this.#yh=Symbol("fingerprint"),this.id=t.registrationId,this.scopeURL=t.scopeURL;const s=new e.ParsedURL.ParsedURL(t.scopeURL);this.securityOrigin=s.securityOrigin(),this.isDeleted=t.isDeleted}fingerprint(){return this.#yh}versionsByMode(){const e=new Map;for(const t of this.versions.values())e.set(t.mode(),t);return e}updateVersion(e){this.#yh=Symbol("fingerprint");let t=this.versions.get(e.versionId);return t?(t.update(e),t):(t=new Tl(this,e),this.versions.set(e.versionId,t),t)}isRedundant(){for(const e of this.versions.values())if(!e.isStoppedAndRedundant())return!1;return!0}shouldBeRemoved(){return this.isRedundant()&&(!this.errors.length||this.deleting)}canBeRemoved(){return this.isDeleted||this.deleting}}class Pl{#Ks;#wh;#vh=new Map;constructor(e,t){this.#Ks=e,this.#wh=t,t.addEventListener("RegistrationUpdated",this.registrationsUpdated,this),t.addEventListener("RegistrationDeleted",this.registrationsUpdated,this),W.instance().addModelListener(Jr,$r.ExecutionContextCreated,this.executionContextCreated,this)}registrationsUpdated(){this.#vh.clear();const e=this.#wh.registrations().values();for(const t of e)for(const e of t.versions.values())e.targetId&&this.#vh.set(e.targetId,e);this.updateAllContextLabels()}executionContextCreated(e){const t=e.data,s=this.serviceWorkerTargetId(t.target());s&&this.updateContextLabel(t,this.#vh.get(s)||null)}serviceWorkerTargetId(e){return e.parentTarget()!==this.#Ks||e.type()!==U.ServiceWorker?null:e.id()}updateAllContextLabels(){for(const e of W.instance().targets()){const t=this.serviceWorkerTargetId(e);if(!t)continue;const s=this.#vh.get(t)||null,r=e.model(Jr),i=r?r.executionContexts():[];for(const e of i)this.updateContextLabel(e,s)}}updateContextLabel(t,s){if(!s)return void t.setLabel("");const r=e.ParsedURL.ParsedURL.fromString(t.origin),i=r?r.lastPathComponentWithFragment():t.name,n=Tl.Status[s.status];t.setLabel(wl(vl.sSS,{PH1:i,PH2:s.id,PH3:n()}))}}h.register(kl,{capabilities:16384,autostart:!0});var El=Object.freeze({__proto__:null,ServiceWorkerManager:kl,ServiceWorkerRegistration:Ml,ServiceWorkerRouterRule:Rl,get ServiceWorkerVersion(){return Tl},ServiceWorkerVersionState:xl});class Ll extends h{#Vi;constructor(e){super(e),this.#Vi=e.webAuthnAgent(),e.registerWebAuthnDispatcher(new Al(this))}setVirtualAuthEnvEnabled(e){return e?this.#Vi.invoke_enable({enableUI:!0}):this.#Vi.invoke_disable()}async addAuthenticator(e){return(await this.#Vi.invoke_addVirtualAuthenticator({options:e})).authenticatorId}async removeAuthenticator(e){await this.#Vi.invoke_removeVirtualAuthenticator({authenticatorId:e})}async setAutomaticPresenceSimulation(e,t){await this.#Vi.invoke_setAutomaticPresenceSimulation({authenticatorId:e,enabled:t})}async getCredentials(e){return(await this.#Vi.invoke_getCredentials({authenticatorId:e})).credentials}async removeCredential(e,t){await this.#Vi.invoke_removeCredential({authenticatorId:e,credentialId:t})}credentialAdded(e){this.dispatchEventToListeners("CredentialAdded",e)}credentialAsserted(e){this.dispatchEventToListeners("CredentialAsserted",e)}credentialDeleted(e){this.dispatchEventToListeners("CredentialDeleted",e)}credentialUpdated(e){this.dispatchEventToListeners("CredentialUpdated",e)}}class Al{#oi;constructor(e){this.#oi=e}credentialAdded(e){this.#oi.credentialAdded(e)}credentialAsserted(e){this.#oi.credentialAsserted(e)}credentialDeleted(e){this.#oi.credentialDeleted(e)}credentialUpdated(e){this.#oi.credentialUpdated(e)}}h.register(Ll,{capabilities:65536,autostart:!1});var Ol=Object.freeze({__proto__:null,WebAuthnModel:Ll});export{Fi as AccessibilityModel,eo as AnimationModel,no as AutofillModel,Uo as CPUProfilerModel,ya as CPUThrottlingManager,Vt as CSSContainerQuery,me as CSSFontFace,Gt as CSSLayer,Mn as CSSMatchedStyles,Xt as CSSMedia,B as CSSMetadata,Gr as CSSModel,Bt as CSSProperty,Nt as CSSPropertyParser,ht as CSSPropertyParserMatchers,Ht as CSSQuery,pn as CSSRule,Zt as CSSScope,tn as CSSStyleDeclaration,On as CSSStyleSheetHeader,rn as CSSSupports,so as CategorizedBreakpoint,Eo as ChildTargetManager,No as CompilerSourceMappingContentProvider,xo as Connections,Jo as ConsoleModel,q as Cookie,ci as CookieModel,gi as CookieParser,Ta as DOMDebuggerModel,Xs as DOMModel,Ts as DebuggerModel,ta as EmulationModel,oo as EnhancedTracesParser,Aa as EventBreakpointsModel,Oa as FrameAssociated,Fn as FrameManager,Xr as HeapProfilerModel,Xn as IOModel,Ua as IsolateManager,za as IssuesModel,ja as LayerTreeBase,zo as LogModel,ge as NetworkManager,Oi as NetworkRequest,Ps as OverlayColorGenerator,qs as OverlayModel,Ls as OverlayPersistentHighlighter,Ga as PageLoad,sr as PageResourceLoader,Xa as PaintProfiler,Ya as PerformanceMetricsModel,dl as PreloadingModel,cl as ReactNativeApplicationModel,Qn as RemoteObject,Zs as Resource,li as ResourceTreeModel,es as RuntimeModel,u as SDKModel,_i as ScreenCaptureModel,ds as Script,ti as SecurityOriginManager,fi as ServerSentEventProtocol,Si as ServerTiming,yl as ServiceWorkerCacheModel,El as ServiceWorkerManager,Ar as SourceMap,br as SourceMapFunctionRanges,Fr as SourceMapManager,kr as SourceMapScopeChainEntry,gr as SourceMapScopes,Rr as SourceMapScopesInfo,ul as StorageBucketsModel,si as StorageKeyManager,j as Target,G as TargetManager,co as TraceObject,Ol as WebAuthnModel};