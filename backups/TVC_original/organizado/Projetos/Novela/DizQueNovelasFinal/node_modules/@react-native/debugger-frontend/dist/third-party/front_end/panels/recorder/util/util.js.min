import*as t from"../../../core/common/common.js";var e=Object.freeze({__proto__:null,SharedObject:class{#t=new t.Mutex.Mutex;#e=0;#a;#s;#i;constructor(t,e){this.#s=t,this.#i=e}async acquire(){return await this.#t.run(async()=>{0===this.#e&&(this.#a=await this.#s()),++this.#e}),[this.#a,this.#r.bind(this,{released:!1})]}async run(t){const[e,a]=await this.acquire();try{return await t(e)}finally{await a()}}async#r(t){if(t.released)throw new Error("Attempted to release object multiple times.");try{t.released=!0,await this.#t.run(async()=>{1===this.#e&&(await this.#i(this.#a),this.#a=void 0),--this.#e})}catch(e){throw t.released=!1,e}}}});const r=!1,a="devtools_recorder";class i{static#c;static async get(){return this.#c||(this.#c=(await fetch(new URL("../injected/injected.generated.js",import.meta.url))).text()),await this.#c}}export{a as DEVTOOLS_RECORDER_WORLD_NAME,i as InjectedScript,e as SharedObject,r as isDebugBuild};