"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformProgram=transformProgram;var _SimpleTransform=require("../transform/SimpleTransform");const nodeWith=_SimpleTransform.SimpleTransform.nodeWith;function transformProgram(e,r){return _SimpleTransform.SimpleTransform.transformProgram(e,{transform(e){switch(e.type){case"AsExpression":case"AsConstExpression":case"TypeCastExpression":return e.expression;case"CallExpression":case"NewExpression":return null!=e.typeArguments?nodeWith(e,{typeArguments:null}):e;case"ObjectPattern":case"ArrayPattern":case"Identifier":return null!=e.typeAnnotation?nodeWith(e,{typeAnnotation:null}):e;case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareNamespace":case"DeclareOpaqueType":case"DeclareTypeAlias":case"DeclareVariable":case"InterfaceDeclaration":case"OpaqueType":case"TypeAlias":return null;case"FunctionDeclaration":case"ArrowFunctionExpression":case"FunctionExpression":{const r=[];for(let t=0;t<e.params.length;t++){if(0===t&&"Identifier"===e.params[0].type&&"this"===e.params[0].name)continue;let n=e.params[t];"AssignmentPattern"===n.type&&(n=n.left),!0===n.optional&&(n=nodeWith(n,{optional:!1})),r.push(n)}return nodeWith(e,{params:r,returnType:null,typeParameters:null,predicate:null})}case"ClassDeclaration":case"ClassExpression":return nodeWith(e,{typeParameters:null,superTypeParameters:null,implements:[],decorators:[]});case"PropertyDefinition":return nodeWith(e,{typeAnnotation:null,variance:null,declare:!1,optional:!1});case"ImportDeclaration":{if("type"===e.importKind||"typeof"===e.importKind)return null;const r=e.specifiers.filter(e=>"ImportSpecifier"!==e.type||"type"!==e.importKind&&"typeof"!==e.importKind);return 0===r.length?null:r.length===e.specifiers.length?e:nodeWith(e,{specifiers:r})}case"ExportAllDeclaration":case"ExportNamedDeclaration":return"type"===e.exportKind?null:e;default:return e}}})}