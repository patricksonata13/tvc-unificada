"use strict";const{EventEmitterImplementationTemplate:EventEmitterImplementationTemplate}=require("./../serializeEventEmitter"),ModuleTemplate=({hasteModuleName:e,structs:t,moduleName:a,eventEmitters:n,methodSerializationOutputs:o})=>`\n@implementation ${e}SpecBase\n${n.map(e=>EventEmitterImplementationTemplate(e)).join("\n")}\n\n- (void)setEventEmitterCallback:(EventEmitterCallbackWrapper *)eventEmitterCallbackWrapper\n{\n  _eventEmitterCallback = std::move(eventEmitterCallbackWrapper->_eventEmitterCallback);\n}\n@end\n\n${t.map(t=>RCTCxxConvertCategoryTemplate({hasteModuleName:e,structName:t.name})).join("\n")}\nnamespace facebook::react {\n  ${o.map(t=>InlineHostFunctionTemplate({hasteModuleName:e,methodName:t.methodName,returnJSType:t.returnJSType,selector:t.selector})).join("\n")}\n\n  ${e}SpecJSI::${e}SpecJSI(const ObjCTurboModule::InitParams &params)\n    : ObjCTurboModule(params) {\n      ${o.map(({methodName:t,structParamRecords:a,argCount:n})=>MethodMapEntryTemplate({hasteModuleName:e,methodName:t,structParamRecords:a,argCount:n})).join("\n"+" ".repeat(8))}${n.length>0?n.map(e=>`\n        eventEmitterMap_["${e.name}"] = std::make_shared<AsyncEventEmitter<id>>();`).join(""):""}${n.length>0?"\n        setEventEmitterCallback([&](const std::string &name, id value) {\n          static_cast<AsyncEventEmitter<id> &>(*eventEmitterMap_[name]).emit(value);\n        });":""}\n  }\n} // namespace facebook::react`,RCTCxxConvertCategoryTemplate=({hasteModuleName:e,structName:t})=>`@implementation RCTCxxConvert (${e}_${t})\n+ (RCTManagedPointer *)JS_${e}_${t}:(id)json\n{\n  return facebook::react::managedPointer<JS::${e}::${t}>(json);\n}\n@end`,InlineHostFunctionTemplate=({hasteModuleName:e,methodName:t,returnJSType:a,selector:n})=>`\n    static facebook::jsi::Value __hostFunction_${e}SpecJSI_${t}(facebook::jsi::Runtime& rt, TurboModule &turboModule, const facebook::jsi::Value* args, size_t count) {\n      return static_cast<ObjCTurboModule&>(turboModule).invokeObjCMethod(rt, ${a}, "${t}", ${n}, args, count);\n    }`,MethodMapEntryTemplate=({hasteModuleName:e,methodName:t,structParamRecords:a,argCount:n})=>`\n        methodMap_["${t}"] = MethodMetadata {${n}, __hostFunction_${e}SpecJSI_${t}};\n        ${a.map(({paramIndex:a,structName:n})=>`setMethodArgConversionSelector(@"${t}", ${a}, @"JS_${e}_${n}:");`).join("\n"+" ".repeat(8))}`;function serializeModuleSource(e,t,a,n,o){return ModuleTemplate({hasteModuleName:e,structs:t.filter(({context:e})=>"CONSTANTS"!==e),moduleName:a,eventEmitters:n,methodSerializationOutputs:o})}module.exports={serializeModuleSource:serializeModuleSource};