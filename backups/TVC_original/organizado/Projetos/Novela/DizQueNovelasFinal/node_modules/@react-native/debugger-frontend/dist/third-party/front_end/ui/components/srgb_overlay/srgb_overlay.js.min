import*as e from"../../../core/common/common.js";import*as t from"../render_coordinator/render_coordinator.js";import{render as o,html as r}from"../../lit/lit.js";var s={cssText:`:host{position:absolute;left:0;top:0;width:100%;height:100%}.gamut-line{stroke:color-mix(in srgb,var(--ref-palette-neutral100) 50%,transparent);fill:none}.label{position:absolute;bottom:3px;margin-right:5px;color:color-mix(in srgb,var(--ref-palette-neutral100) 50%,transparent)}\n/*# sourceURL=${import.meta.resolve("./srgbOverlay.css")} */\n`};const n=new CSSStyleSheet;function i(t){const r=e.Color.hsva2rgba([...t,1]),o=e.ColorConverter.ColorConverter.displayP3ToXyzd50(r[0],r[1],r[2]);return e.ColorConverter.ColorConverter.xyzd50ToSrgb(o[0],o[1],o[2]).every(e=>e+.001>=0&&e-.001<=1)}n.replaceSync(s.cssText);class l extends HTMLElement{#e=this.attachShadow({mode:"open"});constructor(){super(),this.#e.adoptedStyleSheets=[n]}#t({hue:e,width:t,height:r}){if(0===t||0===r)return null;const o=1/window.devicePixelRatio,s=[];let n=0;for(let l=0;l<r;l+=o){const a=1-l/r;for(;n<t;n+=o)if(!i([e,n/t,a])){s.push({x:n,y:l});break}}if(0===s.length)return null;const l=s[s.length-1];return l.x<t&&s.push({y:l.y,x:t}),s}#r(e,t){let r=1/0,o=null;for(const s of e)Math.abs(t-s.y)<=r&&(r=Math.abs(t-s.y),o=s);return o}render({hue:e,width:s,height:n}){return t.write("Srgb Overlay render",()=>{const t=this.#t({hue:e,width:s,height:n});if(!t||0===t.length)return;const l=this.#r(t,n-13);l&&o(r`
          <span class="label" style="right: ${s-l.x}px">sRGB</span>
          <svg>
            <polyline points=${t.map(e=>`${e.x.toFixed(2)},${e.y.toFixed(2)}`).join(" ")} class="gamut-line" />
          </svg>
        `,this.#e,{host:this})})}}customElements.define("devtools-spectrum-srgb-overlay",l);var a=Object.freeze({__proto__:null,SrgbOverlay:l});export{a as SrgbOverlay};