"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={parse:!0,mutateESTreeASTForPrettier:!0,Transforms:!0,FlowVisitorKeys:!0,astArrayMutationHelpers:!0,astNodeMutationHelpers:!0};exports.mutateESTreeASTForPrettier=exports.astNodeMutationHelpers=exports.astArrayMutationHelpers=exports.Transforms=void 0,exports.parse=parse;var HermesParser=_interopRequireWildcard(require("./HermesParser")),_HermesToESTreeAdapter=_interopRequireDefault(require("./HermesToESTreeAdapter")),_ESTreeVisitorKeys=_interopRequireDefault(require("./generated/ESTreeVisitorKeys"));exports.FlowVisitorKeys=_ESTreeVisitorKeys.default;var StripComponentSyntax=_interopRequireWildcard(require("./estree/StripComponentSyntax")),TransformMatchSyntax=_interopRequireWildcard(require("./estree/TransformMatchSyntax")),StripFlowTypesForBabel=_interopRequireWildcard(require("./estree/StripFlowTypesForBabel")),TransformESTreeToBabel=_interopRequireWildcard(require("./babel/TransformESTreeToBabel")),StripFlowTypes=_interopRequireWildcard(require("./estree/StripFlowTypes")),_ParserOptions=require("./ParserOptions");Object.keys(_ParserOptions).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(_exportNames,e)||e in exports&&exports[e]===_ParserOptions[e]||(exports[e]=_ParserOptions[e]))});var _SimpleTraverser=require("./traverse/SimpleTraverser");Object.keys(_SimpleTraverser).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(_exportNames,e)||e in exports&&exports[e]===_SimpleTraverser[e]||(exports[e]=_SimpleTraverser[e]))});var _SimpleTransform=require("./transform/SimpleTransform");Object.keys(_SimpleTransform).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(_exportNames,e)||e in exports&&exports[e]===_SimpleTransform[e]||(exports[e]=_SimpleTransform[e]))});var _getVisitorKeys=require("./traverse/getVisitorKeys");Object.keys(_getVisitorKeys).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(_exportNames,e)||e in exports&&exports[e]===_getVisitorKeys[e]||(exports[e]=_getVisitorKeys[e]))});var _astArrayMutationHelpers=_interopRequireWildcard(require("./transform/astArrayMutationHelpers"));exports.astArrayMutationHelpers=_astArrayMutationHelpers;var _astNodeMutationHelpers=_interopRequireWildcard(require("./transform/astNodeMutationHelpers"));exports.astNodeMutationHelpers=_astNodeMutationHelpers;var _mutateESTreeASTForPrettier=_interopRequireDefault(require("./utils/mutateESTreeASTForPrettier"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=a?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}exports.mutateESTreeASTForPrettier=_mutateESTreeASTForPrettier.default;const DEFAULTS={flow:"detect"};function getOptions(e={...DEFAULTS}){if(null==e.flow)e.flow=DEFAULTS.flow;else if("all"!==e.flow&&"detect"!==e.flow)throw new Error('flow option must be "all" or "detect"');if("unambiguous"===e.sourceType)delete e.sourceType;else if(null!=e.sourceType&&"script"!==e.sourceType&&"module"!==e.sourceType)throw new Error('sourceType option must be "script", "module", or "unambiguous" if set');return null==e.enableExperimentalComponentSyntax&&(e.enableExperimentalComponentSyntax=!0),null==e.enableExperimentalFlowMatchSyntax&&(e.enableExperimentalFlowMatchSyntax=!0),e.tokens=!0===e.tokens,e.allowReturnOutsideFunction=!0===e.allowReturnOutsideFunction,e}function parse(e,r){const t=getOptions(r),o=HermesParser.parse(e,t),a=new _HermesToESTreeAdapter.default(t,e).transform(o);if(!0!==t.babel)return a;const s=[TransformMatchSyntax.transformProgram,StripComponentSyntax.transformProgram,StripFlowTypesForBabel.transformProgram].reduce((e,r)=>r(e,t),a);return TransformESTreeToBabel.transformProgram(s,t)}const Transforms={transformMatchSyntax:TransformMatchSyntax.transformProgram,stripComponentSyntax:StripComponentSyntax.transformProgram,stripFlowTypesForBabel:StripFlowTypesForBabel.transformProgram,stripFlowTypes:StripFlowTypes.transformProgram};exports.Transforms=Transforms;