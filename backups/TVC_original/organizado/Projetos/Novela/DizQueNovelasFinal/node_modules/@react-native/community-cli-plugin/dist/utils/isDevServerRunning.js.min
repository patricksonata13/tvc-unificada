"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isDevServerRunning;var _net=_interopRequireDefault(require("net"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}async function isDevServerRunning(e,t){const{hostname:n,port:r}=new URL(e);try{if(!await isPortOccupied(n,r))return"not_running";const o=await fetch(`${e}/status`);return"packager-status:running"===await o.text()&&o.headers.get("X-React-Native-Project-Root")===t?"matched_server_running":"port_taken"}catch(e){return"unknown"}}async function isPortOccupied(e,t){let n=!1;const r=_net.default.createServer();return new Promise((o,i)=>{r.once("error",e=>{r.close(),"EADDRINUSE"===e.code?n=!0:i(e)}),r.once("listening",()=>{n=!1,r.close()}),r.once("close",()=>{o(n)}),r.listen({host:e,port:t})})}