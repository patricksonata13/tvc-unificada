"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _perf_hooks=require("perf_hooks"),_timers=require("timers");class EventLoopPerfTracker{#e;#o;#t;#r;constructor(e){this.#e=e.perfMeasurementDuration,this.#o=e.minDelayPercentToReport,this.#t=e.onHighDelay,this.#r=!1}trackPerfThrottled(e,o){if(this.#r)return;this.#r=!0;const t=_perf_hooks.performance.eventLoopUtilization(),r=(0,_perf_hooks.monitorEventLoopDelay)({resolution:20});r.enable(),(0,_timers.setTimeout)(()=>{const n=_perf_hooks.performance.eventLoopUtilization(t);r.disable();const i=Math.floor(100*n.utilization),s=Math.floor(r.max/1e6/this.#e*100);s>=this.#o&&this.#t({eventLoopUtilization:i,maxEventLoopDelayPercent:s,duration:this.#e,debuggerSessionIDs:e,connectionUptime:o}),this.#r=!1},this.#e).unref()}}exports.default=EventLoopPerfTracker;