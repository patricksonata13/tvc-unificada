"use strict";function getOrdinalNumber(n){switch(n){case 1:return"1st";case 2:return"2nd";case 3:return"3rd"}return n<=20?`${n}th`:"unknown"}const ProtocolTemplate=({componentName:n,methods:e})=>`\n@protocol RCT${n}ViewProtocol <NSObject>\n${e}\n@end\n`.trim(),CommandHandlerIfCaseConvertArgTemplate=({componentName:n,expectedKind:e,argNumber:t,argNumberString:a,expectedKindString:o,argConversion:r})=>`\n  NSObject *arg${t} = args[${t}];\n#if RCT_DEBUG\n  if (!RCTValidateTypeOfViewCommandArgument(arg${t}, ${e}, @"${o}", @"${n}", commandName, @"${a}")) {\n    return;\n  }\n#endif\n  ${r}\n`.trim(),CommandHandlerIfCaseTemplate=({componentName:n,commandName:e,numArgs:t,convertArgs:a,commandCall:o})=>`\nif ([commandName isEqualToString:@"${e}"]) {\n#if RCT_DEBUG\n  if ([args count] != ${t}) {\n    RCTLogError(@"%@ command %@ received %d arguments, expected %d.", @"${n}", commandName, (int)[args count], ${t});\n    return;\n  }\n#endif\n\n  ${a}\n\n  ${o}\n  return;\n}\n`.trim(),CommandHandlerTemplate=({componentName:n,ifCases:e})=>`\nRCT_EXTERN inline void RCT${n}HandleCommand(\n  id<RCT${n}ViewProtocol> componentView,\n  NSString const *commandName,\n  NSArray const *args)\n{\n  ${e}\n\n#if RCT_DEBUG\n  RCTLogError(@"%@ received command %@, which is not a supported command.", @"${n}", commandName);\n#endif\n}\n`.trim(),FileTemplate=({componentContent:n})=>`\n/**\n* This code was generated by [react-native-codegen](https://www.npmjs.com/package/react-native-codegen).\n*\n* Do not edit this file as changes may cause incorrect behavior and will be lost\n* once the code is regenerated.\n*\n* @generated by codegen project: GenerateComponentHObjCpp.js\n*/\n\n#import <Foundation/Foundation.h>\n#import <React/RCTDefines.h>\n#import <React/RCTLog.h>\n\nNS_ASSUME_NONNULL_BEGIN\n\n${n}\n\nNS_ASSUME_NONNULL_END\n`.trim();function getObjCParamType(n){const{typeAnnotation:e}=n;switch(e.type){case"ReservedTypeAnnotation":if("RootTag"===e.name)return"double";throw e.name,new Error(`Receieved invalid type: ${e.name}`);case"BooleanTypeAnnotation":return"BOOL";case"DoubleTypeAnnotation":return"double";case"FloatTypeAnnotation":return"float";case"Int32TypeAnnotation":return"NSInteger";case"StringTypeAnnotation":return"NSString *";case"ArrayTypeAnnotation":return"const NSArray *";default:throw e.type,new Error("Received invalid param type annotation")}}function getObjCExpectedKindParamType(n){const{typeAnnotation:e}=n;switch(e.type){case"ReservedTypeAnnotation":if("RootTag"===e.name)return"[NSNumber class]";throw e.name,new Error(`Receieved invalid type: ${e.name}`);case"BooleanTypeAnnotation":case"DoubleTypeAnnotation":case"FloatTypeAnnotation":case"Int32TypeAnnotation":return"[NSNumber class]";case"StringTypeAnnotation":return"[NSString class]";case"ArrayTypeAnnotation":return"[NSArray class]";default:throw e.type,new Error("Received invalid param type annotation")}}function getReadableExpectedKindParamType(n){const{typeAnnotation:e}=n;switch(e.type){case"ReservedTypeAnnotation":if("RootTag"===e.name)return"double";throw e.name,new Error(`Receieved invalid type: ${e.name}`);case"BooleanTypeAnnotation":return"boolean";case"DoubleTypeAnnotation":return"double";case"FloatTypeAnnotation":return"float";case"Int32TypeAnnotation":return"number";case"StringTypeAnnotation":return"string";case"ArrayTypeAnnotation":return"array";default:throw e.type,new Error("Received invalid param type annotation")}}function getObjCRightHandAssignmentParamType(n,e){const{typeAnnotation:t}=n;switch(t.type){case"ReservedTypeAnnotation":if("RootTag"===t.name)return`[(NSNumber *)arg${e} doubleValue]`;throw t.name,new Error(`Receieved invalid type: ${t.name}`);case"BooleanTypeAnnotation":return`[(NSNumber *)arg${e} boolValue]`;case"DoubleTypeAnnotation":return`[(NSNumber *)arg${e} doubleValue]`;case"FloatTypeAnnotation":return`[(NSNumber *)arg${e} floatValue]`;case"Int32TypeAnnotation":return`[(NSNumber *)arg${e} intValue]`;case"StringTypeAnnotation":return`(NSString *)arg${e}`;case"ArrayTypeAnnotation":return`(NSArray *)arg${e}`;default:throw t.type,new Error("Received invalid param type annotation")}}function generateProtocol(n,e){const t=n.commands.map(n=>{const e=n.typeAnnotation.params,t=0===e.length?"":e.map((n,e)=>{const t=getObjCParamType(n);return`${0===e?"":n.name}:(${t})${n.name}`}).join(" ");return`- (void)${n.name}${t};`}).join("\n").trim();return ProtocolTemplate({componentName:e,methods:t})}function generateConvertAndValidateParam(n,e,t){const a=getObjCParamType(n),o=getObjCExpectedKindParamType(n),r=getReadableExpectedKindParamType(n),i=`${a} ${n.name} = ${getObjCRightHandAssignmentParamType(n,e)};`;return CommandHandlerIfCaseConvertArgTemplate({componentName:t,argConversion:i,argNumber:e,argNumberString:getOrdinalNumber(e+1),expectedKind:o,expectedKindString:r})}function generateCommandIfCase(n,e){const t=n.typeAnnotation.params,a=t.map((n,t)=>generateConvertAndValidateParam(n,t,e)).join("\n\n").trim(),o=0===t.length?"":t.map((n,e)=>`${0===e?"":n.name}:${n.name}`).join(" "),r=`[componentView ${n.name}${o}];`;return CommandHandlerIfCaseTemplate({componentName:e,commandName:n.name,numArgs:t.length,convertArgs:a,commandCall:r})}function generateCommandHandler(n,e){if(0===n.commands.length)return null;const t=n.commands.map(n=>generateCommandIfCase(n,e)).join("\n\n");return CommandHandlerTemplate({componentName:e,ifCases:t})}module.exports={generate(n,e,t,a=!1,o){const r=Object.keys(e.modules).map(n=>{const t=e.modules[n];if("Component"!==t.type)return;const{components:a}=t;return null==a?null:Object.keys(a).filter(n=>{const e=a[n];return!(e.excludedPlatforms&&e.excludedPlatforms.includes("iOS"))}).map(n=>[generateProtocol(a[n],n),generateCommandHandler(a[n],n)].join("\n\n").trim()).join("\n\n")}).filter(Boolean).join("\n\n"),i=FileTemplate({componentContent:r});return new Map([["RCTComponentViewHelpers.h",i]])}};