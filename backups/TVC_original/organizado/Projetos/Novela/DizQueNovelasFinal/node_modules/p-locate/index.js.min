"use strict";const pLimit=require("p-limit");class EndError extends Error{constructor(r){super(),this.value=r}}const testElement=async(r,e)=>e(await r),finder=async r=>{const e=await Promise.all(r);if(!0===e[1])throw new EndError(e[0]);return!1},pLocate=async(r,e,t)=>{t={concurrency:1/0,preserveOrder:!0,...t};const n=pLimit(t.concurrency),o=[...r].map(r=>[r,n(testElement,r,e)]),s=pLimit(t.preserveOrder?1:1/0);try{await Promise.all(o.map(r=>s(finder,r)))}catch(r){if(r instanceof EndError)return r.value;throw r}};module.exports=pLocate,module.exports.default=pLocate;