"use strict";import{logger}from"../common";import{defineAnimation,getReduceMotionForAnimation}from"./util";export function withSequence(n,...t){let e;return n&&("string"==typeof n?e=n:t.unshift(n)),0===t.length?(logger.warn("No animation was provided for the sequence"),defineAnimation(0,()=>({onStart:(n,t)=>n.current=t,onFrame:()=>!0,current:0,animationIndex:0,reduceMotion:getReduceMotionForAnimation(e)}))):defineAnimation(t[0],()=>{const n=t.map(n=>{const t="function"==typeof n?n():n;return t.finished=!1,t});function o(t){for(;t<n.length-1&&n[t].reduceMotion;)"function"==typeof n[t].callback&&n[t].callback?.(!0),t++;return t}return{isHigherOrder:!0,onFrame:function(t,e){const i=n[t.animationIndex],r=i.onFrame(i,e);if(t.current=i.current,r){if(i.callback&&i.callback(!0),i.finished=!0,t.animationIndex=o(t.animationIndex+1),t.animationIndex<n.length){const o=n[t.animationIndex];return o.onStart(o,i.current,e,i),!1}return!0}return!1},onStart:function(t,e,i,r){n.forEach(n=>{void 0===n.reduceMotion&&(n.reduceMotion=t.reduceMotion)}),t.animationIndex=o(0),void 0===r&&(r=n[n.length-1]);const a=n[t.animationIndex];a.onStart(a,e,i,r)},animationIndex:0,current:n[0].current,callback:t=>{t||n.forEach(n=>{"function"!=typeof n.callback||n.finished||n.callback(t)})},reduceMotion:getReduceMotionForAnimation(e)}})}