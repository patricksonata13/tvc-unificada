"use strict";import{isConfigPropertyAlias,isDefined,isRecord}from"../../utils";class StyleBuilderImpl{processedProps={};constructor(e,s){this.config=e,this.buildMiddleware=s?.buildMiddleware??(e=>e),this.separatelyInterpolatedArrayProperties_=s?.separatelyInterpolatedArrayProperties??[]}isSeparatelyInterpolatedArrayProperty(e){return this.separatelyInterpolatedArrayProperties_.includes(e)}add(e,s){const r=this.config[e];if(r&&isDefined(s))if(!0===r)this.maybeAssignProp(e,s);else if(isConfigPropertyAlias(r))this.add(r.as,s);else{const{process:i}=r,t=i?i(s):s;if(!isDefined(t))return;isRecord(t)?this.maybeAssignProps(t):this.maybeAssignProp(e,t)}}build(){const e=this.buildMiddleware(this.processedProps);return this.cleanup(),0===Object.keys(e).length?null:e}buildFrom(e){return Object.entries(e).forEach(([e,s])=>this.add(e,s)),this.build()}maybeAssignProp(e,s){this.processedProps[e]??=s}maybeAssignProps(e){Object.entries(e).forEach(([e,s])=>this.maybeAssignProp(e,s))}cleanup(){this.processedProps={}}}export default function createStyleBuilder(e,s){return new StyleBuilderImpl(e,s)}