"use strict";const NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...e){return"\\(\\s*("+e.join(")\\s*,?\\s*(")+")\\s*\\)"}function callWithSlashSeparator(...e){return"\\(\\s*("+e.slice(0,e.length-1).join(")\\s*,?\\s*(")+")\\s*/\\s*("+e[e.length-1]+")\\s*\\)"}function commaSeparatedCall(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const MATCHERS={rgb:new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba:new RegExp("rgba("+commaSeparatedCall(NUMBER,NUMBER,NUMBER,NUMBER)+"|"+callWithSlashSeparator(NUMBER,NUMBER,NUMBER,NUMBER)+")"),hsl:new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla:new RegExp("hsla("+commaSeparatedCall(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)+"|"+callWithSlashSeparator(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)+")"),hwb:new RegExp("hwb"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/};function hue2rgb(e,r,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+6*(r-e)*o:o<.5?r:o<2/3?e+(r-e)*(2/3-o)*6:e}function hslToRgb(e,r,o){const a=o<.5?o*(1+r):o+r-o*r,t=2*o-a,n=hue2rgb(t,a,e+1/3),l=hue2rgb(t,a,e),s=hue2rgb(t,a,e-1/3);return Math.round(255*n)<<24|Math.round(255*l)<<16|Math.round(255*s)<<8}function hwbToRgb(e,r,o){if(r+o>=1){const e=Math.round(255*r/(r+o));return e<<24|e<<16|e<<8}const a=hue2rgb(0,1,e+1/3)*(1-r-o)+r,t=hue2rgb(0,1,e)*(1-r-o)+r,n=hue2rgb(0,1,e-1/3)*(1-r-o)+r;return Math.round(255*a)<<24|Math.round(255*t)<<16|Math.round(255*n)<<8}function parse255(e){const r=Number.parseInt(e,10);return r<0?0:r>255?255:r}function parse360(e){return(Number.parseFloat(e)%360+360)%360/360}function parse1(e){const r=Number.parseFloat(e);return r<0?0:r>1?255:Math.round(255*r)}function parsePercentage(e){const r=Number.parseFloat(e);return r<0?0:r>100?1:r/100}export function clampRGBA(e){for(let r=0;r<4;r++)e[r]=Math.max(0,Math.min(e[r],1))}const names={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199};export const ColorProperties=["backgroundColor","borderBottomColor","borderColor","borderLeftColor","borderRightColor","borderTopColor","borderStartColor","borderEndColor","borderBlockColor","borderBlockEndColor","borderBlockStartColor","color","outlineColor","placeholderTextColor","shadowColor","textDecorationColor","tintColor","textShadowColor","overlayColor","fill","floodColor","lightingColor","stopColor","stroke"];export function normalizeColor(e){if("number"==typeof e)return e>>>0===e&&e>=0&&e<=4294967295?e:null;if("string"!=typeof e)return null;let r;return(r=MATCHERS.hex6.exec(e))?Number.parseInt(r[1]+"ff",16)>>>0:void 0!==names[e]?names[e]:(r=MATCHERS.rgb.exec(e))?(parse255(r[1])<<24|parse255(r[2])<<16|parse255(r[3])<<8|255)>>>0:(r=MATCHERS.rgba.exec(e))?void 0!==r[6]?(parse255(r[6])<<24|parse255(r[7])<<16|parse255(r[8])<<8|parse1(r[9]))>>>0:(parse255(r[2])<<24|parse255(r[3])<<16|parse255(r[4])<<8|parse1(r[5]))>>>0:(r=MATCHERS.hex3.exec(e))?Number.parseInt(r[1]+r[1]+r[2]+r[2]+r[3]+r[3]+"ff",16)>>>0:(r=MATCHERS.hex8.exec(e))?Number.parseInt(r[1],16)>>>0:(r=MATCHERS.hex4.exec(e))?Number.parseInt(r[1]+r[1]+r[2]+r[2]+r[3]+r[3]+r[4]+r[4],16)>>>0:(r=MATCHERS.hsl.exec(e))?(255|hslToRgb(parse360(r[1]),parsePercentage(r[2]),parsePercentage(r[3])))>>>0:(r=MATCHERS.hsla.exec(e))?void 0!==r[6]?(hslToRgb(parse360(r[6]),parsePercentage(r[7]),parsePercentage(r[8]))|parse1(r[9]))>>>0:(hslToRgb(parse360(r[2]),parsePercentage(r[3]),parsePercentage(r[4]))|parse1(r[5]))>>>0:(r=MATCHERS.hwb.exec(e))?(255|hwbToRgb(parse360(r[1]),parsePercentage(r[2]),parsePercentage(r[3])))>>>0:null}export const opacity=e=>(e>>24&255)/255;export const red=e=>e>>16&255;export const green=e=>e>>8&255;export const blue=e=>255&e;export const rgbaColor=(e,r,o,a=1)=>`rgba(${e}, ${r}, ${o}, ${a<.001?0:a})`;export function RGBtoHSV(e,r,o){const a=Math.max(e,r,o),t=Math.min(e,r,o),n=a-t,l=0===a?0:n/a,s=a/255;let i=0;switch(a){case t:break;case e:i=r-o+n*(r<o?6:0),i/=6*n;break;case r:i=o-e+2*n,i/=6*n;break;case o:i=e-r+4*n,i/=6*n}return{h:i,s:l,v:s}}function HSVtoRGB(e,r,o){let a,t,n;const l=Math.floor(6*e),s=6*e-l,i=o*(1-r),u=o*(1-s*r),c=o*(1-(1-s)*r);switch(l%6){case 0:[a,t,n]=[o,c,i];break;case 1:[a,t,n]=[u,o,i];break;case 2:[a,t,n]=[i,o,c];break;case 3:[a,t,n]=[i,u,o];break;case 4:[a,t,n]=[c,i,o];break;case 5:[a,t,n]=[o,i,u]}return{r:Math.round(255*a),g:Math.round(255*t),b:Math.round(255*n)}}export const hsvToColor=(e,r,o,a)=>{const{r:t,g:n,b:l}=HSVtoRGB(e,r,o);return rgbaColor(t,n,l,a)};export function processColorInitially(e){if(null==e)return e;let r;if("number"==typeof e)r=e;else{const o=normalizeColor(e);if(null==o)return;if("number"!=typeof o)return null;r=o}return(r<<24|r>>>8)>>>0}export function isColor(e){return"string"==typeof e&&null!=processColorInitially(e)}export function convertToRGBA(e){const r=processColorInitially(e);return[(r<<8>>>24)/255,(r<<16>>>24)/255,(r<<24>>>24)/255,(r>>>24)/255]}export function rgbaArrayToRGBAColor(e){const r=e[3]<.001?0:e[3];return`rgba(${Math.round(255*e[0])}, ${Math.round(255*e[1])}, ${Math.round(255*e[2])}, ${r})`}export function toLinearSpace(e,r=2.2){const o=[];for(let a=0;a<3;++a)o.push(Math.pow(e[a],r));return o.push(e[3]),o}export function toGammaSpace(e,r=2.2){const o=[];for(let a=0;a<3;++a)o.push(Math.pow(e[a],1/r));return o.push(e[3]),o}