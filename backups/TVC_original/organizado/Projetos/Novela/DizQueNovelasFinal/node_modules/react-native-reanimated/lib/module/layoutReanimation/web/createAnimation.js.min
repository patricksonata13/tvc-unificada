"use strict";import{convertAnimationObjectToKeyframes}from"./animationParser";import{AnimationsData,TransitionType}from"./config";import{insertWebAnimation}from"./domUtils";import{CurvedTransition}from"./transition/Curved.web";import{EntryExitTransition}from"./transition/EntryExit.web";import{FadingTransition}from"./transition/Fading.web";import{JumpingTransition}from"./transition/Jumping.web";import{LinearTransition}from"./transition/Linear.web";import{SequencedTransition}from"./transition/Sequenced.web";function addPxToTransform(n){return n.map(n=>{const e={};for(const[t,r]of Object.entries(n))(t.includes("translate")||t.includes("perspective"))&&"number"==typeof r?e[t]=`${r}px`:e[t]=r;return e})}export function createCustomKeyFrameAnimation(n){for(const e of Object.values(n))e.transform&&(e.transform=addPxToTransform(e.transform));const e={name:"",style:n,duration:-1};e.name=generateNextCustomKeyframeName();const t=Object.keys(n);for(let e=1;e<t.length;e++){const r=n[t[e]];r.easing&&(n[t[e-1]].easing=r.easing,delete r.easing)}const r=convertAnimationObjectToKeyframes(e);return insertWebAnimation(e.name,r),e.name}export function createAnimationWithInitialValues(n,e){const t=structuredClone(AnimationsData[n].style),r=t[0],{transform:o,...i}=e,a=addPxToTransform(o);if(o)if(r.transform){const n=new Map;for(const e of r.transform)for(const[t,r]of Object.entries(e))n.set(t,r);for(const e of a)for(const[t,r]of Object.entries(e))n.set(t,r);r.transform=Array.from(n,([n,e])=>({[n]:e}))}else r.transform=a;t[0]={...t[0],...i};const s=generateNextCustomKeyframeName(),m={name:s,style:t,duration:AnimationsData[n].duration},f=convertAnimationObjectToKeyframes(m);return insertWebAnimation(s,f),s}let customKeyframeCounter=0;function generateNextCustomKeyframeName(){return"REA"+customKeyframeCounter++}export function TransitionGenerator(n,e){const t=generateNextCustomKeyframeName();let r,o;switch(n){case TransitionType.LINEAR:o=LinearTransition(t,e);break;case TransitionType.SEQUENCED:o=SequencedTransition(t,e);break;case TransitionType.FADING:o=FadingTransition(t,e);break;case TransitionType.JUMPING:o=JumpingTransition(t,e);break;case TransitionType.CURVED:{r=generateNextCustomKeyframeName();const{firstKeyframeObj:n,secondKeyframeObj:i}=CurvedTransition(t,r,e);o=n;const a=convertAnimationObjectToKeyframes(i);insertWebAnimation(r,a);break}case TransitionType.ENTRY_EXIT:o=EntryExitTransition(t,e)}const i=convertAnimationObjectToKeyframes(o);return insertWebAnimation(t,i),{transitionKeyframeName:t,dummyTransitionKeyframeName:r}}