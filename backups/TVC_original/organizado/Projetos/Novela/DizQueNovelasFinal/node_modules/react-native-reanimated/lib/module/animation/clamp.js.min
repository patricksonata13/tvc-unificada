"use strict";import{logger}from"../common";import{defineAnimation,getReduceMotionForAnimation,recognizePrefixSuffix}from"./util";export const withClamp=function(i,n){return defineAnimation(n,()=>{const r="function"==typeof n?n():n,e=void 0===i.min?void 0:recognizePrefixSuffix(i.min).strippedValue,o=void 0===i.max?void 0:recognizePrefixSuffix(i.max).strippedValue;return{isHigherOrder:!0,onFrame:function(i,n){const t=r.onFrame(r,n);if(void 0===r.current)return logger.warn("Error inside 'withClamp' animation, the inner animation has invalid current value"),!0;{const{prefix:n,strippedValue:t,suffix:a}=recognizePrefixSuffix(r.current);let u;u=void 0!==o&&o<t?o:void 0!==e&&e>t?e:t,i.current="number"==typeof r.current?u:`${void 0===n?"":n}${u}${void 0===a?"":a}`}return t},onStart:function(n,e,o,t){n.current=e,n.previousAnimation=r;const a=t?.previousAnimation;void 0!==i.max&&void 0!==i.min&&i.max<i.min&&logger.warn("Wrong config was provided to withClamp. Min value is bigger than max"),r.onStart(r,a?.current||e,o,a)},current:r.current,callback:i=>{r.callback&&r.callback(i)},previousAnimation:null,reduceMotion:getReduceMotionForAnimation(i.reduceMotion)}})};