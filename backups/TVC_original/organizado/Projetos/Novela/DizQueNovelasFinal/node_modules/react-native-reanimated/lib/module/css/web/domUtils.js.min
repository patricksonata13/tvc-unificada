"use strict";import{IS_WINDOW_AVAILABLE,logger,ReanimatedError}from"../../common";const CSS_ANIMATIONS_STYLE_TAG_ID="ReanimatedCSSStyleTag",cssNameToIndex=new Map,cssNameList=[];export function configureWebCSSAnimations(){if(!IS_WINDOW_AVAILABLE||null!==document.getElementById("ReanimatedCSSStyleTag"))return;const e=document.createElement("style");e.id="ReanimatedCSSStyleTag",e.onload=()=>{e.sheet||logger.error("Failed to create CSS animations stylesheet.")},document.head.append(e)}function getStyleSheet(){return document.getElementById("ReanimatedCSSStyleTag")?.sheet??null}export function insertCSSAnimation(e,t){if(!IS_WINDOW_AVAILABLE||cssNameToIndex.has(e))return;const n=getStyleSheet();if(!n)return void logger.error("Failed to create CSS animations stylesheet.");const s=`@keyframes ${e} { ${t} }`;n.insertRule(s,0),cssNameList.unshift(e),cssNameToIndex.set(e,0);for(let e=1;e<cssNameList.length;++e){const t=cssNameList[e],n=cssNameToIndex.get(t);if(void 0===n)throw new ReanimatedError("Failed to obtain CSS animation index.");cssNameToIndex.set(cssNameList[e],n+1)}}export function removeCSSAnimation(e){if(!IS_WINDOW_AVAILABLE)return;const t=getStyleSheet(),n=cssNameToIndex.get(e);if(void 0===n)throw new ReanimatedError("Failed to obtain CSS animation index.");t?.deleteRule(n),cssNameList.splice(n,1),cssNameToIndex.delete(e);for(let e=n;e<cssNameList.length;++e){const t=cssNameList[e],n=cssNameToIndex.get(t);if(void 0===n)throw new ReanimatedError("Failed to obtain CSS animation index.");cssNameToIndex.set(cssNameList[e],n-1)}}