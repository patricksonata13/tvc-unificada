"use strict";import{LayoutAnimationType}from"../../../commonTypes";import{getEasingByName}from"../Easing.web";function resetStyle(e){e.style.animationName="",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.margin="0px",e.style.width="100%",e.style.height="100%"}function showChildren(e,n,t){for(let a=0;a<e.children.length;++a){const i=e.children[a];t?i.style.display=n.get(i):(n.set(i,i.style.display),i.style.display="none")}}function prepareParent(e,n,t,a){t.easing=getEasingByName(a.easingX);const i=new Map;showChildren(e,i,!1);const r=e.style.backgroundColor;e.style.backgroundColor="transparent";const o=()=>{e.contains(n)&&e.removeChild(n),showChildren(e,i,!0),e.style.backgroundColor=r},s=()=>{o(),e.removeEventListener("animationcancel",s)},l=()=>{o(),e.removeEventListener("animationend",l)};e.addEventListener("animationend",l),e.addEventListener("animationcancel",s),e.appendChild(n)}function prepareDummy(e,n,t,a){const i={animationName:a,animationType:LayoutAnimationType.LAYOUT,duration:n.duration,delay:n.delay,easing:getEasingByName(t.easingY),callback:null,reversed:!1},r=e.cloneNode(!0);return r.reanimatedDummy=!0,resetStyle(r),{dummy:r,dummyAnimationConfig:i}}export function prepareCurvedTransition(e,n,t,a){const{dummy:i,dummyAnimationConfig:r}=prepareDummy(e,n,t,a);return prepareParent(e,i,n,t),{dummy:i,dummyAnimationConfig:r}}export function CurvedTransition(e,n,t){return{firstKeyframeObj:{name:e,style:{0:{transform:[{translateX:`${t.translateX}px`,scale:`${t.scaleX},${t.scaleY}`}]}},duration:300},secondKeyframeObj:{name:n,style:{0:{transform:[{translateY:`${t.translateY}px`,scale:`${t.scaleX},${t.scaleY}`}]}},duration:300}}}