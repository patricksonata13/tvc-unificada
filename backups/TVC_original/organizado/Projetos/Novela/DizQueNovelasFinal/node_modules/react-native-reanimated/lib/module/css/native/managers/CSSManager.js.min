"use strict";import{ReanimatedError}from"../../../common";import{filterCSSAndStyleProperties}from"../../utils";import{setViewStyle}from"../proxy";import{getStyleBuilder,hasStyleBuilder}from"../registry";import CSSAnimationsManager from"./CSSAnimationsManager";import CSSTransitionsManager from"./CSSTransitionsManager";export default class CSSManager{styleBuilder=null;isFirstUpdate=!0;constructor({shadowNodeWrapper:i,viewTag:t,viewName:e="RCTView"}){const s=this.viewTag=t,a=i;this.viewName=e,this.styleBuilder=hasStyleBuilder(e)?getStyleBuilder(e):null,this.cssAnimationsManager=new CSSAnimationsManager(a,e,s),this.cssTransitionsManager=new CSSTransitionsManager(a,s)}update(i){const[t,e,s]=filterCSSAndStyleProperties(i);if(!this.styleBuilder&&(t||e))throw new ReanimatedError(`Tried to apply CSS animations to ${this.viewName} which is not supported`);const a=this.styleBuilder?.buildFrom(s);this.isFirstUpdate&&a&&setViewStyle(this.viewTag,a),this.cssTransitionsManager.update(e),this.cssAnimationsManager.update(t),!this.isFirstUpdate&&a&&setViewStyle(this.viewTag,a),this.isFirstUpdate=!1}unmountCleanup(){this.cssAnimationsManager.unmountCleanup(),this.cssTransitionsManager.unmountCleanup()}}