"use strict";import{useEffect,useRef}from"react";import{initialUpdaterRun}from"../animation";import{SHOULD_BE_USE_WEB}from"../common";import{makeMutable,startMapper,stopMapper}from"../core";export function useDerivedValue(e,t){const r=useRef(null);let o=Object.values(e.__closure??{});SHOULD_BE_USE_WEB&&!o.length&&t?.length&&(o=t),void 0===t?t=[...o,e.__workletHash]:t.push(e.__workletHash),null===r.current&&(r.current=makeMutable(initialUpdaterRun(e)));const u=r.current;return useEffect(()=>{const t=startMapper(()=>{u.value=e()},o,[u]);return()=>{stopMapper(t)}},t),u}