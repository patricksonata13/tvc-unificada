"use strict";import{ReanimatedError}from"../errors";const HORIZONTAL_CONVERSIONS={left:0,center:"50%",right:"100%"},VERTICAL_CONVERSIONS={top:0,center:"50%",bottom:"100%"};function getAllowedValues(e,r){const n=[];r?n.push("numbers"):n.push("numbers with px unit"),n.push("percentages");let t=[];switch(e){case"x":t=Object.keys(HORIZONTAL_CONVERSIONS);break;case"y":t=Object.keys(VERTICAL_CONVERSIONS)}return t.length&&n.push(`keywords (${t.join(", ")})`),n[n.length-1]=`or ${n[n.length-1]}`,n.join(", ")}export const ERROR_MESSAGES={invalidTransformOrigin:e=>`Invalid transformOrigin: ${JSON.stringify(e)}. Expected 1-3 values.`,invalidValue:(e,r,n,t)=>`Invalid value "${e}" for the ${r}-axis in transformOrigin ${JSON.stringify(n)}. Allowed values: ${getAllowedValues(r,t)}.`};function maybeSwapComponents(e){e[0]in VERTICAL_CONVERSIONS&&(void 0===e[1]||e[1]in HORIZONTAL_CONVERSIONS)&&([e[0],e[1]]=[e[1],e[0]])}function parseValue(e,r,n,t,i){if("number"==typeof e)return e;if(i&&e in i)return i[e];if(r&&e.endsWith("%")){const r=parseFloat(e);if(0===r)return 0;if(!isNaN(r))return`${r}%`}const a=n(e);if(null===a)throw new ReanimatedError(t());return a}function parsePx(e){if(e.endsWith("px")||"0"===e){const r=parseFloat(e);if(!isNaN(r))return r}return null}export const processTransformOrigin=e=>{const r=Array.isArray(e),n=r?e:e.split(/\s+/),t=r?()=>null:parsePx;if(n.length<1||n.length>3)throw new ReanimatedError(ERROR_MESSAGES.invalidTransformOrigin(e));return maybeSwapComponents(n),[parseValue(n[0]??"50%",!0,t,()=>ERROR_MESSAGES.invalidValue(n[0],"x",e,r),HORIZONTAL_CONVERSIONS),parseValue(n[1]??"50%",!0,t,()=>ERROR_MESSAGES.invalidValue(n[1],"y",e,r),VERTICAL_CONVERSIONS),parseValue(n[2]??0,!1,t,()=>ERROR_MESSAGES.invalidValue(n[2],"z",e,r))]};