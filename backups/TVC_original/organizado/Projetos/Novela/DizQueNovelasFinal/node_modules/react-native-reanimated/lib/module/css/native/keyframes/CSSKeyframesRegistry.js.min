"use strict";import{registerCSSKeyframes,unregisterCSSKeyframes}from"../proxy";class CSSKeyframesRegistry{cssTextToNameMap_=new Map;nameToKeyframes_=new Map;get(e){const s=this.nameToKeyframes_.get(e);if(s)return s.keyframesRule;const t=this.cssTextToNameMap_.get(e);return t?this.nameToKeyframes_.get(t)?.keyframesRule:void 0}add(e,s,t){const a=this.nameToKeyframes_.get(e.name),r=a?.usedBy[s];r?r.add(t):(a?a.usedBy[s]=new Set([t]):this.nameToKeyframes_.set(e.name,{keyframesRule:e,usedBy:{[s]:new Set([t])}}),this.cssTextToNameMap_.set(e.cssText,e.name),registerCSSKeyframes(e.name,s,e.getNormalizedKeyframesConfig(s)))}remove(e,s,t){const a=this.nameToKeyframes_.get(e);if(!a)return;const r=a.usedBy[s];r.delete(t),0===r.size&&(delete a.usedBy[s],unregisterCSSKeyframes(e,s)),0===Object.keys(a.usedBy).length&&(this.nameToKeyframes_.delete(e),this.cssTextToNameMap_.delete(a.keyframesRule.cssText))}clear(){this.nameToKeyframes_.clear(),this.cssTextToNameMap_.clear()}}const cssKeyframesRegistry=new CSSKeyframesRegistry;export default cssKeyframesRegistry;