"use strict";import{defineAnimation,getReduceMotionForAnimation}from"./util";export const withRepeat=function(t,e=2,r=!1,n,o){return defineAnimation(t,()=>{const a="function"==typeof t?t():t;return{isHigherOrder:!0,onFrame:function(t,n){const o=a.onFrame(a,n);if(t.current=a.current,o){if(t.reps+=1,a.callback&&a.callback(!0,t.current),t.reduceMotion||e>0&&t.reps>=e)return!0;const o=r?a.current:t.startValue;return r&&(a.toValue=t.startValue,t.startValue=o),a.onStart(a,o,n,a.previousAnimation),!1}return!1},onStart:function(t,n,o,c){t.startValue=n,t.reps=0,void 0===a.reduceMotion&&(a.reduceMotion=t.reduceMotion),t.reduceMotion&&r&&(e<=0||e%2==0)?(t.current=t.startValue,t.onFrame=()=>!0):a.onStart(a,n,o,c)},reps:0,current:a.current,callback:t=>{n&&n(t),!t&&a.callback&&a.callback(!1)},startValue:0,reduceMotion:getReduceMotionForAnimation(o)}})};