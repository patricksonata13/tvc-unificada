"use strict";import{useEffect,useRef}from"react";import{isWorkletFunction,makeShareable}from"react-native-worklets";import{IS_JEST,IS_WEB,ReanimatedError}from"../common";import{areDependenciesEqual,buildDependencies}from"./utils";export function useHandler(e,n){const t=useRef(null);if(null===t.current){const e=makeShareable({});t.current={context:e,savedDependencies:[]}}useEffect(()=>()=>{t.current=null},[]);const{context:r,savedDependencies:o}=t.current;for(const n in e)if(!isWorkletFunction(e[n]))throw new ReanimatedError("Passed a function that is not a worklet. Please provide a worklet function.");n=buildDependencies(n,e);const c=!areDependenciesEqual(n,o);t.current.savedDependencies=n;return{context:r,doDependenciesDiffer:c,useWeb:IS_WEB||IS_JEST}}