"use strict";var test=require("tape"),stringify=require("../");test("nested",function(t){t.plan(1);t.equal(stringify({c:8,b:[{z:6,y:5,x:4},7],a:3}),'{"a":3,"b":[{"x":4,"y":5,"z":6},7],"c":8}')}),test("cyclic (default)",function(t){t.plan(1);var e={a:1},a={a:2,one:e};e.two=a;try{stringify(e)}catch(e){t.equal(e.toString(),"TypeError: Converting circular structure to JSON")}}),test("cyclic (specifically allowed)",function(t){t.plan(1);var e={a:1},a={a:2,one:e};e.two=a,t.equal(stringify(e,{cycles:!0}),'{"a":1,"two":{"a":2,"one":"__cycle__"}}')}),test("repeated non-cyclic value",function(t){t.plan(1);var e={x:1},a={a:e,b:e};t.equal(stringify(a),'{"a":{"x":1},"b":{"x":1}}')}),test("acyclic but with reused obj-property pointers",function(t){t.plan(1);var e={a:1},a={b:e,c:e};t.equal(stringify(a),'{"b":{"a":1},"c":{"a":1}}')});