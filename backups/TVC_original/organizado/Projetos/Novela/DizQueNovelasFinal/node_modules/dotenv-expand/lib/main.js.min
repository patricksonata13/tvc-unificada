"use strict";const DOTENV_SUBSTITUTION_REGEX=/(\\)?(\$)(?!\()(\{?)([\w.]+)(?::?-((?:\$\{(?:\$\{(?:\$\{[^}]*\}|[^}])*}|[^}])*}|[^}])+))?(\}?)/gi;function _resolveEscapeSequences(e){return e.replace(/\\\$/g,"$")}function interpolate(e,r,t){return e.replace(DOTENV_SUBSTITUTION_REGEX,(n,s,p,a,o,c,l)=>"\\"===s?n.slice(1):r[o]?r[o]===t[o]?r[o]:interpolate(r[o],r,t):t[o]&&t[o]!==e?interpolate(t[o],r,t):c?c.startsWith("$")?interpolate(c,r,t):c:"")}function expand(e){let r=process.env;e&&null!=e.processEnv&&(r=e.processEnv);for(const t in e.parsed){let n=e.parsed[t];n=Object.prototype.hasOwnProperty.call(r,t)?r[t]===e.parsed[t]?interpolate(n,r,e.parsed):r[t]:interpolate(n,r,e.parsed),e.parsed[t]=_resolveEscapeSequences(n)}for(const t in e.parsed)r[t]=e.parsed[t];return e}module.exports.expand=expand;