"use strict";const escapeStringRegexp=require("escape-string-regexp"),ansiStyles=require("ansi-styles"),stdoutColor=require("supports-color").stdout,template=require("./templates.js"),isSimpleWindowsTerm="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),levelMapping=["ansi","ansi","ansi256","ansi16m"],skipModels=new Set(["gray"]),styles=Object.create(null);function applyOptions(e,t){t=t||{};const s=stdoutColor?stdoutColor.level:0;e.level=void 0===t.level?s:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function Chalk(e){if(!this||!(this instanceof Chalk)||this.template){const t={};return applyOptions(t,e),t.template=function(){const e=[].slice.call(arguments);return chalkTag.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,Chalk.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=Chalk,t.template}applyOptions(this,e)}isSimpleWindowsTerm&&(ansiStyles.blue.open="[94m");for(const e of Object.keys(ansiStyles))ansiStyles[e].closeRe=new RegExp(escapeStringRegexp(ansiStyles[e].close),"g"),styles[e]={get(){const t=ansiStyles[e];return build.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};styles.visible={get(){return build.call(this,this._styles||[],!0,"visible")}},ansiStyles.color.closeRe=new RegExp(escapeStringRegexp(ansiStyles.color.close),"g");for(const e of Object.keys(ansiStyles.color.ansi))skipModels.has(e)||(styles[e]={get(){const t=this.level;return function(){const s={open:ansiStyles.color[levelMapping[t]][e].apply(null,arguments),close:ansiStyles.color.close,closeRe:ansiStyles.color.closeRe};return build.call(this,this._styles?this._styles.concat(s):[s],this._empty,e)}}});ansiStyles.bgColor.closeRe=new RegExp(escapeStringRegexp(ansiStyles.bgColor.close),"g");for(const e of Object.keys(ansiStyles.bgColor.ansi)){if(skipModels.has(e))continue;styles["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const s={open:ansiStyles.bgColor[levelMapping[t]][e].apply(null,arguments),close:ansiStyles.bgColor.close,closeRe:ansiStyles.bgColor.closeRe};return build.call(this,this._styles?this._styles.concat(s):[s],this._empty,e)}}}}const proto=Object.defineProperties(()=>{},styles);function build(e,t,s){const l=function(){return applyStyle.apply(l,arguments)};l._styles=e,l._empty=t;const o=this;return Object.defineProperty(l,"level",{enumerable:!0,get:()=>o.level,set(e){o.level=e}}),Object.defineProperty(l,"enabled",{enumerable:!0,get:()=>o.enabled,set(e){o.enabled=e}}),l.hasGrey=this.hasGrey||"gray"===s||"grey"===s,l.__proto__=proto,l}function applyStyle(){const e=arguments,t=e.length;let s=String(arguments[0]);if(0===t)return"";if(t>1)for(let l=1;l<t;l++)s+=" "+e[l];if(!this.enabled||this.level<=0||!s)return this._empty?"":s;const l=ansiStyles.dim.open;isSimpleWindowsTerm&&this.hasGrey&&(ansiStyles.dim.open="");for(const e of this._styles.slice().reverse())s=e.open+s.replace(e.closeRe,e.open)+e.close,s=s.replace(/\r?\n/g,`${e.close}$&${e.open}`);return ansiStyles.dim.open=l,s}function chalkTag(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const s=[].slice.call(arguments,2),l=[t.raw[0]];for(let e=1;e<t.length;e++)l.push(String(s[e-1]).replace(/[{}\\]/g,"\\$&")),l.push(String(t.raw[e]));return template(e,l.join(""))}Object.defineProperties(Chalk.prototype,styles),module.exports=Chalk(),module.exports.supportsColor=stdoutColor,module.exports.default=module.exports;