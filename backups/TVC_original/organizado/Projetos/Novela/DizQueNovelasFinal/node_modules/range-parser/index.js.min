/*!
 * range-parser
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015-2016 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";function rangeParser(t,n,e){if("string"!=typeof n)throw new TypeError("argument str must be a string");var r=n.indexOf("=");if(-1===r)return-2;var a=n.slice(r+1).split(","),s=[];s.type=n.slice(0,r);for(var i=0;i<a.length;i++){var d=a[i].split("-"),o=parseInt(d[0],10),u=parseInt(d[1],10);isNaN(o)?(o=t-u,u=t-1):isNaN(u)&&(u=t-1),u>t-1&&(u=t-1),isNaN(o)||isNaN(u)||o>u||o<0||s.push({start:o,end:u})}return s.length<1?-1:e&&e.combine?combineRanges(s):s}function combineRanges(t){for(var n=t.map(mapWithIndex).sort(sortByRangeStart),e=0,r=1;r<n.length;r++){var a=n[r],s=n[e];a.start>s.end+1?n[++e]=a:a.end>s.end&&(s.end=a.end,s.index=Math.min(s.index,a.index))}n.length=e+1;var i=n.sort(sortByRangeIndex).map(mapWithoutIndex);return i.type=t.type,i}function mapWithIndex(t,n){return{start:t.start,end:t.end,index:n}}function mapWithoutIndex(t){return{start:t.start,end:t.end}}function sortByRangeIndex(t,n){return t.index-n.index}function sortByRangeStart(t,n){return t.start-n.start}module.exports=rangeParser;