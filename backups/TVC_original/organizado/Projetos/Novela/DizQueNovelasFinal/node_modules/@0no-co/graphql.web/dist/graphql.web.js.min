Object.defineProperty(exports,"__esModule",{value:!0});class GraphQLError extends Error{constructor(e,r,n,i,t,a,o){super(e),this.name="GraphQLError",this.message=e,t&&(this.path=t),r&&(this.nodes=Array.isArray(r)?r:[r]),n&&(this.source=n),i&&(this.positions=i),a&&(this.originalError=a);var l=o;if(!l&&a){var d=a.extensions;d&&"object"==typeof d&&(l=d)}this.extensions=l||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}}var e,r;function error(e){return new GraphQLError(`Syntax Error: Unexpected token at ${r} in ${e}`)}function advance(n){if(n.lastIndex=r,n.test(e))return e.slice(r,r=n.lastIndex)}var i=/ +(?=[^\s])/y;function blockString(e){for(var r=e.split("\n"),n="",t=0,a=0,o=r.length-1,l=0;l<r.length;l++)i.lastIndex=0,i.test(r[l])&&(l&&(!t||i.lastIndex<t)&&(t=i.lastIndex),a=a||l,o=l);for(var d=a;d<=o;d++)d!==a&&(n+="\n"),n+=r[d].slice(t).replace(/\\"""/g,'"""');return n}function ignored(){for(var n=0|e.charCodeAt(r++);9===n||10===n||13===n||32===n||35===n||44===n||65279===n;n=0|e.charCodeAt(r++))if(35===n)for(;(n=0|e.charCodeAt(r++))&&10!==n&&13!==n;);r--}function name(){for(var n=r,i=0|e.charCodeAt(r++);i>=48&&i<=57||i>=65&&i<=90||95===i||i>=97&&i<=122;i=0|e.charCodeAt(r++));if(n===r-1)throw error("Name");var t=e.slice(n,--r);return ignored(),t}function nameNode(){return{kind:"Name",value:name()}}var n=/(?:"""|(?:[\s\S]*?[^\\])""")/y,t=/(?:(?:\.\d+)?[eE][+-]?\d+|\.\d+)/y;function value(i){var a;switch(e.charCodeAt(r)){case 91:r++,ignored();for(var o=[];93!==e.charCodeAt(r);)o.push(value(i));return r++,ignored(),{kind:"ListValue",values:o};case 123:r++,ignored();for(var l=[];125!==e.charCodeAt(r);){var d=nameNode();if(58!==e.charCodeAt(r++))throw error("ObjectField");ignored(),l.push({kind:"ObjectField",name:d,value:value(i)})}return r++,ignored(),{kind:"ObjectValue",fields:l};case 36:if(i)throw error("Variable");return r++,{kind:"Variable",name:nameNode()};case 34:if(34===e.charCodeAt(r+1)&&34===e.charCodeAt(r+2)){if(r+=3,null==(a=advance(n)))throw error("StringValue");return ignored(),{kind:"StringValue",value:blockString(a.slice(0,-3)),block:!0}}var u,s=r;r++;var c=!1;for(u=0|e.charCodeAt(r++);92===u&&(r++,c=!0)||10!==u&&13!==u&&34!==u&&u;u=0|e.charCodeAt(r++));if(34!==u)throw error("StringValue");return a=e.slice(s,r),ignored(),{kind:"StringValue",value:c?JSON.parse(a):a.slice(1,-1),block:!1};case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var v,p=r++;(v=0|e.charCodeAt(r++))>=48&&v<=57;);var m=e.slice(p,--r);if(46===(v=e.charCodeAt(r))||69===v||101===v){if(null==(a=advance(t)))throw error("FloatValue");return ignored(),{kind:"FloatValue",value:m+a}}return ignored(),{kind:"IntValue",value:m};case 110:if(117===e.charCodeAt(r+1)&&108===e.charCodeAt(r+2)&&108===e.charCodeAt(r+3))return r+=4,ignored(),{kind:"NullValue"};break;case 116:if(114===e.charCodeAt(r+1)&&117===e.charCodeAt(r+2)&&101===e.charCodeAt(r+3))return r+=4,ignored(),{kind:"BooleanValue",value:!0};break;case 102:if(97===e.charCodeAt(r+1)&&108===e.charCodeAt(r+2)&&115===e.charCodeAt(r+3)&&101===e.charCodeAt(r+4))return r+=5,ignored(),{kind:"BooleanValue",value:!1}}return{kind:"EnumValue",value:name()}}function arguments_(n){if(40===e.charCodeAt(r)){var i=[];r++,ignored();do{var t=nameNode();if(58!==e.charCodeAt(r++))throw error("Argument");ignored(),i.push({kind:"Argument",name:t,value:value(n)})}while(41!==e.charCodeAt(r));return r++,ignored(),i}}function directives(n){if(64===e.charCodeAt(r)){var i=[];do{r++,i.push({kind:"Directive",name:nameNode(),arguments:arguments_(n)})}while(64===e.charCodeAt(r));return i}}function type(){for(var n=0;91===e.charCodeAt(r);)n++,r++,ignored();var i={kind:"NamedType",name:nameNode()};do{if(33===e.charCodeAt(r)&&(r++,ignored(),i={kind:"NonNullType",type:i}),n){if(93!==e.charCodeAt(r++))throw error("NamedType");ignored(),i={kind:"ListType",type:i}}}while(n--);return i}function selectionSetStart(){if(123!==e.charCodeAt(r++))throw error("SelectionSet");return ignored(),selectionSet()}function selectionSet(){var n=[];do{if(46===e.charCodeAt(r)){if(46!==e.charCodeAt(++r)||46!==e.charCodeAt(++r))throw error("SelectionSet");switch(r++,ignored(),e.charCodeAt(r)){case 64:n.push({kind:"InlineFragment",typeCondition:void 0,directives:directives(!1),selectionSet:selectionSetStart()});break;case 111:110===e.charCodeAt(r+1)?(r+=2,ignored(),n.push({kind:"InlineFragment",typeCondition:{kind:"NamedType",name:nameNode()},directives:directives(!1),selectionSet:selectionSetStart()})):n.push({kind:"FragmentSpread",name:nameNode(),directives:directives(!1)});break;case 123:r++,ignored(),n.push({kind:"InlineFragment",typeCondition:void 0,directives:void 0,selectionSet:selectionSet()});break;default:n.push({kind:"FragmentSpread",name:nameNode(),directives:directives(!1)})}}else{var i=nameNode(),t=void 0;58===e.charCodeAt(r)&&(r++,ignored(),t=i,i=nameNode());var a=arguments_(!1),o=directives(!1),l=void 0;123===e.charCodeAt(r)&&(r++,ignored(),l=selectionSet()),n.push({kind:"Field",alias:t,name:i,arguments:a,directives:o,selectionSet:l})}}while(125!==e.charCodeAt(r));return r++,ignored(),{kind:"SelectionSet",selections:n}}function variableDefinitions(){if(ignored(),40===e.charCodeAt(r)){var n=[];r++,ignored();do{var i=void 0;if(34===e.charCodeAt(r)&&(i=value(!0)),36!==e.charCodeAt(r++))throw error("Variable");var t=nameNode();if(58!==e.charCodeAt(r++))throw error("VariableDefinition");ignored();var a=type(),o=void 0;61===e.charCodeAt(r)&&(r++,ignored(),o=value(!0)),ignored();var l={kind:"VariableDefinition",variable:{kind:"Variable",name:t},type:a,defaultValue:o,directives:directives(!0)};i&&(l.description=i),n.push(l)}while(41!==e.charCodeAt(r));return r++,ignored(),n}}function fragmentDefinition(n){var i=nameNode();if(111!==e.charCodeAt(r++)||110!==e.charCodeAt(r++))throw error("FragmentDefinition");ignored();var t={kind:"FragmentDefinition",name:i,typeCondition:{kind:"NamedType",name:nameNode()},directives:directives(!1),selectionSet:selectionSetStart()};return n&&(t.description=n),t}function definitions(){var n=[];do{var i=void 0;if(34===e.charCodeAt(r)&&(i=value(!0)),123===e.charCodeAt(r)){if(i)throw error("Document");r++,ignored(),n.push({kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:void 0,directives:void 0,selectionSet:selectionSet()})}else{var t=name();switch(t){case"fragment":n.push(fragmentDefinition(i));break;case"query":case"mutation":case"subscription":var a,o=void 0;40!==(a=e.charCodeAt(r))&&64!==a&&123!==a&&(o=nameNode());var l={kind:"OperationDefinition",operation:t,name:o,variableDefinitions:variableDefinitions(),directives:directives(!1),selectionSet:selectionSetStart()};i&&(l.description=i),n.push(l);break;default:throw error("Document")}}}while(r<e.length);return n}var a={};function mapJoin(e,r,n){for(var i="",t=0;t<e.length;t++)t&&(i+=r),i+=n(e[t]);return i}function printString(e){return JSON.stringify(e)}function printBlockString(e){return'"""\n'+e.replace(/"""/g,'\\"""')+'\n"""'}var o="\n",l={OperationDefinition(e){var r="";e.description&&(r+=l.StringValue(e.description)+"\n"),r+=e.operation,e.name&&(r+=" "+e.name.value),e.variableDefinitions&&e.variableDefinitions.length&&(e.name||(r+=" "),r+="("+mapJoin(e.variableDefinitions,", ",l.VariableDefinition)+")"),e.directives&&e.directives.length&&(r+=" "+mapJoin(e.directives," ",l.Directive));var n=l.SelectionSet(e.selectionSet);return"query"!==r?r+" "+n:n},VariableDefinition(e){var r="";return e.description&&(r+=l.StringValue(e.description)+" "),r+=l.Variable(e.variable)+": "+_print(e.type),e.defaultValue&&(r+=" = "+_print(e.defaultValue)),e.directives&&e.directives.length&&(r+=" "+mapJoin(e.directives," ",l.Directive)),r},Field(e){var r=e.alias?e.alias.value+": "+e.name.value:e.name.value;if(e.arguments&&e.arguments.length){var n=mapJoin(e.arguments,", ",l.Argument);r.length+n.length+2>80?r+="("+(o+="  ")+mapJoin(e.arguments,o,l.Argument)+(o=o.slice(0,-2))+")":r+="("+n+")"}return e.directives&&e.directives.length&&(r+=" "+mapJoin(e.directives," ",l.Directive)),e.selectionSet&&e.selectionSet.selections.length&&(r+=" "+l.SelectionSet(e.selectionSet)),r},StringValue:e=>e.block?printBlockString(e.value).replace(/\n/g,o):printString(e.value),BooleanValue:e=>""+e.value,NullValue:e=>"null",IntValue:e=>e.value,FloatValue:e=>e.value,EnumValue:e=>e.value,Name:e=>e.value,Variable:e=>"$"+e.name.value,ListValue:e=>"["+mapJoin(e.values,", ",_print)+"]",ObjectValue:e=>"{"+mapJoin(e.fields,", ",l.ObjectField)+"}",ObjectField:e=>e.name.value+": "+_print(e.value),Document:e=>e.definitions&&e.definitions.length?mapJoin(e.definitions,"\n\n",_print):"",SelectionSet:e=>"{"+(o+="  ")+mapJoin(e.selections,o,_print)+(o=o.slice(0,-2))+"}",Argument:e=>e.name.value+": "+_print(e.value),FragmentSpread(e){var r="..."+e.name.value;return e.directives&&e.directives.length&&(r+=" "+mapJoin(e.directives," ",l.Directive)),r},InlineFragment(e){var r="...";return e.typeCondition&&(r+=" on "+e.typeCondition.name.value),e.directives&&e.directives.length&&(r+=" "+mapJoin(e.directives," ",l.Directive)),r+" "+l.SelectionSet(e.selectionSet)},FragmentDefinition(e){var r="";return e.description&&(r+=l.StringValue(e.description)+"\n"),r+="fragment "+e.name.value,r+=" on "+e.typeCondition.name.value,e.directives&&e.directives.length&&(r+=" "+mapJoin(e.directives," ",l.Directive)),r+" "+l.SelectionSet(e.selectionSet)},Directive(e){var r="@"+e.name.value;return e.arguments&&e.arguments.length&&(r+="("+mapJoin(e.arguments,", ",l.Argument)+")"),r},NamedType:e=>e.name.value,ListType:e=>"["+_print(e.type)+"]",NonNullType:e=>_print(e.type)+"!"},_print=e=>l[e.kind](e);function valueFromASTUntyped(e,r){switch(e.kind){case"NullValue":return null;case"IntValue":return parseInt(e.value,10);case"FloatValue":return parseFloat(e.value);case"StringValue":case"EnumValue":case"BooleanValue":return e.value;case"ListValue":for(var n=[],i=0,t=e.values.length;i<t;i++)n.push(valueFromASTUntyped(e.values[i],r));return n;case"ObjectValue":for(var a=Object.create(null),o=0,l=e.fields.length;o<l;o++){var d=e.fields[o];a[d.name.value]=valueFromASTUntyped(d.value,r)}return a;case"Variable":return r&&r[e.name.value]}}exports.BREAK=a,exports.GraphQLError=GraphQLError,exports.Kind={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"},exports.OperationTypeNode={QUERY:"query",MUTATION:"mutation",SUBSCRIPTION:"subscription"},exports.Source=function(e,r,n){return{body:e,name:r,locationOffset:n||{line:1,column:1}}},exports.isSelectionNode=function(e){return"Field"===e.kind||"FragmentSpread"===e.kind||"InlineFragment"===e.kind},exports.parse=function(n,i){return e=n.body?n.body:n,r=0,ignored(),i&&i.noLocation?{kind:"Document",definitions:definitions()}:{kind:"Document",definitions:definitions(),loc:{start:0,end:e.length,startToken:void 0,endToken:void 0,source:{body:e,name:"graphql.web",locationOffset:{line:1,column:1}}}}},exports.parseType=function(n,i){return e=n.body?n.body:n,r=0,type()},exports.parseValue=function(n,i){return e=n.body?n.body:n,r=0,ignored(),value(!1)},exports.print=function(e){return o="\n",l[e.kind]?l[e.kind](e):""},exports.printBlockString=printBlockString,exports.printString=printString,exports.valueFromASTUntyped=valueFromASTUntyped,exports.valueFromTypeNode=function e(r,n,i){if("Variable"===r.kind)return i?e(i[r.name.value],n,i):void 0;if("NonNullType"===n.kind)return"NullValue"!==r.kind?e(r,n,i):void 0;if("NullValue"===r.kind)return null;if("ListType"===n.kind){if("ListValue"===r.kind){for(var t=[],a=0,o=r.values.length;a<o;a++){var l=e(r.values[a],n.type,i);if(void 0===l)return;t.push(l)}return t}}else if("NamedType"===n.kind)switch(n.name.value){case"Int":case"Float":case"String":case"Bool":return n.name.value+"Value"===r.kind?valueFromASTUntyped(r,i):void 0;default:return valueFromASTUntyped(r,i)}},exports.visit=function(e,r){var n=[],i=[];try{var t=function e(t,o,l){var d,u=!1,s=r[t.kind]&&r[t.kind].enter||r[t.kind]||r.enter,c=s&&s.call(r,t,o,l,i,n);if(!1===c)return t;if(null===c)return null;if(c===a)throw a;c&&"string"==typeof c.kind&&(u=c!==t,t=c),l&&n.push(l);var v={...t};for(var p in t){i.push(p);var m=t[p];if(Array.isArray(m)){for(var h=[],f=0;f<m.length;f++)null!=m[f]&&"string"==typeof m[f].kind&&(n.push(t),i.push(f),d=e(m[f],f,m),i.pop(),n.pop(),null==d?u=!0:(u=u||d!==m[f],h.push(d)));m=h}else null!=m&&"string"==typeof m.kind&&void 0!==(d=e(m,p,t))&&(u=u||m!==d,m=d);i.pop(),u&&(v[p]=m)}l&&n.pop();var g=r[t.kind]&&r[t.kind].leave||r.leave,S=g&&g.call(r,t,o,l,i,n);if(S===a)throw a;return void 0!==S?S:void 0!==c?u?v:c:u?v:t}(e);return void 0!==t&&!1!==t?t:e}catch(r){if(r!==a)throw r;return e}};