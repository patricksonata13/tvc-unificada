"use strict";var rawAsap=require("./raw"),freeTasks=[];function asap(a){var s;(s=freeTasks.length?freeTasks.pop():new RawTask).task=a,s.domain=process.domain,rawAsap(s)}function RawTask(){this.task=null,this.domain=null}module.exports=asap,RawTask.prototype.call=function(){this.domain&&this.domain.enter();var a=!0;try{this.task.call(),a=!1,this.domain&&this.domain.exit()}finally{a&&rawAsap.requestFlush(),this.task=null,this.domain=null,freeTasks.push(this)}};